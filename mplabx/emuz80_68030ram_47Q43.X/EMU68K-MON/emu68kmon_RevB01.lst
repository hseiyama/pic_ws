 AS V1.42 Beta [Bld 246] - Source File emu68kmon_RevB01.asm - Page 1 - 11/1/2023 17:44:20


       1/       0 :                     ;;;
       2/       0 :                     ;;; Universal Monitor 68000
       3/       0 :                     ;;;   Copyright (C) 2021 Haruo Asano
       4/       0 :                     ;;;
       5/       0 :                     
       6/       0 :                     	CPU	68030
       7/       0 :                     	SUPMODE	ON
       8/       0 :                     
       9/       0 :                     ;;;
      10/       0 :                     ;;; Memory
      11/       0 :                     ;;;
      12/       0 :                     
      13/       0 : =$0                 ROM_B:	EQU	$00000000
      14/       0 :                     
      15/       0 : =$1FE00             WORK_B:	EQU	$0001FE00	; Work area 1FE00-1FFFF
      16/       0 : =$1FE00             STACK:	EQU	$0001FE00	; Monitor stack area 1F800-1FDFF
      17/       0 : =$1F800             USTACK:	EQU	$0001F800	; User stack area xxxxx-1F7FF
      18/       0 :                     
      19/       0 : =$C0                RAM_B	EQU	ENTRY		; RAM base address
      20/       0 : =$1D000             MON_SEG	EQU	$0001D000	; Monitor segment addiress
      21/       0 : =$100               SV_ROM	EQU	$00000100	; SAVE addiress for monitor code at POWER ON
      22/       0 :                     
      23/       0 : =$18                BUFLEN:	EQU	24		; Input buffer size
      24/       0 : =$100               VECSIZ:	EQU	256		; Number of vectors to be initialized
      25/       0 :                     
      26/       0 :                     ;;;
      27/       0 :                     ;;; Options
      28/       0 :                     ;;;
      29/       0 :                     
      30/       0 : =$1                 USE_IDENT = 1			; MPU Identification
      31/       0 : =$0                 MPU_SPEC = 0			; MPU Spec. (Effective when USE_IDENT=0) 0:MC68000/8 1:MC68010
      32/       0 :                     
      33/       0 : =$1                 USE_REGCMD = 1			; R(egister) command and related functions
      34/       0 :                     
      35/       0 :                     ;;;
      36/       0 :                     ;;; Motorola MC6850
      37/       0 :                     ;;;
      38/       0 :                     
      39/       0 : =$1                 USE_DEV_6850 = 1
      40/       0 : =>TRUE              	IF USE_DEV_6850
      41/       0 : =$40000001          ACIAC:	EQU	$40000001
      42/       0 : =$40000000          ACIAD:	EQU	$40000000
      43/       0 :                     ;CR_V:	EQU	$15		; x16, 8bit, N, 1
      44/       0 : [40]                	ENDIF
      45/       0 :                     
      46/       0 : =>UNDEFINED         	IFNDEF USE_SFDECODE
      47/       0 : =$1                 USE_SFDECODE = 1
      48/       0 : [46]                	ENDIF
      49/       0 :                     
      50/       0 :                     ;;;
      51/       0 :                     ;;; Common header file
      52/       0 :                     ;;;
      53/       0 :                     
      54/       0 :                     	RELAXED	ON
      55/       0 :                     
      56/       0 :                     ;;; Constants
      57/       0 : =$D                 CR:	EQU	0x0D
      58/       0 : =$A                 LF:	EQU	0x0A
      59/       0 : =$8                 BS:	EQU	0x08
      60/       0 : =$7F                DEL:	EQU	0x7F
 AS V1.42 Beta [Bld 246] - Source File emu68kmon_RevB01.asm - Page 2 - 11/1/2023 17:44:20


      61/       0 :                     
      62/       0 :                     ;;; Functions
      63/       0 :                     low	function	x,(x & 255)
      64/       0 :                     high	function	x,(x >> 8)
      65/       0 :                     
      66/       0 :                     	RELAXED	OFF
      67/       0 :                     
      68/       0 :                     ;;;
      69/       0 :                     ;;; ROM area
      70/       0 :                     ;;;
      71/       0 :                     
      72/       0 :                     	ORG	ROM_B
      73/       0 :                     
      74/       0 :                     INIVEC:
      75/       0 :                     	;; 0-7
      76/       0 : 0001 FE00           	DC.L	STACK		; Reset: Initial SSP
      77/       4 : 0000 00C0           	DC.L	ENTRY		; Reset: Initial PC
      78/       8 :                     
      79/       8 : 0001 D852           	DC.L	BUSERR_H	; Bus Error
      80/       C : 0001 D866           	DC.L	ADDERR_H	; Address Error
      81/      10 :                     
      82/      10 : 0001 D87A           	DC.L	ILLINS_H	; Illegal Instruction
      83/      14 : 0001 D906           	DC.L	ZERDIV_H	; Zero Divide
      84/      18 : 0001 D91C           	DC.L	CHK_H		; CHK Instruction
      85/      1C : 0001 D932           	DC.L	TRAPV_H		; TRAPV Instruction
      86/      20 :                     
      87/      20 :                     	;; 8-15
      88/      20 : 0001 D948           	DC.L	PRIV_H		; Privilege Violation
      89/      24 : 0001 D95E           	DC.L	TRACE_H		; Trace
      90/      28 : 0001 D974           	DC.L	L1010_H		; Line 1010 Emulator
      91/      2C : 0001 D98A           	DC.L	L1111_H		; Line 1111 Emulator
      92/      30 :                     
      93/      30 : 0001 D850           	DC.L	DUMMY_H		; (Unassigned, reserved)
      94/      34 : 0001 D850           	DC.L	DUMMY_H		; (Unassigned, reserved)
      95/      38 : 0001 D9A0           	DC.L	FORMAT_H	; Format Error (MC68010)
      96/      3C : 0001 D850           	DC.L	DUMMY_H		; (Unassigned, reserved)
      97/      40 :                     
      98/      40 :                     	;; 16-23
      99/      40 : 0001 D850           	DC.L	DUMMY_H		; (Unassigned, reserved)
     100/      44 : 0001 D850           	DC.L	DUMMY_H		; (Unassigned, reserved)
     101/      48 : 0001 D850           	DC.L	DUMMY_H		; (Unassigned, reserved)
     102/      4C : 0001 D850           	DC.L	DUMMY_H		; (Unassigned, reserved)
     103/      50 :                     
     104/      50 : 0001 D850           	DC.L	DUMMY_H		; (Unassigned, reserved)
     105/      54 : 0001 D850           	DC.L	DUMMY_H		; (Unassigned, reserved)
     106/      58 : 0001 D850           	DC.L	DUMMY_H		; (Unassigned, reserved)
     107/      5C : 0001 D850           	DC.L	DUMMY_H		; (Unassigned, reserved)
     108/      60 :                     
     109/      60 :                     	;; 24-31
     110/      60 : 0001 D850           	DC.L	DUMMY_H		; Spurious Interrupt
     111/      64 : 0001 D850           	DC.L	DUMMY_H		; Level 1 Interrupt Autovector
     112/      68 : 0001 D850           	DC.L	DUMMY_H		; Level 2 Interrupt Autovector
     113/      6C : 0001 D850           	DC.L	DUMMY_H		; Level 3 Interrupt Autovector
     114/      70 :                     
     115/      70 : 0001 D850           	DC.L	DUMMY_H		; Level 4 Interrupt Autovector
     116/      74 : 0001 D850           	DC.L	DUMMY_H		; Level 5 Interrupt Autovector
     117/      78 : 0001 D850           	DC.L	DUMMY_H		; Level 6 Interrupt Autovector
     118/      7C : 0001 D850           	DC.L	DUMMY_H		; Level 7 Interrupt Autovector
     119/      80 :                     
     120/      80 :                     	;; 32-39
 AS V1.42 Beta [Bld 246] - Source File emu68kmon_RevB01.asm - Page 3 - 11/1/2023 17:44:20


     121/      80 : 0001 D9B6           	DC.L	TRAP0_H		; TRAP Instruction Vector #0
     122/      84 : 0001 D9CC           	DC.L	TRAP1_H		; TRAP Instruction Vector #1
     123/      88 : 0001 D9E2           	DC.L	TRAP2_H		; TRAP Instruction Vector #2
     124/      8C : 0001 D9F8           	DC.L	TRAP3_H		; TRAP Instruction Vector #3
     125/      90 :                     
     126/      90 : 0001 DA0E           	DC.L	TRAP4_H		; TRAP Instruction Vector #4
     127/      94 : 0001 DA24           	DC.L	TRAP5_H		; TRAP Instruction Vector #5
     128/      98 : 0001 DA3A           	DC.L	TRAP6_H		; TRAP Instruction Vector #6
     129/      9C : 0001 DA50           	DC.L	TRAP7_H		; TRAP Instruction Vector #7
     130/      A0 :                     
     131/      A0 :                     	;; 40-47
     132/      A0 : 0001 DA66           	DC.L	TRAP8_H		; TRAP Instruction Vector #8
     133/      A4 : 0001 DA7C           	DC.L	TRAP9_H		; TRAP Instruction Vector #9
     134/      A8 : 0001 DA90           	DC.L	TRAP10_H	; TRAP Instruction Vector #10
     135/      AC : 0001 DAA4           	DC.L	TRAP11_H	; TRAP Instruction Vector #11
     136/      B0 :                     
     137/      B0 : 0001 DAB8           	DC.L	TRAP12_H	; TRAP Instruction Vector #12
     138/      B4 : 0001 DACC           	DC.L	TRAP13_H	; TRAP Instruction Vector #13
     139/      B8 : 0001 DAE0           	DC.L	TRAP14_H	; TRAP Instruction Vector #14
     140/      BC : 0001 DAF4           	DC.L	TRAP15_H	; TRAP Instruction Vector #15
     141/      C0 :                     
     142/      C0 :                     INIVECE:
     143/      C0 :                     
     144/      C0 :                     ENTRY:
     145/      C0 : 21FC 0001 D000      	MOVE.L	#CSTART,$00000004; Set new Initial PC
               C6 : 0004             
     146/      C8 :                     
     147/      C8 : 207C 0000 0100      	MOVE.L	#SV_ROM,A0	; Copy monitor code to monitor segment
     148/      CE : 227C 0001 D000      	MOVE.L	#MON_SEG,A1
     149/      D4 :                     CPY_MON:
     150/      D4 : 22D8                	MOVE.L	(A0)+,(A1)+
     151/      D6 : B1FC 0000 15EA      	CMPA.L	#(ROM_E-CSTART+SV_ROM),A0
     152/      DC : 65F6                	BCS	CPY_MON
     153/      DE : 4EF9 0001 D000      	JMP	CSTART
     154/      E4 :                     
     155/      E4 : FFFF FFFF FFFF      	DC.B	[SV_ROM-*]$FF
               EA : FFFF FFFF FFFF 
               F0 : FFFF FFFF FFFF 
               F6 : FFFF FFFF FFFF 
               FC : FFFF FFFF          
     156/     100 :                     
     157/   1D000 :                     	ORG	MON_SEG
     158/   1D000 :                     
     159/   1D000 :                     CSTART:
     160/   1D000 : 203C 0000 0001      	MOVE.L	#$00000001,D0	; [add] Set instruction cache enable
     161/   1D006 : 4E7B 0002           	MOVEC	D0,CACR		; [add] at cache control register
     162/   1D00A :                     
     163/   1D00A : 6100 14A4           	BSR	INIT
     164/   1D00E :                     
     165/   1D00E : =>FALSE             	IF INIVEC <> $00000000
     166/   1D00E :                     	MOVE.L	#VECSIZ*4,D0
     167/   1D00E : =>TRUE              	ELSE
     168/   1D00E : 203C 0000 00C0      	MOVE.L	#RAM_B,D0
     169/   1D014 : [165]               	ENDIF
     170/   1D014 : 23C0 0001 FE18      	MOVE.L	D0,DSADDR
     171/   1D01A : 23C0 0001 FE22      	MOVE.L	D0,GADDR
     172/   1D020 : 23C0 0001 FE26      	MOVE.L	D0,SADDR
     173/   1D026 : 13FC 0053 0001      	MOVE.B	#'S',HEXMOD
            1D02C : FE2A             
     174/   1D02E : 13FC 0055 0001      	MOVE.B	#'U',GOMOD
 AS V1.42 Beta [Bld 246] - Source File emu68kmon_RevB01.asm - Page 4 - 11/1/2023 17:44:20


            1D034 : FE2D             
     175/   1D036 : 13FC 0000 0001      	MOVE.B	#MPU_SPEC,PSPEC
            1D03C : FE2C             
     176/   1D03E :                     
     177/   1D03E : =>FALSE             	IF INIVEC <> $00000000
     178/   1D03E :                     	;; Initialize vector area
     179/   1D03E :                     	MOVE.L	#INIVEC,A0
     180/   1D03E :                     	MOVE.L	#$00000000,A1
     181/   1D03E :                     	MOVE	#VECSIZ,D1
     182/   1D03E :                     INI0:
     183/   1D03E :                     	MOVE.L	(A0)+,(A1)+
     184/   1D03E :                     	SUBQ	#1,D1
     185/   1D03E :                     	BEQ	INI2
     186/   1D03E :                     	CMP.L	INIVECE,A0
     187/   1D03E :                     	BNE	INI0
     188/   1D03E :                     	MOVE.L	#DUMMY_H,D0
     189/   1D03E :                     INI1:
     190/   1D03E :                     	MOVE.L	D0,(A1)+
     191/   1D03E :                     	SUBQ.L	#1,D1
     192/   1D03E :                     	BNE	INI1
     193/   1D03E :                     INI2:
     194/   1D03E : [177]               	ENDIF
     195/   1D03E :                     
     196/   1D03E : =>TRUE              	IF USE_REGCMD
     197/   1D03E :                     
     198/   1D03E :                     	;; Initialize register save area
     199/   1D03E : 41F9 0001 FE34      	LEA	REG_B,A0
     200/   1D044 : 303C 00A5           	MOVE	#(REG_E-REG_B)-1,D0
     201/   1D048 :                     INIR0:
     202/   1D048 : 4218                	CLR.B	(A0)+
     203/   1D04A : 51C8 FFFC           	DBF	D0,INIR0
     204/   1D04E : 23FC 0001 FE00      	MOVE.L	#STACK,REGSSP
            1D054 : 0001 FE78          
     205/   1D058 : 23F9 0001 FE22      	MOVE.L	GADDR,REGPC
            1D05E : 0001 FE34          
     206/   1D062 : 23FC 0001 F800      	MOVE.L	#USTACK,REGA7
            1D068 : 0001 FE74          
     207/   1D06C :                     
     208/   1D06C : [196]               	ENDIF
     209/   1D06C :                     
     210/   1D06C :                     	;; Opening message
     211/   1D06C : 41F9 0001 DE98      	LEA	OPNMSG,A0
     212/   1D072 : 6100 069E           	BSR	STROUT
     213/   1D076 :                     
     214/   1D076 : =>TRUE              	IF USE_IDENT
     215/   1D076 :                     
     216/   1D076 : 41F9 0001 DEFB      	LEA	IM000,A0
     217/   1D07C :                     	SAVE
     218/   1D07C :                     	CPU	68010
     219/   1D07C : 4E7A 0801           ID0:	MOVEC	VBR,D0		; Try MC68010 instruction
     220/   1D080 : ALL                 	RESTORE
     221/   1D080 :                     
     222/   1D080 :                     	SAVE
     223/   1D080 :                     	CPU	68020
     224/   1D080 : 06F9 0000 0001      ID1:	CALLM	#0,MDESC	; Try MC68020 instruction
            1D086 : DF24             
     225/   1D088 : ALL                 	RESTORE
     226/   1D088 : 41F9 0001 DF0F      	LEA	IM020,A0
     227/   1D08E : 13FC 0002 0001      	MOVE.B	#2,PSPEC
            1D094 : FE2C             
 AS V1.42 Beta [Bld 246] - Source File emu68kmon_RevB01.asm - Page 5 - 11/1/2023 17:44:20


     228/   1D096 : 6012                	BRA	ID9
     229/   1D098 :                     
     230/   1D098 :                     ID2:
     231/   1D098 :                     	SAVE
     232/   1D098 :                     	CPU	68030
     233/   1D098 : 4E7A 0002           ID3:	MOVEC	CACR,D0		; Try MC68020 instruction (since MC68020 already eliminated, this checks MC68030)
     234/   1D09C : ALL                 	RESTORE
     235/   1D09C : 41F9 0001 DF19      	LEA	IM030,A0
     236/   1D0A2 : 13FC 0003 0001      	MOVE.B	#3,PSPEC
            1D0A8 : FE2C             
     237/   1D0AA :                     
     238/   1D0AA :                     ID9:
     239/   1D0AA : 6100 0666           	BSR	STROUT
     240/   1D0AE :                     
     241/   1D0AE : [214]               	ENDIF
     242/   1D0AE :                     
     243/   1D0AE :                     WSTART:
     244/   1D0AE : 41F9 0001 DEB4      	LEA	PROMPT,A0
     245/   1D0B4 : 6100 065C           	BSR	STROUT
     246/   1D0B8 : 6100 06DC           	BSR	GETLIN
     247/   1D0BC : 41F9 0001 FE00      	LEA	INBUF,A0
     248/   1D0C2 : 6100 073C           	BSR	SKIPSP
     249/   1D0C6 : 1010                	MOVE.B	(A0),D0
     250/   1D0C8 : 6100 0740           	BSR	UPPER
     251/   1D0CC : 4A00                	TST.B	D0
     252/   1D0CE : 67DE                	BEQ	WSTART
     253/   1D0D0 :                     
     254/   1D0D0 : B03C 0044           	CMP.B	#'D',D0
     255/   1D0D4 : 6744                	BEQ	DUMP
     256/   1D0D6 : B03C 0047           	CMP.B	#'G',D0
     257/   1D0DA : 6700 0182           	BEQ	GO
     258/   1D0DE : B03C 0053           	CMP.B	#'S',D0
     259/   1D0E2 : 6700 0234           	BEQ	SETM
     260/   1D0E6 :                     
     261/   1D0E6 : B03C 004C           	CMP.B	#'L',D0
     262/   1D0EA : 6700 02BA           	BEQ	LOADH
     263/   1D0EE : B03C 0050           	CMP.B	#'P',D0
     264/   1D0F2 : 6700 03CE           	BEQ	SAVEH
     265/   1D0F6 :                     
     266/   1D0F6 : =>TRUE              	IF USE_REGCMD
     267/   1D0F6 : B03C 0052           	CMP.B	#'R',D0
     268/   1D0FA : 6700 04E2           	BEQ	REG
     269/   1D0FE : [266]               	ENDIF
     270/   1D0FE :                     
     271/   1D0FE : B03C 0042           	CMP.B	#'B',D0
     272/   1D102 : 6700 05E8           	BEQ	BOOT
     273/   1D106 :                     
     274/   1D106 : B03C 003F           	CMP.B	#'?',D0
     275/   1D10A : 6700 05FA           	BEQ	CMDHLP
     276/   1D10E :                     
     277/   1D10E :                     ERR:
     278/   1D10E : 41F9 0001 DED1      	LEA	ERRMSG,A0
     279/   1D114 : 6100 05FC           	BSR	STROUT
     280/   1D118 : 6094                	BRA	WSTART
     281/   1D11A :                     
     282/   1D11A :                     ;;;
     283/   1D11A :                     ;;; Dump memory
     284/   1D11A :                     ;;;
     285/   1D11A :                     
     286/   1D11A :                     DUMP:
 AS V1.42 Beta [Bld 246] - Source File emu68kmon_RevB01.asm - Page 6 - 11/1/2023 17:44:20


     287/   1D11A : 5248                	ADDQ	#1,A0
     288/   1D11C : 6100 06E2           	BSR	SKIPSP
     289/   1D120 : 6100 06FA           	BSR	RDHEX		; 1st arg.
     290/   1D124 : 4A42                	TST	D2
     291/   1D126 : 661C                	BNE	DP0
     292/   1D128 :                     	;; No arg.
     293/   1D128 : 6100 06D6           	BSR	SKIPSP
     294/   1D12C : 4A10                	TST.B	(A0)
     295/   1D12E : 66DE                	BNE	ERR
     296/   1D130 : 2039 0001 FE18      	MOVE.L	DSADDR,D0
     297/   1D136 : D0BC 0000 0080      	ADD.L	#128,D0
     298/   1D13C : 23C0 0001 FE1C      	MOVE.L	D0,DEADDR
     299/   1D142 : 6040                	BRA	DPM
     300/   1D144 :                     
     301/   1D144 :                     	;; 1st arg. found
     302/   1D144 :                     DP0:
     303/   1D144 : 23C1 0001 FE18      	MOVE.L	D1,DSADDR
     304/   1D14A : 6100 06B4           	BSR	SKIPSP
     305/   1D14E : 0C10 002C           	CMP.B	#',',(A0)
     306/   1D152 : 6712                	BEQ	DP1
     307/   1D154 : 4A10                	TST.B	(A0)
     308/   1D156 : 66B6                	BNE	ERR
     309/   1D158 :                     	;; No 2nd arg.
     310/   1D158 : D2BC 0000 0080      	ADD.L	#128,D1
     311/   1D15E : 23C1 0001 FE1C      	MOVE.L	D1,DEADDR
     312/   1D164 : 601E                	BRA	DPM
     313/   1D166 :                     
     314/   1D166 :                     DP1:
     315/   1D166 : 5248                	ADDQ	#1,A0
     316/   1D168 : 6100 0696           	BSR	SKIPSP
     317/   1D16C : 6100 06AE           	BSR	RDHEX
     318/   1D170 : 6100 068E           	BSR	SKIPSP
     319/   1D174 : 4A42                	TST	D2
     320/   1D176 : 6796                	BEQ	ERR
     321/   1D178 : 4A10                	TST.B	(A0)
     322/   1D17A : 6692                	BNE	ERR
     323/   1D17C : 5281                	ADDQ.L	#1,D1
     324/   1D17E : 23C1 0001 FE1C      	MOVE.L	D1,DEADDR
     325/   1D184 :                     
     326/   1D184 :                     	;; DUMP main
     327/   1D184 :                     DPM:
     328/   1D184 : 2039 0001 FE18      	MOVE.L	DSADDR,D0
     329/   1D18A : C03C 00F0           	AND.B	#$F0,D0
     330/   1D18E : 2240                	MOVE.L	D0,A1
     331/   1D190 : 4242                	CLR	D2		; DSTATE
     332/   1D192 :                     DPM0:
     333/   1D192 : 612A                	BSR	DPL
     334/   1D194 : 6100 1330           	BSR	CONST
     335/   1D198 : 4A00                	TST.B	D0
     336/   1D19A : 6614                	BNE	DPM1
     337/   1D19C : B47C 0002           	CMP	#2,D2		; DSTATE
     338/   1D1A0 : 65F0                	BCS	DPM0
     339/   1D1A2 : 23F9 0001 FE1C      	MOVE.L	DEADDR,DSADDR
            1D1A8 : 0001 FE18          
     340/   1D1AC : 6000 FF00           	BRA	WSTART
     341/   1D1B0 :                     DPM1:
     342/   1D1B0 : 23C9 0001 FE18      	MOVE.L	A1,DSADDR
     343/   1D1B6 : 6100 12FA           	BSR	CONIN
     344/   1D1BA : 6000 FEF2           	BRA	WSTART
     345/   1D1BE :                     
 AS V1.42 Beta [Bld 246] - Source File emu68kmon_RevB01.asm - Page 7 - 11/1/2023 17:44:20


     346/   1D1BE :                     	;; DUMP line
     347/   1D1BE :                     DPL:
     348/   1D1BE : 2009                	MOVE.L	A1,D0
     349/   1D1C0 : 6100 055E           	BSR	HEXOUT8
     350/   1D1C4 : 41F9 0001 DED9      	LEA	DSEP0,A0
     351/   1D1CA : 6100 0546           	BSR	STROUT
     352/   1D1CE : 45F9 0001 FE00      	LEA	INBUF,A2
     353/   1D1D4 : 363C 000F           	MOVE	#15,D3
     354/   1D1D8 :                     DPL0:
     355/   1D1D8 : 613C                	BSR	DPB
     356/   1D1DA : 51CB FFFC           	DBF	D3,DPL0
     357/   1D1DE :                     
     358/   1D1DE : 41F9 0001 DEDC      	LEA	DSEP1,A0
     359/   1D1E4 : 6100 052C           	BSR	STROUT
     360/   1D1E8 :                     
     361/   1D1E8 : 45F9 0001 FE00      	LEA	INBUF,A2
     362/   1D1EE : 363C 000F           	MOVE	#15,D3
     363/   1D1F2 :                     DPL1:
     364/   1D1F2 : 101A                	MOVE.B	(A2)+,D0
     365/   1D1F4 : B03C 0020           	CMP.B	#' ',D0
     366/   1D1F8 : 650C                	BCS	DPL2
     367/   1D1FA : B03C 007F           	CMP.B	#$7F,D0
     368/   1D1FE : 6406                	BCC	DPL2
     369/   1D200 : 6100 12D0           	BSR	CONOUT
     370/   1D204 : 6008                	BRA	DPL3
     371/   1D206 :                     DPL2:
     372/   1D206 : 103C 002E           	MOVE.B	#'.',D0
     373/   1D20A : 6100 12C6           	BSR	CONOUT
     374/   1D20E :                     DPL3:
     375/   1D20E : 51CB FFE2           	DBF	D3,DPL1
     376/   1D212 : 6000 0572           	BRA	CRLF
     377/   1D216 :                     
     378/   1D216 :                     	;; DUMP byte
     379/   1D216 :                     DPB:
     380/   1D216 : 103C 0020           	MOVE.B	#' ',D0
     381/   1D21A : 6100 12B6           	BSR	CONOUT
     382/   1D21E : 4A42                	TST	D2		; DSTATE
     383/   1D220 : 661E                	BNE	DPB2
     384/   1D222 :                     	;; Dump state 0
     385/   1D222 : B3F9 0001 FE18      	CMP.L	DSADDR,A1
     386/   1D228 : 6712                	BEQ	DPB1
     387/   1D22A :                     	;; Still 0 or 2
     388/   1D22A :                     DPB0:
     389/   1D22A : 103C 0020           	MOVE.B	#' ',D0
     390/   1D22E : 6100 12A2           	BSR	CONOUT
     391/   1D232 : 6100 129E           	BSR	CONOUT
     392/   1D236 : 14C0                	MOVE.B	D0,(A2)+
     393/   1D238 : 5249                	ADDQ	#1,A1
     394/   1D23A : 4E75                	RTS
     395/   1D23C :                     	;; Found start address
     396/   1D23C :                     DPB1:
     397/   1D23C : 343C 0001           	MOVE	#1,D2		; DSTATE
     398/   1D240 :                     DPB2:
     399/   1D240 : B47C 0001           	CMP	#1,D2		; DSTATE
     400/   1D244 : 66E4                	BNE	DPB0
     401/   1D246 :                     	;; Dump state 1
     402/   1D246 : 1019                	MOVE.B	(A1)+,D0
     403/   1D248 : 14C0                	MOVE.B	D0,(A2)+
     404/   1D24A : 6100 04E4           	BSR	HEXOUT2
     405/   1D24E : B3F9 0001 FE1C      	CMP.L	DEADDR,A1
 AS V1.42 Beta [Bld 246] - Source File emu68kmon_RevB01.asm - Page 8 - 11/1/2023 17:44:20


     406/   1D254 : 6702                	BEQ	DPB3
     407/   1D256 : 4E75                	RTS
     408/   1D258 :                     	;; Found end address
     409/   1D258 :                     DPB3:
     410/   1D258 : 343C 0002           	MOVE	#2,D2		; DSTATE
     411/   1D25C : 4E75                	RTS
     412/   1D25E :                     
     413/   1D25E :                     ;;;
     414/   1D25E :                     ;;; GO address
     415/   1D25E :                     ;;;
     416/   1D25E :                     
     417/   1D25E :                     GO:
     418/   1D25E : 5248                	ADDQ	#1,A0
     419/   1D260 : 1010                	MOVE.B	(A0),D0		; Check command "GS"
     420/   1D262 : 6100 05A6           	BSR	UPPER
     421/   1D266 : B03C 0053           	CMP.B	#'S',D0
     422/   1D26A : 660A                	BNE	GOM0
     423/   1D26C : 13C0 0001 FE2D      	MOVE.B	D0,GOMOD	; Go supervisor mode
     424/   1D272 : 5248                	ADDQ	#1,A0
     425/   1D274 : 6008                	BRA	GOM1
     426/   1D276 :                     GOM0:
     427/   1D276 : 13FC 0055 0001      	MOVE.B	#'U',GOMOD	; Go user mode
            1D27C : FE2D             
     428/   1D27E :                     GOM1:
     429/   1D27E : 6100 0580           	BSR	SKIPSP
     430/   1D282 : 6100 0598           	BSR	RDHEX
     431/   1D286 : 4A10                	TST.B	(A0)
     432/   1D288 : 6600 FE84           	BNE	ERR
     433/   1D28C : 4A42                	TST	D2
     434/   1D28E : 6706                	BEQ	G0
     435/   1D290 :                     
     436/   1D290 : =>TRUE              	IF USE_REGCMD
     437/   1D290 :                     
     438/   1D290 : 23C1 0001 FE34      	MOVE.L	D1,REGPC
     439/   1D296 :                     G0:
     440/   1D296 : 2039 0001 FE78      	MOVE.L	REGSSP,D0
     441/   1D29C : C0BC FFFF FFFE      	AND.L	#$FFFFFFFE,D0
     442/   1D2A2 : 2E40                	MOVE.L	D0,A7
     443/   1D2A4 :                     
     444/   1D2A4 : 4A39 0001 FE2C      	TST.B	PSPEC
     445/   1D2AA : 6732                	BEQ	G1
     446/   1D2AC :                     
     447/   1D2AC :                     	;; MC68010 only
     448/   1D2AC :                     	SAVE
     449/   1D2AC :                     	CPU	68010
     450/   1D2AC :                     
     451/   1D2AC : 0C39 0053 0001      	CMP.B	#'S',GOMOD	; Check supervisor mode
            1D2B2 : FE2D             
     452/   1D2B4 : 6704                	BEQ	G00		; Pass satck operate
     453/   1D2B6 : 3F3C 0000           	MOVE	#$0000,-(A7)	; Format / Dummy (Vector Offset)
     454/   1D2BA :                     G00:
     455/   1D2BA : 2039 0001 FE7E      	MOVE.L	REGVBR,D0
     456/   1D2C0 : C0BC FFFF FFFE      	AND.L	#$FFFFFFFE,D0
     457/   1D2C6 : 4E7B 0801           	MOVEC	D0,VBR		; Be careful!
     458/   1D2CA : 1039 0001 FE82      	MOVE.B	REGSFC,D0
     459/   1D2D0 : 4E7B 0000           	MOVEC	D0,SFC
     460/   1D2D4 : 1039 0001 FE83      	MOVE.B	REGDFC,D0
     461/   1D2DA : 4E7B 0001           	MOVEC	D0,DFC
     462/   1D2DE :                     
     463/   1D2DE : ALL                 	RESTORE
 AS V1.42 Beta [Bld 246] - Source File emu68kmon_RevB01.asm - Page 9 - 11/1/2023 17:44:20


     464/   1D2DE :                     G1:
     465/   1D2DE : 0C39 0053 0001      	CMP.B	#'S',GOMOD	; Check supervisor mode
            1D2E4 : FE2D             
     466/   1D2E6 : 670C                	BEQ	G10		; Pass satck operate
     467/   1D2E8 : 2F39 0001 FE34      	MOVE.L	REGPC,-(A7)
     468/   1D2EE : 3F39 0001 FE7C      	MOVE	REGSR,-(A7)
     469/   1D2F4 :                     G10:
     470/   1D2F4 : 2079 0001 FE74      	MOVE.L	REGA7,A0
     471/   1D2FA : 4E60                	MOVE	A0,USP
     472/   1D2FC :                     
     473/   1D2FC : 4CF9 7FFF 0001      	MOVEM.L	REGD0,D0-D7/A0-A6
            1D302 : FE38             
     474/   1D304 :                     
     475/   1D304 : 0C39 0053 0001      	CMP.B	#'S',GOMOD	; Check supervisor mode
            1D30A : FE2D             
     476/   1D30C : 6702                	BEQ	G11
     477/   1D30E : 4E73                	RTE
     478/   1D310 :                     G11:
     479/   1D310 : 2079 0001 FE34      	MOVE.L	REGPC,A0
     480/   1D316 : 4ED0                	JMP	(A0)		; Jump PC
     481/   1D318 :                     
     482/   1D318 : =>FALSE             	ELSE
     483/   1D318 :                     
     484/   1D318 :                     	MOVE.L	D1,GADDR
     485/   1D318 :                     G0:
     486/   1D318 :                     	MOVE.L	GADDR,A0
     487/   1D318 :                     	JMP	(A0)
     488/   1D318 :                     
     489/   1D318 : [436]               	ENDIF
     490/   1D318 :                     
     491/   1D318 :                     ;;;
     492/   1D318 :                     ;;; SET memory
     493/   1D318 :                     ;;;
     494/   1D318 :                     
     495/   1D318 :                     SETM:
     496/   1D318 : 5248                	ADDQ	#1,A0
     497/   1D31A : 6100 04E4           	BSR	SKIPSP
     498/   1D31E : 6100 04FC           	BSR	RDHEX
     499/   1D322 : 6100 04DC           	BSR	SKIPSP
     500/   1D326 : 4A10                	TST.B	(A0)
     501/   1D328 : 6600 FDE4           	BNE	ERR
     502/   1D32C : 2241                	MOVE.L	D1,A1
     503/   1D32E : 4A42                	TST	D2
     504/   1D330 : 6606                	BNE	SM0
     505/   1D332 : 2279 0001 FE26      	MOVE.L	SADDR,A1
     506/   1D338 :                     SM0:
     507/   1D338 :                     SM1:
     508/   1D338 : 2009                	MOVE.L	A1,D0
     509/   1D33A : 6100 03E4           	BSR	HEXOUT8
     510/   1D33E : 41F9 0001 DEDC      	LEA	DSEP1,A0
     511/   1D344 : 6100 03CC           	BSR	STROUT
     512/   1D348 : 1011                	MOVE.B	(A1),D0
     513/   1D34A : 6100 03E4           	BSR	HEXOUT2
     514/   1D34E : 103C 0020           	MOVE.B	#' ',D0
     515/   1D352 : 6100 117E           	BSR	CONOUT
     516/   1D356 : 6100 043E           	BSR	GETLIN
     517/   1D35A : 41F9 0001 FE00      	LEA	INBUF,A0
     518/   1D360 : 6100 049E           	BSR	SKIPSP
     519/   1D364 : 1010                	MOVE.B	(A0),D0
     520/   1D366 : 660A                	BNE	SM2
 AS V1.42 Beta [Bld 246] - Source File emu68kmon_RevB01.asm - Page 10 - 11/1/2023 17:44:20


     521/   1D368 :                     	;; Empty (Increment address)
     522/   1D368 : 5249                	ADDQ	#1,A1
     523/   1D36A : 23C9 0001 FE26      	MOVE.L	A1,SADDR
     524/   1D370 : 60C6                	BRA	SM1
     525/   1D372 :                     SM2:
     526/   1D372 : B03C 002D           	CMP.B	#'-',D0
     527/   1D376 : 660A                	BNE	SM3
     528/   1D378 :                     	;; '-' (Decrement address)
     529/   1D378 : 5349                	SUBQ	#1,A1
     530/   1D37A : 23C9 0001 FE26      	MOVE.L	A1,SADDR
     531/   1D380 : 60B6                	BRA	SM1
     532/   1D382 :                     SM3:
     533/   1D382 : B03C 002E           	CMP.B	#'.',D0
     534/   1D386 : 660A                	BNE	SM4
     535/   1D388 :                     	;; '.' (Quit)
     536/   1D388 : 23C9 0001 FE26      	MOVE.L	A1,SADDR
     537/   1D38E : 6000 FD1E           	BRA	WSTART
     538/   1D392 :                     SM4:
     539/   1D392 : 6100 0488           	BSR	RDHEX
     540/   1D396 : 4A42                	TST	D2
     541/   1D398 : 6700 FD74           	BEQ	ERR
     542/   1D39C : 12C1                	MOVE.B	D1,(A1)+
     543/   1D39E : 23C9 0001 FE26      	MOVE.L	A1,SADDR
     544/   1D3A4 : 6092                	BRA	SM1
     545/   1D3A6 :                     
     546/   1D3A6 :                     ;;;
     547/   1D3A6 :                     ;;; LOAD HEX file
     548/   1D3A6 :                     ;;;
     549/   1D3A6 :                     
     550/   1D3A6 :                     LOADH:
     551/   1D3A6 : 5248                	ADDQ	#1,A0
     552/   1D3A8 : 6100 0456           	BSR	SKIPSP
     553/   1D3AC : 6100 046E           	BSR	RDHEX
     554/   1D3B0 : 6100 044E           	BSR	SKIPSP
     555/   1D3B4 : 4A10                	TST.B	(A0)
     556/   1D3B6 : 6600 FD56           	BNE	ERR
     557/   1D3BA :                     
     558/   1D3BA : 4A42                	TST	D2
     559/   1D3BC : 6602                	BNE	LH0
     560/   1D3BE :                     
     561/   1D3BE : 4281                	CLR.L	D1		; Offset
     562/   1D3C0 :                     LH0:
     563/   1D3C0 : 6100 10F0           	BSR	CONIN
     564/   1D3C4 : 6100 0444           	BSR	UPPER
     565/   1D3C8 : B03C 0053           	CMP.B	#'S',D0
     566/   1D3CC : 6700 0084           	BEQ	LHS0
     567/   1D3D0 :                     LH1:
     568/   1D3D0 : B03C 003A           	CMP.B	#':',D0
     569/   1D3D4 : 6712                	BEQ	LHI0
     570/   1D3D6 :                     	;; Skip to EOL
     571/   1D3D6 :                     LH2:
     572/   1D3D6 : B03C 000D           	CMP.B	#CR,D0
     573/   1D3DA : 67E4                	BEQ	LH0
     574/   1D3DC : B03C 000A           	CMP.B	#LF,D0
     575/   1D3E0 : 67DE                	BEQ	LH0
     576/   1D3E2 :                     LH3:
     577/   1D3E2 : 6100 10CE           	BSR	CONIN
     578/   1D3E6 : 60EE                	BRA	LH2
     579/   1D3E8 :                     
     580/   1D3E8 :                     	;; Intel HEX
 AS V1.42 Beta [Bld 246] - Source File emu68kmon_RevB01.asm - Page 11 - 11/1/2023 17:44:20


     581/   1D3E8 :                     LHI0:
     582/   1D3E8 : 6100 0366           	BSR	HEXIN
     583/   1D3EC : 4242                	CLR	D2
     584/   1D3EE : 1400                	MOVE.B	D0,D2		; Length
     585/   1D3F0 : 1600                	MOVE.B	D0,D3		; Checksum
     586/   1D3F2 :                     
     587/   1D3F2 : 6100 035C           	BSR	HEXIN
     588/   1D3F6 : 4284                	CLR.L	D4
     589/   1D3F8 : 1800                	MOVE.B	D0,D4		; Address H
     590/   1D3FA : D600                	ADD.B	D0,D3		; Checksum
     591/   1D3FC :                     
     592/   1D3FC : 6100 0352           	BSR	HEXIN
     593/   1D400 : E14C                	LSL	#8,D4
     594/   1D402 : 1800                	MOVE.B	D0,D4		; Address L
     595/   1D404 : D600                	ADD.B	D0,D3		; Checksum
     596/   1D406 :                     
     597/   1D406 :                     	;; Add offset
     598/   1D406 : D881                	ADD.L	D1,D4
     599/   1D408 : 2244                	MOVE.L	D4,A1
     600/   1D40A :                     
     601/   1D40A : 6100 0344           	BSR	HEXIN
     602/   1D40E : 13C0 0001 FE2B      	MOVE.B	D0,RECTYP
     603/   1D414 : D600                	ADD.B	D0,D3		; Checksum
     604/   1D416 :                     
     605/   1D416 : 4A42                	TST	D2
     606/   1D418 : 6716                	BEQ	LHI3
     607/   1D41A : 5342                	SUBQ	#1,D2
     608/   1D41C :                     LHI1:
     609/   1D41C : 6100 0332           	BSR	HEXIN
     610/   1D420 : D600                	ADD.B	D0,D3		; Checksum
     611/   1D422 :                     
     612/   1D422 : 4A39 0001 FE2B      	TST.B	RECTYP
     613/   1D428 : 6602                	BNE	LHI2
     614/   1D42A :                     
     615/   1D42A : 12C0                	MOVE.B	D0,(A1)+
     616/   1D42C :                     LHI2:
     617/   1D42C : 51CA FFEE           	DBF	D2,LHI1
     618/   1D430 :                     LHI3:
     619/   1D430 : 6100 031E           	BSR	HEXIN
     620/   1D434 : D600                	ADD.B	D0,D3		; Checksum
     621/   1D436 : 660C                	BNE	LHIE		; Checksum error
     622/   1D438 : 4A39 0001 FE2B      	TST.B	RECTYP
     623/   1D43E : 67A2                	BEQ	LH3
     624/   1D440 : 6000 FC6C           	BRA	WSTART
     625/   1D444 :                     LHIE:
     626/   1D444 : 41F9 0001 DEB7      	LEA	IHEMSG,A0
     627/   1D44A : 6100 02C6           	BSR	STROUT
     628/   1D44E : 6000 FC5E           	BRA	WSTART
     629/   1D452 :                     
     630/   1D452 :                     	;; Motorola S record
     631/   1D452 :                     LHS0:
     632/   1D452 : 6100 105E           	BSR	CONIN
     633/   1D456 : 13C0 0001 FE2B      	MOVE.B	D0,RECTYP
     634/   1D45C :                     
     635/   1D45C : 6100 02F2           	BSR	HEXIN
     636/   1D460 : 4242                	CLR	D2
     637/   1D462 : 1400                	MOVE.B	D0,D2		; Length+3
     638/   1D464 : 1600                	MOVE.B	D0,D3		; Checksum
     639/   1D466 :                     
     640/   1D466 : 6100 02E8           	BSR	HEXIN
 AS V1.42 Beta [Bld 246] - Source File emu68kmon_RevB01.asm - Page 12 - 11/1/2023 17:44:20


     641/   1D46A : 4284                	CLR.L	D4
     642/   1D46C : 1800                	MOVE.B	D0,D4		; Address H
     643/   1D46E : D600                	ADD.B	D0,D3		; Checksum
     644/   1D470 :                     
     645/   1D470 : 6100 02DE           	BSR	HEXIN
     646/   1D474 : E18C                	LSL.L	#8,D4
     647/   1D476 : 1800                	MOVE.B	D0,D4		; Address L
     648/   1D478 : D600                	ADD.B	D0,D3		; Checksum
     649/   1D47A :                     
     650/   1D47A :                     	;; Add offset
     651/   1D47A : D881                	ADD.L	D1,D4
     652/   1D47C : 2244                	MOVE.L	D4,A1
     653/   1D47E :                     
     654/   1D47E : 5742                	SUBQ	#3,D2
     655/   1D480 : 6718                	BEQ	LHS3
     656/   1D482 : 5342                	SUBQ	#1,D2
     657/   1D484 :                     LHS1:
     658/   1D484 : 6100 02CA           	BSR	HEXIN
     659/   1D488 : D600                	ADD.B	D0,D3		; Checksum
     660/   1D48A :                     
     661/   1D48A : 0C39 0031 0001      	CMP.B	#'1',RECTYP
            1D490 : FE2B             
     662/   1D492 : 6602                	BNE	LHS2
     663/   1D494 :                     
     664/   1D494 : 12C0                	MOVE.B	D0,(A1)+
     665/   1D496 :                     LHS2:
     666/   1D496 : 51CA FFEC           	DBF	D2,LHS1
     667/   1D49A :                     LHS3:
     668/   1D49A : 6100 02B4           	BSR	HEXIN
     669/   1D49E : D600                	ADD.B	D0,D3		; Checksum
     670/   1D4A0 : B63C 00FF           	CMP.B	#$FF,D3
     671/   1D4A4 : 660E                	BNE	LHSE		; Checksum error
     672/   1D4A6 :                     
     673/   1D4A6 : 0C39 0039 0001      	CMP.B	#'9',RECTYP
            1D4AC : FE2B             
     674/   1D4AE : 670E                	BEQ	LHSR
     675/   1D4B0 : 6000 FF30           	BRA	LH3
     676/   1D4B4 :                     LHSE:
     677/   1D4B4 : 41F9 0001 DEC4      	LEA	SHEMSG,A0
     678/   1D4BA : 6100 0256           	BSR	STROUT
     679/   1D4BE :                     LHSR:
     680/   1D4BE : 6000 FBEE           	BRA	WSTART
     681/   1D4C2 :                     
     682/   1D4C2 :                     ;;;
     683/   1D4C2 :                     ;;;  SAVE HEX file
     684/   1D4C2 :                     ;;;
     685/   1D4C2 :                     
     686/   1D4C2 :                     SAVEH:
     687/   1D4C2 : 5248                	ADDQ	#1,A0
     688/   1D4C4 : 1010                	MOVE.B	(A0),D0
     689/   1D4C6 : 6100 0342           	BSR	UPPER
     690/   1D4CA : B03C 0049           	CMP.B	#'I',D0
     691/   1D4CE : 6706                	BEQ	SH0
     692/   1D4D0 : B03C 0053           	CMP.B	#'S',D0
     693/   1D4D4 : 6608                	BNE	SH1
     694/   1D4D6 :                     SH0:
     695/   1D4D6 : 5248                	ADDQ	#1,A0
     696/   1D4D8 : 13C0 0001 FE2A      	MOVE.B	D0,HEXMOD
     697/   1D4DE :                     SH1:
     698/   1D4DE : 6100 0320           	BSR	SKIPSP
 AS V1.42 Beta [Bld 246] - Source File emu68kmon_RevB01.asm - Page 13 - 11/1/2023 17:44:20


     699/   1D4E2 : 6100 0338           	BSR	RDHEX
     700/   1D4E6 : 4A42                	TST	D2
     701/   1D4E8 : 6700 FC24           	BEQ	ERR
     702/   1D4EC : 2241                	MOVE.L	D1,A1		; Start address
     703/   1D4EE : 6100 0310           	BSR	SKIPSP
     704/   1D4F2 : 0C18 002C           	CMP.B	#',',(A0)+
     705/   1D4F6 : 6600 FC16           	BNE	ERR
     706/   1D4FA : 6100 0304           	BSR	SKIPSP
     707/   1D4FE : 6100 031C           	BSR	RDHEX		; D1 = End address
     708/   1D502 : 4A42                	TST	D2
     709/   1D504 : 6700 FC08           	BEQ	ERR
     710/   1D508 : 6100 02F6           	BSR	SKIPSP
     711/   1D50C : 4A10                	TST.B	(A0)
     712/   1D50E : 6600 FBFE           	BNE	ERR
     713/   1D512 :                     
     714/   1D512 :                     SH2:
     715/   1D512 : 9289                	SUB.L	A1,D1
     716/   1D514 : 5241                	ADDQ	#1,D1		; D1 = Length
     717/   1D516 :                     SH3:
     718/   1D516 : 612A                	BSR	SHL
     719/   1D518 : 4A81                	TST.L	D1
     720/   1D51A : 66FA                	BNE	SH3
     721/   1D51C :                     
     722/   1D51C : 0C39 0049 0001      	CMP.B	#'I',HEXMOD
            1D522 : FE2A             
     723/   1D524 : 660E                	BNE	SH4
     724/   1D526 :                     	;; End record for Intel HEX
     725/   1D526 : 41F9 0001 DEE0      	LEA	IHEXER,A0
     726/   1D52C : 6100 01E4           	BSR	STROUT
     727/   1D530 : 6000 FB7C           	BRA	WSTART
     728/   1D534 :                     	;; End record for Motorola S record
     729/   1D534 :                     SH4:
     730/   1D534 : 41F9 0001 DEEE      	LEA	SRECER,A0
     731/   1D53A : 6100 01D6           	BSR	STROUT
     732/   1D53E : 6000 FB6E           	BRA	WSTART
     733/   1D542 :                     
     734/   1D542 :                     SHL:
     735/   1D542 : 7410                	MOVEQ.L	#16,D2
     736/   1D544 : B282                	CMP.L	D2,D1
     737/   1D546 : 6402                	BCC	SHL0
     738/   1D548 : 2401                	MOVE.L	D1,D2
     739/   1D54A :                     SHL0:
     740/   1D54A : 9282                	SUB.L	D2,D1		; D1 = remain
     741/   1D54C :                     
     742/   1D54C : 0C39 0049 0001      	CMP.B	#'I',HEXMOD
            1D552 : FE2A             
     743/   1D554 : 6642                	BNE	SHLS
     744/   1D556 :                     
     745/   1D556 :                     	;; Intel HEX
     746/   1D556 : 103C 003A           	MOVE.B	#':',D0
     747/   1D55A : 6100 0F76           	BSR	CONOUT
     748/   1D55E :                     
     749/   1D55E : 1002                	MOVE.B	D2,D0
     750/   1D560 : 1602                	MOVE.B	D2,D3		; Checksum
     751/   1D562 : 6100 01CC           	BSR	HEXOUT2		; Length
     752/   1D566 :                     
     753/   1D566 : 2009                	MOVE.L	A1,D0
     754/   1D568 : E048                	LSR	#8,D0
     755/   1D56A : D600                	ADD.B	D0,D3		; Checksum
     756/   1D56C : 6100 01C2           	BSR	HEXOUT2		; Address H
 AS V1.42 Beta [Bld 246] - Source File emu68kmon_RevB01.asm - Page 14 - 11/1/2023 17:44:20


     757/   1D570 :                     
     758/   1D570 : 2009                	MOVE.L	A1,D0
     759/   1D572 : D600                	ADD.B	D0,D3		; Checksum
     760/   1D574 : 6100 01BA           	BSR	HEXOUT2		; Address L
     761/   1D578 :                     
     762/   1D578 : 4200                	CLR.B	D0
     763/   1D57A : 6100 01B4           	BSR	HEXOUT2		; Record type
     764/   1D57E :                     
     765/   1D57E : 5342                	SUBQ	#1,D2
     766/   1D580 :                     SHLI0:
     767/   1D580 : 1019                	MOVE.B	(A1)+,D0
     768/   1D582 : D600                	ADD.B	D0,D3		; Checksum
     769/   1D584 : 6100 01AA           	BSR	HEXOUT2
     770/   1D588 :                     
     771/   1D588 : 51CA FFF6           	DBF	D2,SHLI0
     772/   1D58C :                     
     773/   1D58C : 1003                	MOVE.B	D3,D0
     774/   1D58E : 4400                	NEG.B	D0
     775/   1D590 : 6100 019E           	BSR	HEXOUT2		; Checksum
     776/   1D594 : 6000 01F0           	BRA	CRLF
     777/   1D598 :                     
     778/   1D598 :                     	;; Motorola S record
     779/   1D598 :                     SHLS:
     780/   1D598 : 103C 0053           	MOVE.B	#'S',D0
     781/   1D59C : 6100 0F34           	BSR	CONOUT
     782/   1D5A0 : 103C 0031           	MOVE.B	#'1',D0
     783/   1D5A4 : 6100 0F2C           	BSR	CONOUT
     784/   1D5A8 :                     
     785/   1D5A8 : 1002                	MOVE.B	D2,D0
     786/   1D5AA : 5600                	ADDQ.B	#2+1,D0		; DataLength + 2(Addr) + 1(Sum)
     787/   1D5AC : 1600                	MOVE.B	D0,D3		; Checksum
     788/   1D5AE : 6100 0180           	BSR	HEXOUT2		; Length
     789/   1D5B2 :                     
     790/   1D5B2 : 2009                	MOVE.L	A1,D0
     791/   1D5B4 : E088                	LSR.L	#8,D0
     792/   1D5B6 : D600                	ADD.B	D0,D3		; Checksum
     793/   1D5B8 : 6100 0176           	BSR	HEXOUT2		; Address H
     794/   1D5BC :                     
     795/   1D5BC : 2009                	MOVE.L	A1,D0
     796/   1D5BE : D600                	ADD.B	D0,D3		; Checksum
     797/   1D5C0 : 6100 016E           	BSR	HEXOUT2		; Address L
     798/   1D5C4 :                     
     799/   1D5C4 : 5342                	SUBQ	#1,D2
     800/   1D5C6 :                     SHLS0:
     801/   1D5C6 : 1019                	MOVE.B	(A1)+,D0
     802/   1D5C8 : D600                	ADD.B	D0,D3		; Checksum
     803/   1D5CA : 6100 0164           	BSR	HEXOUT2		; Data
     804/   1D5CE :                     
     805/   1D5CE : 51CA FFF6           	DBF	D2,SHLS0
     806/   1D5D2 :                     
     807/   1D5D2 : 1003                	MOVE.B	D3,D0
     808/   1D5D4 : 4600                	NOT.B	D0
     809/   1D5D6 : 6100 0158           	BSR	HEXOUT2
     810/   1D5DA : 6000 01AA           	BRA	CRLF
     811/   1D5DE :                     
     812/   1D5DE :                     ;;;
     813/   1D5DE :                     ;;; Register
     814/   1D5DE :                     ;;;
     815/   1D5DE : =>TRUE              	IF USE_REGCMD
     816/   1D5DE :                     
 AS V1.42 Beta [Bld 246] - Source File emu68kmon_RevB01.asm - Page 15 - 11/1/2023 17:44:20


     817/   1D5DE :                     REG:
     818/   1D5DE : 5248                	ADDQ	#1,A0
     819/   1D5E0 : 6100 021E           	BSR	SKIPSP
     820/   1D5E4 : 1010                	MOVE.B	(A0),D0
     821/   1D5E6 : 6100 0222           	BSR	UPPER
     822/   1D5EA : 4A00                	TST.B	D0
     823/   1D5EC : 6608                	BNE	RG0
     824/   1D5EE : 6100 00BC           	BSR	RDUMP
     825/   1D5F2 : 6000 FABA           	BRA	WSTART
     826/   1D5F6 :                     RG0:
     827/   1D5F6 : 43F9 0001 E180      	LEA	RNTAB,A1
     828/   1D5FC :                     RG1:
     829/   1D5FC : B011                	CMP.B	(A1),D0
     830/   1D5FE : 6710                	BEQ	RG2		; Character match
     831/   1D600 : 4A29 0001           	TST.B	1(A1)
     832/   1D604 : 6700 00A2           	BEQ	RGE
     833/   1D608 : D3FC 0000 000A      	ADD.L	#10,A1
     834/   1D60E : 60EC                	BRA	RG1
     835/   1D610 :                     RG2:
     836/   1D610 : 0C29 000F 0001      	CMP.B	#$0F,1(A1)
     837/   1D616 : 660E                	BNE	RG3
     838/   1D618 :                     	;; Next table
     839/   1D618 : 2269 0002           	MOVE.L	2(A1),A1
     840/   1D61C : 5248                	ADDQ	#1,A0
     841/   1D61E : 1010                	MOVE.B	(A0),D0
     842/   1D620 : 6100 01E8           	BSR	UPPER
     843/   1D624 : 60D6                	BRA	RG1
     844/   1D626 :                     RG3:
     845/   1D626 : 1629 0001           	MOVE.B	1(A1),D3
     846/   1D62A : 677C                	BEQ	RGE		; Found end mark
     847/   1D62C : 6A08                	BPL	RG30
     848/   1D62E :                     	;; Check MC68010
     849/   1D62E : 4A39 0001 FE2C      	TST.B	PSPEC
     850/   1D634 : 6772                	BEQ	RGE
     851/   1D636 :                     RG30:
     852/   1D636 : 2069 0006           	MOVE.L	6(A1),A0
     853/   1D63A : 6100 00D6           	BSR	STROUT
     854/   1D63E : 103C 003D           	MOVE.B	#'=',D0
     855/   1D642 : 6100 0E8E           	BSR	CONOUT
     856/   1D646 : 2469 0002           	MOVE.L	2(A1),A2
     857/   1D64A : C63C 0007           	AND.B	#$07,D3
     858/   1D64E : B63C 0001           	CMP.B	#1,D3
     859/   1D652 : 6608                	BNE	RG4
     860/   1D654 :                     	;; 8 bit register
     861/   1D654 : 1012                	MOVE.B	(A2),D0
     862/   1D656 : 6100 00D8           	BSR	HEXOUT2
     863/   1D65A : 6014                	BRA	RG6
     864/   1D65C :                     RG4:
     865/   1D65C : B63C 0002           	CMP.B	#2,D3
     866/   1D660 : 6608                	BNE	RG5
     867/   1D662 :                     	;; 16 bit register
     868/   1D662 : 3012                	MOVE	(A2),D0
     869/   1D664 : 6100 00C2           	BSR	HEXOUT4
     870/   1D668 : 6006                	BRA	RG6
     871/   1D66A :                     RG5:
     872/   1D66A :                     	;; 32 bit register
     873/   1D66A : 2012                	MOVE.L	(A2),D0
     874/   1D66C : 6100 00B2           	BSR	HEXOUT8
     875/   1D670 :                     RG6:
     876/   1D670 : 103C 0020           	MOVE.B	#' ',D0
 AS V1.42 Beta [Bld 246] - Source File emu68kmon_RevB01.asm - Page 16 - 11/1/2023 17:44:20


     877/   1D674 : 6100 0E5C           	BSR	CONOUT
     878/   1D678 : 6100 011C           	BSR	GETLIN
     879/   1D67C : 41F9 0001 FE00      	LEA	INBUF,A0
     880/   1D682 : 6100 017C           	BSR	SKIPSP
     881/   1D686 : 6100 0194           	BSR	RDHEX
     882/   1D68A : 4A42                	TST	D2
     883/   1D68C : 6716                	BEQ	RGR
     884/   1D68E : B63C 0001           	CMP.B	#1,D3
     885/   1D692 : 6604                	BNE	RG7
     886/   1D694 :                     	;; 8 bit register
     887/   1D694 : 1481                	MOVE.B	D1,(A2)
     888/   1D696 : 600C                	BRA	RG9
     889/   1D698 :                     RG7:
     890/   1D698 : B63C 0002           	CMP.B	#2,D3
     891/   1D69C : 6604                	BNE	RG8
     892/   1D69E :                     	;; 16 bit register
     893/   1D69E : 3481                	MOVE	D1,(A2)
     894/   1D6A0 : 6002                	BRA	RG9
     895/   1D6A2 :                     RG8:
     896/   1D6A2 :                     	;; 32 bit register
     897/   1D6A2 : 2481                	MOVE.L	D1,(A2)
     898/   1D6A4 :                     RG9:
     899/   1D6A4 :                     RGR:
     900/   1D6A4 : 6000 FA08           	BRA	WSTART
     901/   1D6A8 :                     RGE:
     902/   1D6A8 : 6000 FA64           	BRA	ERR
     903/   1D6AC :                     
     904/   1D6AC :                     RDUMP:
     905/   1D6AC : 43F9 0001 E068      	LEA	RDTAB,A1
     906/   1D6B2 :                     RD0:
     907/   1D6B2 : 3219                	MOVE	(A1)+,D1	; Flag
     908/   1D6B4 : 6700 00D0           	BEQ	CRLF		; Found END mark => CR,LF and return
     909/   1D6B8 : 6A0A                	BPL	RD00
     910/   1D6BA : 4A39 0001 FE2C      	TST.B	PSPEC
     911/   1D6C0 : 6700 00C4           	BEQ	CRLF
     912/   1D6C4 :                     RD00:
     913/   1D6C4 : 2059                	MOVE.L	(A1)+,A0	; String address
     914/   1D6C6 : 614A                	BSR	STROUT
     915/   1D6C8 : 2059                	MOVE.L	(A1)+,A0	; Register save area
     916/   1D6CA : C27C 0003           	AND	#$0003,D1
     917/   1D6CE : B27C 0001           	CMP	#1,D1
     918/   1D6D2 : 6606                	BNE	RD1
     919/   1D6D4 :                     	;; BYTE size
     920/   1D6D4 : 1010                	MOVE.B	(A0),D0
     921/   1D6D6 : 6158                	BSR	HEXOUT2
     922/   1D6D8 : 60D8                	BRA	RD0
     923/   1D6DA :                     RD1:
     924/   1D6DA : B27C 0002           	CMP	#2,D1
     925/   1D6DE : 6606                	BNE	RD2
     926/   1D6E0 :                     	;; WORD size
     927/   1D6E0 : 3010                	MOVE	(A0),D0
     928/   1D6E2 : 6144                	BSR	HEXOUT4
     929/   1D6E4 : 60CC                	BRA	RD0
     930/   1D6E6 :                     RD2:
     931/   1D6E6 :                     	;; LONG size
     932/   1D6E6 : 2010                	MOVE.L	(A0),D0
     933/   1D6E8 : 6136                	BSR	HEXOUT8
     934/   1D6EA : 60C6                	BRA	RD0
     935/   1D6EC :                     
     936/   1D6EC : [815]               	ENDIF
 AS V1.42 Beta [Bld 246] - Source File emu68kmon_RevB01.asm - Page 17 - 11/1/2023 17:44:20


     937/   1D6EC :                     
     938/   1D6EC :                     ;;;
     939/   1D6EC :                     ;;; Boot
     940/   1D6EC :                     ;;;
     941/   1D6EC :                     
     942/   1D6EC :                     BOOT:
     943/   1D6EC : 5248                	ADDQ	#1,A0
     944/   1D6EE : 1010                	MOVE.B	(A0),D0
     945/   1D6F0 : 6100 0118           	BSR	UPPER
     946/   1D6F4 : B03C 0054           	CMP.B	#'T',D0
     947/   1D6F8 : 6600 FA14           	BNE	ERR
     948/   1D6FC : 2E78 0000           	MOVE.L	$00000000,A7	; Reset: Initial SSP
     949/   1D700 : 2078 0004           	MOVE.L	$00000004,A0	; Reset: Initial PC
     950/   1D704 : 4ED0                	JMP	(A0)
     951/   1D706 :                     
     952/   1D706 :                     ;;;
     953/   1D706 :                     ;;; Command help
     954/   1D706 :                     ;;;
     955/   1D706 :                     
     956/   1D706 :                     CMDHLP:
     957/   1D706 : 41F9 0001 DDB2      	LEA	HLPMSG,A0
     958/   1D70C : 6104                	BSR	STROUT
     959/   1D70E : 6000 F99E           	BRA	WSTART
     960/   1D712 :                     
     961/   1D712 :                     ;;;
     962/   1D712 :                     ;;; Other support routines
     963/   1D712 :                     ;;;
     964/   1D712 :                     
     965/   1D712 :                     STROUT:
     966/   1D712 : 1018                	MOVE.B	(A0)+,D0
     967/   1D714 : 4A00                	TST.B	D0
     968/   1D716 : 6706                	BEQ	STROE
     969/   1D718 : 6100 0DB8           	BSR	CONOUT
     970/   1D71C : 60F4                	BRA	STROUT
     971/   1D71E :                     STROE:
     972/   1D71E : 4E75                	RTS
     973/   1D720 :                     
     974/   1D720 :                     HEXOUT8:
     975/   1D720 : 2F00                	MOVE.L	D0,-(A7)
     976/   1D722 : 4840                	SWAP	D0
     977/   1D724 : 6102                	BSR	HEXOUT4
     978/   1D726 : 201F                	MOVE.L	(A7)+,D0
     979/   1D728 :                     HEXOUT4:
     980/   1D728 : 2F00                	MOVE.L	D0,-(A7)
     981/   1D72A : E058                	ROR	#8,D0
     982/   1D72C : 6102                	BSR	HEXOUT2
     983/   1D72E : 201F                	MOVE.L	(A7)+,D0
     984/   1D730 :                     HEXOUT2:
     985/   1D730 : 2F00                	MOVE.L	D0,-(A7)
     986/   1D732 : E818                	ROR.B	#4,D0
     987/   1D734 : 6102                	BSR	HEXOUT1
     988/   1D736 : 201F                	MOVE.L	(A7)+,D0
     989/   1D738 :                     HEXOUT1:
     990/   1D738 : C03C 000F           	AND.B	#$0F,D0
     991/   1D73C : D03C 0030           	ADD.B	#'0',D0
     992/   1D740 : B03C 003A           	CMP.B	#'9'+1,D0
     993/   1D744 : 6500 0D8C           	BCS	CONOUT
     994/   1D748 : D07C 0007           	ADD	#'A'-'9'-1,D0
     995/   1D74C : 6000 0D84           	BRA	CONOUT
     996/   1D750 :                     
 AS V1.42 Beta [Bld 246] - Source File emu68kmon_RevB01.asm - Page 18 - 11/1/2023 17:44:20


     997/   1D750 :                     HEXIN:
     998/   1D750 : 4200                	CLR.B	D0
     999/   1D752 : 6102                	BSR	HI0
    1000/   1D754 : E908                	LSL.B	#4,D0
    1001/   1D756 :                     HI0:
    1002/   1D756 : 3F00                	MOVE	D0,-(A7)
    1003/   1D758 : 6100 0D58           	BSR	CONIN
    1004/   1D75C : 6100 00AC           	BSR	UPPER
    1005/   1D760 : B03C 0030           	CMP.B	#'0',D0
    1006/   1D764 : 651C                	BCS	HIR
    1007/   1D766 : B03C 003A           	CMP.B	#'9'+1,D0
    1008/   1D76A : 6510                	BCS	HI1
    1009/   1D76C : B03C 0041           	CMP.B	#'A',D0
    1010/   1D770 : 6510                	BCS	HIR
    1011/   1D772 : B03C 0047           	CMP.B	#'F'+1,D0
    1012/   1D776 : 640A                	BCC	HIR
    1013/   1D778 : 903C 0007           	SUB.B	#'A'-'9'-1,D0
    1014/   1D77C :                     HI1:
    1015/   1D77C : 903C 0030           	SUB.B	#'0',D0
    1016/   1D780 : 8057                	OR	(A7),D0
    1017/   1D782 :                     HIR:
    1018/   1D782 : 544F                	ADDQ	#2,A7
    1019/   1D784 : 4E75                	RTS
    1020/   1D786 :                     
    1021/   1D786 :                     CRLF:
    1022/   1D786 : 103C 000D           	MOVE.B	#CR,D0
    1023/   1D78A : 6100 0D46           	BSR	CONOUT
    1024/   1D78E : 103C 000A           	MOVE.B	#LF,D0
    1025/   1D792 : 6000 0D3E           	BRA	CONOUT
    1026/   1D796 :                     
    1027/   1D796 :                     GETLIN:
    1028/   1D796 : 41F9 0001 FE00      	LEA	INBUF,A0
    1029/   1D79C : 4201                	CLR.B	D1
    1030/   1D79E :                     GL0:
    1031/   1D79E : 6100 0D12           	BSR	CONIN
    1032/   1D7A2 : B03C 000D           	CMP.B	#CR,D0
    1033/   1D7A6 : 6750                	BEQ	GLE
    1034/   1D7A8 : B03C 000A           	CMP.B	#LF,D0
    1035/   1D7AC : 674A                	BEQ	GLE
    1036/   1D7AE : B03C 0008           	CMP.B	#BS,D0
    1037/   1D7B2 : 6722                	BEQ	GLB
    1038/   1D7B4 : B03C 007F           	CMP.B	#DEL,D0
    1039/   1D7B8 : 671C                	BEQ	GLB
    1040/   1D7BA : B03C 0020           	CMP.B	#' ',D0
    1041/   1D7BE : 65DE                	BCS	GL0
    1042/   1D7C0 : B03C 0080           	CMP.B	#$80,D0
    1043/   1D7C4 : 64D8                	BCC	GL0
    1044/   1D7C6 : B23C 0017           	CMP.B	#BUFLEN-1,D1
    1045/   1D7CA : 64D2                	BCC	GL0		; Too long
    1046/   1D7CC : 5201                	ADDQ.B	#1,D1
    1047/   1D7CE : 10C0                	MOVE.B	D0,(A0)+
    1048/   1D7D0 : 6100 0D00           	BSR	CONOUT
    1049/   1D7D4 : 60C8                	BRA	GL0
    1050/   1D7D6 :                     GLB:
    1051/   1D7D6 : 4A01                	TST.B	D1
    1052/   1D7D8 : 67C4                	BEQ	GL0
    1053/   1D7DA : 5388                	SUBQ.L	#1,A0
    1054/   1D7DC : 5301                	SUBQ.B	#1,D1
    1055/   1D7DE : 103C 0008           	MOVE.B	#BS,D0
    1056/   1D7E2 : 6100 0CEE           	BSR	CONOUT
 AS V1.42 Beta [Bld 246] - Source File emu68kmon_RevB01.asm - Page 19 - 11/1/2023 17:44:20


    1057/   1D7E6 : 103C 0020           	MOVE.B	#' ',D0
    1058/   1D7EA : 6100 0CE6           	BSR	CONOUT
    1059/   1D7EE : 103C 0008           	MOVE.B	#BS,D0
    1060/   1D7F2 : 6100 0CDE           	BSR	CONOUT
    1061/   1D7F6 : 60A6                	BRA	GL0
    1062/   1D7F8 :                     GLE:
    1063/   1D7F8 : 618C                	BSR	CRLF
    1064/   1D7FA : 10BC 0000           	MOVE.B	#$00,(A0)
    1065/   1D7FE : 4E75                	RTS
    1066/   1D800 :                     
    1067/   1D800 :                     SKIPSP:
    1068/   1D800 : 0C18 0020           	CMP.B	#' ',(A0)+
    1069/   1D804 : 67FA                	BEQ	SKIPSP
    1070/   1D806 : 5388                	SUBQ.L	#1,A0
    1071/   1D808 : 4E75                	RTS
    1072/   1D80A :                     
    1073/   1D80A :                     UPPER:
    1074/   1D80A : B03C 0061           	CMP.B	#'a',D0
    1075/   1D80E : 650A                	BCS	UPR
    1076/   1D810 : B03C 007B           	CMP.B	#'z'+1,D0
    1077/   1D814 : 6404                	BCC	UPR
    1078/   1D816 : D03C 00E0           	ADD.B	#'A'-'a',D0
    1079/   1D81A :                     UPR:
    1080/   1D81A : 4E75                	RTS
    1081/   1D81C :                     
    1082/   1D81C :                     RDHEX:
    1083/   1D81C : 4242                	CLR	D2		; Count
    1084/   1D81E : 4281                	CLR.L	D1		; Value
    1085/   1D820 :                     RH0:
    1086/   1D820 : 1010                	MOVE.B	(A0),D0
    1087/   1D822 : 61E6                	BSR	UPPER
    1088/   1D824 : B03C 0030           	CMP.B	#'0',D0
    1089/   1D828 : 6524                	BCS	RHE
    1090/   1D82A : B03C 003A           	CMP.B	#'9'+1,D0
    1091/   1D82E : 6510                	BCS	RH1
    1092/   1D830 : B03C 0041           	CMP.B	#'A',D0
    1093/   1D834 : 6518                	BCS	RHE
    1094/   1D836 : B03C 0047           	CMP.B	#'F'+1,D0
    1095/   1D83A : 6412                	BCC	RHE
    1096/   1D83C : 903C 0007           	SUB.B	#'A'-'9'-1,D0
    1097/   1D840 :                     RH1:
    1098/   1D840 : 903C 0030           	SUB.B	#'0',D0
    1099/   1D844 : E989                	LSL.L	#4,D1
    1100/   1D846 : 8200                	OR.B	D0,D1
    1101/   1D848 : 5248                	ADDQ	#1,A0
    1102/   1D84A : 5242                	ADDQ	#1,D2
    1103/   1D84C : 60D2                	BRA	RH0
    1104/   1D84E :                     RHE:
    1105/   1D84E : 4E75                	RTS
    1106/   1D850 :                     
    1107/   1D850 :                     ;;;
    1108/   1D850 :                     ;;; Exception Handler
    1109/   1D850 :                     ;;;
    1110/   1D850 :                     
    1111/   1D850 :                     	;; Dummy
    1112/   1D850 :                     DUMMY_H:
    1113/   1D850 : 4E73                	RTE
    1114/   1D852 :                     
    1115/   1D852 :                     	;; 02 Bus Error
    1116/   1D852 :                     BUSERR_H:
 AS V1.42 Beta [Bld 246] - Source File emu68kmon_RevB01.asm - Page 20 - 11/1/2023 17:44:20


    1117/   1D852 : 23FC 0001 DF34      	MOVE.L	#BUSERR_M,EXMSG
            1D858 : 0001 FE2E          
    1118/   1D85C : 4279 0001 FE32      	CLR	EXGRP		; Exception Group 0
    1119/   1D862 :                     
    1120/   1D862 : 6000 02A4           	BRA	COMM_H
    1121/   1D866 :                     
    1122/   1D866 :                     	;; 03 Address Error
    1123/   1D866 :                     ADDERR_H:
    1124/   1D866 : 23FC 0001 DF3E      	MOVE.L	#ADDERR_M,EXMSG
            1D86C : 0001 FE2E          
    1125/   1D870 : 4279 0001 FE32      	CLR	EXGRP		; Exception Group 0
    1126/   1D876 :                     
    1127/   1D876 : 6000 0290           	BRA	COMM_H
    1128/   1D87A :                     
    1129/   1D87A :                     	;; 04 Illegal Instruction
    1130/   1D87A :                     ILLINS_H:
    1131/   1D87A :                     	;; Check IDENT
    1132/   1D87A : =>TRUE              	IF USE_IDENT
    1133/   1D87A :                     
    1134/   1D87A : 0CAF 0001 D07C      	CMP.L	#ID0,2(A7)	; Check PC on system stack
            1D880 : 0002             
    1135/   1D882 : 660C                	BNE	ILLINS0		; PC is not IDENT routine
    1136/   1D884 :                     
    1137/   1D884 :                     	;; MOVEC VBR,D0 caused error ==> MC68000 or MC68008
    1138/   1D884 : 5C4F                	ADDQ	#6,A7		; Drop stack frame (MC68000 format)
    1139/   1D886 : 4239 0001 FE2C      	CLR.B	PSPEC
    1140/   1D88C : 6000 F81C           	BRA	ID9
    1141/   1D890 :                     
    1142/   1D890 :                     ILLINS0:
    1143/   1D890 : 0CAF 0001 D080      	CMP.L	#ID1,2(A7)
            1D896 : 0002             
    1144/   1D898 : 6606                	BNE	ILLINS1
    1145/   1D89A :                     
    1146/   1D89A :                     	;; CALLM caused error ==> MC68010 or MC68030
    1147/   1D89A : 504F                	ADDQ	#8,A7		; Drop stack frame (MC68010- format)
    1148/   1D89C : 6000 F7FA           	BRA	ID2
    1149/   1D8A0 :                     
    1150/   1D8A0 :                     ILLINS1:
    1151/   1D8A0 : 0CAF 0001 D098      	CMP.L	#ID3,2(A7)
            1D8A6 : 0002             
    1152/   1D8A8 : 6614                	BNE	ILLINS2
    1153/   1D8AA :                     
    1154/   1D8AA :                     	;; MOVEC CACR,D0 caused error ==> MC68010
    1155/   1D8AA : 504F                	ADDQ	#8,A7		; Drop stack frame (MC68010- format)
    1156/   1D8AC : 41F9 0001 DF05      	LEA	IM010,A0
    1157/   1D8B2 : 13FC 0001 0001      	MOVE.B	#1,PSPEC
            1D8B8 : FE2C             
    1158/   1D8BA : 6000 F7EE           	BRA	ID9
    1159/   1D8BE :                     
    1160/   1D8BE :                     ILLINS2:
    1161/   1D8BE :                     ILLINS9:
    1162/   1D8BE : [1132]              	ENDIF
    1163/   1D8BE :                     
    1164/   1D8BE : =>TRUE              	IF USE_REGCMD
    1165/   1D8BE : 48F9 7FFF 0001      	MOVEM.L	D0-D7/A0-A6,REGD0
            1D8C4 : FE38             
    1166/   1D8C6 : =>FALSE             	ELSE
    1167/   1D8C6 :                     	MOVEM.L	D0-D3,REGD0
    1168/   1D8C6 :                     	MOVEM.L	A0-A3,REGA0
    1169/   1D8C6 : [1164]              	ENDIF
 AS V1.42 Beta [Bld 246] - Source File emu68kmon_RevB01.asm - Page 21 - 11/1/2023 17:44:20


    1170/   1D8C6 :                     
    1171/   1D8C6 : 23FC 0001 DF4C      	MOVE.L	#ILLINS_M,EXMSG
            1D8CC : 0001 FE2E          
    1172/   1D8D0 : 33FC 0001 0001      	MOVE	#1,EXGRP	; Exception Group 1
            1D8D6 : FE32             
    1173/   1D8D8 :                     
    1174/   1D8D8 :                     	;; Check BREAK
    1175/   1D8D8 : 206F 0002           	MOVE.L	2(A7),A0	; Get PC
    1176/   1D8DC : 3010                	MOVE	(A0),D0		; Read OP-code
    1177/   1D8DE : B07C 4AFC           	CMP	#$4AFC,D0
    1178/   1D8E2 : 670C                	BEQ	BREAK
    1179/   1D8E4 : C07C FFF8           	AND	#$FFF8,D0
    1180/   1D8E8 : B07C 4848           	CMP	#$4848,D0
    1181/   1D8EC : 6600 0222           	BNE	COMM_H0
    1182/   1D8F0 :                     BREAK:
    1183/   1D8F0 : 23FC 0001 E061      	MOVE.L	#BREAK_M,EXMSG
            1D8F6 : 0001 FE2E          
    1184/   1D8FA : 33FC 0101 0001      	MOVE	#$0101,EXGRP	; BREAK
            1D900 : FE32             
    1185/   1D902 : 6000 020C           	BRA	COMM_H0
    1186/   1D906 :                     
    1187/   1D906 :                     	;; 05 Zero Divide
    1188/   1D906 :                     ZERDIV_H:
    1189/   1D906 : 23FC 0001 DF60      	MOVE.L	#ZERDIV_M,EXMSG
            1D90C : 0001 FE2E          
    1190/   1D910 : 33FC 0002 0001      	MOVE	#2,EXGRP	; Exception Group 2
            1D916 : FE32             
    1191/   1D918 :                     
    1192/   1D918 : 6000 01EE           	BRA	COMM_H
    1193/   1D91C :                     
    1194/   1D91C :                     	;; 06 CHK Instruction
    1195/   1D91C :                     CHK_H:
    1196/   1D91C : 23FC 0001 DF6C      	MOVE.L	#CHK_M,EXMSG
            1D922 : 0001 FE2E          
    1197/   1D926 : 33FC 0002 0001      	MOVE	#2,EXGRP	; Exception Group 2
            1D92C : FE32             
    1198/   1D92E :                     
    1199/   1D92E : 6000 01D8           	BRA	COMM_H
    1200/   1D932 :                     
    1201/   1D932 :                     	;; 07 TRAPV Instruction
    1202/   1D932 :                     TRAPV_H:
    1203/   1D932 : 23FC 0001 DF7C      	MOVE.L	#TRAPV_M,EXMSG
            1D938 : 0001 FE2E          
    1204/   1D93C : 33FC 0002 0001      	MOVE	#2,EXGRP	; Exception Group 2
            1D942 : FE32             
    1205/   1D944 :                     
    1206/   1D944 : 6000 01C2           	BRA	COMM_H
    1207/   1D948 :                     
    1208/   1D948 :                     	;; 08 Privilege Violation
    1209/   1D948 :                     PRIV_H:
    1210/   1D948 : 23FC 0001 DF8E      	MOVE.L	#PRIV_M,EXMSG
            1D94E : 0001 FE2E          
    1211/   1D952 : 33FC 0001 0001      	MOVE	#1,EXGRP	; Exception Group 1
            1D958 : FE32             
    1212/   1D95A :                     
    1213/   1D95A : 6000 01AC           	BRA	COMM_H
    1214/   1D95E :                     
    1215/   1D95E :                     	;; 09 Trace
    1216/   1D95E :                     TRACE_H:
    1217/   1D95E : 23FC 0001 DFA2      	MOVE.L	#TRACE_M,EXMSG
 AS V1.42 Beta [Bld 246] - Source File emu68kmon_RevB01.asm - Page 22 - 11/1/2023 17:44:20


            1D964 : 0001 FE2E          
    1218/   1D968 : 33FC 0001 0001      	MOVE	#1,EXGRP	; Exception Group 1
            1D96E : FE32             
    1219/   1D970 :                     
    1220/   1D970 : 6000 0196           	BRA	COMM_H
    1221/   1D974 :                     
    1222/   1D974 :                     	;; 10 Line 1010 Emulator
    1223/   1D974 :                     L1010_H:
    1224/   1D974 : 23FC 0001 DFA8      	MOVE.L	#L1010_M,EXMSG
            1D97A : 0001 FE2E          
    1225/   1D97E : 33FC 0001 0001      	MOVE	#1,EXGRP	; Exception Group 1
            1D984 : FE32             
    1226/   1D986 :                     
    1227/   1D986 : 6000 0180           	BRA	COMM_H
    1228/   1D98A :                     
    1229/   1D98A :                     	;; 11 Line 1111 Emulator
    1230/   1D98A :                     L1111_H:
    1231/   1D98A : 23FC 0001 DFBB      	MOVE.L	#L1111_M,EXMSG
            1D990 : 0001 FE2E          
    1232/   1D994 : 33FC 0001 0001      	MOVE	#1,EXGRP	; Exception Group 1
            1D99A : FE32             
    1233/   1D99C :                     
    1234/   1D99C : 6000 016A           	BRA	COMM_H
    1235/   1D9A0 :                     
    1236/   1D9A0 :                     	;; 14 Format Error
    1237/   1D9A0 :                     FORMAT_H:
    1238/   1D9A0 : 23FC 0001 DFCE      	MOVE.L	#FORMAT_M,EXMSG
            1D9A6 : 0001 FE2E          
    1239/   1D9AA : 33FC 0001 0001      	MOVE	#1,EXGRP	; Exception Group 1
            1D9B0 : FE32             
    1240/   1D9B2 :                     
    1241/   1D9B2 : 6000 0154           	BRA	COMM_H
    1242/   1D9B6 :                     
    1243/   1D9B6 :                     	;; 32 TRAP #0
    1244/   1D9B6 :                     TRAP0_H:
    1245/   1D9B6 : 23FC 0001 DFDB      	MOVE.L	#TRAP0_M,EXMSG
            1D9BC : 0001 FE2E          
    1246/   1D9C0 : 33FC 0002 0001      	MOVE	#2,EXGRP	; Exception Group 2
            1D9C6 : FE32             
    1247/   1D9C8 :                     
    1248/   1D9C8 : 6000 013E           	BRA	COMM_H
    1249/   1D9CC :                     
    1250/   1D9CC :                     	;; 33 TRAP #1
    1251/   1D9CC :                     TRAP1_H:
    1252/   1D9CC : 23FC 0001 DFE3      	MOVE.L	#TRAP1_M,EXMSG
            1D9D2 : 0001 FE2E          
    1253/   1D9D6 : 33FC 0002 0001      	MOVE	#2,EXGRP	; Exception Group 2
            1D9DC : FE32             
    1254/   1D9DE :                     
    1255/   1D9DE : 6000 0128           	BRA	COMM_H
    1256/   1D9E2 :                     
    1257/   1D9E2 :                     	;; 34 TRAP #2
    1258/   1D9E2 :                     TRAP2_H:
    1259/   1D9E2 : 23FC 0001 DFEB      	MOVE.L	#TRAP2_M,EXMSG
            1D9E8 : 0001 FE2E          
    1260/   1D9EC : 33FC 0002 0001      	MOVE	#2,EXGRP	; Exception Group 2
            1D9F2 : FE32             
    1261/   1D9F4 :                     
    1262/   1D9F4 : 6000 0112           	BRA	COMM_H
    1263/   1D9F8 :                     
 AS V1.42 Beta [Bld 246] - Source File emu68kmon_RevB01.asm - Page 23 - 11/1/2023 17:44:20


    1264/   1D9F8 :                     	;; 35 TRAP #3
    1265/   1D9F8 :                     TRAP3_H:
    1266/   1D9F8 : 23FC 0001 DFF3      	MOVE.L	#TRAP3_M,EXMSG
            1D9FE : 0001 FE2E          
    1267/   1DA02 : 33FC 0002 0001      	MOVE	#2,EXGRP	; Exception Group 2
            1DA08 : FE32             
    1268/   1DA0A :                     
    1269/   1DA0A : 6000 00FC           	BRA	COMM_H
    1270/   1DA0E :                     
    1271/   1DA0E :                     	;; 36 TRAP #4
    1272/   1DA0E :                     TRAP4_H:
    1273/   1DA0E : 23FC 0001 DFFB      	MOVE.L	#TRAP4_M,EXMSG
            1DA14 : 0001 FE2E          
    1274/   1DA18 : 33FC 0002 0001      	MOVE	#2,EXGRP	; Exception Group 2
            1DA1E : FE32             
    1275/   1DA20 :                     
    1276/   1DA20 : 6000 00E6           	BRA	COMM_H
    1277/   1DA24 :                     
    1278/   1DA24 :                     	;; 37 TRAP #5
    1279/   1DA24 :                     TRAP5_H:
    1280/   1DA24 : 23FC 0001 E003      	MOVE.L	#TRAP5_M,EXMSG
            1DA2A : 0001 FE2E          
    1281/   1DA2E : 33FC 0002 0001      	MOVE	#2,EXGRP	; Exception Group 2
            1DA34 : FE32             
    1282/   1DA36 :                     
    1283/   1DA36 : 6000 00D0           	BRA	COMM_H
    1284/   1DA3A :                     
    1285/   1DA3A :                     	;; 38 TRAP #6
    1286/   1DA3A :                     TRAP6_H:
    1287/   1DA3A : 23FC 0001 E00B      	MOVE.L	#TRAP6_M,EXMSG
            1DA40 : 0001 FE2E          
    1288/   1DA44 : 33FC 0002 0001      	MOVE	#2,EXGRP	; Exception Group 2
            1DA4A : FE32             
    1289/   1DA4C :                     
    1290/   1DA4C : 6000 00BA           	BRA	COMM_H
    1291/   1DA50 :                     
    1292/   1DA50 :                     	;; 39 TRAP #7
    1293/   1DA50 :                     TRAP7_H:
    1294/   1DA50 : 23FC 0001 E013      	MOVE.L	#TRAP7_M,EXMSG
            1DA56 : 0001 FE2E          
    1295/   1DA5A : 33FC 0002 0001      	MOVE	#2,EXGRP	; Exception Group 2
            1DA60 : FE32             
    1296/   1DA62 :                     
    1297/   1DA62 : 6000 00A4           	BRA	COMM_H
    1298/   1DA66 :                     
    1299/   1DA66 :                     	;; 40 TRAP #8
    1300/   1DA66 :                     TRAP8_H:
    1301/   1DA66 : 23FC 0001 E01B      	MOVE.L	#TRAP8_M,EXMSG
            1DA6C : 0001 FE2E          
    1302/   1DA70 : 33FC 0002 0001      	MOVE	#2,EXGRP	; Exception Group 2
            1DA76 : FE32             
    1303/   1DA78 :                     
    1304/   1DA78 : 6000 008E           	BRA	COMM_H
    1305/   1DA7C :                     
    1306/   1DA7C :                     	;; 41 TRAP #9
    1307/   1DA7C :                     TRAP9_H:
    1308/   1DA7C : 23FC 0001 E023      	MOVE.L	#TRAP9_M,EXMSG
            1DA82 : 0001 FE2E          
    1309/   1DA86 : 33FC 0002 0001      	MOVE	#2,EXGRP	; Exception Group 2
            1DA8C : FE32             
 AS V1.42 Beta [Bld 246] - Source File emu68kmon_RevB01.asm - Page 24 - 11/1/2023 17:44:20


    1310/   1DA8E :                     
    1311/   1DA8E : 6078                	BRA	COMM_H
    1312/   1DA90 :                     
    1313/   1DA90 :                     	;; 42 TRAP #10
    1314/   1DA90 :                     TRAP10_H:
    1315/   1DA90 : 23FC 0001 E02B      	MOVE.L	#TRAP10_M,EXMSG
            1DA96 : 0001 FE2E          
    1316/   1DA9A : 33FC 0002 0001      	MOVE	#2,EXGRP	; Exception Group 2
            1DAA0 : FE32             
    1317/   1DAA2 :                     
    1318/   1DAA2 : 6064                	BRA	COMM_H
    1319/   1DAA4 :                     
    1320/   1DAA4 :                     	;; 43 TRAP #11
    1321/   1DAA4 :                     TRAP11_H:
    1322/   1DAA4 : 23FC 0001 E034      	MOVE.L	#TRAP11_M,EXMSG
            1DAAA : 0001 FE2E          
    1323/   1DAAE : 33FC 0002 0001      	MOVE	#2,EXGRP	; Exception Group 2
            1DAB4 : FE32             
    1324/   1DAB6 :                     
    1325/   1DAB6 : 6050                	BRA	COMM_H
    1326/   1DAB8 :                     
    1327/   1DAB8 :                     	;; 44 TRAP #12
    1328/   1DAB8 :                     TRAP12_H:
    1329/   1DAB8 : 23FC 0001 E03D      	MOVE.L	#TRAP12_M,EXMSG
            1DABE : 0001 FE2E          
    1330/   1DAC2 : 33FC 0002 0001      	MOVE	#2,EXGRP	; Exception Group 2
            1DAC8 : FE32             
    1331/   1DACA :                     
    1332/   1DACA : 603C                	BRA	COMM_H
    1333/   1DACC :                     
    1334/   1DACC :                     	;; 45 TRAP #13
    1335/   1DACC :                     TRAP13_H:
    1336/   1DACC : 23FC 0001 E046      	MOVE.L	#TRAP13_M,EXMSG
            1DAD2 : 0001 FE2E          
    1337/   1DAD6 : 33FC 0002 0001      	MOVE	#2,EXGRP	; Exception Group 2
            1DADC : FE32             
    1338/   1DADE :                     
    1339/   1DADE : 6028                	BRA	COMM_H
    1340/   1DAE0 :                     
    1341/   1DAE0 :                     	;; 46 TRAP #14
    1342/   1DAE0 :                     TRAP14_H:
    1343/   1DAE0 : 23FC 0001 E04F      	MOVE.L	#TRAP14_M,EXMSG
            1DAE6 : 0001 FE2E          
    1344/   1DAEA : 33FC 0002 0001      	MOVE	#2,EXGRP	; Exception Group 2
            1DAF0 : FE32             
    1345/   1DAF2 :                     
    1346/   1DAF2 : 6014                	BRA	COMM_H
    1347/   1DAF4 :                     
    1348/   1DAF4 :                     	;; 47 TRAP #15
    1349/   1DAF4 :                     TRAP15_H:
    1350/   1DAF4 : 23FC 0001 E058      	MOVE.L	#TRAP15_M,EXMSG
            1DAFA : 0001 FE2E          
    1351/   1DAFE : 33FC 0002 0001      	MOVE	#2,EXGRP	; Exception Group 2
            1DB04 : FE32             
    1352/   1DB06 :                     
    1353/   1DB06 : 4E71                	BRA	COMM_H
    1354/   1DB08 :                     
    1355/   1DB08 :                     	;;
    1356/   1DB08 :                     	;; Common handler
    1357/   1DB08 :                     	;;
 AS V1.42 Beta [Bld 246] - Source File emu68kmon_RevB01.asm - Page 25 - 11/1/2023 17:44:20


    1358/   1DB08 :                     COMM_H:
    1359/   1DB08 :                     	;; Save registers
    1360/   1DB08 : =>TRUE              	IF USE_REGCMD
    1361/   1DB08 : 48F9 7FFF 0001      	MOVEM.L	D0-D7/A0-A6,REGD0
            1DB0E : FE38             
    1362/   1DB10 : =>FALSE             	ELSE
    1363/   1DB10 :                     	MOVEM.L	D0-D3,REGD0
    1364/   1DB10 :                     	MOVEM.L	A0-A3,REGA0
    1365/   1DB10 : [1360]              	ENDIF
    1366/   1DB10 :                     
    1367/   1DB10 :                     COMM_H0:
    1368/   1DB10 :                     
    1369/   1DB10 : =>TRUE              	IF USE_REGCMD
    1370/   1DB10 :                     
    1371/   1DB10 : 4A79 0001 FE32      	TST	EXGRP
    1372/   1DB16 : 6614                	BNE	CH0		; not Group 0
    1373/   1DB18 : 4A39 0001 FE2C      	TST.B	PSPEC
    1374/   1DB1E : 660C                	BNE	CH0		; not MC68000/8
    1375/   1DB20 :                     
    1376/   1DB20 :                     	;; MC68000/8 : Group 0 (Bus/address error)
    1377/   1DB20 : 41F9 0001 FE84      	LEA	GR0BUF,A0
    1378/   1DB26 : 30DF                	MOVE	(A7)+,(A0)+
    1379/   1DB28 : 20DF                	MOVE.L	(A7)+,(A0)+	; Access address
    1380/   1DB2A : 30DF                	MOVE	(A7)+,(A0)+	; Instruction register
    1381/   1DB2C :                     CH0:
    1382/   1DB2C :                     	;; Common
    1383/   1DB2C : 33DF 0001 FE7C      	MOVE	(A7)+,REGSR
    1384/   1DB32 : 23DF 0001 FE34      	MOVE.L	(A7)+,REGPC
    1385/   1DB38 :                     
    1386/   1DB38 : 4E68                	MOVE	USP,A0
    1387/   1DB3A : 23C8 0001 FE74      	MOVE.L	A0,REGA7
    1388/   1DB40 :                     
    1389/   1DB40 : 4A39 0001 FE2C      	TST.B	PSPEC
    1390/   1DB46 : 674A                	BEQ	CH2
    1391/   1DB48 :                     
    1392/   1DB48 :                     	;; MC68010
    1393/   1DB48 :                     	SAVE
    1394/   1DB48 :                     	CPU	68010
    1395/   1DB48 : 4E7A 0801           	MOVEC	VBR,D0
    1396/   1DB4C : 23C0 0001 FE7E      	MOVE.L	D0,REGVBR
    1397/   1DB52 : 4E7A 0000           	MOVEC	SFC,D0
    1398/   1DB56 : 13C0 0001 FE82      	MOVE.B	D0,REGSFC
    1399/   1DB5C : 4E7A 0000           	MOVEC	SFC,D0
    1400/   1DB60 : 13C0 0001 FE83      	MOVE.B	D0,REGDFC
    1401/   1DB66 : ALL                 	RESTORE
    1402/   1DB66 :                     
    1403/   1DB66 : 341F                	MOVE	(A7)+,D2	; Format / Vector offset
    1404/   1DB68 : 33C2 0001 FED8      	MOVE	D2,REGFV
    1405/   1DB6E : E95A                	ROL.W	#4,D2
    1406/   1DB70 : C47C 000F           	AND	#$000F,D2
    1407/   1DB74 : 41F9 0001 FE84      	LEA	GR0BUF,A0
    1408/   1DB7A : 43F9 0001 E4A0      	LEA	FMTLEN,A1
    1409/   1DB80 : 4243                	CLR	D3
    1410/   1DB82 : 1631 2000           	MOVE.B	0(A1,D2.W),D3
    1411/   1DB86 : 5943                	SUBQ	#4,D3		; 4 words already POPed
    1412/   1DB88 : 6308                	BLS	CH2		; No more to POP, or unknown format
    1413/   1DB8A : 5343                	SUBQ	#1,D3
    1414/   1DB8C :                     CH1:
    1415/   1DB8C : 30DF                	MOVE	(A7)+,(A0)+
    1416/   1DB8E : 51CB FFFC           	DBF	D3,CH1
 AS V1.42 Beta [Bld 246] - Source File emu68kmon_RevB01.asm - Page 26 - 11/1/2023 17:44:20


    1417/   1DB92 :                     
    1418/   1DB92 :                     CH2:
    1419/   1DB92 : 23CF 0001 FE78      	MOVE.L	A7,REGSSP
    1420/   1DB98 :                     
    1421/   1DB98 : =>FALSE             	ELSE
    1422/   1DB98 :                     	;; USE_REGCMD == 0
    1423/   1DB98 :                     
    1424/   1DB98 :                     	TST.B	PSPEC
    1425/   1DB98 :                     	BNE	CH1
    1426/   1DB98 :                     
    1427/   1DB98 :                     	;; MC68000/8
    1428/   1DB98 :                     	TST	D2
    1429/   1DB98 :                     	BNE	CH0
    1430/   1DB98 :                     
    1431/   1DB98 :                     	;; Group 0
    1432/   1DB98 :                     	ADD.L	#7*2,A7
    1433/   1DB98 :                     	BRA	CH3
    1434/   1DB98 :                     
    1435/   1DB98 :                     CH0:
    1436/   1DB98 :                     	;; Group 1-3
    1437/   1DB98 :                     	ADD.L	#3*2,A7
    1438/   1DB98 :                     	BRA	CH3
    1439/   1DB98 :                     
    1440/   1DB98 :                     CH1:
    1441/   1DB98 :                     	;; MC68010 and above
    1442/   1DB98 :                     	MOVE	6(A7),D2	; Get format word
    1443/   1DB98 :                     	ROL	#4,D2
    1444/   1DB98 :                     	AND	#$000F,D2
    1445/   1DB98 :                     	LEA	FMTLEN,A1
    1446/   1DB98 :                     	CLR	D3
    1447/   1DB98 :                     	MOVE.B	0(A1,D2.W),D3
    1448/   1DB98 :                     	ASL	#1,D3
    1449/   1DB98 :                     	ADD	D3,A7
    1450/   1DB98 :                     
    1451/   1DB98 :                     CH3:
    1452/   1DB98 : [1369]              	ENDIF
    1453/   1DB98 :                     
    1454/   1DB98 : 2079 0001 FE2E      	MOVE.L	EXMSG,A0
    1455/   1DB9E : 6100 FB72           	BSR	STROUT
    1456/   1DBA2 : 6100 FBE2           	BSR	CRLF
    1457/   1DBA6 : =>TRUE              	IF USE_REGCMD
    1458/   1DBA6 : 4A79 0001 FE32      	TST	EXGRP
    1459/   1DBAC : 6602                	BNE	CH4
    1460/   1DBAE : 6108                	BSR	G0DUMP
    1461/   1DBB0 :                     CH4:
    1462/   1DBB0 : 6100 FAFA           	BSR	RDUMP
    1463/   1DBB4 : =>FALSE             	ELSE
    1464/   1DBB4 :                     	IFDEF DEBUG
    1465/   1DBB4 :                     	MOVE.L	A7,D0
    1466/   1DBB4 :                     	BSR	HEXOUT8
    1467/   1DBB4 : [1464]              	ENDIF
    1468/   1DBB4 :                     	BSR	CRLF
    1469/   1DBB4 : [1457]              	ENDIF
    1470/   1DBB4 :                     
    1471/   1DBB4 : 6000 F4F8           	BRA	WSTART
    1472/   1DBB8 :                     
    1473/   1DBB8 : =>TRUE              	IF USE_REGCMD
    1474/   1DBB8 :                     ;;; DUMP group 0 (Address/Bus Error)
    1475/   1DBB8 :                     G0DUMP:
    1476/   1DBB8 : 4A39 0001 FE2C      	TST.B	PSPEC
 AS V1.42 Beta [Bld 246] - Source File emu68kmon_RevB01.asm - Page 27 - 11/1/2023 17:44:20


    1477/   1DBBE : 6662                	BNE	G0D1
    1478/   1DBC0 :                     
    1479/   1DBC0 :                     	;; MC68000/MC68008
    1480/   1DBC0 : =>UNDEFINED         	IFDEF DEBUG
    1481/   1DBC0 :                     	MOVE	GR0BUF,D0
    1482/   1DBC0 :                     	BSR	HEXOUT4
    1483/   1DBC0 :                     	MOVE.B	#' ',D0
    1484/   1DBC0 :                     	BSR	CONOUT
    1485/   1DBC0 :                     	MOVE.L	GR0BUF+2,D0
    1486/   1DBC0 :                     	BSR	HEXOUT8		; Access address
    1487/   1DBC0 :                     	MOVE.B	#' ',D0
    1488/   1DBC0 :                     	BSR	CONOUT
    1489/   1DBC0 :                     	MOVE	GR0BUF+6,D0
    1490/   1DBC0 :                     	BSR	HEXOUT4		; Instruction register
    1491/   1DBC0 :                     	BSR	CRLF
    1492/   1DBC0 : [1480]              	ENDIF
    1493/   1DBC0 :                     
    1494/   1DBC0 :                     	;; Function Code
    1495/   1DBC0 : 3039 0001 FE84      	MOVE	GR0BUF,D0
    1496/   1DBC6 : C07C 0007           	AND	#$0007,D0
    1497/   1DBCA : E548                	LSL	#2,D0
    1498/   1DBCC : 41F9 0001 E396      	LEA	FCTAB,A0
    1499/   1DBD2 : 2070 3000           	MOVE.L	0(A0,D3.W),A0
    1500/   1DBD6 : 6100 FB3A           	BSR	STROUT
    1501/   1DBDA :                     
    1502/   1DBDA :                     	;; Read / Write
    1503/   1DBDA : 3039 0001 FE84      	MOVE	GR0BUF,D0
    1504/   1DBE0 : C07C 0010           	AND	#$0010,D0
    1505/   1DBE4 : 6608                	BNE	G0D00
    1506/   1DBE6 : 41F9 0001 E442      	LEA	G0WR,A0
    1507/   1DBEC : 6006                	BRA	G0D01
    1508/   1DBEE :                     G0D00:
    1509/   1DBEE : 41F9 0001 E449      	LEA	G0RD,A0
    1510/   1DBF4 :                     G0D01:
    1511/   1DBF4 : 6100 FB1C           	BSR	STROUT
    1512/   1DBF8 :                     
    1513/   1DBF8 :                     	;; Address
    1514/   1DBF8 : 2039 0001 FE86      	MOVE.L	GR0BUF+2,D0
    1515/   1DBFE : 6100 FB20           	BSR	HEXOUT8		; Access address
    1516/   1DC02 :                     
    1517/   1DC02 :                     	;; Instruction Register
    1518/   1DC02 : 41F9 0001 E44F      	LEA	G0INS0,A0
    1519/   1DC08 : 6100 FB08           	BSR	STROUT
    1520/   1DC0C : 3039 0001 FE8A      	MOVE	GR0BUF+6,D0
    1521/   1DC12 : 6100 FB14           	BSR	HEXOUT4		; Instruction register
    1522/   1DC16 : 103C 0029           	MOVE.B	#')',D0
    1523/   1DC1A : 6100 08B6           	BSR	CONOUT
    1524/   1DC1E :                     
    1525/   1DC1E : 6000 FB66           	BRA	CRLF
    1526/   1DC22 :                     
    1527/   1DC22 :                     G0D1:
    1528/   1DC22 : =>TRUE              	IF USE_SFDECODE
    1529/   1DC22 : 3639 0001 FED8      	MOVE	REGFV,D3
    1530/   1DC28 : E95B                	ROL	#4,D3
    1531/   1DC2A : C67C 000F           	AND	#$000F,D3
    1532/   1DC2E : B67C 0008           	CMP	#$08,D3
    1533/   1DC32 : 6600 00DE           	BNE	G0D2		; Not MC68010
    1534/   1DC36 :                     
    1535/   1DC36 :                     	;; MC68010
    1536/   1DC36 : =>UNDEFINED         	IFDEF DEBUG
 AS V1.42 Beta [Bld 246] - Source File emu68kmon_RevB01.asm - Page 28 - 11/1/2023 17:44:20


    1537/   1DC36 :                     	MOVE	GR0BUF,D0	; Special Status Word
    1538/   1DC36 :                     	BSR	HEXOUT4
    1539/   1DC36 :                     	MOVE	#' ',D0
    1540/   1DC36 :                     	BSR	CONOUT
    1541/   1DC36 :                     	MOVE.L	GR0BUF+2,D0	; Fault Address
    1542/   1DC36 :                     	BSR	HEXOUT8
    1543/   1DC36 :                     	MOVE	#' ',D0
    1544/   1DC36 :                     	BSR	CONOUT
    1545/   1DC36 :                     	MOVE	GR0BUF+8,D0
    1546/   1DC36 :                     	BSR	HEXOUT4
    1547/   1DC36 :                     	BSR	CRLF
    1548/   1DC36 : [1536]              	ENDIF
    1549/   1DC36 :                     
    1550/   1DC36 :                     	;; Function Code
    1551/   1DC36 : 3039 0001 FE84      	MOVE	GR0BUF,D0
    1552/   1DC3C : C07C 0007           	AND	#$0007,D0
    1553/   1DC40 : E548                	LSL	#2,D0
    1554/   1DC42 : 41F9 0001 E3B6      	LEA	FCTAB2,A0
    1555/   1DC48 : 2070 0000           	MOVE.L	0(A0,D0),A0
    1556/   1DC4C : 6100 FAC4           	BSR	STROUT
    1557/   1DC50 : 41F9 0001 E46F      	LEA	G0SPC,A0
    1558/   1DC56 : 6100 FABA           	BSR	STROUT
    1559/   1DC5A :                     
    1560/   1DC5A :                     	;; Read / Write
    1561/   1DC5A : 3039 0001 FE84      	MOVE	GR0BUF,D0
    1562/   1DC60 : 0800 0008           	BTST	#8,D0
    1563/   1DC64 : 6608                	BNE	G0D10
    1564/   1DC66 : 41F9 0001 E442      	LEA	G0WR,A0
    1565/   1DC6C : 6006                	BRA	G0D11
    1566/   1DC6E :                     G0D10:
    1567/   1DC6E : 41F9 0001 E449      	LEA	G0RD,A0
    1568/   1DC74 :                     G0D11:
    1569/   1DC74 : 6100 FA9C           	BSR	STROUT
    1570/   1DC78 :                     
    1571/   1DC78 :                     	;; BYTE / WORD
    1572/   1DC78 : 3039 0001 FE84      	MOVE	GR0BUF,D0
    1573/   1DC7E : 0800 0009           	BTST	#9,D0
    1574/   1DC82 : 6708                	BEQ	G0D12
    1575/   1DC84 : 41F9 0001 E458      	LEA	G0BYTE,A0
    1576/   1DC8A : 6006                	BRA	G0D13
    1577/   1DC8C :                     G0D12:
    1578/   1DC8C : 41F9 0001 E45E      	LEA	G0WORD,A0
    1579/   1DC92 :                     G0D13:
    1580/   1DC92 : 6100 FA7E           	BSR	STROUT
    1581/   1DC96 :                     
    1582/   1DC96 :                     	;; Write Data
    1583/   1DC96 : 41F9 0001 E469      	LEA	G0FROM,A0
    1584/   1DC9C : 3039 0001 FE84      	MOVE	GR0BUF,D0
    1585/   1DCA2 : 0800 0008           	BTST	#8,D0
    1586/   1DCA6 : 662C                	BNE	G0D17		; if READ
    1587/   1DCA8 : 0800 0009           	BTST	#9,D0
    1588/   1DCAC : 6716                	BEQ	G0D15		; if WORD
    1589/   1DCAE : 3239 0001 FE8C      	MOVE	GR0BUF+8,D1
    1590/   1DCB4 : 0800 000A           	BTST	#10,D0
    1591/   1DCB8 : 6702                	BEQ	G0D14		; if not HB
    1592/   1DCBA : E049                	LSR	#8,D1
    1593/   1DCBC :                     G0D14:
    1594/   1DCBC : 1001                	MOVE.B	D1,D0
    1595/   1DCBE : 6100 FA70           	BSR	HEXOUT2
    1596/   1DCC2 : 600A                	BRA	G0D16
 AS V1.42 Beta [Bld 246] - Source File emu68kmon_RevB01.asm - Page 29 - 11/1/2023 17:44:20


    1597/   1DCC4 :                     G0D15:
    1598/   1DCC4 : 3039 0001 FE8C      	MOVE	GR0BUF+8,D0
    1599/   1DCCA : 6100 FA5C           	BSR	HEXOUT4
    1600/   1DCCE :                     G0D16:
    1601/   1DCCE : 41F9 0001 E464      	LEA	G0TO,A0
    1602/   1DCD4 :                     G0D17:
    1603/   1DCD4 : 6100 FA3C           	BSR	STROUT
    1604/   1DCD8 :                     
    1605/   1DCD8 :                     	;; Address
    1606/   1DCD8 : 2039 0001 FE86      	MOVE.L	GR0BUF+2,D0
    1607/   1DCDE : 6100 FA40           	BSR	HEXOUT8		; Access address
    1608/   1DCE2 :                     
    1609/   1DCE2 :                     	;; Instruction Fetch
    1610/   1DCE2 : 3039 0001 FE84      	MOVE	GR0BUF,D0
    1611/   1DCE8 : 0800 000D           	BTST	#13,D0
    1612/   1DCEC : 670A                	BEQ	G0D18
    1613/   1DCEE : 41F9 0001 E476      	LEA	G0IF,A0
    1614/   1DCF4 : 6100 FA1C           	BSR	STROUT
    1615/   1DCF8 :                     G0D18:
    1616/   1DCF8 :                     	;; Read-Modify-Write
    1617/   1DCF8 : 3039 0001 FE84      	MOVE	GR0BUF,D0
    1618/   1DCFE : 0800 000B           	BTST	#11,D0
    1619/   1DD02 : 670A                	BEQ	G0D19
    1620/   1DD04 : 41F9 0001 E48B      	LEA	G0RMW,A0
    1621/   1DD0A : 6100 FA06           	BSR	STROUT
    1622/   1DD0E :                     G0D19:
    1623/   1DD0E : 6000 FA76           	BRA	CRLF
    1624/   1DD12 :                     
    1625/   1DD12 :                     G0D2:
    1626/   1DD12 : B67C 000A           	CMP	#$0A,D3		; MC68020/MC68030 Short Bus Fault Stack Frame
    1627/   1DD16 : 6706                	BEQ	G0D20
    1628/   1DD18 : B67C 000B           	CMP	#$0B,D3		; MC68020/MC68030 Long Bus Fault Stack Frame
    1629/   1DD1C : 4E71                	BNE	G0D3
    1630/   1DD1E :                     G0D20:
    1631/   1DD1E :                     	;; MC68020 / MC68030
    1632/   1DD1E :                     
    1633/   1DD1E :                     
    1634/   1DD1E :                     G0D3:
    1635/   1DD1E : [1528]              	ENDIF			; USE_SFDECODE
    1636/   1DD1E :                     
    1637/   1DD1E :                     G0D9:
    1638/   1DD1E :                     	;; Unsupported Stack Frame
    1639/   1DD1E : 3039 0001 FE7C      	MOVE	REGSR,D0
    1640/   1DD24 : 6100 FA02           	BSR	HEXOUT4
    1641/   1DD28 : 103C 0020           	MOVE.B	#' ',D0
    1642/   1DD2C : 6100 07A4           	BSR	CONOUT
    1643/   1DD30 :                     
    1644/   1DD30 : 3039 0001 FE34      	MOVE	REGPC,D0
    1645/   1DD36 : 6100 F9F0           	BSR	HEXOUT4
    1646/   1DD3A : 103C 0020           	MOVE.B	#' ',D0
    1647/   1DD3E : 6100 0792           	BSR	CONOUT
    1648/   1DD42 :                     
    1649/   1DD42 : 3039 0001 FE36      	MOVE	REGPC+2,D0
    1650/   1DD48 : 6100 F9DE           	BSR	HEXOUT4
    1651/   1DD4C : 103C 0020           	MOVE.B	#' ',D0
    1652/   1DD50 : 6100 0780           	BSR	CONOUT
    1653/   1DD54 :                     
    1654/   1DD54 : 3039 0001 FED8      	MOVE	REGFV,D0
    1655/   1DD5A : 6100 F9CC           	BSR	HEXOUT4
    1656/   1DD5E : 103C 0020           	MOVE.B	#' ',D0
 AS V1.42 Beta [Bld 246] - Source File emu68kmon_RevB01.asm - Page 30 - 11/1/2023 17:44:20


    1657/   1DD62 : 6100 076E           	BSR	CONOUT
    1658/   1DD66 :                     
    1659/   1DD66 : 4242                	CLR	D2
    1660/   1DD68 : 41F9 0001 E4A0      	LEA	FMTLEN,A0
    1661/   1DD6E : 3639 0001 FED8      	MOVE	REGFV,D3
    1662/   1DD74 : E95B                	ROL	#4,D3
    1663/   1DD76 : C67C 000F           	AND	#$000F,D3
    1664/   1DD7A : 1430 3000           	MOVE.B	0(A0,D3),D2
    1665/   1DD7E : 7604                	MOVEQ	#4,D3		; Counter.  4 words already printed
    1666/   1DD80 : 41F9 0001 FE84      	LEA	GR0BUF,A0
    1667/   1DD86 :                     
    1668/   1DD86 :                     G0D90:
    1669/   1DD86 : 3018                	MOVE	(A0)+,D0
    1670/   1DD88 : 6100 F99E           	BSR	HEXOUT4
    1671/   1DD8C : 5243                	ADDQ	#1,D3
    1672/   1DD8E : B443                	CMP	D3,D2
    1673/   1DD90 : 6318                	BLS	G0D92
    1674/   1DD92 : 303C 000F           	MOVE	#$000F,D0
    1675/   1DD96 : C043                	AND	D3,D0
    1676/   1DD98 : 6606                	BNE	G0D91
    1677/   1DD9A : 6100 F9EA           	BSR	CRLF
    1678/   1DD9E : 60E6                	BRA	G0D90
    1679/   1DDA0 :                     G0D91:
    1680/   1DDA0 : 103C 0020           	MOVE.B	#' ',D0
    1681/   1DDA4 : 6100 072C           	BSR	CONOUT
    1682/   1DDA8 : 60DC                	BRA	G0D90
    1683/   1DDAA :                     G0D92:
    1684/   1DDAA : 6000 F9DA           	BRA	CRLF
    1685/   1DDAE :                     
    1686/   1DDAE : [1473]              	ENDIF
    1687/   1DDAE :                     
    1688/   1DDAE : =>TRUE              	IF USE_IDENT
    1689/   1DDAE :                     
    1690/   1DDAE :                     	SAVE
    1691/   1DDAE :                     	CPU	68020
    1692/   1DDAE :                     DMYRTM:
    1693/   1DDAE : F000                	DC.W	$F000		; A7
    1694/   1DDB0 : 06CF                	RTM	A7
    1695/   1DDB2 : ALL                 	RESTORE
    1696/   1DDB2 :                     
    1697/   1DDB2 : [1688]              	ENDIF
    1698/   1DDB2 :                     
    1699/   1DDB2 :                     ;;;
    1700/   1DDB2 :                     ;;; Data area
    1701/   1DDB2 :                     ;;;
    1702/   1DDB2 :                     
    1703/   1DDB2 :                     HLPMSG:
    1704/   1DDB2 : 3F20 3A43 6F6D      	DC.B	"? :Command Help",CR,LF
            1DDB8 : 6D61 6E64 2048 
            1DDBE : 656C 700D 0A       
    1705/   1DDC3 : 4254 203A 426F      	DC.B	"BT :Boot(Simulate Reset)",CR,LF
            1DDC9 : 6F74 2853 696D 
            1DDCF : 756C 6174 6520 
            1DDD5 : 5265 7365 7429 
            1DDDB : 0D0A             
    1706/   1DDDD : 445B 3C61 6472      	DC.B	"D[<adr>] :Dump Memory",CR,LF
            1DDE3 : 3E5D 203A 4475 
            1DDE9 : 6D70 204D 656D 
            1DDEF : 6F72 790D 0A       
    1707/   1DDF4 : 475B 535D 5B3C      	DC.B	"G[S][<adr>] :Go(S:Supervisor)",CR,LF
 AS V1.42 Beta [Bld 246] - Source File emu68kmon_RevB01.asm - Page 31 - 11/1/2023 17:44:20


            1DDFA : 6164 723E 5D20 
            1DE00 : 3A47 6F28 533A 
            1DE06 : 5375 7065 7276 
            1DE0C : 6973 6F72 290D 0A 
    1708/   1DE13 : 4C5B 3C6F 6666      	DC.B	"L[<offset>] :Load HexFile",CR,LF
            1DE19 : 7365 743E 5D20 
            1DE1F : 3A4C 6F61 6420 
            1DE25 : 4865 7846 696C 
            1DE2B : 650D 0A          
    1709/   1DE2E : 5028 497C 5329      	DC.B	"P(I|S)<adr,adr> :Save HexFile(I:Intel,S:Motorola)",CR,LF
            1DE34 : 3C61 6472 2C61 
            1DE3A : 6472 3E20 3A53 
            1DE40 : 6176 6520 4865 
            1DE46 : 7846 696C 6528 
            1DE4C : 493A 496E 7465 
            1DE52 : 6C2C 533A 4D6F 
            1DE58 : 746F 726F 6C61 
            1DE5E : 290D 0A          
    1710/   1DE61 : 525B 3C72 6567      	DC.B	"R[<reg>] :Set or Dump Register",CR,LF
            1DE67 : 3E5D 203A 5365 
            1DE6D : 7420 6F72 2044 
            1DE73 : 756D 7020 5265 
            1DE79 : 6769 7374 6572 
            1DE7F : 0D0A             
    1711/   1DE81 : 535B 3C61 6472      	DC.B	"S[<adr>] :Set Memory",CR,LF,$00
            1DE87 : 3E5D 203A 5365 
            1DE8D : 7420 4D65 6D6F 
            1DE93 : 7279 0D0A 00       
    1712/   1DE98 :                     
    1713/   1DE98 : 0D0A 556E 6976      OPNMSG:	DC.B	CR,LF,"Universal Monitor 68000",CR,LF,$00
            1DE9E : 6572 7361 6C20 
            1DEA4 : 4D6F 6E69 746F 
            1DEAA : 7220 3638 3030 
            1DEB0 : 300D 0A00          
    1714/   1DEB4 :                     
    1715/   1DEB4 : 5D20 00             PROMPT:	DC.B	"] ",$00
    1716/   1DEB7 :                     
    1717/   1DEB7 : 4572 726F 7220      IHEMSG:	DC.B	"Error ihex",CR,LF,$00
            1DEBD : 6968 6578 0D0A 00 
    1718/   1DEC4 : 4572 726F 7220      SHEMSG:	DC.B	"Error srec",CR,LF,$00
            1DECA : 7372 6563 0D0A 00 
    1719/   1DED1 : 4572 726F 720D      ERRMSG:	DC.B	"Error",CR,LF,$00
            1DED7 : 0A00             
    1720/   1DED9 :                     
    1721/   1DED9 : 203A 00             DSEP0:	DC.B	" :",$00
    1722/   1DEDC : 203A 2000           DSEP1:	DC.B	" : ",$00
    1723/   1DEE0 : 3A30 3030 3030      IHEXER:	DC.B	":00000001FF",CR,LF,$00
            1DEE6 : 3030 3146 460D 
            1DEEC : 0A00             
    1724/   1DEEE : 5339 3033 3030      SRECER: DC.B	"S9030000FC",CR,LF,$00
            1DEF4 : 3030 4643 0D0A 00 
    1725/   1DEFB :                     
    1726/   1DEFB : =>TRUE              	IF USE_IDENT
    1727/   1DEFB :                     
    1728/   1DEFB : 4D43 3638 3030      IM000:	DC.B	"MC68000",CR,LF,$00
            1DF01 : 300D 0A00          
    1729/   1DF05 : 4D43 3638 3031      IM010:	DC.B	"MC68010",CR,LF,$00
            1DF0B : 300D 0A00          
    1730/   1DF0F : 4D43 3638 3032      IM020:	DC.B	"MC68020",CR,LF,$00
            1DF15 : 300D 0A00          
 AS V1.42 Beta [Bld 246] - Source File emu68kmon_RevB01.asm - Page 32 - 11/1/2023 17:44:20


    1731/   1DF19 : 4D43 3638 3033      IM030:	DC.B	"MC68030",CR,LF,$00
            1DF1F : 300D 0A00          
    1732/   1DF23 :                     
    1733/   1DF23 :                     	;; Module Descriptor for CALLM
    1734/   1DF23 :                     	ALIGN	4
    1735/   1DF24 :                     MDESC:
    1736/   1DF24 : 0000 0000           	DC.L	$00000000	; Opt=000, Type=$00, AL=$00
    1737/   1DF28 : 0001 DDAE           	DC.L	DMYRTM		; Module Entry Word Pointer
    1738/   1DF2C : 0000 0000           	DC.L	$00000000	; Module Data Area Pointer
    1739/   1DF30 : 0000 0000           	DC.L	$00000000
    1740/   1DF34 :                     
    1741/   1DF34 : [1726]              	ENDIF
    1742/   1DF34 :                     
    1743/   1DF34 :                     BUSERR_M:
    1744/   1DF34 : 4275 7320 4572      	DC.B	"Bus Error",$00
            1DF3A : 726F 7200          
    1745/   1DF3E :                     ADDERR_M:
    1746/   1DF3E : 4164 6472 6573      	DC.B	"Address Error",$00
            1DF44 : 7320 4572 726F 
            1DF4A : 7200             
    1747/   1DF4C :                     ILLINS_M:
    1748/   1DF4C : 496C 6C65 6761      	DC.B	"Illegal Instruction",$00
            1DF52 : 6C20 496E 7374 
            1DF58 : 7275 6374 696F 
            1DF5E : 6E00             
    1749/   1DF60 :                     ZERDIV_M:
    1750/   1DF60 : 5A65 726F 2044      	DC.B	"Zero Divide",$00
            1DF66 : 6976 6964 6500    
    1751/   1DF6C :                     CHK_M:
    1752/   1DF6C : 4348 4B20 496E      	DC.B	"CHK Instruction",$00
            1DF72 : 7374 7275 6374 
            1DF78 : 696F 6E00          
    1753/   1DF7C :                     TRAPV_M:
    1754/   1DF7C : 5452 4150 5620      	DC.B	"TRAPV Instruction",$00
            1DF82 : 496E 7374 7275 
            1DF88 : 6374 696F 6E00    
    1755/   1DF8E :                     PRIV_M:
    1756/   1DF8E : 5072 6976 696C      	DC.B	"Privilege Violation",$00
            1DF94 : 6567 6520 5669 
            1DF9A : 6F6C 6174 696F 
            1DFA0 : 6E00             
    1757/   1DFA2 :                     TRACE_M:
    1758/   1DFA2 : 5472 6163 6500      	DC.B	"Trace",$00
    1759/   1DFA8 :                     L1010_M:
    1760/   1DFA8 : 4C69 6E65 2031      	DC.B	"Line 1010 Emulator",$00
            1DFAE : 3031 3020 456D 
            1DFB4 : 756C 6174 6F72 00 
    1761/   1DFBB :                     L1111_M:
    1762/   1DFBB : 4C69 6E65 2031      	DC.B	"Line 1111 Emulator",$00
            1DFC1 : 3131 3120 456D 
            1DFC7 : 756C 6174 6F72 00 
    1763/   1DFCE :                     FORMAT_M:
    1764/   1DFCE : 466F 726D 6174      	DC.B	"Format Error",$00
            1DFD4 : 2045 7272 6F72 00 
    1765/   1DFDB :                     TRAP0_M:
    1766/   1DFDB : 5452 4150 2023      	DC.B	"TRAP #0",$00
            1DFE1 : 3000             
    1767/   1DFE3 :                     TRAP1_M:
    1768/   1DFE3 : 5452 4150 2023      	DC.B	"TRAP #1",$00
            1DFE9 : 3100             
 AS V1.42 Beta [Bld 246] - Source File emu68kmon_RevB01.asm - Page 33 - 11/1/2023 17:44:20


    1769/   1DFEB :                     TRAP2_M:
    1770/   1DFEB : 5452 4150 2023      	DC.B	"TRAP #2",$00
            1DFF1 : 3200             
    1771/   1DFF3 :                     TRAP3_M:
    1772/   1DFF3 : 5452 4150 2023      	DC.B	"TRAP #3",$00
            1DFF9 : 3300             
    1773/   1DFFB :                     TRAP4_M:
    1774/   1DFFB : 5452 4150 2023      	DC.B	"TRAP #4",$00
            1E001 : 3400             
    1775/   1E003 :                     TRAP5_M:
    1776/   1E003 : 5452 4150 2023      	DC.B	"TRAP #5",$00
            1E009 : 3500             
    1777/   1E00B :                     TRAP6_M:
    1778/   1E00B : 5452 4150 2023      	DC.B	"TRAP #6",$00
            1E011 : 3600             
    1779/   1E013 :                     TRAP7_M:
    1780/   1E013 : 5452 4150 2023      	DC.B	"TRAP #7",$00
            1E019 : 3700             
    1781/   1E01B :                     TRAP8_M:
    1782/   1E01B : 5452 4150 2023      	DC.B	"TRAP #8",$00
            1E021 : 3800             
    1783/   1E023 :                     TRAP9_M:
    1784/   1E023 : 5452 4150 2023      	DC.B	"TRAP #9",$00
            1E029 : 3900             
    1785/   1E02B :                     TRAP10_M:
    1786/   1E02B : 5452 4150 2023      	DC.B	"TRAP #10",$00
            1E031 : 3130 00          
    1787/   1E034 :                     TRAP11_M:
    1788/   1E034 : 5452 4150 2023      	DC.B	"TRAP #11",$00
            1E03A : 3131 00          
    1789/   1E03D :                     TRAP12_M:
    1790/   1E03D : 5452 4150 2023      	DC.B	"TRAP #12",$00
            1E043 : 3132 00          
    1791/   1E046 :                     TRAP13_M:
    1792/   1E046 : 5452 4150 2023      	DC.B	"TRAP #13",$00
            1E04C : 3133 00          
    1793/   1E04F :                     TRAP14_M:
    1794/   1E04F : 5452 4150 2023      	DC.B	"TRAP #14",$00
            1E055 : 3134 00          
    1795/   1E058 :                     TRAP15_M:
    1796/   1E058 : 5452 4150 2023      	DC.B	"TRAP #15",$00
            1E05E : 3135 00          
    1797/   1E061 :                     
    1798/   1E061 :                     BREAK_M:
    1799/   1E061 : 4252 4541 4B00      	DC.B	"BREAK",$00
    1800/   1E067 :                     
    1801/   1E067 : =>TRUE              	IF USE_REGCMD
    1802/   1E067 :                     
    1803/   1E067 :                     	ALIGN	2
    1804/   1E068 : 0003                RDTAB:	DC.W	$0003		; LONG
    1805/   1E06A : 0001 E146 0001      	DC.L	RDSD07, REGD0
            1E070 : FE38             
    1806/   1E072 : 0003                	DC.W	$0003
    1807/   1E074 : 0001 E17A 0001      	DC.L	RDSC,   REGD1
            1E07A : FE3C             
    1808/   1E07C : 0003                	DC.W	$0003
    1809/   1E07E : 0001 E17A 0001      	DC.L	RDSC,   REGD2
            1E084 : FE40             
    1810/   1E086 : 0003                	DC.W	$0003
    1811/   1E088 : 0001 E17A 0001      	DC.L	RDSC,   REGD3
 AS V1.42 Beta [Bld 246] - Source File emu68kmon_RevB01.asm - Page 34 - 11/1/2023 17:44:20


            1E08E : FE44             
    1812/   1E090 : 0003                	DC.W	$0003
    1813/   1E092 : 0001 E17C 0001      	DC.L	RDSCS,  REGD4
            1E098 : FE48             
    1814/   1E09A : 0003                	DC.W	$0003
    1815/   1E09C : 0001 E17A 0001      	DC.L	RDSC,   REGD5
            1E0A2 : FE4C             
    1816/   1E0A4 : 0003                	DC.W	$0003
    1817/   1E0A6 : 0001 E17A 0001      	DC.L	RDSC,   REGD6
            1E0AC : FE50             
    1818/   1E0AE : 0003                	DC.W	$0003
    1819/   1E0B0 : 0001 E17A 0001      	DC.L	RDSC,   REGD7
            1E0B6 : FE54             
    1820/   1E0B8 :                     
    1821/   1E0B8 : 0003                	DC.W	$0003
    1822/   1E0BA : 0001 E14D 0001      	DC.L	RDSA07, REGA0
            1E0C0 : FE58             
    1823/   1E0C2 : 0003                	DC.W	$0003
    1824/   1E0C4 : 0001 E17A 0001      	DC.L	RDSC,   REGA1
            1E0CA : FE5C             
    1825/   1E0CC : 0003                	DC.W	$0003
    1826/   1E0CE : 0001 E17A 0001      	DC.L	RDSC,   REGA2
            1E0D4 : FE60             
    1827/   1E0D6 : 0003                	DC.W	$0003
    1828/   1E0D8 : 0001 E17A 0001      	DC.L	RDSC,   REGA3
            1E0DE : FE64             
    1829/   1E0E0 : 0003                	DC.W	$0003
    1830/   1E0E2 : 0001 E17C 0001      	DC.L	RDSCS,  REGA4
            1E0E8 : FE68             
    1831/   1E0EA : 0003                	DC.W	$0003
    1832/   1E0EC : 0001 E17A 0001      	DC.L	RDSC,   REGA5
            1E0F2 : FE6C             
    1833/   1E0F4 : 0003                	DC.W	$0003
    1834/   1E0F6 : 0001 E17A 0001      	DC.L	RDSC,   REGA6
            1E0FC : FE70             
    1835/   1E0FE : 0003                	DC.W	$0003
    1836/   1E100 : 0001 E17A 0001      	DC.L	RDSC,   REGA7
            1E106 : FE74             
    1837/   1E108 :                     
    1838/   1E108 : 0003                	DC.W	$0003
    1839/   1E10A : 0001 E156 0001      	DC.L	RDSPC,  REGPC
            1E110 : FE34             
    1840/   1E112 : 0003                	DC.W	$0003
    1841/   1E114 : 0001 E15C 0001      	DC.L	RDSSSP, REGSSP
            1E11A : FE78             
    1842/   1E11C : 0002                	DC.W	$0002		; WORD
    1843/   1E11E : 0001 E162 0001      	DC.L	RDSSR,  REGSR
            1E124 : FE7C             
    1844/   1E126 :                     
    1845/   1E126 : 8003                	DC.W	$8003		; LONG + (END flag for MC68000/8)
    1846/   1E128 : 0001 E167 0001      	DC.L	RDSVBR, REGVBR
            1E12E : FE7E             
    1847/   1E130 : 8001                	DC.W	$8001		; BYTE
    1848/   1E132 : 0001 E16E 0001      	DC.L	RDSSFC, REGSFC
            1E138 : FE82             
    1849/   1E13A : 8001                	DC.W	$8001		; BYTE
    1850/   1E13C : 0001 E174 0001      	DC.L	RDSDFC, REGDFC
            1E142 : FE83             
    1851/   1E144 :                     
    1852/   1E144 : 0000                	DC.W	$0000		; END
 AS V1.42 Beta [Bld 246] - Source File emu68kmon_RevB01.asm - Page 35 - 11/1/2023 17:44:20


    1853/   1E146 :                     
    1854/   1E146 : 4430 2D44 373D 00   RDSD07:	DC.B	"D0-D7=",$00
    1855/   1E14D : 0D0A 4130 2D41      RDSA07:	DC.B	CR,LF,"A0-A7=",$00
            1E153 : 373D 00          
    1856/   1E156 : 0D0A 5043 3D00      RDSPC:	DC.B	CR,LF,"PC=",$00
    1857/   1E15C : 2053 5350 3D00      RDSSSP:	DC.B	" SSP=",$00
    1858/   1E162 : 2053 523D 00        RDSSR:	DC.B	" SR=",$00
    1859/   1E167 : 2020 5642 523D 00   RDSVBR:	DC.B	"  VBR=",$00
    1860/   1E16E : 2053 4643 3D00      RDSSFC:	DC.B	" SFC=",$00
    1861/   1E174 : 2044 4643 3D00      RDSDFC:	DC.B	" DFC=",$00
    1862/   1E17A : 2C00                RDSC:	DC.B	",",$00
    1863/   1E17C : 2C20 00             RDSCS:	DC.B	", ",$00
    1864/   1E17F :                     
    1865/   1E17F :                     	ALIGN	2
    1866/   1E180 :                     RNTAB:
    1867/   1E180 : 410F                	DC.B	'A',$0F		; "A?"
    1868/   1E182 : 0001 E1C6 0000      	DC.L	RNTABA,0
            1E188 : 0000             
    1869/   1E18A : 430F                	DC.B	'C',$0F		; "C?"
    1870/   1E18C : 0001 E220 0000      	DC.L	RNTABC,0
            1E192 : 0000             
    1871/   1E194 : 440F                	DC.B	'D',$0F		; "D?"
    1872/   1E196 : 0001 E234 0000      	DC.L	RNTABD,0
            1E19C : 0000             
    1873/   1E19E : 500F                	DC.B	'P',$0F		; "P?"
    1874/   1E1A0 : 0001 E298 0000      	DC.L	RNTABP,0
            1E1A6 : 0000             
    1875/   1E1A8 : 530F                	DC.B	'S',$0F		; "S?"
    1876/   1E1AA : 0001 E2AC 0000      	DC.L	RNTABS,0
            1E1B0 : 0000             
    1877/   1E1B2 : 560F                	DC.B	'V',$0F		; "V?"
    1878/   1E1B4 : 0001 E2D4 0000      	DC.L	RNTABV,0
            1E1BA : 0000             
    1879/   1E1BC :                     
    1880/   1E1BC : 0000                	DC.B	$00,$00		; End mark
    1881/   1E1BE : 0000 0000 0000      	DC.L	0,0
            1E1C4 : 0000             
    1882/   1E1C6 :                     
    1883/   1E1C6 :                     RNTABA:
    1884/   1E1C6 : 3003                	DC.B	'0',3		; "A0"
    1885/   1E1C8 : 0001 FE58 0001      	DC.L	REGA0, RNA0
            1E1CE : E34C             
    1886/   1E1D0 : 3103                	DC.B	'1',3		; "A1"
    1887/   1E1D2 : 0001 FE5C 0001      	DC.L	REGA1, RNA1
            1E1D8 : E34F             
    1888/   1E1DA : 3203                	DC.B	'2',3		; "A2"
    1889/   1E1DC : 0001 FE60 0001      	DC.L	REGA2, RNA2
            1E1E2 : E352             
    1890/   1E1E4 : 3303                	DC.B	'3',3		; "A3"
    1891/   1E1E6 : 0001 FE64 0001      	DC.L	REGA3, RNA3
            1E1EC : E355             
    1892/   1E1EE : 3403                	DC.B	'4',3		; "A4"
    1893/   1E1F0 : 0001 FE68 0001      	DC.L	REGA4, RNA4
            1E1F6 : E358             
    1894/   1E1F8 : 3503                	DC.B	'5',3		; "A5"
    1895/   1E1FA : 0001 FE6C 0001      	DC.L	REGA5, RNA5
            1E200 : E35B             
    1896/   1E202 : 3603                	DC.B	'6',3		; "A6"
    1897/   1E204 : 0001 FE70 0001      	DC.L	REGA6, RNA6
            1E20A : E35E             
 AS V1.42 Beta [Bld 246] - Source File emu68kmon_RevB01.asm - Page 36 - 11/1/2023 17:44:20


    1898/   1E20C : 3703                	DC.B	'7',3		; "A7"
    1899/   1E20E : 0001 FE74 0001      	DC.L	REGA7, RNA7
            1E214 : E361             
    1900/   1E216 :                     
    1901/   1E216 : 0000                	DC.B	$00,$00		; End mark
    1902/   1E218 : 0000 0000 0000      	DC.L	0,0
            1E21E : 0000             
    1903/   1E220 :                     
    1904/   1E220 :                     RNTABC:
    1905/   1E220 : 430F                	DC.B	'C', $0F	; "CC"
    1906/   1E222 : 0001 E2E8 0000      	DC.L	RNTABCC, 0
            1E228 : 0000             
    1907/   1E22A :                     
    1908/   1E22A : 0000                	DC.B	$00,$00		; End mark
    1909/   1E22C : 0000 0000 0000      	DC.L	0,0
            1E232 : 0000             
    1910/   1E234 :                     
    1911/   1E234 :                     RNTABD:
    1912/   1E234 : 3003                	DC.B	'0',3		; "D0"
    1913/   1E236 : 0001 FE38 0001      	DC.L	REGD0, RND0
            1E23C : E368             
    1914/   1E23E : 3103                	DC.B	'1',3		; "D1"
    1915/   1E240 : 0001 FE3C 0001      	DC.L	REGD1, RND1
            1E246 : E36B             
    1916/   1E248 : 3203                	DC.B	'2',3		; "D2"
    1917/   1E24A : 0001 FE40 0001      	DC.L	REGD2, RND2
            1E250 : E36E             
    1918/   1E252 : 3303                	DC.B	'3',3		; "D3"
    1919/   1E254 : 0001 FE44 0001      	DC.L	REGD3, RND3
            1E25A : E371             
    1920/   1E25C : 3403                	DC.B	'4',3		; "D4"
    1921/   1E25E : 0001 FE48 0001      	DC.L	REGD4, RND4
            1E264 : E374             
    1922/   1E266 : 3503                	DC.B	'5',3		; "D5"
    1923/   1E268 : 0001 FE4C 0001      	DC.L	REGD5, RND5
            1E26E : E377             
    1924/   1E270 : 3603                	DC.B	'6',3		; "D6"
    1925/   1E272 : 0001 FE50 0001      	DC.L	REGD6, RND6
            1E278 : E37A             
    1926/   1E27A : 3703                	DC.B	'7',3		; "D7"
    1927/   1E27C : 0001 FE54 0001      	DC.L	REGD7, RND7
            1E282 : E37D             
    1928/   1E284 : 460F                	DC.B	'F', $0F	; "DF?"
    1929/   1E286 : 0001 E2FC 0000      	DC.L	RNTABDF, 0
            1E28C : 0000             
    1930/   1E28E :                     
    1931/   1E28E : 0000                	DC.B	$00,$00		; End mark
    1932/   1E290 : 0000 0000 0000      	DC.L	0,0
            1E296 : 0000             
    1933/   1E298 :                     
    1934/   1E298 :                     RNTABP:
    1935/   1E298 : 4303                	DC.B	'C',3		; "PC"
    1936/   1E29A : 0001 FE34 0001      	DC.L	REGPC, RNPC
            1E2A0 : E384             
    1937/   1E2A2 :                     
    1938/   1E2A2 : 0000                	DC.B	$00,$00		; End mark
    1939/   1E2A4 : 0000 0000 0000      	DC.L	0,0
            1E2AA : 0000             
    1940/   1E2AC :                     
    1941/   1E2AC :                     RNTABS:
 AS V1.42 Beta [Bld 246] - Source File emu68kmon_RevB01.asm - Page 37 - 11/1/2023 17:44:20


    1942/   1E2AC : 460F                	DC.B	'F', $0F	; "SF?"
    1943/   1E2AE : 0001 E310 0000      	DC.L	RNTABSF, 0
            1E2B4 : 0000             
    1944/   1E2B6 : 5202                	DC.B	'R', 2		; "SR"
    1945/   1E2B8 : 0001 FE7C 0001      	DC.L	REGSR, RNSR
            1E2BE : E38B             
    1946/   1E2C0 : 530F                	DC.B	'S', $0F	; "SS?"
    1947/   1E2C2 : 0001 E324 0000      	DC.L	RNTABSS, 0
            1E2C8 : 0000             
    1948/   1E2CA :                     
    1949/   1E2CA : 0000                	DC.B	$00,$00		; End mark
    1950/   1E2CC : 0000 0000 0000      	DC.L	0,0
            1E2D2 : 0000             
    1951/   1E2D4 :                     
    1952/   1E2D4 :                     RNTABV:
    1953/   1E2D4 : 420F                	DC.B	'B', $0F	; "VB?"
    1954/   1E2D6 : 0001 E338 0000      	DC.L	RNTABVB, 0
            1E2DC : 0000             
    1955/   1E2DE :                     
    1956/   1E2DE : 0000                	DC.B	$00,$00		; End mark
    1957/   1E2E0 : 0000 0000 0000      	DC.L	0,0
            1E2E6 : 0000             
    1958/   1E2E8 :                     
    1959/   1E2E8 :                     RNTABCC:
    1960/   1E2E8 : 5201                	DC.B	'R', 1		; "CCR"
    1961/   1E2EA : 0001 FE7D 0001      	DC.L	REGSR+1, RNCCR
            1E2F0 : E364             
    1962/   1E2F2 :                     
    1963/   1E2F2 : 0000                	DC.B	$00,$00		; End mark
    1964/   1E2F4 : 0000 0000 0000      	DC.L	0,0
            1E2FA : 0000             
    1965/   1E2FC :                     
    1966/   1E2FC :                     RNTABDF:
    1967/   1E2FC : 4381                	DC.B	'C', $81	; "DFC"
    1968/   1E2FE : 0001 FE83 0001      	DC.L	REGDFC, RNDFC
            1E304 : E380             
    1969/   1E306 :                     
    1970/   1E306 : 0000                	DC.B	$00,$00		; End mark
    1971/   1E308 : 0000 0000 0000      	DC.L	0,0
            1E30E : 0000             
    1972/   1E310 :                     
    1973/   1E310 :                     RNTABSF:
    1974/   1E310 : 4381                	DC.B	'C', $81	; "SFC"
    1975/   1E312 : 0001 FE82 0001      	DC.L	REGSFC, RNSFC
            1E318 : E387             
    1976/   1E31A :                     
    1977/   1E31A : 0000                	DC.B	$00,$00		; End mark
    1978/   1E31C : 0000 0000 0000      	DC.L	0,0
            1E322 : 0000             
    1979/   1E324 :                     
    1980/   1E324 :                     RNTABSS:
    1981/   1E324 : 5003                	DC.B	'P', 3		; "SSP"
    1982/   1E326 : 0001 FE78 0001      	DC.L	REGSSP, RNSSP
            1E32C : E38E             
    1983/   1E32E :                     
    1984/   1E32E : 0000                	DC.B	$00,$00		; End mark
    1985/   1E330 : 0000 0000 0000      	DC.L	0,0
            1E336 : 0000             
    1986/   1E338 :                     
    1987/   1E338 :                     RNTABVB:
 AS V1.42 Beta [Bld 246] - Source File emu68kmon_RevB01.asm - Page 38 - 11/1/2023 17:44:20


    1988/   1E338 : 5283                	DC.B	'R', $83	; "VBR"
    1989/   1E33A : 0001 FE7E 0001      	DC.L	REGVBR, RNVBR
            1E340 : E392             
    1990/   1E342 :                     
    1991/   1E342 : 0000                	DC.B	$00,$00		; End mark
    1992/   1E344 : 0000 0000 0000      	DC.L	0,0
            1E34A : 0000             
    1993/   1E34C :                     
    1994/   1E34C : 4130 00             RNA0:	DC.B	"A0",$00
    1995/   1E34F : 4131 00             RNA1:	DC.B	"A1",$00
    1996/   1E352 : 4132 00             RNA2:	DC.B	"A2",$00
    1997/   1E355 : 4133 00             RNA3:	DC.B	"A3",$00
    1998/   1E358 : 4134 00             RNA4:	DC.B	"A4",$00
    1999/   1E35B : 4135 00             RNA5:	DC.B	"A5",$00
    2000/   1E35E : 4136 00             RNA6:	DC.B	"A6",$00
    2001/   1E361 : 4137 00             RNA7:	DC.B	"A7",$00
    2002/   1E364 : 4343 5200           RNCCR:	DC.B	"CCR",$00
    2003/   1E368 : 4430 00             RND0:	DC.B	"D0",$00
    2004/   1E36B : 4431 00             RND1:	DC.B	"D1",$00
    2005/   1E36E : 4432 00             RND2:	DC.B	"D2",$00
    2006/   1E371 : 4433 00             RND3:	DC.B	"D3",$00
    2007/   1E374 : 4434 00             RND4:	DC.B	"D4",$00
    2008/   1E377 : 4435 00             RND5:	DC.B	"D5",$00
    2009/   1E37A : 4436 00             RND6:	DC.B	"D6",$00
    2010/   1E37D : 4437 00             RND7:	DC.B	"D7",$00
    2011/   1E380 : 4446 4300           RNDFC:	DC.B	"DFC",$00
    2012/   1E384 : 5043 00             RNPC:	DC.B	"PC",$00
    2013/   1E387 : 5346 4300           RNSFC:	DC.B	"SFC",$00
    2014/   1E38B : 5352 00             RNSR:	DC.B	"SR",$00
    2015/   1E38E : 5353 5000           RNSSP:	DC.B	"SSP",$00
    2016/   1E392 : 5642 5200           RNVBR:	DC.B	"VBR",$00
    2017/   1E396 :                     
    2018/   1E396 : 0001 E3D6 0001      FCTAB:	DC.L	FCN0,FCN1,FCN2,FCN3
            1E39C : E3DC 0001 E3E7 
            1E3A2 : 0001 E3F5          
    2019/   1E3A6 : 0001 E3FB 0001      	DC.L	FCN4,FCN5,FCN6,FCN7
            1E3AC : E401 0001 E412 
            1E3B2 : 0001 E426          
    2020/   1E3B6 : 0001 E3D6 0001      FCTAB2:	DC.L	FCN0,FCN1,FCN2,FCN3
            1E3BC : E3DC 0001 E3E7 
            1E3C2 : 0001 E3F5          
    2021/   1E3C6 : 0001 E3FB 0001      	DC.L	FCN4,FCN5,FCN6,FCN7A
            1E3CC : E401 0001 E412 
            1E3D2 : 0001 E43D          
    2022/   1E3D6 : 4643 3D30 2000      FCN0:	DC.B	"FC=0 ",$00
    2023/   1E3DC : 5573 6572 2044      FCN1:	DC.B	"User Data ",$00
            1E3E2 : 6174 6120 00       
    2024/   1E3E7 : 5573 6572 2050      FCN2:	DC.B	"User Program ",$00
            1E3ED : 726F 6772 616D 
            1E3F3 : 2000             
    2025/   1E3F5 : 4643 3D33 2000      FCN3:	DC.B	"FC=3 ",$00
    2026/   1E3FB : 4643 3D34 2000      FCN4:	DC.B	"FC=4 ",$00
    2027/   1E401 : 5375 7065 7276      FCN5:	DC.B	"Supervisor Data ",$00
            1E407 : 6973 6F72 2044 
            1E40D : 6174 6120 00       
    2028/   1E412 : 5375 7065 7276      FCN6:	DC.B	"Supervisor Program ",$00
            1E418 : 6973 6F72 2050 
            1E41E : 726F 6772 616D 
            1E424 : 2000             
    2029/   1E426 : 496E 7465 7272      FCN7:	DC.B	"Interrupt Acknowledge ",$00
 AS V1.42 Beta [Bld 246] - Source File emu68kmon_RevB01.asm - Page 39 - 11/1/2023 17:44:20


            1E42C : 7570 7420 4163 
            1E432 : 6B6E 6F77 6C65 
            1E438 : 6467 6520 00       
    2030/   1E43D : 4350 5520 00        FCN7A:	DC.B	"CPU ",$00
    2031/   1E442 : 5772 6974 6520 00   G0WR:	DC.B	"Write ",$00
    2032/   1E449 : 5265 6164 2000      G0RD:	DC.B	"Read ",$00
    2033/   1E44F : 2020 2849 6E73      G0INS0:	DC.B	"  (Inst=",$00
            1E455 : 743D 00          
    2034/   1E458 : 4279 7465 2000      G0BYTE:	DC.B	"Byte ",$00
    2035/   1E45E : 576F 7264 2000      G0WORD:	DC.B	"Word ",$00
    2036/   1E464 : 2074 6F20 00        G0TO:	DC.B	" to ",$00
    2037/   1E469 : 6672 6F6D 2000      G0FROM:	DC.B	"from ",$00
    2038/   1E46F : 5370 6163 6520 00   G0SPC:	DC.B	"Space ",$00
    2039/   1E476 : 2028 496E 7374      G0IF:	DC.B	" (Instruction Fetch)",$00
            1E47C : 7275 6374 696F 
            1E482 : 6E20 4665 7463 
            1E488 : 6829 00          
    2040/   1E48B : 2028 5265 6164      G0RMW:	DC.B	" (Read Modify Write)",$00
            1E491 : 204D 6F64 6966 
            1E497 : 7920 5772 6974 
            1E49D : 6529 00          
    2041/   1E4A0 : [1801]              	ENDIF
    2042/   1E4A0 :                     
    2043/   1E4A0 :                     	;; Stack frame size (WORD) for each format
    2044/   1E4A0 :                     FMTLEN:
    2045/   1E4A0 : 04                  	DC.B	4		; 0000 (68010,68020,SCC68070)
    2046/   1E4A1 : 04                  	DC.B	4		; 0001 Throw Away (68020)
    2047/   1E4A2 : 06                  	DC.B	6		; 0010 (68020)
    2048/   1E4A3 : 06                  	DC.B	6		; 0011
    2049/   1E4A4 : 08                  	DC.B	8		; 0100
    2050/   1E4A5 : 00                  	DC.B	0		; 0101
    2051/   1E4A6 : 00                  	DC.B	0		; 0110
    2052/   1E4A7 : 1E                  	DC.B	30		; 0111
    2053/   1E4A8 : 1D                  	DC.B	29		; 1000 Bus Error, Address Error (68010)
    2054/   1E4A9 : 0A                  	DC.B	10		; 1001 Coprocessor Midinstruction (68020)
    2055/   1E4AA : 10                  	DC.B	16		; 1010 Short Bus Fault (68020,68030)
    2056/   1E4AB : 2E                  	DC.B	46		; 1011 Long Bus Fault (68020,68030)
    2057/   1E4AC : 0C                  	DC.B	12		; 1100 Bus Error (CPU32)
    2058/   1E4AD : 00                  	DC.B	0		; 1101
    2059/   1E4AE : 00                  	DC.B	0		; 1110
    2060/   1E4AF : 11                  	DC.B	17		; 1111 (SCC68070)
    2061/   1E4B0 :                     
    2062/   1E4B0 :                     
    2063/   1E4B0 :                     	ALIGN	2
    2064/   1E4B0 :                     
    2065/   1E4B0 :                     ;;;
    2066/   1E4B0 :                     ;;;	MC6850 (ACIA) Console Driver
    2067/   1E4B0 :                     ;;;
    2068/   1E4B0 :                     
    2069/   1E4B0 :                     INIT:
    2070/   1E4B0 :                     ;	MOVE.B	#$03,ACIAC	; Master reset
    2071/   1E4B0 :                     ;	NOP
    2072/   1E4B0 :                     ;	NOP
    2073/   1E4B0 :                     ;	MOVE.B	#CR_V,ACIAC	; x16 8bit N 1
    2074/   1E4B0 :                     
    2075/   1E4B0 : 4E75                	RTS
    2076/   1E4B2 :                     
    2077/   1E4B2 :                     CONIN:
    2078/   1E4B2 : 1039 4000 0001      	MOVE.B	ACIAC,D0
    2079/   1E4B8 : C03C 0001           	AND.B	#$01,D0
 AS V1.42 Beta [Bld 246] - Source File emu68kmon_RevB01.asm - Page 40 - 11/1/2023 17:44:20


    2080/   1E4BC : 67F4                	BEQ	CONIN
    2081/   1E4BE : 1039 4000 0000      	MOVE.B	ACIAD,D0
    2082/   1E4C4 :                     
    2083/   1E4C4 : 4E75                	RTS
    2084/   1E4C6 :                     
    2085/   1E4C6 :                     CONST:
    2086/   1E4C6 : 1039 4000 0001      	MOVE.B	ACIAC,D0
    2087/   1E4CC : C03C 0001           	AND.B	#$01,D0
    2088/   1E4D0 :                     
    2089/   1E4D0 : 4E75                	RTS
    2090/   1E4D2 :                     
    2091/   1E4D2 :                     CONOUT:
    2092/   1E4D2 : 4840                	SWAP	D0
    2093/   1E4D4 :                     CO0:
    2094/   1E4D4 : 1039 4000 0001      	MOVE.B	ACIAC,D0
    2095/   1E4DA : C03C 0002           	AND.B	#$02,D0
    2096/   1E4DE : 67F4                	BEQ	CO0
    2097/   1E4E0 : 4840                	SWAP	D0
    2098/   1E4E2 : 13C0 4000 0000      	MOVE.B	D0,ACIAD
    2099/   1E4E8 :                     
    2100/   1E4E8 : 4E75                	RTS
    2101/   1E4EA :                     
    2102/   1E4EA :                     ROM_E:
    2103/   1E4EA :                     
    2104/   1E4EA : FFFF FFFF FFFF      	DC.B	[(*+$100)&$FFFFFF00-*]$FF
            1E4F0 : FFFF FFFF FFFF 
            1E4F6 : FFFF FFFF FFFF 
            1E4FC : FFFF FFFF          
    2105/   1E500 :                     
    2106/   1E500 :                     ;;;
    2107/   1E500 :                     ;;; RAM area
    2108/   1E500 :                     ;;;
    2109/   1E500 :                     
    2110/   1FE00 :                     	ORG	WORK_B
    2111/   1FE00 :                     
    2112/   1FE00 :                     INBUF:	DS.B	BUFLEN		; Line input buffer
    2113/   1FE18 :                     DSADDR:	DS.L	1		; DUMP start address
    2114/   1FE1C :                     DEADDR:	DS.L	1
    2115/   1FE20 :                     DSTATE:	DS.B	1
    2116/   1FE21 :                     	ALIGN	2
    2117/   1FE22 :                     GADDR:	DS.L	1
    2118/   1FE26 :                     SADDR:	DS.L	1		; SET address
    2119/   1FE2A :                     HEXMOD:	DS.B	1		; HEX file mode
    2120/   1FE2B :                     RECTYP:	DS.B	1		; Record type
    2121/   1FE2C :                     PSPEC:	DS.B	1		; Processor spec.
    2122/   1FE2D :                     GOMOD:	DS.B	1		; Go mode
    2123/   1FE2E :                     
    2124/   1FE2E :                     	ALIGN	2
    2125/   1FE2E :                     
    2126/   1FE2E :                     EXMSG:	DS.L	1		; Exception message
    2127/   1FE32 :                     EXGRP:	DS.W	1		; Exception Group
    2128/   1FE34 :                     
    2129/   1FE34 :                     REG_B:
    2130/   1FE34 :                     REGPC:	DS.L	1
    2131/   1FE38 :                     
    2132/   1FE38 :                     REGD0:	DS.L	1
    2133/   1FE3C :                     REGD1:	DS.L	1
    2134/   1FE40 :                     REGD2:	DS.L	1
    2135/   1FE44 :                     REGD3:	DS.L	1
    2136/   1FE48 : =>TRUE              	IF USE_REGCMD
 AS V1.42 Beta [Bld 246] - Source File emu68kmon_RevB01.asm - Page 41 - 11/1/2023 17:44:20


    2137/   1FE48 :                     REGD4:	DS.L	1
    2138/   1FE4C :                     REGD5:	DS.L	1
    2139/   1FE50 :                     REGD6:	DS.L	1
    2140/   1FE54 :                     REGD7:	DS.L	1
    2141/   1FE58 : [2136]              	ENDIF
    2142/   1FE58 :                     
    2143/   1FE58 :                     REGA0:	DS.L	1
    2144/   1FE5C :                     REGA1:	DS.L	1
    2145/   1FE60 :                     REGA2:	DS.L	1
    2146/   1FE64 :                     REGA3:	DS.L	1
    2147/   1FE68 : =>TRUE              	IF USE_REGCMD
    2148/   1FE68 :                     REGA4:	DS.L	1
    2149/   1FE6C :                     REGA5:	DS.L	1
    2150/   1FE70 :                     REGA6:	DS.L	1
    2151/   1FE74 :                     REGA7:	DS.L	1		; USP
    2152/   1FE78 :                     
    2153/   1FE78 :                     REGSSP:	DS.L	1
    2154/   1FE7C :                     REGSR:	DS.W	1
    2155/   1FE7E :                     REGVBR:	DS.L	1
    2156/   1FE82 :                     REGSFC:	DS.B	1
    2157/   1FE83 :                     REGDFC:	DS.B	1
    2158/   1FE84 :                     
    2159/   1FE84 :                     GR0BUF:	DS.W	46-4		; Group 0 exception
    2160/   1FED8 :                     REGFV:	DS.W	1		; Format / Vector offset
    2161/   1FEDA :                     REG_E:
    2162/   1FEDA :                     
    2163/   1FEDA : [2147]              	ENDIF
    2164/   1FEDA :                     
    2165/   1FEDA :                     	END
 AS V1.42 Beta [Bld 246] - Source File emu68kmon_RevB01.asm - Page 42 - 11/1/2023 17:44:20


  Symbol Table (* = unused):
  --------------------------

 ACIAC :                   40000001 - |  ACIAD :                   40000000 - |
 ADDERR_H :                   1D866 C |  ADDERR_M :                   1DF3E C |
*ARCHITECTURE :                                        "i386-unknown-win32" - |
 BOOT :                       1D6EC C |  BREAK :                      1D8F0 C |
 BREAK_M :                    1E061 C |  BS :                             8 - |
 BUFLEN :                        18 - |  BUSERR_H :                   1D852 C |
 BUSERR_M :                   1DF34 C | *CASESENSITIVE :                  0 - |
 CH0 :                        1DB2C C |  CH1 :                        1DB8C C |
 CH2 :                        1DB92 C |  CH4 :                        1DBB0 C |
 CHK_H :                      1D91C C |  CHK_M :                      1DF6C C |
 CMDHLP :                     1D706 C |  CO0 :                        1E4D4 C |
 COMM_H :                     1DB08 C |  COMM_H0 :                    1DB10 C |
 CONIN :                      1E4B2 C |  CONOUT :                     1E4D2 C |
 CONST :                      1E4C6 C | *CONSTPI :        3.141592653589793 - |
 CPY_MON :                       D4 C |  CR :                             D - |
 CRLF :                       1D786 C |  CSTART :                     1D000 C |
*DATE :                 "11/1/2023" - |  DEADDR :                     1FE1C C |
 DEL :                           7F - |  DMYRTM :                     1DDAE C |
 DP0 :                        1D144 C |  DP1 :                        1D166 C |
 DPB :                        1D216 C |  DPB0 :                       1D22A C |
 DPB1 :                       1D23C C |  DPB2 :                       1D240 C |
 DPB3 :                       1D258 C |  DPL :                        1D1BE C |
 DPL0 :                       1D1D8 C |  DPL1 :                       1D1F2 C |
 DPL2 :                       1D206 C |  DPL3 :                       1D20E C |
 DPM :                        1D184 C |  DPM0 :                       1D192 C |
 DPM1 :                       1D1B0 C |  DSADDR :                     1FE18 C |
 DSEP0 :                      1DED9 C |  DSEP1 :                      1DEDC C |
*DSTATE :                     1FE20 C |  DUMMY_H :                    1D850 C |
 DUMP :                       1D11A C |  ENTRY :                         C0 C |
 ERR :                        1D10E C |  ERRMSG :                     1DED1 C |
 EXGRP :                      1FE32 C |  EXMSG :                      1FE2E C |
*FALSE :                          0 - |  FCN0 :                       1E3D6 C |
 FCN1 :                       1E3DC C |  FCN2 :                       1E3E7 C |
 FCN3 :                       1E3F5 C |  FCN4 :                       1E3FB C |
 FCN5 :                       1E401 C |  FCN6 :                       1E412 C |
 FCN7 :                       1E426 C |  FCN7A :                      1E43D C |
 FCTAB :                      1E396 C |  FCTAB2 :                     1E3B6 C |
 FMTLEN :                     1E4A0 C |  FORMAT_H :                   1D9A0 C |
 FORMAT_M :                   1DFCE C | *FULLPMMU :                       0 - |
 G0 :                         1D296 C |  G00 :                        1D2BA C |
 G0BYTE :                     1E458 C |  G0D00 :                      1DBEE C |
 G0D01 :                      1DBF4 C |  G0D1 :                       1DC22 C |
 G0D10 :                      1DC6E C |  G0D11 :                      1DC74 C |
 G0D12 :                      1DC8C C |  G0D13 :                      1DC92 C |
 G0D14 :                      1DCBC C |  G0D15 :                      1DCC4 C |
 G0D16 :                      1DCCE C |  G0D17 :                      1DCD4 C |
 G0D18 :                      1DCF8 C |  G0D19 :                      1DD0E C |
 G0D2 :                       1DD12 C |  G0D20 :                      1DD1E C |
 G0D3 :                       1DD1E C | *G0D9 :                       1DD1E C |
 G0D90 :                      1DD86 C |  G0D91 :                      1DDA0 C |
 G0D92 :                      1DDAA C |  G0DUMP :                     1DBB8 C |
 G0FROM :                     1E469 C |  G0IF :                       1E476 C |
 G0INS0 :                     1E44F C |  G0RD :                       1E449 C |
 G0RMW :                      1E48B C |  G0SPC :                      1E46F C |
 G0TO :                       1E464 C |  G0WORD :                     1E45E C |
 G0WR :                       1E442 C |  G1 :                         1D2DE C |
 G10 :                        1D2F4 C |  G11 :                        1D310 C |
 AS V1.42 Beta [Bld 246] - Source File emu68kmon_RevB01.asm - Page 43 - 11/1/2023 17:44:20


 GADDR :                      1FE22 C |  GETLIN :                     1D796 C |
 GL0 :                        1D79E C |  GLB :                        1D7D6 C |
 GLE :                        1D7F8 C |  GO :                         1D25E C |
 GOM0 :                       1D276 C |  GOM1 :                       1D27E C |
 GOMOD :                      1FE2D C |  GR0BUF :                     1FE84 C |
*HAS64 :                          0 - | *HASFPU :                         0 - |
*HASPMMU :                        0 - |  HEXIN :                      1D750 C |
 HEXMOD :                     1FE2A C |  HEXOUT1 :                    1D738 C |
 HEXOUT2 :                    1D730 C |  HEXOUT4 :                    1D728 C |
 HEXOUT8 :                    1D720 C |  HI0 :                        1D756 C |
 HI1 :                        1D77C C |  HIR :                        1D782 C |
 HLPMSG :                     1DDB2 C |  ID0 :                        1D07C C |
 ID1 :                        1D080 C |  ID2 :                        1D098 C |
 ID3 :                        1D098 C |  ID9 :                        1D0AA C |
 IHEMSG :                     1DEB7 C |  IHEXER :                     1DEE0 C |
 ILLINS0 :                    1D890 C |  ILLINS1 :                    1D8A0 C |
 ILLINS2 :                    1D8BE C | *ILLINS9 :                    1D8BE C |
 ILLINS_H :                   1D87A C |  ILLINS_M :                   1DF4C C |
 IM000 :                      1DEFB C |  IM010 :                      1DF05 C |
 IM020 :                      1DF0F C |  IM030 :                      1DF19 C |
 INBUF :                      1FE00 C |  INIR0 :                      1D048 C |
 INIT :                       1E4B0 C |  INIVEC :                         0 C |
*INIVECE :                       C0 C | *INSUPMODE :                      1 - |
 L1010_H :                    1D974 C |  L1010_M :                    1DFA8 C |
 L1111_H :                    1D98A C |  L1111_M :                    1DFBB C |
 LF :                             A - |  LH0 :                        1D3C0 C |
*LH1 :                        1D3D0 C |  LH2 :                        1D3D6 C |
 LH3 :                        1D3E2 C |  LHI0 :                       1D3E8 C |
 LHI1 :                       1D41C C |  LHI2 :                       1D42C C |
 LHI3 :                       1D430 C |  LHIE :                       1D444 C |
 LHS0 :                       1D452 C |  LHS1 :                       1D484 C |
 LHS2 :                       1D496 C |  LHS3 :                       1D49A C |
 LHSE :                       1D4B4 C |  LHSR :                       1D4BE C |
*LISTON :                         1 - |  LOADH :                      1D3A6 C |
*MACEXP :                         7 - |  MDESC :                      1DF24 C |
*MOMCPU :                     68030 - | *MOMCPUNAME :               "68030" - |
 MON_SEG :                    1D000 - |  MPU_SPEC :                       0 - |
*NESTMAX :                      100 - |  OPNMSG :                     1DE98 C |
*PADDING :                        1 - |  PRIV_H :                     1D948 C |
 PRIV_M :                     1DF8E C |  PROMPT :                     1DEB4 C |
 PSPEC :                      1FE2C C |  RAM_B :                         C0 - |
 RD0 :                        1D6B2 C |  RD00 :                       1D6C4 C |
 RD1 :                        1D6DA C |  RD2 :                        1D6E6 C |
 RDHEX :                      1D81C C |  RDSA07 :                     1E14D C |
 RDSC :                       1E17A C |  RDSCS :                      1E17C C |
 RDSD07 :                     1E146 C |  RDSDFC :                     1E174 C |
 RDSPC :                      1E156 C |  RDSSFC :                     1E16E C |
 RDSSR :                      1E162 C |  RDSSSP :                     1E15C C |
 RDSVBR :                     1E167 C |  RDTAB :                      1E068 C |
 RDUMP :                      1D6AC C |  RECTYP :                     1FE2B C |
 REG :                        1D5DE C |  REGA0 :                      1FE58 C |
 REGA1 :                      1FE5C C |  REGA2 :                      1FE60 C |
 REGA3 :                      1FE64 C |  REGA4 :                      1FE68 C |
 REGA5 :                      1FE6C C |  REGA6 :                      1FE70 C |
 REGA7 :                      1FE74 C |  REGD0 :                      1FE38 C |
 REGD1 :                      1FE3C C |  REGD2 :                      1FE40 C |
 REGD3 :                      1FE44 C |  REGD4 :                      1FE48 C |
 REGD5 :                      1FE4C C |  REGD6 :                      1FE50 C |
 REGD7 :                      1FE54 C |  REGDFC :                     1FE83 C |
 REGFV :                      1FED8 C |  REGPC :                      1FE34 C |
 AS V1.42 Beta [Bld 246] - Source File emu68kmon_RevB01.asm - Page 44 - 11/1/2023 17:44:20


 REGSFC :                     1FE82 C |  REGSR :                      1FE7C C |
 REGSSP :                     1FE78 C |  REGVBR :                     1FE7E C |
 REG_B :                      1FE34 C |  REG_E :                      1FEDA C |
*RELAXED :                        0 - |  RG0 :                        1D5F6 C |
 RG1 :                        1D5FC C |  RG2 :                        1D610 C |
 RG3 :                        1D626 C |  RG30 :                       1D636 C |
 RG4 :                        1D65C C |  RG5 :                        1D66A C |
 RG6 :                        1D670 C |  RG7 :                        1D698 C |
 RG8 :                        1D6A2 C |  RG9 :                        1D6A4 C |
 RGE :                        1D6A8 C |  RGR :                        1D6A4 C |
 RH0 :                        1D820 C |  RH1 :                        1D840 C |
 RHE :                        1D84E C |  RNA0 :                       1E34C C |
 RNA1 :                       1E34F C |  RNA2 :                       1E352 C |
 RNA3 :                       1E355 C |  RNA4 :                       1E358 C |
 RNA5 :                       1E35B C |  RNA6 :                       1E35E C |
 RNA7 :                       1E361 C |  RNCCR :                      1E364 C |
 RND0 :                       1E368 C |  RND1 :                       1E36B C |
 RND2 :                       1E36E C |  RND3 :                       1E371 C |
 RND4 :                       1E374 C |  RND5 :                       1E377 C |
 RND6 :                       1E37A C |  RND7 :                       1E37D C |
 RNDFC :                      1E380 C |  RNPC :                       1E384 C |
 RNSFC :                      1E387 C |  RNSR :                       1E38B C |
 RNSSP :                      1E38E C |  RNTAB :                      1E180 C |
 RNTABA :                     1E1C6 C |  RNTABC :                     1E220 C |
 RNTABCC :                    1E2E8 C |  RNTABD :                     1E234 C |
 RNTABDF :                    1E2FC C |  RNTABP :                     1E298 C |
 RNTABS :                     1E2AC C |  RNTABSF :                    1E310 C |
 RNTABSS :                    1E324 C |  RNTABV :                     1E2D4 C |
 RNTABVB :                    1E338 C |  RNVBR :                      1E392 C |
 ROM_B :                          0 - |  ROM_E :                      1E4EA C |
 SADDR :                      1FE26 C |  SAVEH :                      1D4C2 C |
 SETM :                       1D318 C |  SH0 :                        1D4D6 C |
 SH1 :                        1D4DE C | *SH2 :                        1D512 C |
 SH3 :                        1D516 C |  SH4 :                        1D534 C |
 SHEMSG :                     1DEC4 C |  SHL :                        1D542 C |
 SHL0 :                       1D54A C |  SHLI0 :                      1D580 C |
 SHLS :                       1D598 C |  SHLS0 :                      1D5C6 C |
 SKIPSP :                     1D800 C |  SM0 :                        1D338 C |
 SM1 :                        1D338 C |  SM2 :                        1D372 C |
 SM3 :                        1D382 C |  SM4 :                        1D392 C |
 SRECER :                     1DEEE C |  STACK :                      1FE00 - |
 STROE :                      1D71E C |  STROUT :                     1D712 C |
 SV_ROM :                       100 - | *TIME :                  "17:44:20" - |
 TRACE_H :                    1D95E C |  TRACE_M :                    1DFA2 C |
 TRAP0_H :                    1D9B6 C |  TRAP0_M :                    1DFDB C |
 TRAP10_H :                   1DA90 C |  TRAP10_M :                   1E02B C |
 TRAP11_H :                   1DAA4 C |  TRAP11_M :                   1E034 C |
 TRAP12_H :                   1DAB8 C |  TRAP12_M :                   1E03D C |
 TRAP13_H :                   1DACC C |  TRAP13_M :                   1E046 C |
 TRAP14_H :                   1DAE0 C |  TRAP14_M :                   1E04F C |
 TRAP15_H :                   1DAF4 C |  TRAP15_M :                   1E058 C |
 TRAP1_H :                    1D9CC C |  TRAP1_M :                    1DFE3 C |
 TRAP2_H :                    1D9E2 C |  TRAP2_M :                    1DFEB C |
 TRAP3_H :                    1D9F8 C |  TRAP3_M :                    1DFF3 C |
 TRAP4_H :                    1DA0E C |  TRAP4_M :                    1DFFB C |
 TRAP5_H :                    1DA24 C |  TRAP5_M :                    1E003 C |
 TRAP6_H :                    1DA3A C |  TRAP6_M :                    1E00B C |
 TRAP7_H :                    1DA50 C |  TRAP7_M :                    1E013 C |
 TRAP8_H :                    1DA66 C |  TRAP8_M :                    1E01B C |
 TRAP9_H :                    1DA7C C |  TRAP9_M :                    1E023 C |
 AS V1.42 Beta [Bld 246] - Source File emu68kmon_RevB01.asm - Page 45 - 11/1/2023 17:44:20


 TRAPV_H :                    1D932 C |  TRAPV_M :                    1DF7C C |
*TRUE :                           1 - |  UPPER :                      1D80A C |
 UPR :                        1D81A C |  USE_DEV_6850 :                   1 - |
 USE_IDENT :                      1 - |  USE_REGCMD :                     1 - |
 USE_SFDECODE :                   1 - |  USTACK :                     1F800 - |
*VECSIZ :                       100 - | *VERSION :                     142F - |
 WORK_B :                     1FE00 - |  WSTART :                     1D0AE C |
 ZERDIV_H :                   1D906 C |  ZERDIV_M :                   1DF60 C |

    369 symbols
     27 unused symbols

 AS V1.42 Beta [Bld 246] - Source File emu68kmon_RevB01.asm - Page 46 - 11/1/2023 17:44:20


  Defined Functions:
  ------------------

HIGH                                  | LOW                                  

 AS V1.42 Beta [Bld 246] - Source File emu68kmon_RevB01.asm - Page 47 - 11/1/2023 17:44:20


  Code Pages:
  ----------

STANDARD (0 changed characters)

1 code page

0.16 seconds assembly time

   2166 lines source file
      6 passes
      0 errors
      0 warnings
