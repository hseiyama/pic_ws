 AS V1.42 Beta [Bld 246] - Source File emuz80mon_RevB05.asm - Page 1 - 9/17/2023 2:29:37


       1/       0 :                     	page	0
       2/       0 :                     	cpu	z80
       3/       0 :                     ;;; 
       4/       0 :                     ;;; Universal Monitor for Zilog Z80
       5/       0 :                     ;;;   Copyright (C) 2019,2020,2021 Haruo Asano
       6/       0 :                     ;;;
       7/       0 :                     
       8/       0 :                     ;;; 2022.10.10 It was added functions by A.honda
       9/       0 :                     ;;; Rev.B01	add trace command
      10/       0 :                     ;;; Rev.B02	add disassemble commnand
      11/       0 :                     ;;; Rev.B03	add assemble command and PaloAltoTinyBASIC
      12/       0 :                     ;;;                and GAME80 interpreter and GAME80 compiler
      13/       0 :                     ;;; Rev.B03_1	The monitor corresponded to the SuperMEZ80
      14/       0 :                     ;;; Rev.B04	The monitor corresponded to UART XON/XOFF
      15/       0 :                     ;;; Rev.B05	add VTL
      16/       0 :                     
      17/       0 :                     
      18/       0 :                     ;;; Constants
      19/       0 : =0DH                CR	EQU	0DH
      20/       0 : =0AH                LF	EQU	0AH
      21/       0 : =8H                 BS	EQU	08H
      22/       0 : =7FH                DEL	EQU	7FH
      23/       0 : =1BH                ESC	equ	1BH
      24/       0 : =28H                BUFLEN	equ	40
      25/       0 : =7H                 NUMLEN	equ	7
      26/       0 : =8H                 F_bitSize	equ	8
      27/       0 : =4H                 NO_UPPER	equ	00000100b
      28/       0 : =2H                 NO_LF		equ	00000010b
      29/       0 : =1H                 NO_CR		equ	00000001b
      30/       0 :                     
      31/       0 :                     
      32/       0 :                     ;;;
      33/       0 :                     ;;; Memory switch
      34/       0 :                     ;;;
      35/       0 :                     
      36/       0 : =1H                 SuperMEZ80 = 1
      37/       0 : =0H                 SMEZ80Full = 0
      38/       0 : =0H                 RAM12K = 0
      39/       0 : =0H                 RAM8K = 0
      40/       0 : =0H                 BACKDOOR = 0
      41/       0 :                     
      42/       0 : =>TRUE              	IF	SuperMEZ80
      43/       0 : =0H                 UARTDR	EQU	00H	; UART DATA I/O REGISTOR
      44/       0 : =1H                 UARTCR	EQU	01H	; UART CONTROL I/O REGISTOR
      45/       0 : =0FF00H             WORK_B	equ	0FF00H	; work area EF00-EFFF
      46/       0 : =0FF00H             STACKM	equ	0FF00H	; monitor stack
      47/       0 : =0FEC0H             STACK	equ	0FEC0H	; user stack
      48/       0 : =0H                 ROM_B	equ	0000H	; program base address
      49/       0 : =0FFFFH             RAM_E	equ	0FFFFH	; RAM END address
      50/       0 : =40H                ENTRY	EQU	0040H		; Entry point
      51/       0 :                     
      52/       0 : =>TRUE              	IF SMEZ80Full = 0
      53/       0 : =40H                RAM_B		equ	ENTRY	; work area base address
      54/       0 : =0D000H             MON_SEG		equ	0d000h
      55/       0 : =60H                SV_ROM		equ	60h	; SAVE addiress for monitor code at POWER ON
      56/       0 : =>FALSE             	ELSE
      57/       0 :                     RAM_B	equ	8000H	;EMUZ80_Q84 RAM base address
      58/       0 : [52]                	ENDIF
      59/       0 :                     
      60/       0 : [42]                	ENDIF
      61/       0 :                     
      62/       0 : =>FALSE             	IF	RAM12K
      63/       0 :                     ;; ROM48K RAM12K for PIC18F47Q84
      64/       0 :                     UARTDR	EQU	0FF00H	; UART DATA REGISTOR
      65/       0 :                     UARTCR	EQU	0FF01H	; UART CONTROL REGISTOR
      66/       0 :                     WORK_B	equ	0EF00H	; work area EF00-EFFF
      67/       0 :                     STACKM	equ	0EF00H	; monitor stack
      68/       0 :                     STACK	equ	0EEC0H	; user stack
      69/       0 :                     ROM_B	equ	0000H	;EMUZ80_Q84 ROM base address
      70/       0 :                     RAM_B	equ	0C000H	;EMUZ80_Q84 RAM base address
      71/       0 :                     RAM_E	equ	0EFFFH	;EMUZ80_Q84 RAM END address
      72/       0 :                     IO_B	equ	0F000H	;EMUZ80_Q84 I/O base address
      73/       0 :                     ENTRY	EQU	0040H		; Entry point
      74/       0 :                     
      75/       0 :                     TIM0_CTL0	equ	0F800H	; timer0 control0 register
      76/       0 :                     TIM0_CTL1	equ	0F801H	; timer0 control1 register
      77/       0 :                     TIMER0_CNTL	equ	0F810H	; timer0 16bit counter LSB
      78/       0 :                     TIMER0_CNTH	equ	0F811H	; timer0 16bit counter MSB
      79/       0 :                     TIMER0_SCTL	equ	0F820H	; timer0 seconds counter LSB
      80/       0 :                     TIMER0_SCTH	equ	0F821H	; timer0 seconds counter MSB
      81/       0 :                     TIMER0_INITC	equ	87e1h	; timer adjust count number
      82/       0 : [62]                	ENDIF
      83/       0 :                     
      84/       0 : =>FALSE             	IF	RAM8K
      85/       0 :                     ; ORIGINAL MEMORY MAP for PIC18F47Q84
      86/       0 :                     UARTDR	EQU	0E000H	; UART DATA REGISTOR
      87/       0 :                     UARTCR	EQU	0E001H	; UART CONTROL REGISTOR
      88/       0 :                     WORK_B	equ	9F00H	; work area 9F00-9FFF
      89/       0 :                     STACKM	equ	9F00H	; monitor stack
      90/       0 :                     STACK	equ	9EC0H	; user stack
      91/       0 :                     ROM_B	equ	0000H	;EMUZ80_Q84 ROM base address
      92/       0 :                     RAM_B	equ	8000H	;EMUZ80_Q84 RAM base address
      93/       0 :                     RAM_E	equ	9FFFH	;EMUZ80_Q84 RAM END address
      94/       0 :                     IO_B	equ	0E000H	;EMUZ80_Q84 I/O base address
      95/       0 :                     ENTRY	EQU	0040H		; Entry point
      96/       0 : [84]                	ENDIF
      97/       0 :                     
      98/       0 : =>FALSE             	IF	SuperMEZ80 = 0
      99/       0 :                     RAM_SIZ		EQU	(RAM_E + 1) - RAM_B
     100/       0 : [98]                	ENDIF
     101/       0 :                     
     102/       0 : =2F00H              BASIC_TOP	equ	2F00H
     103/       0 : =2F00H              BASIC_CST	equ	2F00H	; basic cold start
     104/       0 : =2F03H              BASIC_WST	equ	2F03H	; basic warm start
     105/       0 :                     
     106/       0 : =4C00H              PATB_TOP	equ	4C00H
     107/       0 : =4C00H              PATB_CST	equ	4C00H	; PATB cold start
     108/       0 : =4C03H              PATB_WST	equ	4C03H	; PATB warm start
     109/       0 :                     
     110/       0 : =5400H              GM80_CST	equ	5400H	; GAME80 cold start
     111/       0 : =5403H              GM80_WST	equ	5403H	; GAME80 warm start
     112/       0 :                     
     113/       0 : =7500H              VTL_CST		equ	7500H	; VTL cold start
     114/       0 : =7503H              VTL_WST		equ	7503H	; VTL warm start
     115/       0 :                     
     116/       0 :                     ;;; 
     117/       0 :                     ;;; ROM area
     118/       0 :                     ;;;
     119/       0 :                     start:
     120/       0 :                     
     121/       0 :                     	ORG	ROM_B	; (RST 00H)
     122/       0 :                     
     123/       0 :                     E_CSTART:
     124/       0 : C3 40 00            	JP	cold_st
     125/       3 :                     
     126/       3 :                     E_WSTART:
     127/       3 : C3 7F F5            	JP	API01
     128/       6 :                     
     129/       6 : 00 00               	db	0008H - $ dup(00H)
     130/       8 :                     ;	ORG	0008H	; (RST 08H)
     131/       8 : =>FALSE             	IF	BACKDOOR
     132/       8 :                     	JP	RST08H
     133/       8 : =>TRUE              	ELSE
     134/       8 : C3 33 FC            	JP	CONOUT
     135/       B : [131]               	ENDIF
     136/       B :                     
     137/       B : 00 00 00 00 00      	db	0010H - $ dup(00H)
     138/      10 :                     ;	ORG	0010H	; (RST 10H)
     139/      10 : =>FALSE             	IF	BACKDOOR
     140/      10 :                     	JP	RST10H
     141/      10 : =>TRUE              	ELSE
     142/      10 : C3 25 FC            	JP	CONIN
     143/      13 : [139]               	ENDIF
     144/      13 :                     
     145/      13 : 00 00 00 00 00      	db	0018H - $ dup(00H)	; nop
     146/      18 :                     ;	ORG	0018H	; (RST 18H)
     147/      18 : =>FALSE             	IF	BACKDOOR
     148/      18 :                     	JP	RST18H
     149/      18 : =>TRUE              	ELSE
     150/      18 : C3 2E FC            	jp	CONST
     151/      1B : [147]               	ENDIF
     152/      1B :                     
     153/      1B : 00 00 00 00 00      	db	0020H - $ dup(00H)	; nop
     154/      20 :                     ;	ORG	0020H	; (RST 20H)
     155/      20 : =>FALSE             	IF	BACKDOOR
     156/      20 :                     	JP	RST20H
     157/      20 : =>TRUE              	ELSE
     158/      20 : C9                  	RET
     159/      21 : [155]               	ENDIF
     160/      21 :                     
     161/      21 : 00 00 00 00 00 00   	db	0028H - $ dup(00H)	; nop
               27 : 00                
     162/      28 :                     ;	ORG	0028H	; (RST 28H)
     163/      28 : =>FALSE             	IF	BACKDOOR
     164/      28 :                     	RET
     165/      28 : =>TRUE              	ELSE
     166/      28 : C9                  	RET
     167/      29 : [163]               	ENDIF
     168/      29 :                     
     169/      29 : 00 00 00 00 00 00   	db	0030H - $ dup(00H)	; nop
               2F : 00                
     170/      30 :                     ;	ORG	0030H
     171/      30 : =>FALSE             	IF	BACKDOOR
     172/      30 :                     	JP	RST30H
     173/      30 : =>TRUE              	ELSE
     174/      30 : C3 36 F5            	JP	RST30H_IN
     175/      33 : [171]               	ENDIF
     176/      33 :                     
     177/      33 : 00 00 00 00 00      	db	0038H - $ dup(00H)	; nop
     178/      38 :                     ;	ORG	0038H
     179/      38 : =>FALSE             	IF	BACKDOOR
     180/      38 :                     	JP	RST38H;
     181/      38 : =>TRUE              	ELSE
     182/      38 : C3 C3 F5            	JP	RST38H_IN
     183/      3B : [179]               	ENDIF
     184/      3B :                     
     185/      3B : 00 00 00 00 00      	db	ENTRY - $ dup(00H)
     186/      40 :                     	;	ORG	ENTRY
     187/      40 :                     
     188/      40 :                     	;;
     189/      40 :                     	;; Entry point
     190/      40 :                     	;;
     191/      40 :                     
     192/      40 : =>TRUE              	if (SuperMEZ80=1) && (SMEZ80Full=0)
     193/      40 :                     
     194/      40 :                     	;; LOADER START
     195/      40 :                     cold_st:
     196/      40 : 21 03 D0            	ld	hl, CSTART
     197/      43 : 22 01 00            	ld	(1), hl		; set new COLD START
     198/      46 :                     
     199/      46 : 11 00 D0            	ld	de, MON_SEG
     200/      49 : 21 60 00            	ld	hl, SV_ROM
     201/      4C : 01 3E 2C            	ld	bc, end_mon - MON_SEG
     202/      4F : ED B0               	ldir
     203/      51 : C3 03 D0            	jp	CSTART
     204/      54 :                     
     205/      54 : FF FF FF FF FF FF   	db	SV_ROM - $ dup(0ffh)
               5A : FF FF FF FF FF FF 
     206/      60 :                     
     207/    D000 :                     	org	MON_SEG
     208/    D000 :                     
     209/    D000 : =>FALSE             	else
     210/    D000 :                     cold_st:
     211/    D000 : [192]               	endif
     212/    D000 :                     
     213/    D000 : C3 03 D0            	jp	CSTART
     214/    D003 :                     
     215/    D003 : =>FALSE             	IF	BACKDOOR
     216/    D003 :                     ;;;
     217/    D003 :                     ;;; RST 08H Handler
     218/    D003 :                     ;;;
     219/    D003 :                     RST08H:
     220/    D003 :                     
     221/    D003 :                     	ld	(save_hl), hl	; save hl
     222/    D003 :                     	ld	hl, (stealRST08)
     223/    D003 :                     	jr	jmp_rst
     224/    D003 :                     
     225/    D003 :                     ;;;
     226/    D003 :                     ;;; RST 10H Handler
     227/    D003 :                     ;;;
     228/    D003 :                     RST10H:
     229/    D003 :                     
     230/    D003 :                     	ld	(save_hl), hl	; save hl
     231/    D003 :                     	ld	hl, (stealRST10)
     232/    D003 :                     	jr	jmp_rst
     233/    D003 :                     
     234/    D003 :                     ;;;
     235/    D003 :                     ;;; RST 18H Handler
     236/    D003 :                     ;;;
     237/    D003 :                     RST18H:
     238/    D003 :                     
     239/    D003 :                     	ld	(save_hl), hl	; save hl
     240/    D003 :                     	ld	hl, (stealRST18)
     241/    D003 :                     	jr	jmp_rst
     242/    D003 :                     
     243/    D003 :                     ;;;
     244/    D003 :                     ;;; RST 20H Handler
     245/    D003 :                     ;;;
     246/    D003 :                     RST20H:
     247/    D003 :                     
     248/    D003 :                     	ld	(save_hl), hl	; save hl
     249/    D003 :                     	ld	hl, (stealRST20)
     250/    D003 :                     	jr	jmp_rst
     251/    D003 :                     
     252/    D003 :                     ;;;
     253/    D003 :                     ;;; RST 28H Handler
     254/    D003 :                     ;;;
     255/    D003 :                     RST28H:
     256/    D003 :                     
     257/    D003 :                     	ld	(save_hl), hl	; save hl
     258/    D003 :                     	ld	hl, (stealRST28)
     259/    D003 :                     	jr	jmp_rst
     260/    D003 :                     
     261/    D003 :                     ;;;
     262/    D003 :                     ;;; RST 30H Handler
     263/    D003 :                     ;;;
     264/    D003 :                     RST30H:
     265/    D003 :                     
     266/    D003 :                     	ld	(save_hl), hl	; save hl
     267/    D003 :                     	ld	hl, (stealRST30)
     268/    D003 :                     	jr	jmp_rst
     269/    D003 :                     
     270/    D003 :                     ;;;
     271/    D003 :                     ;;; RST 38H Handler
     272/    D003 :                     ;;;
     273/    D003 :                     RST38H:
     274/    D003 :                     
     275/    D003 :                     	ld	(save_hl), hl	; save hl
     276/    D003 :                     	ld	hl, (stealRST38)
     277/    D003 :                     jmp_rst:
     278/    D003 :                     	push	hl		; set jump address
     279/    D003 :                     	ld	hl, (save_hl)	; restore hl
     280/    D003 :                     RST20H_IN:
     281/    D003 :                     RST28H_IN:
     282/    D003 :                     	ret			; jump (stealRST38)
     283/    D003 : [215]               	ENDIF
     284/    D003 :                     
     285/    D003 :                     ;;;
     286/    D003 :                     ;;; Universal Monitor Z80 Cold start
     287/    D003 :                     ;;;
     288/    D003 :                     
     289/    D003 :                     CSTART:
     290/    D003 : F3                  	DI
     291/    D004 : 31 00 FF            	LD	SP,STACKM	; monitor stask defines STACKM
     292/    D007 :                     
     293/    D007 : 21 40 00            	LD	HL,RAM_B
     294/    D00A : 22 00 FF            	LD	(DSADDR),HL
     295/    D00D : 22 07 FF            	LD	(SADDR),HL
     296/    D010 : 22 05 FF            	LD	(GADDR),HL
     297/    D013 : 22 4E FF            	ld	(asm_adr),HL
     298/    D016 : 22 50 FF            	ld	(tasm_adr),HL
     299/    D019 : 3E 49               	LD	A,'I'
     300/    D01B : 32 09 FF            	LD	(HEXMOD),A
     301/    D01E :                     	
     302/    D01E : =>FALSE             	IF	BACKDOOR
     303/    D01E :                     	; init back door RST XXH entory point
     304/    D01E :                     	ld	hl, CONOUT		; RST 08H : CONOUT
     305/    D01E :                     	ld	(stealRST08), hl
     306/    D01E :                     	ld	hl, CONIN
     307/    D01E :                     	ld	(stealRST10), hl	; RST 10H : CONIN
     308/    D01E :                     	ld	hl, CONST
     309/    D01E :                     	ld	(stealRST18), hl	; RST 18H : CONST
     310/    D01E :                     	ld	hl, RST20H_IN
     311/    D01E :                     	ld	(stealRST20), hl
     312/    D01E :                     	ld	hl, RST28H_IN
     313/    D01E :                     	ld	(stealRST28), hl
     314/    D01E :                     	ld	hl, RST30H_IN
     315/    D01E :                     	ld	(stealRST30), hl
     316/    D01E :                     	ld	hl, RST38H_IN
     317/    D01E :                     	ld	(stealRST38), hl
     318/    D01E : [302]               	ENDIF
     319/    D01E :                     
     320/    D01E :                     	;; Initialize register value
     321/    D01E : AF                  	XOR	A
     322/    D01F : 21 0C FF            	LD	HL,REG_B
     323/    D022 : 06 1A               	LD	B,REG_E-REG_B
     324/    D024 :                     IR0:
     325/    D024 : 77                  	LD	(HL),A
     326/    D025 : 23                  	INC	HL
     327/    D026 : 10 FC               	DJNZ	IR0
     328/    D028 :                     
     329/    D028 : 21 C0 FE            	LD	HL,STACK		; user stack define STACK
     330/    D02B : 22 20 FF            	LD	(REGSP),HL
     331/    D02E : 21 40 00            	ld	hl, RAM_B
     332/    D031 : 22 22 FF            	ld	(REGPC), HL		; set program counter
     333/    D034 :                     
     334/    D034 : 06 08               	ld	b, F_bitSize
     335/    D036 : 3E 2E               	ld	a, '.'
     336/    D038 : 21 63 FF            	ld	hl, F_bit
     337/    D03B :                     ir00:
     338/    D03B : 77                  	ld	(hl), a
     339/    D03C : 23                  	inc	hl
     340/    D03D : 10 FC               	djnz	ir00		; init F_bit string
     341/    D03F : AF                  	xor	a
     342/    D040 : 77                  	ld	(hl), a		; delimiter
     343/    D041 :                     
     344/    D041 :                     ; init dbg work area
     345/    D041 :                     
     346/    D041 : 06 14               	LD	B, dbg_wend - dbg_wtop
     347/    D043 : 21 3A FF            	ld	hl,dbg_wtop	
     348/    D046 : AF                  	XOR	A
     349/    D047 :                     
     350/    D047 :                     dbg_wini:
     351/    D047 : 77                  	ld	(hl), a
     352/    D048 : 23                  	inc	hl
     353/    D049 : 10 FC               	DJNZ	dbg_wini
     354/    D04B :                     
     355/    D04B : 3E 49               	ld	a, 'I'
     356/    D04D : 32 34 FF            	ld	(TM_mode), a	; default call_in mode
     357/    D050 : 3E 4E               	ld	a, 'N'
     358/    D052 : 32 33 FF            	ld	(TP_mode), a	; default display reg mode
     359/    D055 : 2E 00               	ld	l, 0
     360/    D057 : 65                  	ld	h, l
     361/    D058 : 22 35 FF            	ld	(TC_cnt), hl	; clear trace step counter to 0
     362/    D05B : AF                  	xor	a
     363/    D05C : 32 39 FF            	ld	(fever_t), a	; clear flag trace forever
     364/    D05F :                     	; init bp, tp, gstop address & opcode
     365/    D05F : 21 40 00            	ld	hl, RAM_B
     366/    D062 : 22 3C FF            	ld	(tpt1_adr), hl
     367/    D065 : 22 40 FF            	ld	(tpt2_adr), hl
     368/    D068 : 22 44 FF            	ld	(bpt1_adr), hl
     369/    D06B : 22 48 FF            	ld	(bpt2_adr), hl
     370/    D06E : 22 4C FF            	ld	(tmpb_adr), hl
     371/    D071 : 7E                  	ld	a, (hl)
     372/    D072 : 32 3B FF            	ld	(tpt1_op), a
     373/    D075 : 32 3F FF            	ld	(tpt2_op), a
     374/    D078 : 32 43 FF            	ld	(bpt1_op), a
     375/    D07B : 32 47 FF            	ld	(bpt2_op), a
     376/    D07E : 32 4B FF            	ld	(tmpb_op), a
     377/    D081 :                     	
     378/    D081 :                     ;; Opening message
     379/    D081 :                     
     380/    D081 : 21 7F F9            	LD	HL,OPNMSG
     381/    D084 : CD FA F3            	CALL	STROUT
     382/    D087 :                     ;	EI
     383/    D087 :                     
     384/    D087 :                     WSTART:
     385/    D087 : AF                  	xor	a
     386/    D088 : 32 6C FF            	ld	(ky_flg), a	; clear skip LF flag
     387/    D08B :                     
     388/    D08B : 21 CB F9            	LD	HL,PROMPT
     389/    D08E : CD FA F3            	CALL	STROUT
     390/    D091 : CD 5A F4            	CALL	GETLIN
     391/    D094 : CD E4 F4            	CALL	SKIPSP
     392/    D097 : B7                  	OR	A
     393/    D098 : 28 ED               	JR	Z, WSTART
     394/    D09A :                     
     395/    D09A : FE 41               	CP	'A'
     396/    D09C : CA 10 E8            	JP	Z, line_asm
     397/    D09F : FE 44               	CP	'D'
     398/    D0A1 : CA 72 D5            	JP	Z, DUMP
     399/    D0A4 : FE 47               	CP	'G'
     400/    D0A6 : CA 5A E2            	JP	Z, GO
     401/    D0A9 : FE 53               	CP	'S'
     402/    D0AB : CA 1C E3            	JP	Z, SETM
     403/    D0AE :                     
     404/    D0AE : FE 4C               	CP	'L'
     405/    D0B0 : CA 92 E3            	JP	Z, LOADH
     406/    D0B3 : FE 50               	CP	'P'
     407/    D0B5 : CA 94 E4            	JP	Z, SAVEH
     408/    D0B8 :                     
     409/    D0B8 : FE 52               	CP	'R'
     410/    D0BA : CA 6C E5            	JP	Z, REG
     411/    D0BD :                     
     412/    D0BD : =>FALSE             	if (SuperMEZ80=0) || (SMEZ80Full=1)
     413/    D0BD :                     	cp	'#'
     414/    D0BD :                     	jp	Z, Launcher
     415/    D0BD : [412]               	endif
     416/    D0BD :                     
     417/    D0BD : FE 42               	cp	'B'
     418/    D0BF : CA 48 D1            	jp	z, brk_cmd	; break point command
     419/    D0C2 :                     	
     420/    D0C2 : FE 54               	cp	'T'
     421/    D0C4 : CA F2 D1            	jp	z, trace_cmd	; trace point command
     422/    D0C7 :                     
     423/    D0C7 : FE 3F               	cp	'?'
     424/    D0C9 : 28 08               	jr	z, command_hlp	; command help message
     425/    D0CB :                     
     426/    D0CB :                     ERR:
     427/    D0CB : 21 E8 F9            	LD	HL,ERRMSG
     428/    D0CE : CD FA F3            	CALL	STROUT
     429/    D0D1 : 18 B4               	JR	WSTART
     430/    D0D3 :                     
     431/    D0D3 :                     ;;
     432/    D0D3 :                     ;; command help
     433/    D0D3 :                     ;;
     434/    D0D3 :                     command_hlp:
     435/    D0D3 :                     
     436/    D0D3 : 21 B6 F7            	LD	HL, cmd_hlp
     437/    D0D6 : CD FA F3            	CALL	STROUT
     438/    D0D9 : 18 AC               	JR	WSTART
     439/    D0DB :                     
     440/    D0DB : =>FALSE             	if (SuperMEZ80=0) || (SMEZ80Full=1)
     441/    D0DB :                     ;;
     442/    D0DB :                     ;; Launch appended program
     443/    D0DB :                     ;;
     444/    D0DB :                     Launcher:
     445/    D0DB :                     	INC	HL
     446/    D0DB :                     	CALL	SKIPSP		; A <- next char
     447/    D0DB :                     	OR	A
     448/    D0DB :                     	JR	Z,ERR
     449/    D0DB :                     
     450/    D0DB :                     	; check L or number
     451/    D0DB :                     	
     452/    D0DB :                     	cp	'L'
     453/    D0DB :                     	JR	Z,LST_PRG	; list append program
     454/    D0DB :                     
     455/    D0DB :                     	; check number
     456/    D0DB :                     
     457/    D0DB :                     	call	GET_NUM		; return BC : number
     458/    D0DB :                     	JR	C, ERR
     459/    D0DB :                     
     460/    D0DB :                     	; check number
     461/    D0DB :                     	LD	A, C
     462/    D0DB :                     	CP	(lanch1 - ApendTBL)/2 +1	; a < 17 ?
     463/    D0DB :                     	JP	NC, ERR
     464/    D0DB :                     	OR	A				; check '0'
     465/    D0DB :                     	JP	Z, ERR
     466/    D0DB :                     
     467/    D0DB :                     	; A <- append program No.
     468/    D0DB :                     
     469/    D0DB :                     	DEC	A	; 0 <= A <= 0FH
     470/    D0DB :                     	RLA		; A = A * 2
     471/    D0DB :                     	LD	D, 0
     472/    D0DB :                     	LD	E, A
     473/    D0DB :                     	LD	HL, ApendTBL
     474/    D0DB :                     	ADD	HL, DE	; get lanch address point
     475/    D0DB :                     	LD	E, (HL)
     476/    D0DB :                     	INC	HL
     477/    D0DB :                     	LD	D, (HL)	; DE : JUMP POINT
     478/    D0DB :                     
     479/    D0DB :                     	; Jump to append program
     480/    D0DB :                     	
     481/    D0DB :                     	EX	DE, HL
     482/    D0DB :                     	LD	E, (HL)
     483/    D0DB :                     	INC	HL
     484/    D0DB :                     	LD	D, (HL)	; DE : jump address
     485/    D0DB :                     	LD	A, D
     486/    D0DB :                     	OR	E	; address check
     487/    D0DB :                     	JR	Z,ERR	; jump address NULL
     488/    D0DB :                     	EX	DE, HL
     489/    D0DB :                     	JP	(HL)	; lanch append program
     490/    D0DB :                     	
     491/    D0DB :                     	; List out append program
     492/    D0DB :                     LST_PRG:
     493/    D0DB :                     	; get address to DE
     494/    D0DB :                     	LD	HL, ApendTBL
     495/    D0DB :                     
     496/    D0DB :                     LST_PRG1:
     497/    D0DB :                     	LD	E, (HL)
     498/    D0DB :                     	INC	HL
     499/    D0DB :                     	LD	D, (HL)
     500/    D0DB :                     	INC	HL
     501/    D0DB :                     
     502/    D0DB :                     	PUSH	DE
     503/    D0DB :                     	POP	IX	; IX <-DE
     504/    D0DB :                     	LD	A, (IX+0)
     505/    D0DB :                     	OR	(IX+1)
     506/    D0DB :                     	JR	Z, LST_END
     507/    D0DB :                     	INC	DE
     508/    D0DB :                     	INC	DE	; get string address
     509/    D0DB :                     	
     510/    D0DB :                     	EX	DE, HL
     511/    D0DB :                     	CALL	STROUT
     512/    D0DB :                     	EX	DE, HL
     513/    D0DB :                     	JR	LST_PRG1
     514/    D0DB :                     
     515/    D0DB :                     LST_END:
     516/    D0DB :                     	JP	WSTART
     517/    D0DB :                     	
     518/    D0DB :                     ; Append program launch table
     519/    D0DB :                     ;
     520/    D0DB :                     ApendTBL:
     521/    D0DB :                     	dw	lanch1
     522/    D0DB :                     	dw	lanch2
     523/    D0DB :                     	dw	lanch3
     524/    D0DB :                     	dw	lanch4
     525/    D0DB :                     	dw	lanch5
     526/    D0DB :                     	dw	lanch6
     527/    D0DB :                     	dw	lanch7
     528/    D0DB :                     	dw	lanch8
     529/    D0DB :                     	dw	lanch9
     530/    D0DB :                     	dw	lanch10
     531/    D0DB :                     	dw	lanch11
     532/    D0DB :                     	dw	lanch12
     533/    D0DB :                     	dw	lanch13
     534/    D0DB :                     	dw	lanch14
     535/    D0DB :                     	dw	lanch15
     536/    D0DB :                     	dw	lanch16
     537/    D0DB :                     	
     538/    D0DB :                     lanch1:
     539/    D0DB :                     	dw	BASIC_CST
     540/    D0DB :                     	DB	"1. GBASIC Start",CR,LF,00H
     541/    D0DB :                     lanch2:
     542/    D0DB :                     	dw	BASIC_WST
     543/    D0DB :                     	DB	"2. GBASIC Restart",CR,LF,00H
     544/    D0DB :                     
     545/    D0DB :                     lanch3:
     546/    D0DB :                     	dw	PATB_CST
     547/    D0DB :                     	DB	"3. Palo Alto Tiny BASIC Start",CR,LF,00H
     548/    D0DB :                     		
     549/    D0DB :                     lanch4:
     550/    D0DB :                     	dw	PATB_WST
     551/    D0DB :                     	DB	"4. Palo Alto Tiny BASIC Restart",CR,LF,00H
     552/    D0DB :                     
     553/    D0DB :                     lanch5:
     554/    D0DB :                     	dw	GM80_CST
     555/    D0DB :                     	DB	"5. GAME80 Start",CR,LF,00H
     556/    D0DB :                     		
     557/    D0DB :                     lanch6:
     558/    D0DB :                     	dw	GM80_WST
     559/    D0DB :                     	DB	"6. GAME80 Restart",CR,LF,00H
     560/    D0DB :                     
     561/    D0DB :                     lanch7:
     562/    D0DB :                     	dw	VTL_CST
     563/    D0DB :                     	DB	"7. VTL Start",CR,LF,00H
     564/    D0DB :                     		
     565/    D0DB :                     lanch8:
     566/    D0DB :                     	dw	VTL_WST
     567/    D0DB :                     	DB	"8. VTL Restart",CR,LF,00H
     568/    D0DB :                     
     569/    D0DB :                     lanch9:
     570/    D0DB :                     lanch10:
     571/    D0DB :                     lanch11:
     572/    D0DB :                     lanch12:
     573/    D0DB :                     lanch13:
     574/    D0DB :                     lanch14:
     575/    D0DB :                     lanch15:
     576/    D0DB :                     lanch16:
     577/    D0DB :                     	dw	0
     578/    D0DB : [440]               	endif
     579/    D0DB :                     
     580/    D0DB :                     GET_dNUM:
     581/    D0DB : D5                  	push	de
     582/    D0DC : E5                  	push	hl
     583/    D0DD : CD E3 D0            	call	GET_NUM
     584/    D0E0 : E1                  	pop	hl
     585/    D0E1 : D1                  	pop	de
     586/    D0E2 : C9                  	ret
     587/    D0E3 :                     
     588/    D0E3 :                     	; get number
     589/    D0E3 :                     	; input HL : string buffer
     590/    D0E3 :                     	;
     591/    D0E3 :                     	; Return
     592/    D0E3 :                     	; CF =1 : Error
     593/    D0E3 :                     	; BC: Calculation result
     594/    D0E3 :                     
     595/    D0E3 :                     GET_NUM:
     596/    D0E3 : AF                  	XOR	A		; Initialize C
     597/    D0E4 : 47                  	LD	B, A
     598/    D0E5 : 4F                  	LD	C, A		; clear BC
     599/    D0E6 :                     	
     600/    D0E6 :                     GET_NUM0:
     601/    D0E6 : CD E4 F4            	CALL	SKIPSP		; A <- next char
     602/    D0E9 : B7                  	OR	A
     603/    D0EA : C8                  	RET	Z		; ZF=1, ok! buffer end
     604/    D0EB :                     
     605/    D0EB : CD 05 D1            	CALL	GET_BI
     606/    D0EE : D8                  	RET	C
     607/    D0EF :                     
     608/    D0EF : F5                  	push	af
     609/    D0F0 : 08                  	EX	AF, AF'		;'AF <> AF: save A
     610/    D0F1 : F1                  	pop	af
     611/    D0F2 : CD 14 D1            	CALL	MUL_10		; BC = BC * 10
     612/    D0F5 : D8                  	RET	C		; overflow error
     613/    D0F6 : 08                  	EX	AF, AF'		;'AF <> AF: restor A
     614/    D0F7 :                     
     615/    D0F7 : E5                  	push	hl
     616/    D0F8 : 16 00               	ld	d, 0
     617/    D0FA : 5F                  	ld	e, a
     618/    D0FB :                     
     619/    D0FB : 60                  	ld	h, b
     620/    D0FC : 69                  	ld	l, c
     621/    D0FD : 19                  	add	hl, de
     622/    D0FE : 44                  	ld	b, h
     623/    D0FF : 4D                  	ld	c, l		; result: BC = BC * 10 + A
     624/    D100 : E1                  	pop	hl
     625/    D101 : D8                  	RET	C		; overflow error
     626/    D102 :                     				; result: BC = BC * 10 + A
     627/    D102 : 23                  	INC	HL
     628/    D103 : 18 E1               	JR	GET_NUM0
     629/    D105 :                     ;
     630/    D105 :                     ; Make binary to A
     631/    D105 :                     ; ERROR if CF=1
     632/    D105 :                     ;
     633/    D105 :                     GET_BI:
     634/    D105 : B7                  	OR	A
     635/    D106 : 28 0A               	JR	Z, UP_BI
     636/    D108 : FE 30               	CP	'0'
     637/    D10A : D8                  	RET	C
     638/    D10B :                     	
     639/    D10B : FE 3A               	CP	'9'+1	; ASCII':'
     640/    D10D : 30 03               	JR	NC, UP_BI
     641/    D10F : D6 30               	SUB	'0'	; Make binary to A
     642/    D111 : C9                  	RET
     643/    D112 :                     
     644/    D112 :                     UP_BI:
     645/    D112 : 37                  	SCF		; Set CF
     646/    D113 : C9                  	RET
     647/    D114 :                     
     648/    D114 :                     ;
     649/    D114 :                     ; multiply by 10
     650/    D114 :                     ; BC = BC * 10
     651/    D114 :                     MUL_10:
     652/    D114 : E5                  	push	hl
     653/    D115 :                     
     654/    D115 : C5                  	push	bc
     655/    D116 : CB 21               	SLA	C
     656/    D118 : CB 10               	RL	B		; 2BC
     657/    D11A : CB 21               	SLA	C
     658/    D11C : CB 10               	RL	B		; 4BC
     659/    D11E : E1                  	pop	hl		; hl = bc
     660/    D11F : 09                  	add	hl, bc
     661/    D120 : E5                  	push	hl
     662/    D121 : C1                  	pop	bc		; 5BC
     663/    D122 : CB 21               	SLA	C
     664/    D124 : CB 10               	RL	B		; 10BC
     665/    D126 :                     
     666/    D126 : E1                  	pop	hl
     667/    D127 : C9                  	RET			; result : BC = BC * 10
     668/    D128 :                     ;
     669/    D128 :                     ; list break point
     670/    D128 :                     ;
     671/    D128 :                     b_list:
     672/    D128 : 3A 42 FF            	ld	a, (bpt1_f)
     673/    D12B : B7                  	or	a
     674/    D12C : 28 08               	jr	z, b_list1
     675/    D12E :                     
     676/    D12E : 2A 44 FF            	ld	hl, (bpt1_adr)
     677/    D131 : 3E 31               	ld	a, '1'
     678/    D133 : CD D8 D1            	call	b_msg_out
     679/    D136 :                     
     680/    D136 :                     b_list1:
     681/    D136 : 3A 46 FF            	ld	a, (bpt2_f)
     682/    D139 : B7                  	or	a
     683/    D13A : CA 87 D0            	jp	z, WSTART
     684/    D13D :                     
     685/    D13D : 2A 48 FF            	ld	hl, (bpt2_adr)
     686/    D140 : 3E 32               	ld	a, '2'
     687/    D142 : CD D8 D1            	call	b_msg_out
     688/    D145 : C3 87 D0            	JP	WSTART
     689/    D148 :                     
     690/    D148 :                     
     691/    D148 :                     ;;; 
     692/    D148 :                     ;;; break point command
     693/    D148 :                     ;;; 
     694/    D148 :                     brk_cmd:
     695/    D148 : 23                  	INC	HL
     696/    D149 : CD E4 F4            	CALL	SKIPSP		; A <- next char
     697/    D14C : B7                  	OR	A
     698/    D14D : 28 D9               	JR	Z,b_list	; only type "B"
     699/    D14F :                     
     700/    D14F : 01 42 FF            	ld	bc, bpt1_f
     701/    D152 : FE 31               	cp	'1'
     702/    D154 : 28 0E               	jr	z, set_bp1
     703/    D156 :                     
     704/    D156 : 01 46 FF            	ld	bc, bpt2_f
     705/    D159 : FE 32               	cp	'2'
     706/    D15B : 28 07               	jr	z, set_bp1
     707/    D15D :                     
     708/    D15D : FE 43               	cp	'C'	;clear?
     709/    D15F : 28 33               	jr	z, bp_clr
     710/    D161 : C3 CB D0            	jp	ERR
     711/    D164 :                     
     712/    D164 :                     set_bp1:
     713/    D164 : 08                  	EX	AF, AF'		;'
     714/    D165 :                     
     715/    D165 : 23                  	INC	HL
     716/    D166 : CD E4 F4            	CALL	SKIPSP		; A <- next char
     717/    D169 : B7                  	OR	A
     718/    D16A : 28 4F               	JR	Z, bp_LOT 	;; No address input -> list out
     719/    D16C : FE 2C               	cp	','
     720/    D16E : C2 CB D0            	jp	nz, ERR
     721/    D171 :                     
     722/    D171 : 23                  	INC	HL
     723/    D172 : CD E4 F4            	CALL	SKIPSP
     724/    D175 : C5                  	push	bc
     725/    D176 : CD F4 F4            	CALL	RDHEX		; 1st arg.
     726/    D179 : E1                  	pop	hl		; hl <- bc
     727/    D17A : DA CB D0            	jp	c, ERR
     728/    D17D :                     
     729/    D17D : CD 86 D1            	call	setbpadr
     730/    D180 : DA CB D0            	jp	c, ERR
     731/    D183 : C3 87 D0            	JP	WSTART
     732/    D186 :                     
     733/    D186 :                     
     734/    D186 :                     ; hl : point of bp flag( bpt1_f or bpt2_f)
     735/    D186 :                     ; de : break point address
     736/    D186 :                     
     737/    D186 :                     ; check ram area, and set berak point
     738/    D186 :                     ; 
     739/    D186 :                     setbpadr:
     740/    D186 :                     
     741/    D186 : =>FALSE             	IF SuperMEZ80 = 0
     742/    D186 :                     	ld	a, d
     743/    D186 :                     	cp	RAM_B >> 8	; a - 0C0H
     744/    D186 :                     	jp	c, chkERR	; ROM area
     745/    D186 :                     	cp	IO_B >> 8	; a - 0F0H
     746/    D186 :                     	jp	nc, chkERR	; I/O area
     747/    D186 : [741]               	ENDIF
     748/    D186 :                     
     749/    D186 : 3E 01               	ld	a,1
     750/    D188 : 77                  	ld	(hl), a	; set flag
     751/    D189 : 23                  	inc	hl
     752/    D18A : 1A                  	ld	a, (de)		; get opcode
     753/    D18B : 77                  	ld	(hl), a		; save opcode
     754/    D18C : 23                  	inc	hl
     755/    D18D : 73                  	ld	(hl), e ; set break point low address
     756/    D18E : 23                  	inc	hl
     757/    D18F : 72                  	ld	(hl), d ; set break point high address
     758/    D190 : B7                  	or	a	; reset carry
     759/    D191 : C9                  	ret
     760/    D192 :                     
     761/    D192 :                     chkERR:
     762/    D192 : 37                  	scf	;set carry
     763/    D193 : C9                  	ret
     764/    D194 :                     
     765/    D194 :                     ; clear break point
     766/    D194 :                     
     767/    D194 :                     bp_clr:
     768/    D194 : 23                  	INC	HL
     769/    D195 : CD E4 F4            	CALL	SKIPSP		; A <- next char
     770/    D198 : B7                  	OR	A
     771/    D199 : 28 14               	JR	Z,b_aclr	; all clear
     772/    D19B :                     
     773/    D19B : 01 42 FF            	ld	bc, bpt1_f
     774/    D19E : FE 31               	cp	'1'
     775/    D1A0 : 28 08               	jr	z, bp_clr1
     776/    D1A2 :                     
     777/    D1A2 : 01 46 FF            	ld	bc, bpt2_f
     778/    D1A5 : FE 32               	cp	'2'
     779/    D1A7 : C2 CB D0            	jp	nz, ERR
     780/    D1AA :                     
     781/    D1AA :                     bp_clr1:
     782/    D1AA : AF                  	xor	a
     783/    D1AB : 02                  	ld	(bc), a
     784/    D1AC : C3 87 D0            	JP	WSTART
     785/    D1AF :                     
     786/    D1AF :                     b_aclr:
     787/    D1AF : AF                  	xor	a
     788/    D1B0 : 01 42 FF            	ld	bc, bpt1_f
     789/    D1B3 : 02                  	ld	(bc), a
     790/    D1B4 : 01 46 FF            	ld	bc, bpt2_f
     791/    D1B7 : 02                  	ld	(bc), a
     792/    D1B8 : C3 87 D0            	JP	WSTART
     793/    D1BB :                     
     794/    D1BB :                     ; when no address input. list out BP
     795/    D1BB :                     ;
     796/    D1BB :                     ; bc : break pointer buffer offset
     797/    D1BB :                     bp_LOT:
     798/    D1BB : 0A                  	ld	a, (bc)		; set break point?
     799/    D1BC : B7                  	or	a
     800/    D1BD : CA 87 D0            	jp	z, WSTART	; no break point setting
     801/    D1C0 :                     
     802/    D1C0 : 08                  	EX	AF, AF'		;'
     803/    D1C1 : 2A 44 FF            	ld	hl, (bpt1_adr)
     804/    D1C4 : FE 31               	cp	'1'
     805/    D1C6 : 28 03               	jr	z, l_b2
     806/    D1C8 : 2A 48 FF            	ld	hl, (bpt2_adr)
     807/    D1CB :                     l_b2:
     808/    D1CB : CD D8 D1            	call	b_msg_out
     809/    D1CE : C3 87 D0            	JP	WSTART
     810/    D1D1 :                     
     811/    D1D1 : 42 50 28 00         bp_msg1:	db	"BP(",00H
     812/    D1D5 : 29 3A 00            bp_msg2:	db	"):",00H
     813/    D1D8 :                     
     814/    D1D8 :                     b_msg_out:
     815/    D1D8 : E5                  	push	hl
     816/    D1D9 : F5                  	push	af
     817/    D1DA : 21 D1 D1            	ld	hl, bp_msg1
     818/    D1DD : CD FA F3            	call	STROUT
     819/    D1E0 : F1                  	pop	af
     820/    D1E1 : CD 33 FC            	call	CONOUT
     821/    D1E4 : 21 D5 D1            	ld	hl, bp_msg2
     822/    D1E7 : CD FA F3            	call	STROUT
     823/    D1EA : E1                  	pop	hl
     824/    D1EB : CD 03 F4            	call	HEXOUT4
     825/    D1EE : CD 43 F4            	call	CRLF	
     826/    D1F1 : C9                  	ret
     827/    D1F2 :                     
     828/    D1F2 :                     ;;; 
     829/    D1F2 :                     ;;; trace command
     830/    D1F2 :                     ;;; 
     831/    D1F2 :                     trace_cmd:
     832/    D1F2 :                     
     833/    D1F2 :                     ; T[address][,step”]
     834/    D1F2 :                     ; TP[ON | OFF]
     835/    D1F2 :                     ; TM[I | S]
     836/    D1F2 :                     
     837/    D1F2 :                     ; init steps
     838/    D1F2 : E5                  	push	hl
     839/    D1F3 : 2E 00               	ld	l, 0
     840/    D1F5 : 26 00               	ld	h, 0
     841/    D1F7 : 22 35 FF            	ld	(TC_cnt), hl	; clear trace step counter to 0
     842/    D1FA : 2A 22 FF            	ld	hl,(REGPC)
     843/    D1FD : 22 37 FF            	ld	(tmpT), hl	; init temp address
     844/    D200 : AF                  	xor	a
     845/    D201 : 32 39 FF            	ld	(fever_t), a	; clear flag trace forever
     846/    D204 :                     
     847/    D204 : E1                  	pop	hl
     848/    D205 : 23                  	inc	hl
     849/    D206 : CD E4 F4            	CALL	SKIPSP
     850/    D209 : CD F4 F4            	CALL	RDHEX		; 1st arg.
     851/    D20C : D2 B8 D2            	jp	nc, tadr_chk
     852/    D20F : CD E4 F4            	CALL	SKIPSP
     853/    D212 : 7E                  	ld	a, (hl)
     854/    D213 : B7                  	or	a
     855/    D214 : CA E1 D2            	Jp	z, t_op1	; only 1 step trace, check opcode
     856/    D217 : FE 2C               	cp	','
     857/    D219 : CA C9 D2            	jp	z, stp_chk	; steps check
     858/    D21C :                     
     859/    D21C : FE 50               	cp	'P'
     860/    D21E : 28 4E               	jr	z, tp_cmd
     861/    D220 : FE 4D               	cp	'M'
     862/    D222 : C2 CB D0            	jp	nz, ERR
     863/    D225 :                     	
     864/    D225 :                     	; tm_cmd
     865/    D225 :                     	
     866/    D225 : 23                  	inc	hl
     867/    D226 : CD E4 F4            	CALL	SKIPSP		; A <- next char
     868/    D229 :                     dip_TM:
     869/    D229 : 21 60 D2            	ld	hl, tm_msg_i
     870/    D22C : FE 49               	cp	'I'
     871/    D22E : 28 10               	jr	z, set_TM
     872/    D230 : 21 66 D2            	ld	hl, tm_msg_s
     873/    D233 : FE 53               	cp	'S'
     874/    D235 : 28 09               	jr	z, set_TM
     875/    D237 : B7                  	or	a
     876/    D238 : C2 CB D0            	jp	nz, ERR
     877/    D23B :                     
     878/    D23B :                     ;display T mode
     879/    D23B : 3A 34 FF            	ld	a, (TM_mode)
     880/    D23E : 18 E9               	jr	dip_TM
     881/    D240 :                     
     882/    D240 :                     ;set TM mode and display
     883/    D240 :                     set_TM:
     884/    D240 : 32 34 FF            	ld	(TM_mode),a
     885/    D243 : E5                  	push	hl
     886/    D244 : 21 51 D2            	ld	hl, tm_msg_0
     887/    D247 : CD FA F3            	call	STROUT
     888/    D24A : E1                  	pop	hl
     889/    D24B : CD FA F3            	call	STROUT
     890/    D24E : C3 87 D0            	jp	WSTART
     891/    D251 :                     
     892/    D251 :                     tm_msg_0:
     893/    D251 : 54 4D 20 6D 6F 64   	db	"TM mode:<CALL ", 00h
             D257 : 65 3A 3C 43 41 4C 
             D25D : 4C 20 00          
     894/    D260 :                     tm_msg_i:
     895/    D260 : 49 4E 3E 0D 0A 00   	db	"IN>", CR, LF, 00h
     896/    D266 :                     tm_msg_s:
     897/    D266 : 53 4B 49 50 3E 0D   	db	"SKIP>", CR, LF, 00h
             D26C : 0A 00             
     898/    D26E :                     	
     899/    D26E :                     	
     900/    D26E :                     	; tp_cmd
     901/    D26E :                     tp_cmd:	
     902/    D26E : 23                  	inc	hl
     903/    D26F : CD E4 F4            	CALL	SKIPSP		; A <- next char
     904/    D272 : B7                  	or	a
     905/    D273 : 20 05               	jr	nz, tp_n1
     906/    D275 : 3A 33 FF            	ld	a, (TP_mode)
     907/    D278 : 18 09               	jr	tp_n2
     908/    D27A :                     	
     909/    D27A :                     tp_n1:
     910/    D27A : FE 4F               	cp	'O'
     911/    D27C : C2 CB D0            	jp	nz, ERR
     912/    D27F : 23                  	inc	hl
     913/    D280 : CD E4 F4            	CALL	SKIPSP		; A <- next char
     914/    D283 :                     
     915/    D283 :                     tp_n2:
     916/    D283 : 21 AD D2            	ld	hl, tp_msg_on
     917/    D286 : FE 4E               	cp	'N'
     918/    D288 : 28 08               	jr	z, tp_md_on
     919/    D28A :                     
     920/    D28A : 21 B2 D2            	ld	hl, tp_msg_off
     921/    D28D : FE 46               	cp	'F'
     922/    D28F : C2 CB D0            	jp	nz, ERR
     923/    D292 :                     
     924/    D292 :                     tp_md_on:
     925/    D292 :                     	; set trace mode and display mode
     926/    D292 : 32 33 FF            	ld	(TP_mode), a
     927/    D295 : E5                  	push	hl
     928/    D296 : 21 A3 D2            	ld	hl, tp_msg_0
     929/    D299 : CD FA F3            	call	STROUT
     930/    D29C : E1                  	pop	hl
     931/    D29D : CD FA F3            	call	STROUT
     932/    D2A0 : C3 87 D0            	jp	WSTART
     933/    D2A3 :                     	
     934/    D2A3 :                     tp_msg_0:
     935/    D2A3 : 54 50 20 6D 6F 64   	db	"TP mode: ", 00h
             D2A9 : 65 3A 20 00       
     936/    D2AD :                     tp_msg_on:
     937/    D2AD : 4F 4E 0D 0A 00      	db	"ON", CR, LF, 00h
     938/    D2B2 :                     tp_msg_off:
     939/    D2B2 : 4F 46 46 0D 0A 00   	db	"OFF", CR, LF, 00h
     940/    D2B8 :                     
     941/    D2B8 :                     tadr_chk:
     942/    D2B8 : ED 53 37 FF         	ld	(tmpT), de	; set start address
     943/    D2BC : CD E4 F4            	CALL	SKIPSP		; A <- next char
     944/    D2BF : B7                  	or	a
     945/    D2C0 : 28 1F               	jr	z, t_op1	; 1step trace
     946/    D2C2 : FE 2C               	cp	','
     947/    D2C4 : 28 03               	jr	z, stp_chk
     948/    D2C6 : C3 CB D0            	jp	ERR
     949/    D2C9 :                     
     950/    D2C9 :                     stp_chk:
     951/    D2C9 : 23                  	inc	hl
     952/    D2CA : CD E4 F4            	CALL	SKIPSP		; A <- next char
     953/    D2CD : B7                  	or	a
     954/    D2CE : CA CB D0            	jp	z, ERR
     955/    D2D1 : FE 2D               	cp	'-'
     956/    D2D3 : 28 11               	jr	z, chk_fevre
     957/    D2D5 :                     
     958/    D2D5 :                     ; check steps
     959/    D2D5 :                     
     960/    D2D5 : CD E3 D0            	call	GET_NUM		; get steps to BC
     961/    D2D8 : DA CB D0            	JP	C, ERR		; number error
     962/    D2DB :                     
     963/    D2DB :                     t_op11:
     964/    D2DB : ED 43 35 FF         	ld	(TC_cnt), bc	; set trace step counter
     965/    D2DF : 18 1B               	jr	t_op_chk
     966/    D2E1 :                     
     967/    D2E1 :                     t_op1:
     968/    D2E1 : 01 01 00            	ld	bc, 1
     969/    D2E4 : 18 F5               	jr	t_op11
     970/    D2E6 :                     
     971/    D2E6 :                     chk_fevre:
     972/    D2E6 : 23                  	inc	hl
     973/    D2E7 : CD E4 F4            	CALL	SKIPSP		; A <- next char
     974/    D2EA : FE 31               	cp	'1'
     975/    D2EC : C2 CB D0            	jp	nz, ERR
     976/    D2EF : 23                  	inc	hl
     977/    D2F0 : CD E4 F4            	CALL	SKIPSP		; A <- next char
     978/    D2F3 : B7                  	or	a
     979/    D2F4 : C2 CB D0            	jp	nz, ERR		; not "-1" then error
     980/    D2F7 : 3E 01               	ld	a, 1
     981/    D2F9 : 32 39 FF            	ld	(fever_t), a	; set flag trace forever
     982/    D2FC :                     
     983/    D2FC :                     t_op_chk:
     984/    D2FC : 2A 37 FF            	ld	hl, (tmpT)	; get PC address
     985/    D2FF : 7E                  	ld	a, (hl)		; get opcode
     986/    D300 :                     	
     987/    D300 :                     ;;;;;;;;;;;;;;;;;;;;;;;;;;;;
     988/    D300 :                     ;;;
     989/    D300 :                     ;;; branch opecode check
     990/    D300 :                     ;;;
     991/    D300 :                     ;;;;;;;;;;;;;;;;;;;;;;;;;;;;
     992/    D300 :                     
     993/    D300 :                     ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
     994/    D300 :                     ; 2 insertion Trace code(TC) 
     995/    D300 :                     ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
     996/    D300 :                     INSTC2:
     997/    D300 :                     	; check 1 byte machine code: branch (RET CC)
     998/    D300 :                     
     999/    D300 : 01 08 00            	ld	bc, RETCC_TBLE - RETCC_TBLS
    1000/    D303 : 21 90 D4            	ld	hl, RETCC_TBLS
    1001/    D306 : ED B1               	cpir
    1002/    D308 : 20 13               	jr	nz, next_bc1	; not RET CC
    1003/    D30A :                     
    1004/    D30A :                     	; RET CC
    1005/    D30A :                     	; trace operation:
    1006/    D30A :                     	;   1. ea = *REGSP; *ea = TC;
    1007/    D30A :                     	;   2. ea = *REGPC; *(ea+1) = TC;
    1008/    D30A :                     
    1009/    D30A :                     	; 1
    1010/    D30A : 0E 01               	ld	c, 1		; first TC point
    1011/    D30C : CD 62 D4            	call	insBRK_sp
    1012/    D30F : DA 21 D4            	jp	c, err_trace_seq
    1013/    D312 :                     	
    1014/    D312 :                     	; 2
    1015/    D312 : 0E 02               	ld	c, 2		; second TC point
    1016/    D314 : CD 42 D4            	call	insBRK_1op
    1017/    D317 : DA 21 D4            	jp	c, err_trace_seq
    1018/    D31A :                     
    1019/    D31A : C3 1E D4            	jp	END_INS_TC
    1020/    D31D :                     
    1021/    D31D :                     	; check 2 byte machine code: branch (JR CC, Relative Value)
    1022/    D31D :                     next_bc1:
    1023/    D31D :                     
    1024/    D31D : 01 05 00            	ld	bc, JRCC_TBLE - JRCC_TBLS
    1025/    D320 : 21 98 D4            	ld	hl, JRCC_TBLS
    1026/    D323 : ED B1               	cpir
    1027/    D325 : 20 19               	jr	nz, next_bc2	; not JR CC
    1028/    D327 :                     
    1029/    D327 :                     	; JR CC, nn
    1030/    D327 :                     	; trace operation:
    1031/    D327 :                     	;   1. ea = *REGPC; *(ea + 2 + *(ea+1)) = TC;
    1032/    D327 :                     	;   2. ea = *REGPC; *(ea+2) = TC;
    1033/    D327 :                     
    1034/    D327 :                     	; 1
    1035/    D327 : 0E 01               	ld	c, 1		; first TC point
    1036/    D329 : 2A 37 FF            	ld	hl, (tmpT)
    1037/    D32C : CD 35 D4            	call	Rel_adr_c
    1038/    D32F : CD 6F D4            	call	inadr_chk_and_wrt
    1039/    D332 : DA 21 D4            	jp	c, err_trace_seq
    1040/    D335 :                     
    1041/    D335 :                     	; 2
    1042/    D335 : 0E 02               	ld	c, 2		; second TC point
    1043/    D337 : CD 47 D4            	call	insBRK_2op
    1044/    D33A : DA 21 D4            	jp	c, err_trace_seq
    1045/    D33D :                     
    1046/    D33D : C3 1E D4            	jp	END_INS_TC
    1047/    D340 :                     
    1048/    D340 :                     	; check 3 byte machine code: branch JP CC, nnnn 16bit literal)
    1049/    D340 :                     
    1050/    D340 :                     next_bc2:
    1051/    D340 : 01 08 00            	ld	bc, JPCC_TBLE - JPCC_TBLS
    1052/    D343 : 21 9D D4            	ld	hl, JPCC_TBLS
    1053/    D346 : ED B1               	cpir
    1054/    D348 : 20 04               	jr	nz, next_bc21		; not JP CCC
    1055/    D34A :                     
    1056/    D34A :                     	; JP CC, nnnn
    1057/    D34A :                     	; trace operation:
    1058/    D34A :                     	;   1. ea = *REGPC; *((short *)(ea+1)) = TC;
    1059/    D34A :                     	;   2. ea = *REGPC; *(ea+3) = TC;
    1060/    D34A :                     
    1061/    D34A : 0E 01               	ld	c, 1		; first TC point
    1062/    D34C : 18 13               	jr	next_bc222
    1063/    D34E :                     
    1064/    D34E :                     	; check 3 byte machine code: branch (CALL CC, nnnn 16bit literal)
    1065/    D34E :                     
    1066/    D34E :                     next_bc21:
    1067/    D34E : 01 08 00            	ld	bc, CLCC_TBLE - CLCC_TBLS
    1068/    D351 : 21 A5 D4            	ld	hl, CLCC_TBLS
    1069/    D354 : ED B1               	cpir
    1070/    D356 : 20 1A               	jr	nz, INSTC1		; not CALL CCC
    1071/    D358 :                     
    1072/    D358 :                     	; CALL CC, nnnn
    1073/    D358 :                     	; trace operation:
    1074/    D358 :                     	; TM_mode = 'I'
    1075/    D358 :                     	;   1. ea = *REGPC; *((short *)(ea+1)) = TC;
    1076/    D358 :                     	;   2. ea = *REGPC; *(ea+3) = TC;
    1077/    D358 :                     	;
    1078/    D358 :                     	; TM_mode = 'S'
    1079/    D358 :                     	;   2. ea = *REGPC; *(ea+3) = TC;
    1080/    D358 :                     
    1081/    D358 : 0E 01               	ld	c, 1		; first TC point
    1082/    D35A : 3A 34 FF            	ld	a, (TM_mode)
    1083/    D35D : FE 53               	cp	'S'
    1084/    D35F : 28 08               	jr	z, next_bc22	; skip insertion 1.
    1085/    D361 :                     
    1086/    D361 :                     next_bc222:
    1087/    D361 :                     	; 1. ea = *REGPC; *((char *)(ea+1)) = TC;
    1088/    D361 : CD 56 D4            	call	insBRK_brp
    1089/    D364 : DA 21 D4            	jp	c, err_trace_seq
    1090/    D367 :                     	
    1091/    D367 :                     next_bc221:
    1092/    D367 :                     	; 2. ea = *REGPC; *(ea+3) = TC;
    1093/    D367 : 0E 02               	ld	c, 2		; second TC point
    1094/    D369 :                     next_bc22:
    1095/    D369 : CD 4C D4            	call	insBRK_3op
    1096/    D36C : DA 21 D4            	jp	c, err_trace_seq
    1097/    D36F :                     
    1098/    D36F : C3 1E D4            	jp	END_INS_TC
    1099/    D372 :                     
    1100/    D372 :                     ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1101/    D372 :                     ; 1 insertion Trace code(TC) 
    1102/    D372 :                     ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1103/    D372 :                     INSTC1:
    1104/    D372 :                     	; check 1 byte machine code: branch (return)
    1105/    D372 : FE C9               	cp	0C9H		; RET ?
    1106/    D374 : 20 0B               	jr	nz, next_bc3	; not RET
    1107/    D376 :                     
    1108/    D376 :                     	; RET
    1109/    D376 :                     	; trace operation:
    1110/    D376 :                     	;   ea = *REGSP; *ea = TC;
    1111/    D376 : 0E 01               	ld	c, 1		; first TC point
    1112/    D378 : CD 62 D4            	call	insBRK_sp
    1113/    D37B : DA 21 D4            	jp	c, err_trace_seq
    1114/    D37E : C3 1E D4            	jp	END_INS_TC
    1115/    D381 :                     
    1116/    D381 :                     	; check RST p
    1117/    D381 :                     next_bc3:
    1118/    D381 : 01 08 00            	ld	bc, RST_TBLE - RST_TBLS
    1119/    D384 : 21 AD D4            	ld	hl, RST_TBLS
    1120/    D387 : ED B1               	cpir
    1121/    D389 : 20 0B               	jr	nz, next_bc4		; not RST p
    1122/    D38B :                     
    1123/    D38B :                     	; RST p
    1124/    D38B :                     	; can't trace: skip trace
    1125/    D38B :                     	; trace operation:
    1126/    D38B :                     	;   ea = *REGPC; *(ea+1) = TC;
    1127/    D38B :                     ;	ld	hl, RST_DMSG
    1128/    D38B :                     ;	call	STROUT		; message out "DETECT RST OPCODE"
    1129/    D38B : 0E 01               	ld	c, 1		; first TC point
    1130/    D38D : CD 42 D4            	call	insBRK_1op
    1131/    D390 : DA 21 D4            	jp	c, err_trace_seq
    1132/    D393 :                     	
    1133/    D393 : C3 1E D4            	jp	END_INS_TC
    1134/    D396 :                     
    1135/    D396 :                     ;RST_DMSG:
    1136/    D396 :                     ;	db	"(RST nn) WILL BE SKIPPED. AND TRACE NEXT OPCODE", CR, LF,00
    1137/    D396 :                     
    1138/    D396 :                     	; check code 0EDH
    1139/    D396 :                     next_bc4:
    1140/    D396 : FE ED               	cp	0EDH		; CODE 0EDH ?
    1141/    D398 : 20 13               	jr	nz, next_bc5	; not 0EDH
    1142/    D39A :                     
    1143/    D39A : 23                  	inc	hl
    1144/    D39B : 7E                  	ld	a, (hl)
    1145/    D39C : FE 45               	cp	45H		; RETN?
    1146/    D39E : 28 04               	jr	z, next_bc6	; yes, RETN
    1147/    D3A0 : FE 4D               	cp	4DH		; RETI?
    1148/    D3A2 : 20 09               	jr	nz, next_bc5	; not RETN
    1149/    D3A4 :                     
    1150/    D3A4 :                     	; trace operation:
    1151/    D3A4 :                     	;   ea = *REGSP; *ea = TC;
    1152/    D3A4 :                     next_bc6:
    1153/    D3A4 : 0E 01               	ld	c, 1		; first TC point
    1154/    D3A6 : CD 62 D4            	call	insBRK_sp
    1155/    D3A9 : 38 76               	jr	c, err_trace_seq
    1156/    D3AB : 18 71               	jr	END_INS_TC
    1157/    D3AD :                     
    1158/    D3AD :                     	; check JP (HL)
    1159/    D3AD :                     next_bc5:
    1160/    D3AD : 2A 37 FF            	ld	hl, (tmpT)
    1161/    D3B0 : 7E                  	ld	a, (hl)
    1162/    D3B1 :                     
    1163/    D3B1 : FE E9               	cp	0E9H		; JP (HL) ?
    1164/    D3B3 : 20 0C               	jr	nz, next_bc7	; not JP (HL)
    1165/    D3B5 :                     
    1166/    D3B5 :                     	; JP (HL)
    1167/    D3B5 :                     	; trace operation:
    1168/    D3B5 :                     	;   ea = *REGHL; *ea = TC;
    1169/    D3B5 : 2A 12 FF            	ld	hl, (REGHL)
    1170/    D3B8 :                     djphl:
    1171/    D3B8 : 0E 01               	ld	c, 1		; first TC point
    1172/    D3BA : CD 6F D4            	call	inadr_chk_and_wrt
    1173/    D3BD : 38 62               	jr	c, err_trace_seq
    1174/    D3BF : 18 5D               	jr	END_INS_TC
    1175/    D3C1 :                     
    1176/    D3C1 :                     	; check JP (IX)
    1177/    D3C1 :                     next_bc7:
    1178/    D3C1 : FE DD               	cp	0DDH		; 1st OPOCDE 0DDH ?
    1179/    D3C3 : 20 0B               	jr	nz, next_bc8	; no 0DDH
    1180/    D3C5 : 23                  	inc	hl
    1181/    D3C6 : 7E                  	ld	a, (hl)
    1182/    D3C7 : FE E9               	cp	0E9H		; JP (IX) ?
    1183/    D3C9 : 20 05               	jr	nz, next_bc8	; not JP (IX)
    1184/    D3CB :                     
    1185/    D3CB :                     	; JP (IX)
    1186/    D3CB :                     	; trace operation:
    1187/    D3CB :                     	;   ea = *REGIX; *ea = TC;
    1188/    D3CB : 2A 1C FF            	ld	hl, (REGIX)
    1189/    D3CE : 18 E8               	jr	djphl
    1190/    D3D0 :                     
    1191/    D3D0 :                     	; check JP (IY)
    1192/    D3D0 :                     next_bc8:
    1193/    D3D0 : 2A 37 FF            	ld	hl, (tmpT)
    1194/    D3D3 : 7E                  	ld	a, (hl)
    1195/    D3D4 :                     
    1196/    D3D4 : FE FD               	cp	0FDH		; 1st OPOCDE 0FDH ?
    1197/    D3D6 : 20 0B               	jr	nz, next_bc9	; no 0FDH
    1198/    D3D8 : 23                  	inc	hl
    1199/    D3D9 : 7E                  	ld	a, (hl)
    1200/    D3DA : FE E9               	cp	0E9H		; JP (IX) ?
    1201/    D3DC : 20 05               	jr	nz, next_bc9	; not JP (IX)
    1202/    D3DE :                     
    1203/    D3DE :                     	; JP (IY)
    1204/    D3DE :                     	; trace operation:
    1205/    D3DE :                     	;   ea = *REGIY; *ea = TC;
    1206/    D3DE : 2A 1E FF            	ld	hl, (REGIY)
    1207/    D3E1 : 18 D5               	jr	djphl
    1208/    D3E3 :                     
    1209/    D3E3 :                     	; check JR relative
    1210/    D3E3 :                     next_bc9:
    1211/    D3E3 : 2A 37 FF            	ld	hl, (tmpT)
    1212/    D3E6 : 7E                  	ld	a, (hl)
    1213/    D3E7 : FE 18               	cp	18H		; JR relative ?
    1214/    D3E9 : 20 0C               	jr	nz, next_bc10	; not JR relative
    1215/    D3EB :                     
    1216/    D3EB :                     	; JR Relative
    1217/    D3EB :                     	; trace operation:
    1218/    D3EB :                     	;   ea = *REGPC; *(ea + 2 + *(ea+1)) = TC;
    1219/    D3EB : 0E 01               	ld	c, 1		; first TC point
    1220/    D3ED : CD 35 D4            	call	Rel_adr_c
    1221/    D3F0 : CD 6F D4            	call	inadr_chk_and_wrt
    1222/    D3F3 : 38 2C               	jr	c, err_trace_seq
    1223/    D3F5 : 18 27               	jr	END_INS_TC
    1224/    D3F7 :                     
    1225/    D3F7 :                     	; check JP literal
    1226/    D3F7 :                     next_bc10:
    1227/    D3F7 : FE C3               	cp	0C3H		; JP literal ?
    1228/    D3F9 : 20 09               	jr	nz, next_bc11	; not JP literal
    1229/    D3FB :                     
    1230/    D3FB :                     	; JP literal
    1231/    D3FB :                     	; trace operation:
    1232/    D3FB :                     	; ea = *REGPC; *((char *)(ea+1)) = TC;
    1233/    D3FB : 0E 01               	ld	c, 1		; first TC point
    1234/    D3FD : CD 56 D4            	call	insBRK_brp
    1235/    D400 : 38 1F               	jr	c, err_trace_seq
    1236/    D402 : 18 1A               	jr	END_INS_TC
    1237/    D404 :                     
    1238/    D404 :                     	; check call literal
    1239/    D404 :                     next_bc11:
    1240/    D404 : FE CD               	cp	0CDH		; CALL literal ?
    1241/    D406 : C2 B5 D4            	jp	nz, INS2	; no, check not branch opcode 
    1242/    D409 :                     
    1243/    D409 :                     	; CALL literal
    1244/    D409 :                     	; trace operation:
    1245/    D409 :                     	; TM_mode = 'I'
    1246/    D409 :                     	;   ea = *REGPC; *((short *)(ea+1)) = TC;
    1247/    D409 :                     	; TM_mode = 'S'
    1248/    D409 :                     	;   2. ea = *REGPC; *(ea+3) = TC;
    1249/    D409 :                     
    1250/    D409 : 0E 01               	ld	c, 1		; first TC point
    1251/    D40B : 3A 34 FF            	ld	a, (TM_mode)
    1252/    D40E : FE 53               	cp	'S'
    1253/    D410 : 28 07               	jr	z, next_bc111	; yes, TM_mode='S'
    1254/    D412 :                     
    1255/    D412 :                     	; TM_mode = 'I'
    1256/    D412 :                     	; ea = *REGPC; *((char *)(ea+1)) = TC;
    1257/    D412 : CD 56 D4            	call	insBRK_brp
    1258/    D415 : 38 0A               	jr	c, err_trace_seq
    1259/    D417 : 18 05               	jr	END_INS_TC
    1260/    D419 :                     
    1261/    D419 :                     	; TM_mode = 'S'
    1262/    D419 :                     	; ea = *REGPC; *(ea+3) = TC;
    1263/    D419 :                     next_bc111:
    1264/    D419 : CD 4C D4            	call	insBRK_3op
    1265/    D41C : 38 03               	jr	c, err_trace_seq
    1266/    D41E :                     
    1267/    D41E :                     END_INS_TC:
    1268/    D41E : C3 98 E2            	jp	G0	; go, trace operation
    1269/    D421 :                     
    1270/    D421 :                     err_trace_seq:
    1271/    D421 : 21 2B D4            	ld	hl, terr_msg
    1272/    D424 : CD FA F3            	call	STROUT
    1273/    D427 : C3 87 D0            	JP	WSTART
    1274/    D42A : FF                  	rst	38h
    1275/    D42B :                     ;	
    1276/    D42B : 41 64 72 20 45 52   terr_msg:	db	"Adr ERR", CR, LF, 00H
             D431 : 52 0D 0A 00       
    1277/    D435 :                     
    1278/    D435 :                     ;--------------------------------------
    1279/    D435 :                     ; 2 byte machine code branch
    1280/    D435 :                     ; - 2nd byte is Relative address
    1281/    D435 :                     ; - input hl : opecode address
    1282/    D435 :                     ; - output hl : target address
    1283/    D435 :                     ;--------------------------------------
    1284/    D435 :                     Rel_adr_c:
    1285/    D435 : 23                  	inc	hl
    1286/    D436 : 5E                  	ld	e, (hl)		; e = 2nd operand
    1287/    D437 : 23                  	inc	hl		; hl = PC + 2
    1288/    D438 : 16 FF               	ld	d, 0ffh
    1289/    D43A : CB 7B               	bit	7, e		; test msb bit
    1290/    D43C : 20 02               	jr	nz, exp_msb	; 
    1291/    D43E : 16 00               	ld	d, 0
    1292/    D440 :                     exp_msb:
    1293/    D440 : 19                  	add	hl, de
    1294/    D441 : C9                  	ret
    1295/    D442 :                     
    1296/    D442 :                     ;--------------------------------------
    1297/    D442 :                     ; 1 byte op code, insert TC
    1298/    D442 :                     ; ea = *REGPC; *(ea+1) = TC
    1299/    D442 :                     ;--------------------------------------
    1300/    D442 :                     insBRK_1op:
    1301/    D442 :                     ;	ld	hl, (REGPC)
    1302/    D442 : 2A 37 FF            	ld	hl, (tmpT)
    1303/    D445 : 18 0A               	jr	ib1
    1304/    D447 :                     	
    1305/    D447 :                     ;--------------------------------------
    1306/    D447 :                     ; 2 byte op code, insert TC
    1307/    D447 :                     ; ea = *REGPC; *(ea+2) = TC
    1308/    D447 :                     ;--------------------------------------
    1309/    D447 :                     insBRK_2op:
    1310/    D447 :                     ;	ld	hl, (REGPC)
    1311/    D447 : 2A 37 FF            	ld	hl, (tmpT)
    1312/    D44A : 18 04               	jr	ib2
    1313/    D44C :                     	
    1314/    D44C :                     ;--------------------------------------
    1315/    D44C :                     ; 3 byte op code, insert TC
    1316/    D44C :                     ; ea = *REGPC; *(ea+3) = TC;
    1317/    D44C :                     ;--------------------------------------
    1318/    D44C :                     insBRK_3op:
    1319/    D44C :                     ;	ld	hl, (REGPC)
    1320/    D44C : 2A 37 FF            	ld	hl, (tmpT)
    1321/    D44F :                     ib3:
    1322/    D44F : 23                  	inc	hl
    1323/    D450 :                     ib2:
    1324/    D450 : 23                  	inc	hl
    1325/    D451 :                     ib1:
    1326/    D451 : 23                  	inc	hl
    1327/    D452 : CD 6F D4            	call	inadr_chk_and_wrt
    1328/    D455 : C9                  	ret
    1329/    D456 :                     
    1330/    D456 :                     ;--------------------------------------
    1331/    D456 :                     ; 3 byte op code, insert TC in branch point
    1332/    D456 :                     ; ea = *REGPC; *((char *)(ea+1)) = TC;
    1333/    D456 :                     ;--------------------------------------
    1334/    D456 :                     insBRK_brp:
    1335/    D456 :                     ;	ld	hl, (REGPC)
    1336/    D456 : 2A 37 FF            	ld	hl, (tmpT)
    1337/    D459 : 23                  	inc	hl
    1338/    D45A : 5E                  	ld	e, (hl)
    1339/    D45B : 23                  	inc	hl
    1340/    D45C : 56                  	ld	d, (hl)
    1341/    D45D : EB                  	ex	de,  hl
    1342/    D45E : CD 6F D4            	call	inadr_chk_and_wrt
    1343/    D461 : C9                  	ret
    1344/    D462 :                     
    1345/    D462 :                     ;--------------------------------------
    1346/    D462 :                     ; insert TC at SP
    1347/    D462 :                     ; ea = *REGSP; *ea = TC;
    1348/    D462 :                     ;--------------------------------------
    1349/    D462 :                     insBRK_sp:
    1350/    D462 : ED 5B 20 FF         	ld	de, (REGSP)
    1351/    D466 : 1A                  	ld	a, (de)
    1352/    D467 : 6F                  	ld	l, a
    1353/    D468 : 13                  	inc	de
    1354/    D469 : 1A                  	ld	a, (de)
    1355/    D46A : 67                  	ld	h, a		; hl = *sp
    1356/    D46B : CD 6F D4            	call	inadr_chk_and_wrt
    1357/    D46E : C9                  	ret
    1358/    D46F :                     
    1359/    D46F :                     ;--------------------------------------
    1360/    D46F :                     ; check (HL) is RAM AREA
    1361/    D46F :                     ; insert Trace code at (HL)
    1362/    D46F :                     ;--------------------------------------
    1363/    D46F :                     inadr_chk_and_wrt:
    1364/    D46F :                     
    1365/    D46F : =>FALSE             	IF SuperMEZ80 = 0
    1366/    D46F :                     	ld	a, h
    1367/    D46F :                     	cp	RAM_B >> 8		; 80H
    1368/    D46F :                     	jr	c, NO_RAM_AREA
    1369/    D46F :                     	cp	RAM_E >> 8		; 8FH
    1370/    D46F :                     	jr	nc, NO_RAM_AREA
    1371/    D46F : [1365]              	ENDIF
    1372/    D46F :                     	
    1373/    D46F : 79                  	ld	a, c
    1374/    D470 : FE 01               	cp	1		;first save?
    1375/    D472 : 20 0D               	jr	nz, icka1
    1376/    D474 : 11 3A FF            	ld	de, tpt1_f
    1377/    D477 : 12                  	ld	(de), a		; set trace ON
    1378/    D478 : 22 3C FF            	ld	(tpt1_adr), hl
    1379/    D47B : 7E                  	ld	a, (hl)		; get opcode
    1380/    D47C : 32 3B FF            	ld	(tpt1_op), a	; save opcode
    1381/    D47F : 18 0B               	jr	icka_end
    1382/    D481 :                     icka1:
    1383/    D481 : 11 3E FF            	ld	de, tpt2_f
    1384/    D484 : 12                  	ld	(de), a		; set trace ON
    1385/    D485 : 22 40 FF            	ld	(tpt2_adr), hl
    1386/    D488 : 7E                  	ld	a, (hl)		; get opcode
    1387/    D489 : 32 3F FF            	ld	(tpt2_op), a	; save opcode
    1388/    D48C :                     icka_end:
    1389/    D48C : AF                  	xor	a
    1390/    D48D : C9                  	ret
    1391/    D48E :                     
    1392/    D48E :                     NO_RAM_AREA:
    1393/    D48E : 37                  	SCF
    1394/    D48F : C9                  	ret
    1395/    D490 :                     	
    1396/    D490 :                     
    1397/    D490 :                     ;;;;;;;;;;;;;;;;;;;;;;;;;;
    1398/    D490 :                     ; 2 insertion TC TABLE
    1399/    D490 :                     ;;;;;;;;;;;;;;;;;;;;;;;;;;
    1400/    D490 :                     ;
    1401/    D490 :                     ; 1 byte machine code: branch (RET CC)
    1402/    D490 :                     RETCC_TBLS:
    1403/    D490 : C0                  	DB	0C0H	; RET	NZ
    1404/    D491 : C8                  	DB	0C8H	; RET	Z
    1405/    D492 : D0                  	DB	0D0H	; RET	NC
    1406/    D493 : D8                  	DB	0D8H	; RET	C
    1407/    D494 : E0                  	DB	0E0H	; RET	PO
    1408/    D495 : E8                  	DB	0E8H	; RET	PE
    1409/    D496 : F0                  	DB	0F0H	; RET	P
    1410/    D497 : F8                  	DB	0F8H	; RET	M
    1411/    D498 :                     RETCC_TBLE:
    1412/    D498 :                     
    1413/    D498 :                     ; 2 byte machine code: branch (JR CC, Relative)
    1414/    D498 :                     JRCC_TBLS:
    1415/    D498 : 10                  	DB	10H	; DJNZ	$
    1416/    D499 :                     JRCC_TBLS1:
    1417/    D499 : 20                  	DB	20H	; JR	NZ,$
    1418/    D49A : 28                  	DB	28H	; JR	Z,$
    1419/    D49B : 30                  	DB	30H	; JR	NC,$
    1420/    D49C : 38                  	DB	38H	; JR	C,$
    1421/    D49D :                     JRCC_TBLE:
    1422/    D49D :                     
    1423/    D49D :                     ; 3 byte machine code: branch (JP CC, 16bit literal)
    1424/    D49D :                     JPCC_TBLS:
    1425/    D49D : C2                  	DB	0C2H	; JP	NZ,1234H
    1426/    D49E : CA                  	DB	0CAH	; JP	Z,1234H
    1427/    D49F : D2                  	DB	0D2H	; JP	NC,1234H
    1428/    D4A0 : DA                  	DB	0DAH	; JP	C,1234H
    1429/    D4A1 : E2                  	DB	0E2H	; JP	PO,1234H
    1430/    D4A2 : EA                  	DB	0EAH	; JP	PE,1234H
    1431/    D4A3 : F2                  	DB	0F2H	; JP	P,1234H
    1432/    D4A4 : FA                  	DB	0FAH	; JP	M,1234H
    1433/    D4A5 :                     JPCC_TBLE:
    1434/    D4A5 :                     
    1435/    D4A5 :                     ; (call 16bit literal)
    1436/    D4A5 :                     CLCC_TBLS:
    1437/    D4A5 : C4                  	DB	0C4H	; CALL	NZ,1234H
    1438/    D4A6 : CC                  	DB	0CCH	; CALL	Z,1234H
    1439/    D4A7 : D4                  	DB	0D4H	; CALL	NC,1234H
    1440/    D4A8 : DC                  	DB	0DCH	; CALL	C,1234H
    1441/    D4A9 : E4                  	DB	0E4H	; CALL	PO,1234H
    1442/    D4AA : EC                  	DB	0ECH	; CALL	PE,1234H
    1443/    D4AB : F4                  	DB	0F4H	; CALL	P,1234H
    1444/    D4AC : FC                  	DB	0FCH	; CALL	M,1234H
    1445/    D4AD :                     CLCC_TBLE:
    1446/    D4AD :                     
    1447/    D4AD :                     ;;;;;;;;;;;;;;;;;;;;;;;;;;
    1448/    D4AD :                     ; 1 insertion TC TABLE
    1449/    D4AD :                     ;;;;;;;;;;;;;;;;;;;;;;;;;;
    1450/    D4AD :                     
    1451/    D4AD :                     ; restart
    1452/    D4AD :                     RST_TBLS:
    1453/    D4AD : C7                  	DB	0C7H	; RST	00H
    1454/    D4AE : CF                  	DB	0CFH	; RST	08H
    1455/    D4AF : D7                  	DB	0D7H	; RST	10H
    1456/    D4B0 : DF                  	DB	0DFH	; RST	18H
    1457/    D4B1 : E7                  	DB	0E7H	; RST	20H
    1458/    D4B2 : EF                  	DB	0EFH	; RST	28H
    1459/    D4B3 : F7                  	DB	0F7H	; RST	30H
    1460/    D4B4 : FF                  	DB	0FFH	; RST	38H
    1461/    D4B5 :                     RST_TBLE:
    1462/    D4B5 :                     
    1463/    D4B5 :                     ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1464/    D4B5 :                     ;;;
    1465/    D4B5 :                     ;;; machine code check(except branch)
    1466/    D4B5 :                     ;;;
    1467/    D4B5 :                     ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1468/    D4B5 :                     INS2:
    1469/    D4B5 :                     
    1470/    D4B5 :                     	; 2byte machine code search
    1471/    D4B5 : 01 12 00            	ld	bc, TWO_OPTBL_E - TWO_OPTBL
    1472/    D4B8 : 21 4E D5            	ld	hl, TWO_OPTBL
    1473/    D4BB : ED B1               	cpir
    1474/    D4BD : CA 29 D5            	jp	z, meet_op2
    1475/    D4C0 :                     
    1476/    D4C0 :                     	; 3byte machine code search
    1477/    D4C0 : 01 08 00            	ld	bc, THREE_OPTBL_E - THREE_OPTBL
    1478/    D4C3 : 21 60 D5            	ld	hl, THREE_OPTBL
    1479/    D4C6 : ED B1               	cpir
    1480/    D4C8 : CA 34 D5            	jp	z, meet_op3
    1481/    D4CB :                     
    1482/    D4CB :                     	; check 0CBH
    1483/    D4CB :                     	
    1484/    D4CB :                     	; readjust hl
    1485/    D4CB : 2A 37 FF            	ld	hl, (tmpT)
    1486/    D4CE :                     
    1487/    D4CE : FE CB               	cp	0CBH		; opecode 0CBH?
    1488/    D4D0 : 28 57               	jr	z, meet_op2
    1489/    D4D2 :                     	
    1490/    D4D2 :                     	; check 0DDH
    1491/    D4D2 : FE DD               	cp	0ddh		; opecode 0DDH?
    1492/    D4D4 : 28 0A               	jr	z, meet_dd
    1493/    D4D6 :                     	
    1494/    D4D6 :                     	; check 0EDH
    1495/    D4D6 : FE ED               	cp	0edh		; opecode 0EDH?
    1496/    D4D8 : 28 28               	jr	z, meet_ed
    1497/    D4DA :                     
    1498/    D4DA :                     	; check 0FDH
    1499/    D4DA : FE FD               	cp	0fdh		; opecode 0FDH?
    1500/    D4DC : 28 02               	jr	z, meet_dd
    1501/    D4DE :                     
    1502/    D4DE :                     	; 1byte machine code
    1503/    D4DE : 18 3E               	jr	meet_op1
    1504/    D4E0 :                     
    1505/    D4E0 :                     	; opecode 0DDh
    1506/    D4E0 :                     meet_dd:
    1507/    D4E0 : 23                  	inc	hl
    1508/    D4E1 : 7E                  	ld	a, (hl)	
    1509/    D4E2 : FE CB               	cp	0cbh		; 2nd 0CBH?
    1510/    D4E4 : 28 59               	jr	z, meet_op4
    1511/    D4E6 : FE 21               	cp	21h		; 2nd 21H?
    1512/    D4E8 : 28 55               	jr	z, meet_op4
    1513/    D4EA : FE 22               	cp	22h		; 2nd 22H?
    1514/    D4EC : 28 51               	jr	z, meet_op4
    1515/    D4EE : FE 2A               	cp	2ah		; 2nd 2AH?
    1516/    D4F0 : 28 4D               	jr	z, meet_op4
    1517/    D4F2 : FE 36               	cp	36h		; 2nd 36H?
    1518/    D4F4 : 28 49               	jr	z, meet_op4
    1519/    D4F6 :                     
    1520/    D4F6 :                     	; 2nd code search
    1521/    D4F6 : 01 0A 00            	ld	bc, DD_2NDTBL_E - DD_2NDTBL
    1522/    D4F9 : 21 68 D5            	ld	hl, DD_2NDTBL
    1523/    D4FC : ED B1               	cpir
    1524/    D4FE : 28 29               	jr	z, meet_op2
    1525/    D500 : 18 32               	jr	meet_op3
    1526/    D502 :                     
    1527/    D502 :                     meet_ed:
    1528/    D502 : 23                  	inc	hl
    1529/    D503 : 7E                  	ld	a, (hl)	
    1530/    D504 : FE 43               	cp	43h		; 2nd 43H?
    1531/    D506 : 28 37               	jr	z, meet_op4
    1532/    D508 : FE 4B               	cp	4bh		; 2nd 4BH?
    1533/    D50A : 28 33               	jr	z, meet_op4
    1534/    D50C : FE 53               	cp	53h		; 2nd 53H?
    1535/    D50E : 28 2F               	jr	z, meet_op4
    1536/    D510 : FE 5B               	cp	5bh		; 2nd 5BH?
    1537/    D512 : 28 2B               	jr	z, meet_op4
    1538/    D514 : FE 73               	cp	73h		; 2nd 73H?
    1539/    D516 : 28 27               	jr	z, meet_op4
    1540/    D518 : FE 7B               	cp	7bh		; 2nd 7BH?
    1541/    D51A : 28 23               	jr	z, meet_op4
    1542/    D51C : 18 0B               	jr	meet_op2
    1543/    D51E :                     
    1544/    D51E :                     ; 1 machine code
    1545/    D51E :                     meet_op1:
    1546/    D51E : 0E 01               	ld	c, 1
    1547/    D520 : CD 42 D4            	call	insBRK_1op
    1548/    D523 : DA 21 D4            	jp	c, err_trace_seq
    1549/    D526 : C3 1E D4            	jp	END_INS_TC
    1550/    D529 :                     
    1551/    D529 :                     ; 2 machine code
    1552/    D529 :                     meet_op2:
    1553/    D529 : 0E 01               	ld	c, 1
    1554/    D52B : CD 47 D4            	call	insBRK_2op
    1555/    D52E : DA 21 D4            	jp	c, err_trace_seq
    1556/    D531 : C3 1E D4            	jp	END_INS_TC
    1557/    D534 :                     ; 3 machine code
    1558/    D534 :                     meet_op3:
    1559/    D534 : 0E 01               	ld	c, 1
    1560/    D536 : CD 4C D4            	call	insBRK_3op
    1561/    D539 : DA 21 D4            	jp	c, err_trace_seq
    1562/    D53C : C3 1E D4            	jp	END_INS_TC
    1563/    D53F :                     
    1564/    D53F :                     ; 4 machine codee
    1565/    D53F :                     meet_op4:
    1566/    D53F : 0E 01               	ld	c, 1
    1567/    D541 :                     ;	ld	hl, (REGPC)
    1568/    D541 : 2A 37 FF            	ld	hl, (tmpT)
    1569/    D544 : 23                  	inc	hl
    1570/    D545 : CD 4F D4            	call	ib3
    1571/    D548 : DA 21 D4            	jp	c, err_trace_seq
    1572/    D54B : C3 1E D4            	jp	END_INS_TC
    1573/    D54E :                     
    1574/    D54E :                     TWO_OPTBL:	; second byte is 8bitliteral[nn]
    1575/    D54E :                     ld_r_nn_s:
    1576/    D54E : 06                  	DB	06h	; LD	B,nn
    1577/    D54F : 0E                  	DB	0Eh	; LD	C,nn
    1578/    D550 : 16                  	DB	16h	; LD	D,nn
    1579/    D551 : 1E                  	DB	1Eh	; LD	E,nn
    1580/    D552 : 26                  	DB	26h	; LD	H,nn
    1581/    D553 : 2E                  	DB	2Eh	; LD	L,nn
    1582/    D554 : 36                  	DB	36h	; LD	(HL),nn
    1583/    D555 : 3E                  	DB	3Eh	; LD	A,nn
    1584/    D556 :                     ld_r_nn_e:
    1585/    D556 :                     
    1586/    D556 :                     log_op_s:
    1587/    D556 : C6                  	DB	0C6h	; ADD	A,nn
    1588/    D557 : CE                  	DB	0CEh	; ADC	A,nn
    1589/    D558 : DE                  	DB	0DEh	; SBC	A,nn
    1590/    D559 : D6                  	DB	0D6h	; SUB	nn
    1591/    D55A : E6                  	DB	0E6h	; AND	nn
    1592/    D55B : EE                  	DB	0EEh	; XOR	nn
    1593/    D55C : F6                  	DB	0F6h	; OR	nn
    1594/    D55D : FE                  	DB	0FEh	; CP	nn
    1595/    D55E : DB                  	DB	0DBh	; IN	A,(nn)
    1596/    D55F : D3                  	DB	0D3h	; OUT	(nn),A
    1597/    D560 :                     log_op_e:
    1598/    D560 :                     TWO_OPTBL_E:
    1599/    D560 :                     
    1600/    D560 :                     THREE_OPTBL:	; 2nd, 3rd byte is 16bitliteral[nnnn]
    1601/    D560 : 01                  	DB	01h	; LD	BC,nnnn
    1602/    D561 : 11                  	DB	11h	; LD	DE,nnnn
    1603/    D562 : 21                  	DB	21h	; LD	HL,nnnn
    1604/    D563 : 31                  	DB	31h	; LD	SP,nnnn
    1605/    D564 :                     THREE_OPTBLe
    1606/    D564 : 22                  	DB	22h	; LD	(nnnn),HL
    1607/    D565 : 32                  	DB	32h	; LD	(nnnn),A
    1608/    D566 :                     
    1609/    D566 : 2A                  	DB	2Ah	; LD	HL,(nnnn)
    1610/    D567 : 3A                  	DB	3Ah	; LD	A,(nnnn)
    1611/    D568 :                     THREE_OPTBL_E:
    1612/    D568 :                     
    1613/    D568 :                     DD_2NDTBL:
    1614/    D568 : 09                  	DB	09h	; ADD	IX,BC
    1615/    D569 : 19                  	DB	19h	; ADD	IX,DE
    1616/    D56A : 29                  	DB	29h	; ADD	IX,IX
    1617/    D56B : 39                  	DB	39h	; ADD	IX,SP
    1618/    D56C :                     DD_2NDTBL1:
    1619/    D56C : 23                  	DB	23h	; INC	IX
    1620/    D56D : 2B                  	DB	2Bh	; DEC	IX
    1621/    D56E : E5                  	DB	0E5h	; PUSH	IX
    1622/    D56F : E1                  	DB	0E1h	; POP	IX
    1623/    D570 :                     DD_2NDTBL2:
    1624/    D570 : E3                  	DB	0E3h	; EX	(SP),IX
    1625/    D571 : F9                  	DB	0F9h	; LD	SP,IX
    1626/    D572 :                     DD_2NDTBL_E:
    1627/    D572 :                     
    1628/    D572 :                     ;;; 
    1629/    D572 :                     ;;; Dump memory
    1630/    D572 :                     ;;; 
    1631/    D572 :                     
    1632/    D572 :                     DUMP:
    1633/    D572 : 23                  	INC	HL
    1634/    D573 : 7E                  	LD	A,(HL)
    1635/    D574 : FE 49               	cp	'I'
    1636/    D576 : CA 7B D6            	JP	Z,disassemble
    1637/    D579 : CD E4 F4            	CALL	SKIPSP
    1638/    D57C : CD F4 F4            	CALL	RDHEX		; 1st arg.
    1639/    D57F : 38 06               	jr	c, DP0
    1640/    D581 :                     	;; 1st arg. found
    1641/    D581 : ED 53 00 FF         	LD	(DSADDR),DE
    1642/    D585 : 18 10               	jr	dp00
    1643/    D587 :                     
    1644/    D587 :                     DP0:	;; No arg. chk
    1645/    D587 :                     
    1646/    D587 : E5                  	push	hl
    1647/    D588 : 2A 00 FF            	LD	HL,(DSADDR)
    1648/    D58B : 01 80 00            	LD	BC,128
    1649/    D58E : 09                  	ADD	HL,BC
    1650/    D58F : 22 02 FF            	LD	(DEADDR),HL
    1651/    D592 : E1                  	pop	hl
    1652/    D593 : 7E                  	LD	A,(HL)
    1653/    D594 : B7                  	OR	A
    1654/    D595 : 28 2B               	JR	z, DPM_C	; no arg.
    1655/    D597 :                     
    1656/    D597 :                     dp00:
    1657/    D597 : CD E4 F4            	CALL	SKIPSP
    1658/    D59A : 7E                  	LD	A,(HL)
    1659/    D59B : FE 2C               	CP	','
    1660/    D59D : 28 0D               	JR	Z,DP1
    1661/    D59F : B7                  	OR	A
    1662/    D5A0 : C2 CB D0            	JP	NZ,ERR
    1663/    D5A3 :                     
    1664/    D5A3 :                     	;; No 2nd arg.
    1665/    D5A3 :                     
    1666/    D5A3 : 21 80 00            	LD	HL,128
    1667/    D5A6 : 19                  	ADD	HL,DE
    1668/    D5A7 : 22 02 FF            	LD	(DEADDR),HL
    1669/    D5AA : 18 16               	JR	DPM_C
    1670/    D5AC :                     
    1671/    D5AC :                     DP1:
    1672/    D5AC : 23                  	INC	HL
    1673/    D5AD : CD E4 F4            	CALL	SKIPSP
    1674/    D5B0 : CD F4 F4            	CALL	RDHEX
    1675/    D5B3 : DA CB D0            	jp	c, ERR
    1676/    D5B6 : CD E4 F4            	CALL	SKIPSP
    1677/    D5B9 : B7                  	OR	A
    1678/    D5BA : C2 CB D0            	jp	nz, ERR
    1679/    D5BD : 13                  	INC	DE
    1680/    D5BE : ED 53 02 FF         	LD	(DEADDR),DE
    1681/    D5C2 :                     DPM_C:
    1682/    D5C2 : CD C8 D5            	CALL	DPM
    1683/    D5C5 : C3 87 D0            	JP	WSTART
    1684/    D5C8 :                     
    1685/    D5C8 :                     	;; DUMP main
    1686/    D5C8 :                     DPM:
    1687/    D5C8 : 2A 00 FF            	LD	HL,(DSADDR)
    1688/    D5CB : 3E F0               	LD	A,0F0H
    1689/    D5CD : A5                  	AND	L
    1690/    D5CE : 6F                  	LD	L,A
    1691/    D5CF : AF                  	XOR	A
    1692/    D5D0 : 32 04 FF            	LD	(DSTATE),A
    1693/    D5D3 :                     DPM0:
    1694/    D5D3 : E5                  	PUSH	HL
    1695/    D5D4 : CD F5 D5            	CALL	DPL
    1696/    D5D7 : E1                  	POP	HL
    1697/    D5D8 : 01 10 00            	LD	BC,16
    1698/    D5DB : 09                  	ADD	HL,BC
    1699/    D5DC : CD 2E FC            	CALL	CONST
    1700/    D5DF : 20 0E               	JR	NZ,DPM1
    1701/    D5E1 : 3A 04 FF            	LD	A,(DSTATE)
    1702/    D5E4 : FE 02               	CP	2
    1703/    D5E6 : 38 EB               	JR	C,DPM0
    1704/    D5E8 : 2A 02 FF            	LD	HL,(DEADDR)
    1705/    D5EB : 22 00 FF            	LD	(DSADDR),HL
    1706/    D5EE : C9                  	RET
    1707/    D5EF :                     DPM1:
    1708/    D5EF : 22 00 FF            	LD	(DSADDR),HL
    1709/    D5F2 : C3 25 FC            	JP	CONIN
    1710/    D5F5 :                     
    1711/    D5F5 :                     DPL:
    1712/    D5F5 :                     	;; DUMP line
    1713/    D5F5 : CD 03 F4            	CALL	HEXOUT4
    1714/    D5F8 : E5                  	PUSH	HL
    1715/    D5F9 : 21 F0 F9            	LD	HL,DSEP0
    1716/    D5FC : CD FA F3            	CALL	STROUT
    1717/    D5FF : E1                  	POP	HL
    1718/    D600 : DD 21 77 FF         	LD	IX,INBUF
    1719/    D604 : 06 10               	LD	B,16
    1720/    D606 :                     DPL0:
    1721/    D606 : CD 2F D6            	CALL	DPB
    1722/    D609 : 10 FB               	DJNZ	DPL0
    1723/    D60B :                     
    1724/    D60B : 21 F3 F9            	LD	HL,DSEP1
    1725/    D60E : CD FA F3            	CALL	STROUT
    1726/    D611 :                     
    1727/    D611 : 21 77 FF            	LD	HL,INBUF
    1728/    D614 : 06 10               	LD	B,16
    1729/    D616 :                     DPL1:
    1730/    D616 : 7E                  	LD	A,(HL)
    1731/    D617 : 23                  	INC	HL
    1732/    D618 : FE 20               	CP	' '
    1733/    D61A : 38 09               	JR	C,DPL2
    1734/    D61C : FE 7F               	CP	7FH
    1735/    D61E : 30 05               	JR	NC,DPL2
    1736/    D620 : CD 33 FC            	CALL	CONOUT
    1737/    D623 : 18 05               	JR	DPL3
    1738/    D625 :                     DPL2:
    1739/    D625 : 3E 2E               	LD	A,'.'
    1740/    D627 : CD 33 FC            	CALL	CONOUT
    1741/    D62A :                     DPL3:
    1742/    D62A : 10 EA               	DJNZ	DPL1
    1743/    D62C : C3 43 F4            	JP	CRLF
    1744/    D62F :                     
    1745/    D62F :                     DPB:	; Dump byte
    1746/    D62F : 3E 20               	LD	A,' '
    1747/    D631 : CD 33 FC            	CALL	CONOUT
    1748/    D634 : 3A 04 FF            	LD	A,(DSTATE)
    1749/    D637 : B7                  	OR	A
    1750/    D638 : 20 20               	JR	NZ,DPB2
    1751/    D63A :                     	; Dump state 0
    1752/    D63A : 3A 00 FF            	LD	A,(DSADDR)	; Low byte
    1753/    D63D : BD                  	CP	L
    1754/    D63E : 20 06               	JR	NZ,DPB0
    1755/    D640 : 3A 01 FF            	LD	A,(DSADDR+1)	; High byte
    1756/    D643 : BC                  	CP	H
    1757/    D644 : 28 0F               	JR	Z,DPB1
    1758/    D646 :                     DPB0:	; Still 0 or 2
    1759/    D646 : 3E 20               	LD	A,' '
    1760/    D648 : CD 33 FC            	CALL	CONOUT
    1761/    D64B : CD 33 FC            	CALL	CONOUT
    1762/    D64E : DD 77 00            	LD	(IX),A
    1763/    D651 : 23                  	INC	HL
    1764/    D652 : DD 23               	INC	IX
    1765/    D654 : C9                  	RET
    1766/    D655 :                     DPB1:	; Found start address
    1767/    D655 : 3E 01               	LD	A,1
    1768/    D657 : 32 04 FF            	LD	(DSTATE),A
    1769/    D65A :                     DPB2:
    1770/    D65A : 3A 04 FF            	LD	A,(DSTATE)
    1771/    D65D : FE 01               	CP	1
    1772/    D65F : 20 E5               	JR	NZ,DPB0
    1773/    D661 :                     	; Dump state 1
    1774/    D661 : 7E                  	LD	A,(HL)
    1775/    D662 : DD 77 00            	LD	(IX),A
    1776/    D665 : CD 08 F4            	CALL	HEXOUT2
    1777/    D668 : 23                  	INC	HL
    1778/    D669 : DD 23               	INC	IX
    1779/    D66B : 3A 02 FF            	LD	A,(DEADDR)	; Low byte
    1780/    D66E : BD                  	CP	L
    1781/    D66F : C0                  	RET	NZ
    1782/    D670 : 3A 03 FF            	LD	A,(DEADDR+1)	; High byte
    1783/    D673 : BC                  	CP	H
    1784/    D674 : C0                  	RET	NZ
    1785/    D675 :                     	; Found end address
    1786/    D675 : 3E 02               	LD	A,2
    1787/    D677 : 32 04 FF            	LD	(DSTATE),A
    1788/    D67A : C9                  	RET
    1789/    D67B :                     
    1790/    D67B :                     ;;;
    1791/    D67B :                     ;;; Disassemble
    1792/    D67B :                     ;;; 
    1793/    D67B :                     
    1794/    D67B :                     
    1795/    D67B :                     ; DI[<address>][,s<steps>|<end address>]
    1796/    D67B :                     
    1797/    D67B :                     disassemble:
    1798/    D67B : 23                  	INC	HL
    1799/    D67C : CD E4 F4            	CALL	SKIPSP
    1800/    D67F : CD F4 F4            	CALL	RDHEX		; 1st arg.
    1801/    D682 : 30 14               	jr	nc, get_DI1
    1802/    D684 :                     
    1803/    D684 :                     di_nxt:
    1804/    D684 :                     	;; No arg. chk
    1805/    D684 : CD E4 F4            	CALL	SKIPSP
    1806/    D687 : 7E                  	LD	A,(HL)
    1807/    D688 : B7                  	OR	A
    1808/    D689 : 20 13               	jr	NZ, chk_DI1	; ',' check
    1809/    D68B :                     
    1810/    D68B :                     ; No arg
    1811/    D68B : 26 00               	ld	h, 0
    1812/    D68D : 2E 0A               	ld	l, 10
    1813/    D68F : 7D                  	ld	a, l
    1814/    D690 : 32 6F FF            	ld	(dasm_stpf), a	; set step flag
    1815/    D693 : 22 6D FF            	ld	(dasm_ed), hl	; set 10 steps
    1816/    D696 : 18 33               	jr	DISASM_go
    1817/    D698 :                     
    1818/    D698 :                     ; 1st arg
    1819/    D698 :                     get_DI1:
    1820/    D698 : ED 53 70 FF         	ld	(dasm_adr), de	; save start address
    1821/    D69C :                     ;	INC	HL
    1822/    D69C : 18 E6               	jr	di_nxt
    1823/    D69E :                     
    1824/    D69E :                     chk_DI1:
    1825/    D69E : FE 2C               	cp	','
    1826/    D6A0 : C2 CB D0            	jp	nz, ERR
    1827/    D6A3 :                     
    1828/    D6A3 :                     ; check 2nd arg
    1829/    D6A3 :                     
    1830/    D6A3 : 23                  	INC	HL
    1831/    D6A4 : CD E4 F4            	CALL	SKIPSP
    1832/    D6A7 : FE 53               	cp	'S'
    1833/    D6A9 : 20 12               	jr	nz, chk_stpDI
    1834/    D6AB :                     
    1835/    D6AB :                     ; step arg
    1836/    D6AB : 3E 01               	ld	a, 1
    1837/    D6AD : 32 6F FF            	ld	(dasm_stpf), a	; set step flag
    1838/    D6B0 : 23                  	inc	hl
    1839/    D6B1 : CD E3 D0            	call	GET_NUM		; get decimal number to binary
    1840/    D6B4 : DA CB D0            	jp	c, ERR
    1841/    D6B7 : ED 43 6D FF         	ld	(dasm_ed), bc	; set steps
    1842/    D6BB : 18 0E               	jr	DISASM_go
    1843/    D6BD :                     
    1844/    D6BD :                     chk_stpDI:
    1845/    D6BD : CD F4 F4            	CALL	RDHEX		; 2nd arg.
    1846/    D6C0 : DA CB D0            	jp	c, ERR
    1847/    D6C3 : ED 53 6D FF         	ld	(dasm_ed), de	; set end address
    1848/    D6C7 : AF                  	xor	a
    1849/    D6C8 : 32 6F FF            	ld	(dasm_stpf), a	; clear step flag
    1850/    D6CB :                     
    1851/    D6CB :                     ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1852/    D6CB :                     ; operation Disassemble
    1853/    D6CB :                     ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1854/    D6CB :                     
    1855/    D6CB :                     DISASM_go:
    1856/    D6CB : CD 2E FC            	call	CONST
    1857/    D6CE : 28 06               	jr	z, dis_go1
    1858/    D6D0 : CD 25 FC            	call	CONIN		;discard key
    1859/    D6D3 : C3 87 D0            	jp	WSTART		; exit disasm command
    1860/    D6D6 :                     
    1861/    D6D6 :                     dis_go1:
    1862/    D6D6 :                     	; get opcode
    1863/    D6D6 : CD 5A D7            	call	dis_analysis
    1864/    D6D9 : CD 1F D7            	call	mk_adr_str	; conout address and machine code
    1865/    D6DC :                     				; *dasm_adr is next opcode address
    1866/    D6DC : 21 77 FF            	ld	hl, adr_mc_buf
    1867/    D6DF : CD FA F3            	call	STROUT		; conout disassemble strings
    1868/    D6E2 :                     
    1869/    D6E2 : 3A 6F FF            	ld	a, (dasm_stpf)
    1870/    D6E5 : B7                  	or	a
    1871/    D6E6 : 20 0E               	jr	nz, calc_dis_step
    1872/    D6E8 :                     	
    1873/    D6E8 :                     	; *dasm_adr > *dasm_ed ?, yes, finish
    1874/    D6E8 : 2A 6D FF            	ld	hl, (dasm_ed)
    1875/    D6EB : ED 4B 70 FF         	ld	bc, (dasm_adr)
    1876/    D6EF : ED 42               	sbc	hl, bc
    1877/    D6F1 : 30 D8               	jr	nc, DISASM_go
    1878/    D6F3 : C3 87 D0            	jp	WSTART
    1879/    D6F6 :                     
    1880/    D6F6 :                     calc_dis_step:
    1881/    D6F6 : 2A 6D FF            	ld	hl, (dasm_ed)
    1882/    D6F9 : 2B                  	dec	hl
    1883/    D6FA : 22 6D FF            	ld	(dasm_ed), hl
    1884/    D6FD : 7C                  	ld	a, h
    1885/    D6FE : B5                  	or	l
    1886/    D6FF : 20 CA               	jr	nz, DISASM_go
    1887/    D701 : C3 87 D0            	jp	WSTART
    1888/    D704 :                     
    1889/    D704 :                     ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1890/    D704 :                     ; Disassemble and maked strings to user buffer
    1891/    D704 :                     ; input de : user buffer
    1892/    D704 :                     ;       hl : disassemble address
    1893/    D704 :                     ; output de : next MC address
    1894/    D704 :                     ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1895/    D704 :                     get_disasm_st:
    1896/    D704 : 22 70 FF            	ld	(dasm_adr), hl
    1897/    D707 : D5                  	push	de
    1898/    D708 : CD 5A D7            	call	dis_analysis
    1899/    D70B : CD 1F D7            	call	mk_adr_str	; conout address and machine code
    1900/    D70E : D1                  	pop	de
    1901/    D70F : 21 77 FF            	ld	hl, adr_mc_buf
    1902/    D712 : 01 2A 00            	ld	bc, dasm_be - dasm_bs
    1903/    D715 : ED B0               	ldir
    1904/    D717 : ED 5B 70 FF         	ld	de, (dasm_adr)
    1905/    D71B : 3A 76 FF            	ld	a, (mc_Size)
    1906/    D71E : C9                  	ret
    1907/    D71F :                     
    1908/    D71F :                     ;-------------------------------------------------
    1909/    D71F :                     ; Make address and machine code at adr_mc_buf
    1910/    D71F :                     ; "XXXX XX XX XX XX " (17bytes)
    1911/    D71F :                     ;-------------------------------------------------
    1912/    D71F :                     mk_adr_str:
    1913/    D71F : 21 77 FF            	ld	hl, adr_mc_buf
    1914/    D722 : ED 5B 70 FF         	ld	de, (dasm_adr)
    1915/    D726 : CD FA DE            	call	hex4str		; address XXXX
    1916/    D729 : CD 8A DF            	call	ins_spcR
    1917/    D72C : CD 8A DF            	call	ins_spcR
    1918/    D72F :                     
    1919/    D72F : 06 04               	ld	b, 4
    1920/    D731 : 3A 76 FF            	ld	a, (mc_Size)
    1921/    D734 : 4F                  	ld	c, a
    1922/    D735 :                     mas_1:
    1923/    D735 : 1A                  	ld	a, (de)
    1924/    D736 : 13                  	inc	de
    1925/    D737 :                     
    1926/    D737 : D5                  	push	de
    1927/    D738 : 5F                  	ld	e, a
    1928/    D739 : CD 02 DF            	call	hex2str		; MC XX
    1929/    D73C : CD 8A DF            	call	ins_spcR
    1930/    D73F : D1                  	pop	de
    1931/    D740 :                     
    1932/    D740 : 05                  	dec	b
    1933/    D741 : 28 0F               	jr	z, mas_3	; end
    1934/    D743 : 0D                  	dec	c
    1935/    D744 : 20 EF               	jr	nz, mas_1
    1936/    D746 :                     
    1937/    D746 :                     mas_2:	
    1938/    D746 : CD 8A DF            	call	ins_spcR
    1939/    D749 : CD 8A DF            	call	ins_spcR
    1940/    D74C : CD 8A DF            	call	ins_spcR
    1941/    D74F : 05                  	dec	b
    1942/    D750 : 20 F4               	jr	nz, mas_2
    1943/    D752 :                     mas_3:
    1944/    D752 : CD 8A DF            	call	ins_spcR
    1945/    D755 : ED 53 70 FF         	ld	(dasm_adr), de	; set next analysis address
    1946/    D759 : C9                  	ret
    1947/    D75A :                     
    1948/    D75A :                     ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1949/    D75A :                     ; dis assemble analysis
    1950/    D75A :                     ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1951/    D75A :                     
    1952/    D75A :                     dis_analysis:
    1953/    D75A :                     
    1954/    D75A :                     	; pre init string buffer
    1955/    D75A :                     
    1956/    D75A : 3E 01               	ld	a, 1
    1957/    D75C : 32 76 FF            	ld	(mc_Size), a
    1958/    D75F :                     
    1959/    D75F : 11 59 E0            	ld	de, LDstr	; insert LD string
    1960/    D762 : CD 1E DF            	call	mkopcstr
    1961/    D765 :                     
    1962/    D765 : 21 92 FF            	ld	hl, dasm_OprStr
    1963/    D768 : CD 4A DF            	call	insPostStr	; CR, LF, 00h
    1964/    D76B :                     
    1965/    D76B : 2A 70 FF            	ld	hl, (dasm_adr)
    1966/    D76E : 7E                  	ld	a, (hl)		; get opcode
    1967/    D76F :                     
    1968/    D76F :                     	;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1969/    D76F :                     	; analysys 1 byte MC
    1970/    D76F :                     	;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1971/    D76F :                     
    1972/    D76F :                     ;  check no operand
    1973/    D76F :                     
    1974/    D76F : 01 0D 00            	ld	bc, oth_1op_e - oth_1op_s
    1975/    D772 : 21 9D DF            	ld	hl, oth_1op_s
    1976/    D775 : ED B1               	cpir
    1977/    D777 : 20 12               	jr	nz, chk_ld
    1978/    D779 :                     
    1979/    D779 :                     ;  no operand
    1980/    D779 :                     
    1981/    D779 : 21 AC E1            	ld	hl, oth_1op_tbl
    1982/    D77C : CD A0 DE            	call	get_strBufpoint
    1983/    D77F : C3 1E DF            	jp	mkopcstr
    1984/    D782 :                     
    1985/    D782 :                     get_r_num:
    1986/    D782 : E6 38               	and	38H
    1987/    D784 : 0F                  	rrca
    1988/    D785 : 0F                  	rrca
    1989/    D786 : 0F                  	rrca
    1990/    D787 : 4F                  	ld	c, a
    1991/    D788 : 06 00               	ld	b, 0		; bc ; register No.
    1992/    D78A : C9                  	ret
    1993/    D78B :                     ;
    1994/    D78B :                     ; LD opecode
    1995/    D78B :                     ;
    1996/    D78B :                     
    1997/    D78B :                     ; check LD "A,(BC)", "A,(DE)", "(BC),A", "(DE),A", "SP,HL"
    1998/    D78B :                     
    1999/    D78B :                     chk_ld:
    2000/    D78B : FE 0A               	cp	0AH	; LD	A,(BC)
    2001/    D78D : 28 19               	jr	z, ld_a_kbck
    2002/    D78F : FE 1A               	cp	1AH	; LD	A,(DE)
    2003/    D791 : 28 23               	jr	z, ld_a_kdek
    2004/    D793 : FE 02               	cp	02H	; LD	(BC),A
    2005/    D795 : 28 24               	jr	z, ld_kbck_a
    2006/    D797 : FE 12               	cp	12H	; LD	(DE),A
    2007/    D799 : 28 29               	jr	z, ld_kdek_a
    2008/    D79B : FE F9               	cp	0F9H	; LD	SP,HL
    2009/    D79D : 20 2A               	jr	nz, chk_ld1
    2010/    D79F :                     
    2011/    D79F :                     ; LD SP, HL
    2012/    D79F : 11 1B FC            	ld	de, RNSP
    2013/    D7A2 : CD 71 DF            	call	mk_rcs		; "SP, "
    2014/    D7A5 : C3 44 DF            	jp	hl_crlf
    2015/    D7A8 :                     	
    2016/    D7A8 :                     ; LD A, (BC)
    2017/    D7A8 :                     ld_a_kbck:
    2018/    D7A8 : 11 DA FB            	ld	de, RNBC
    2019/    D7AB :                     ld_a_kxxk:
    2020/    D7AB : D5                  	push	de
    2021/    D7AC : CD 6E DF            	call	a_colon_sp	; "A, "
    2022/    D7AF : D1                  	pop	de
    2023/    D7B0 : CD 58 DF            	call	mk_krk		; "(BC)", "(DE)"
    2024/    D7B3 : C3 4A DF            	jp	insPostStr	; CR, LF, 00h
    2025/    D7B6 :                     
    2026/    D7B6 :                     ; LD A, (DE)
    2027/    D7B6 :                     ld_a_kdek:
    2028/    D7B6 : 11 E1 FB            	ld	de, RNDE
    2029/    D7B9 : 18 F0               	jr	ld_a_kxxk
    2030/    D7BB :                     
    2031/    D7BB :                     ; LD (BC), A
    2032/    D7BB :                     ld_kbck_a:
    2033/    D7BB : 11 DA FB            	ld	de, RNBC
    2034/    D7BE :                     
    2035/    D7BE :                     ld_kxxk_a:
    2036/    D7BE : CD 60 DF            	call	mk_krkcs	; "(BC), ", "(DE), "
    2037/    D7C1 : C3 39 DF            	jp	a_crlf		; "A",CR,LF
    2038/    D7C4 :                     
    2039/    D7C4 :                     ; LD (DE), A
    2040/    D7C4 :                     ld_kdek_a:
    2041/    D7C4 : 11 E1 FB            	ld	de, RNDE
    2042/    D7C7 : 18 F5               	jr	ld_kxxk_a
    2043/    D7C9 :                     
    2044/    D7C9 :                     ; check other 1byte LD MC
    2045/    D7C9 :                     
    2046/    D7C9 :                     chk_ld1:
    2047/    D7C9 : FE 40               	cp	40h
    2048/    D7CB : DA 61 D8            	jp	c, chk_inc
    2049/    D7CE : FE 80               	cp	80h
    2050/    D7D0 : 30 28               	jr	nc, chk_add
    2051/    D7D2 : FE 76               	cp	76h	; HALT?
    2052/    D7D4 : 20 06               	jr	nz, LD1op
    2053/    D7D6 :                     
    2054/    D7D6 : 11 5C E0            	ld	de, HLTstr	; HALT string
    2055/    D7D9 : C3 1E DF            	jp	mkopcstr	; de : next string buffer addr
    2056/    D7DC :                     
    2057/    D7DC :                     ; LD
    2058/    D7DC :                     
    2059/    D7DC :                     LD1op:
    2060/    D7DC : CD 82 D7            	call	get_r_num
    2061/    D7DF : CD 9D DE            	call	get_rstg_off
    2062/    D7E2 : 21 92 FF            	ld	hl, dasm_OprStr
    2063/    D7E5 : CD 71 DF            	call	mk_rcs		; "REG, "
    2064/    D7E8 :                     
    2065/    D7E8 :                     mk_2ndopr:
    2066/    D7E8 : ED 5B 70 FF         	ld	de, (dasm_adr)
    2067/    D7EC : 1A                  	ld	a, (de)		; get opcode
    2068/    D7ED : E6 07               	and	07h
    2069/    D7EF : 4F                  	ld	c, a
    2070/    D7F0 : 06 00               	ld	b, 0
    2071/    D7F2 :                     
    2072/    D7F2 :                     mk_2ndopr1:
    2073/    D7F2 : E5                  	push	hl		; save copy buffer
    2074/    D7F3 : CD 9D DE            	call	get_rstg_off
    2075/    D7F6 : E1                  	pop	hl		; copy buffer
    2076/    D7F7 : C3 47 DF            	jp	cpstr_crlf	; "REG",CR,LF
    2077/    D7FA :                     
    2078/    D7FA :                     ; ADD 80H - 87H
    2079/    D7FA :                     ; check ADD code
    2080/    D7FA :                     
    2081/    D7FA :                     chk_add:
    2082/    D7FA : FE 88               	cp	88h
    2083/    D7FC : 30 08               	jr	nc, chk_adc
    2084/    D7FE :                     
    2085/    D7FE :                     ; ADD
    2086/    D7FE : CD 1B DF            	call	add_opstr
    2087/    D801 : CD 6E DF            	call	a_colon_sp
    2088/    D804 : 18 E2               	jr	mk_2ndopr
    2089/    D806 :                     
    2090/    D806 :                     ; ADC 88H - 8FH
    2091/    D806 :                     ; check ADC code
    2092/    D806 :                     
    2093/    D806 :                     chk_adc:
    2094/    D806 : FE 90               	cp	90h
    2095/    D808 : 30 0B               	jr	nc, chk_sub
    2096/    D80A :                     
    2097/    D80A :                     ; ADC
    2098/    D80A : 11 65 E0            	ld	de, ADCstr
    2099/    D80D : CD 1E DF            	call	mkopcstr
    2100/    D810 : CD 6E DF            	call	a_colon_sp
    2101/    D813 : 18 D3               	jr	mk_2ndopr
    2102/    D815 :                     
    2103/    D815 :                     ; SUB 90H - 97H
    2104/    D815 :                     ; check SUB code
    2105/    D815 :                     
    2106/    D815 :                     chk_sub:
    2107/    D815 : FE 98               	cp	98h
    2108/    D817 : 30 08               	jr	nc, chk_sbc
    2109/    D819 :                     
    2110/    D819 :                     ; SUB
    2111/    D819 : 11 69 E0            	ld	de, SUBstr
    2112/    D81C : CD 1E DF            	call	mkopcstr
    2113/    D81F : 18 C7               	jr	mk_2ndopr
    2114/    D821 :                     
    2115/    D821 :                     ; SBC 98H - 9FH
    2116/    D821 :                     ; check SBC code
    2117/    D821 :                     
    2118/    D821 :                     chk_sbc:
    2119/    D821 : FE A0               	cp	0A0h
    2120/    D823 : 30 0B               	jr	nc, chk_and
    2121/    D825 :                     
    2122/    D825 :                     ; SBC
    2123/    D825 : 11 6D E0            	ld	de, SBCstr
    2124/    D828 : CD 1E DF            	call	mkopcstr
    2125/    D82B : CD 6E DF            	call	a_colon_sp
    2126/    D82E : 18 B8               	jr	mk_2ndopr
    2127/    D830 :                     
    2128/    D830 :                     ; AND 0A0H - 0A7H
    2129/    D830 :                     ; check AND code
    2130/    D830 :                     
    2131/    D830 :                     chk_and:
    2132/    D830 : FE A8               	cp	0A8h
    2133/    D832 : 30 08               	jr	nc, chk_xor
    2134/    D834 :                     
    2135/    D834 :                     ; AND
    2136/    D834 : 11 71 E0            	ld	de, ANDstr
    2137/    D837 : CD 1E DF            	call	mkopcstr
    2138/    D83A : 18 AC               	jr	mk_2ndopr
    2139/    D83C :                     
    2140/    D83C :                     ; XOR 0A8H - 0AFH
    2141/    D83C :                     ; check XOR code
    2142/    D83C :                     
    2143/    D83C :                     chk_xor:
    2144/    D83C :                     
    2145/    D83C : FE B0               	cp	0B0h
    2146/    D83E : 30 08               	jr	nc, chk_or
    2147/    D840 :                     
    2148/    D840 :                     ; XOR
    2149/    D840 : 11 75 E0            	ld	de, XORstr
    2150/    D843 : CD 1E DF            	call	mkopcstr
    2151/    D846 : 18 A0               	jr	mk_2ndopr
    2152/    D848 :                     
    2153/    D848 :                     ; OR 0B0H - 0B7H
    2154/    D848 :                     ; check OR code
    2155/    D848 :                     
    2156/    D848 :                     chk_or:
    2157/    D848 : FE B8               	cp	0B8h
    2158/    D84A : 30 08               	jr	nc, chk_cp
    2159/    D84C :                     
    2160/    D84C :                     ; OR
    2161/    D84C : 11 79 E0            	ld	de, ORstr
    2162/    D84F : CD 1E DF            	call	mkopcstr
    2163/    D852 : 18 94               	jr	mk_2ndopr
    2164/    D854 :                     
    2165/    D854 :                     ; CP 0B8H - 0BFH
    2166/    D854 :                     ; check CP code
    2167/    D854 :                     
    2168/    D854 :                     chk_cp:
    2169/    D854 : FE C0               	cp	0C0h
    2170/    D856 : D2 DD D8            	jp	nc, chk_pop_rp
    2171/    D859 :                     
    2172/    D859 :                     ; CP
    2173/    D859 : 11 7C E0            	ld	de, CPstr
    2174/    D85C : CD 1E DF            	call	mkopcstr
    2175/    D85F : 18 87               	jr	mk_2ndopr
    2176/    D861 :                     
    2177/    D861 :                     ;check INC
    2178/    D861 :                     
    2179/    D861 :                     chk_inc:
    2180/    D861 : 01 08 00            	ld	bc, INC_OPCDTBLE - INC_OPCDTBLS
    2181/    D864 : 21 AA DF            	ld	hl, INC_OPCDTBLS
    2182/    D867 : ED B1               	cpir
    2183/    D869 : 20 0E               	jr	nz, chk_dec
    2184/    D86B :                     
    2185/    D86B :                     ; INC
    2186/    D86B : F5                  	push	af
    2187/    D86C : 11 7F E0            	ld	de, INCstr
    2188/    D86F : CD 1E DF            	call	mkopcstr
    2189/    D872 : F1                  	pop	af
    2190/    D873 :                     
    2191/    D873 :                     inc_dec:
    2192/    D873 : CD 82 D7            	call	get_r_num
    2193/    D876 : C3 F2 D7            	jp	mk_2ndopr1
    2194/    D879 :                     
    2195/    D879 :                     ;check dec
    2196/    D879 :                     
    2197/    D879 :                     chk_dec:
    2198/    D879 : 01 08 00            	ld	bc, DEC_OPCDTBLE - DEC_OPCDTBLS
    2199/    D87C : 21 B2 DF            	ld	hl, DEC_OPCDTBLS
    2200/    D87F : ED B1               	cpir
    2201/    D881 : 20 0A               	jr	nz, chk_inc_rp
    2202/    D883 :                     
    2203/    D883 :                     ; DEC
    2204/    D883 : F5                  	push	af
    2205/    D884 : 11 83 E0            	ld	de, DECstr
    2206/    D887 : CD 1E DF            	call	mkopcstr
    2207/    D88A : F1                  	pop	af
    2208/    D88B : 18 E6               	jr	inc_dec
    2209/    D88D :                     
    2210/    D88D :                     ; check inc rp
    2211/    D88D :                     
    2212/    D88D :                     chk_inc_rp:
    2213/    D88D : 01 04 00            	ld	bc, inc_rp_e - inc_rp_s
    2214/    D890 : 21 BA DF            	ld	hl, inc_rp_s
    2215/    D893 : ED B1               	cpir
    2216/    D895 : 20 0F               	jr	nz, chk_dec_rp
    2217/    D897 :                     
    2218/    D897 :                     ; INC rp
    2219/    D897 : 11 7F E0            	ld	de, INCstr
    2220/    D89A : CD 1E DF            	call	mkopcstr
    2221/    D89D :                     
    2222/    D89D : 21 9C E1            	ld	hl, INC_DEC_ADDrp
    2223/    D8A0 : CD 94 DE            	call	mk_str
    2224/    D8A3 : C3 4A DF            	jp	insPostStr	; CR, LF, 00h
    2225/    D8A6 :                     
    2226/    D8A6 :                     ; check dec rp
    2227/    D8A6 :                     
    2228/    D8A6 :                     chk_dec_rp:
    2229/    D8A6 : 01 04 00            	ld	bc, dec_rp_e - dec_rp_s
    2230/    D8A9 : 21 BE DF            	ld	hl, dec_rp_s
    2231/    D8AC : ED B1               	cpir
    2232/    D8AE : 20 0F               	jr	nz, chk_add_rp
    2233/    D8B0 :                     
    2234/    D8B0 :                     ; dec rp
    2235/    D8B0 : 11 83 E0            	ld	de, DECstr
    2236/    D8B3 : CD 1E DF            	call	mkopcstr
    2237/    D8B6 :                     
    2238/    D8B6 : 21 9C E1            	ld	hl, INC_DEC_ADDrp
    2239/    D8B9 : CD 94 DE            	call	mk_str
    2240/    D8BC : C3 4A DF            	jp	insPostStr	; CR, LF, 00h
    2241/    D8BF :                     
    2242/    D8BF :                     ;check ADD HL, rp
    2243/    D8BF :                     
    2244/    D8BF :                     chk_add_rp:
    2245/    D8BF : 01 04 00            	ld	bc, add_rp_e - add_rp_s
    2246/    D8C2 : 21 C2 DF            	ld	hl, add_rp_s
    2247/    D8C5 : ED B1               	cpir
    2248/    D8C7 : 20 46               	jr	nz, chk_ex
    2249/    D8C9 :                     
    2250/    D8C9 :                     ; add hl, rp
    2251/    D8C9 :                     
    2252/    D8C9 : CD 1B DF            	call	add_opstr
    2253/    D8CC :                     
    2254/    D8CC : 11 E8 FB            	ld	de, RNHL
    2255/    D8CF : CD 71 DF            	call	mk_rcs		; "HL, "
    2256/    D8D2 :                     
    2257/    D8D2 : E5                  	push	hl
    2258/    D8D3 : 21 9C E1            	ld	hl, INC_DEC_ADDrp
    2259/    D8D6 : CD A0 DE            	call	get_strBufpoint
    2260/    D8D9 : E1                  	pop	hl
    2261/    D8DA : C3 47 DF            	jp	cpstr_crlf	; CR, LF, 00h
    2262/    D8DD :                     
    2263/    D8DD :                     ; check POP rp
    2264/    D8DD :                     
    2265/    D8DD :                     chk_pop_rp:
    2266/    D8DD : 01 04 00            	ld	bc, pop_rp_e - pop_rp_s
    2267/    D8E0 : 21 C6 DF            	ld	hl, pop_rp_s
    2268/    D8E3 : ED B1               	cpir
    2269/    D8E5 : 20 0F               	jr	nz, chk_push_rp
    2270/    D8E7 :                     
    2271/    D8E7 :                     ; POP RP
    2272/    D8E7 :                     
    2273/    D8E7 : 11 87 E0            	ld	de, POPstr
    2274/    D8EA : CD 1E DF            	call	mkopcstr
    2275/    D8ED :                     
    2276/    D8ED : 21 A4 E1            	ld	hl, POP_PUSHrp
    2277/    D8F0 : CD 94 DE            	call	mk_str
    2278/    D8F3 : C3 4A DF            	jp	insPostStr	; CR, LF, 00h
    2279/    D8F6 :                     
    2280/    D8F6 :                     ; check PUSH rp
    2281/    D8F6 :                     
    2282/    D8F6 :                     chk_push_rp:
    2283/    D8F6 : 01 04 00            	ld	bc, push_rp_e - push_rp_s
    2284/    D8F9 : 21 CA DF            	ld	hl, push_rp_s
    2285/    D8FC : ED B1               	cpir
    2286/    D8FE : 20 0F               	jr	nz, chk_ex
    2287/    D900 :                     
    2288/    D900 :                     ; PUSH RP
    2289/    D900 :                     
    2290/    D900 : 11 8B E0            	ld	de, PUSHstr
    2291/    D903 : CD 1E DF            	call	mkopcstr
    2292/    D906 :                     
    2293/    D906 : 21 A4 E1            	ld	hl, POP_PUSHrp
    2294/    D909 : CD 94 DE            	call	mk_str
    2295/    D90C : C3 4A DF            	jp	insPostStr	; CR, LF, 00h
    2296/    D90F :                     
    2297/    D90F :                     ; check EX XX, XX
    2298/    D90F :                     
    2299/    D90F :                     chk_ex:
    2300/    D90F : FE 08               	cp	08H		; EX	AF,AF'
    2301/    D911 : 28 17               	jr	z, ex_af_af
    2302/    D913 : FE E3               	cp	0E3H		; EX	(SP),HL
    2303/    D915 : 28 21               	jr	z, dex_sp_hl
    2304/    D917 : FE EB               	cp	0EBH		; EX	DE,HL
    2305/    D919 : 20 25               	jr	nz, chk_1mc_bnh
    2306/    D91B :                     
    2307/    D91B :                     ; EX DE, HL
    2308/    D91B : 11 E1 FB            	ld	de, RNDE
    2309/    D91E : CD 71 DF            	call	mk_rcs
    2310/    D921 :                     
    2311/    D921 :                     ins_hl_opr:
    2312/    D921 : CD 44 DF            	call	hl_crlf
    2313/    D924 :                     
    2314/    D924 :                     ins_ex_opc:
    2315/    D924 : 11 90 E0            	ld	de, EXstr
    2316/    D927 : C3 1E DF            	jp	mkopcstr
    2317/    D92A :                     
    2318/    D92A :                     ; EX AF,AF'
    2319/    D92A :                     ex_af_af:
    2320/    D92A : 11 3A E0            	ld	de, RNAF
    2321/    D92D : CD 71 DF            	call	mk_rcs
    2322/    D930 : 11 3D E0            	ld	de, RNAFX
    2323/    D933 : CD 47 DF            	call	cpstr_crlf
    2324/    D936 : 18 EC               	jr ins_ex_opc
    2325/    D938 :                     
    2326/    D938 :                     ; EX (SP),HL
    2327/    D938 :                     dex_sp_hl:
    2328/    D938 : 11 1B FC            	ld	de, RNSP
    2329/    D93B : CD 60 DF            	call	mk_krkcs
    2330/    D93E : 18 E1               	jr	ins_hl_opr
    2331/    D940 :                     
    2332/    D940 :                     ; check other one MC code
    2333/    D940 :                     
    2334/    D940 :                     chk_1mc_bnh:
    2335/    D940 :                     
    2336/    D940 :                     ; check JP (HL)
    2337/    D940 :                     
    2338/    D940 : FE E9               	cp	0E9H		; JP (HL) ?
    2339/    D942 : 20 0F               	jr	nz, chk_ret
    2340/    D944 :                     
    2341/    D944 :                     ; JP (HL)
    2342/    D944 : 11 45 E0            	ld	de, JPstr
    2343/    D947 : CD 1E DF            	call	mkopcstr	; "JP "
    2344/    D94A :                     
    2345/    D94A : 11 E8 FB            	ld	de, RNHL
    2346/    D94D : CD 55 DF            	call	mk_krk_1
    2347/    D950 : C3 4A DF            	jp	insPostStr
    2348/    D953 :                     
    2349/    D953 :                     ; check RET CC
    2350/    D953 :                     chk_ret:
    2351/    D953 : 01 08 00            	ld	bc, RETCC_TBLE - RETCC_TBLS
    2352/    D956 : 21 90 D4            	ld	hl, RETCC_TBLS
    2353/    D959 : ED B1               	cpir
    2354/    D95B : 20 0F               	jr	nz, chk_rst
    2355/    D95D :                     
    2356/    D95D :                     ; RET CC
    2357/    D95D :                     ; BC : 7 >= BC >= 0
    2358/    D95D :                     
    2359/    D95D :                     	; make opcode string
    2360/    D95D : 11 41 E0            	ld	de, RETstr
    2361/    D960 : CD 1E DF            	call	mkopcstr
    2362/    D963 :                     
    2363/    D963 :                     	; make operand string
    2364/    D963 :                     
    2365/    D963 : 21 84 E1            	ld	hl, CC_opr	; string base
    2366/    D966 : CD 94 DE            	call	mk_str
    2367/    D969 : C3 4A DF            	jp	insPostStr	; CR, LF, 00h
    2368/    D96C :                     
    2369/    D96C :                     ; check RST p
    2370/    D96C :                     
    2371/    D96C :                     chk_rst:
    2372/    D96C : 01 08 00            	ld	bc, RST_TBLE - RST_TBLS
    2373/    D96F : 21 AD D4            	ld	hl, RST_TBLS
    2374/    D972 : ED B1               	cpir
    2375/    D974 : 20 17               	jr	nz, chk_2MC		; 2bytes MC
    2376/    D976 :                     
    2377/    D976 :                     ; RST p
    2378/    D976 :                     
    2379/    D976 : 11 55 E0            	ld	de, RSTstr
    2380/    D979 : CD 1E DF            	call	mkopcstr	; de : next string buffer addr
    2381/    D97C :                     
    2382/    D97C :                     ; 0 <= BC <= 7
    2383/    D97C :                     ; 7: 00H  (0000 0 111 : 00 000 000)
    2384/    D97C :                     ; 6: 08H  (0000 0 110 : 00 001 000)
    2385/    D97C :                     ; 5: 10H  (0000 0 101 : 00 010 000)
    2386/    D97C :                     ; 4: 18H  (0000 0 100 : 00 011 000)
    2387/    D97C :                     ; 3: 20H  (0000 0 011 : 00 100 000)
    2388/    D97C :                     ; 2: 28H  (0000 0 010 : 00 101 000)
    2389/    D97C :                     ; 1: 30H  (0000 0 001 : 00 110 000)
    2390/    D97C :                     ; 0: 38H  (0000 0 000 : 00 111 000)
    2391/    D97C :                     ;
    2392/    D97C : 79                  	ld	a, c
    2393/    D97D : 2F                  	cpl		; not a
    2394/    D97E : CB 27               	sla	a
    2395/    D980 : CB 27               	sla	a
    2396/    D982 : CB 27               	sla	a
    2397/    D984 : E6 38               	and	38H	; a = RST No.
    2398/    D986 :                     
    2399/    D986 : 5F                  	ld	e, a
    2400/    D987 : 21 92 FF            	ld	hl, dasm_OprStr
    2401/    D98A : C3 A9 DE            	jp	mk_n2crlf	; "nnH", CR, LF
    2402/    D98D :                     
    2403/    D98D :                     	;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    2404/    D98D :                     	; analysys 2 byte MC
    2405/    D98D :                     	;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    2406/    D98D :                     
    2407/    D98D :                     chk_2MC:
    2408/    D98D :                     
    2409/    D98D : F5                  	push	af
    2410/    D98E : 3E 02               	ld	a, 2
    2411/    D990 : 32 76 FF            	ld	(mc_Size), a
    2412/    D993 : F1                  	pop	af
    2413/    D994 :                     
    2414/    D994 :                     ; check LD r, nn
    2415/    D994 :                     
    2416/    D994 : 01 08 00            	ld	bc, ld_r_nn_e - ld_r_nn_s
    2417/    D997 : 21 4E D5            	ld	hl, ld_r_nn_s
    2418/    D99A : ED B1               	cpir
    2419/    D99C : 20 16               	jr	nz, chk_logop2
    2420/    D99E :                     
    2421/    D99E :                     ; LD r, nn
    2422/    D99E :                     
    2423/    D99E : CD 82 D7            	call	get_r_num
    2424/    D9A1 : CD 9D DE            	call	get_rstg_off
    2425/    D9A4 : CD 71 DF            	call	mk_rcs		; "REG, "
    2426/    D9A7 :                     
    2427/    D9A7 : ED 5B 70 FF         	ld	de, (dasm_adr)
    2428/    D9AB : 13                  	inc	de
    2429/    D9AC : 1A                  	ld	a, (de)		; get nn
    2430/    D9AD : 5F                  	ld	e, a
    2431/    D9AE : CD EC DE            	call	hex2str_asm	; "nnH"
    2432/    D9B1 : C3 4A DF            	jp	insPostStr	; CR, LF, 00h
    2433/    D9B4 :                     
    2434/    D9B4 :                     ; check logical operation with 8 bit literal
    2435/    D9B4 :                     
    2436/    D9B4 :                     chk_logop2:
    2437/    D9B4 :                     
    2438/    D9B4 : 01 0A 00            	ld	bc, log_op_e - log_op_s
    2439/    D9B7 : 21 56 D5            	ld	hl, log_op_s
    2440/    D9BA : ED B1               	cpir
    2441/    D9BC : C2 08 DA            	jp	nz, chk_djnz
    2442/    D9BF :                     
    2443/    D9BF :                     ; logical operation with 8 bit literal
    2444/    D9BF :                     
    2445/    D9BF :                     
    2446/    D9BF : C5                  	push	bc
    2447/    D9C0 : 21 C6 E1            	ld	hl, logop2str
    2448/    D9C3 : CD A0 DE            	call	get_strBufpoint
    2449/    D9C6 : CD 1E DF            	call	mkopcstr		; make op code string
    2450/    D9C9 : C1                  	pop	bc
    2451/    D9CA : 79                  	ld	a, c
    2452/    D9CB :                     
    2453/    D9CB : FE 01               	cp	1
    2454/    D9CD : 28 14               	jr	z, acs_kn2k	; insert "A, (nn)"
    2455/    D9CF : B7                  	or	a
    2456/    D9D0 : 28 1A               	jr	z, ins_kn2k	; insert "(nn), A"
    2457/    D9D2 : FE 07               	cp	7
    2458/    D9D4 : 38 03               	jr	c, ins_n2crlf	; insert  "nnH"
    2459/    D9D6 :                     
    2460/    D9D6 :                     ; insert "A, "
    2461/    D9D6 :                     
    2462/    D9D6 : CD 6E DF            	call	a_colon_sp
    2463/    D9D9 :                     
    2464/    D9D9 :                     ; "nn"
    2465/    D9D9 :                     ins_n2crlf:
    2466/    D9D9 : ED 5B 70 FF         	ld	de, (dasm_adr)
    2467/    D9DD : 13                  	inc	de
    2468/    D9DE : 1A                  	ld	a, (de)
    2469/    D9DF : 5F                  	ld	e, a		; get nn
    2470/    D9E0 : C3 A9 DE            	jp	mk_n2crlf	; "nnH", CR, LF
    2471/    D9E3 :                     
    2472/    D9E3 :                     acs_kn2k:
    2473/    D9E3 : CD 6E DF            	call	a_colon_sp	; "A, "
    2474/    D9E6 : CD F8 D9            	call	kn2k		; "(nnH)"
    2475/    D9E9 : C3 4A DF            	jp	insPostStr	; CR, LF, 00h
    2476/    D9EC :                     
    2477/    D9EC :                     ; "(nn), A"
    2478/    D9EC :                     ins_kn2k:
    2479/    D9EC : 21 92 FF            	ld	hl, dasm_OprStr	;operand str buffer
    2480/    D9EF : CD F8 D9            	call	kn2k		; "(nnH)"
    2481/    D9F2 : CD 96 DF            	call	ins_kmR		; " ,"
    2482/    D9F5 : C3 39 DF            	jp	a_crlf		; "A", CR, LF, 00h
    2483/    D9F8 :                     
    2484/    D9F8 :                     ; "(nnH)"
    2485/    D9F8 :                     kn2k:
    2486/    D9F8 : CD 81 DF            	call	ins_kakkoL	; "("
    2487/    D9FB : ED 5B 70 FF         	ld	de, (dasm_adr)
    2488/    D9FF : 13                  	inc	de
    2489/    DA00 : 1A                  	ld	a, (de)		; get nn
    2490/    DA01 : 5F                  	ld	e, a		; e: nn
    2491/    DA02 : CD EC DE            	call	hex2str_asm	; hex strings
    2492/    DA05 : C3 85 DF            	jp	ins_kakkoR	; ")"
    2493/    DA08 :                     
    2494/    DA08 :                     
    2495/    DA08 :                     ; check DJNZ nn
    2496/    DA08 :                     chk_djnz:
    2497/    DA08 : FE 10               	cp	10H
    2498/    DA0A : 20 05               	jr	nz, chk_jrnn
    2499/    DA0C :                     
    2500/    DA0C :                     ; check DJNZ nn
    2501/    DA0C : 11 4B E0            	ld	de, DJNZstr
    2502/    DA0F : 18 07               	jr	jr_n4crlf
    2503/    DA11 :                     
    2504/    DA11 :                     ; check jr nn
    2505/    DA11 :                     chk_jrnn:
    2506/    DA11 : FE 18               	cp	18H
    2507/    DA13 : 20 0C               	jr	nz, chk_jrcc	; not JR relative
    2508/    DA15 :                     
    2509/    DA15 :                     ; JR Relative
    2510/    DA15 : 11 48 E0            	ld	de, JRstr
    2511/    DA18 :                     jr_n4crlf:
    2512/    DA18 : CD 1E DF            	call	mkopcstr	; de : next string buffer addr
    2513/    DA1B : 21 92 FF            	ld	hl, dasm_OprStr
    2514/    DA1E : C3 CD DE            	jp	mkRel_str	; "nnnnH",cr,lf : nnnn : branch address
    2515/    DA21 :                     
    2516/    DA21 :                     ; JR CC, nn
    2517/    DA21 :                     
    2518/    DA21 :                     chk_jrcc:
    2519/    DA21 : 01 04 00            	ld	bc, JRCC_TBLE - JRCC_TBLS1
    2520/    DA24 : 21 99 D4            	ld	hl, JRCC_TBLS1
    2521/    DA27 : ED B1               	cpir
    2522/    DA29 : 20 12               	jr	nz, chk_3MC	; no, check 3 bnytes MC
    2523/    DA2B :                     
    2524/    DA2B :                     ; JR CC, nn(Relative Value)
    2525/    DA2B :                     
    2526/    DA2B : 11 48 E0            	ld	de, JRstr
    2527/    DA2E : CD 1E DF            	call	mkopcstr
    2528/    DA31 : 21 94 E1            	ld	hl, JRCC_opr1	; string base
    2529/    DA34 : CD 94 DE            	call	mk_str		; "NZ", "Z", "NC", "C"
    2530/    DA37 : CD 96 DF            	call	ins_kmR		; ", "
    2531/    DA3A : C3 CD DE            	jp	mkRel_str	; "nnnnH", cr, lf
    2532/    DA3D :                     
    2533/    DA3D :                     	;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    2534/    DA3D :                     	; analysys 3 byte MC
    2535/    DA3D :                     	;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    2536/    DA3D :                     
    2537/    DA3D :                     chk_3MC:
    2538/    DA3D : F5                  	push	af
    2539/    DA3E : 3E 03               	ld	a, 3
    2540/    DA40 : 32 76 FF            	ld	(mc_Size), a
    2541/    DA43 : F1                  	pop	af
    2542/    DA44 :                     
    2543/    DA44 : 01 04 00            	ld	bc, THREE_OPTBLe - THREE_OPTBL
    2544/    DA47 : 21 60 D5            	ld	hl, THREE_OPTBL
    2545/    DA4A : ED B1               	cpir
    2546/    DA4C : C2 5E DA            	jp	nz, chk_ld16
    2547/    DA4F :                     
    2548/    DA4F :                     ; LD rp, nnnn
    2549/    DA4F :                     
    2550/    DA4F : 21 DA E1            	ld	hl, logop3str
    2551/    DA52 : CD A0 DE            	call	get_strBufpoint
    2552/    DA55 : CD 71 DF            	call	mk_rcs		; "Reg, "
    2553/    DA58 :                     
    2554/    DA58 :                     get_n4crlf:
    2555/    DA58 : CD 86 DA            	call	get_n4
    2556/    DA5B : C3 AF DE            	jp	mk_n4crlf	; "nnnnH", CR, LF, 00h
    2557/    DA5E :                     
    2558/    DA5E :                     ; LD 16bit literal
    2559/    DA5E :                     chk_ld16:
    2560/    DA5E : FE 22               	cp	22h
    2561/    DA60 : 28 12               	jr	z, ins_kkhl	; "(nnnnH), HL"
    2562/    DA62 : FE 32               	cp	32h
    2563/    DA64 : 28 14               	jr	z, ins_kka	; "(nnnnH), A"
    2564/    DA66 : FE 2A               	cp	2ah
    2565/    DA68 : 28 26               	jr	z, ins_hlkk	; "HL, (nnnnH)"
    2566/    DA6A : FE 3A               	cp	3ah
    2567/    DA6C : C2 9F DA            	jp	nz, chk_jpn4	; check jp n4
    2568/    DA6F :                     
    2569/    DA6F :                     ; "A, (nnnnH)"
    2570/    DA6F : CD 6E DF            	call	a_colon_sp	; "A, "
    2571/    DA72 : 18 22               	jr	kn4kcrlf
    2572/    DA74 :                     
    2573/    DA74 :                     ; "(nnnnH), HL"
    2574/    DA74 :                     ins_kkhl:
    2575/    DA74 : CD 80 DA            	call	kn4hk
    2576/    DA77 : C3 44 DF            	jp	hl_crlf		; "HL",cr,lf
    2577/    DA7A :                     
    2578/    DA7A :                     ; "(nnnnH), A"
    2579/    DA7A :                     ins_kka:
    2580/    DA7A : CD 80 DA            	call	kn4hk
    2581/    DA7D : C3 39 DF            	jp	a_crlf		; "A",cr,lf
    2582/    DA80 :                     
    2583/    DA80 :                     kn4hk:
    2584/    DA80 : CD 86 DA            	call	get_n4
    2585/    DA83 : C3 B5 DE            	jp	ins_kn4kcs	; "(nnnnH), "
    2586/    DA86 :                     
    2587/    DA86 :                     get_n4:
    2588/    DA86 : E5                  	push	hl
    2589/    DA87 : 2A 70 FF            	ld	hl, (dasm_adr)
    2590/    DA8A : 23                  	inc	hl
    2591/    DA8B : 5E                  	ld	e, (hl)
    2592/    DA8C : 23                  	inc	hl
    2593/    DA8D : 56                  	ld	d, (hl)
    2594/    DA8E : E1                  	pop	hl
    2595/    DA8F : C9                  	ret
    2596/    DA90 :                     
    2597/    DA90 :                     ; "HL, (nnnnH)"
    2598/    DA90 :                     ins_hlkk:
    2599/    DA90 : 11 E8 FB            	ld	de, RNHL
    2600/    DA93 : CD 71 DF            	call	mk_rcs		; "HL ,"
    2601/    DA96 :                     
    2602/    DA96 :                     kn4kcrlf:
    2603/    DA96 : CD 86 DA            	call	get_n4
    2604/    DA99 : CD C4 DE            	call	mk_kn4k		; "(nnnnH)"
    2605/    DA9C : C3 4A DF            	jp	insPostStr	; cr, lf
    2606/    DA9F :                     
    2607/    DA9F :                     ; check JP literal
    2608/    DA9F :                     
    2609/    DA9F :                     chk_jpn4:
    2610/    DA9F : FE C3               	cp	0C3H		; JP literal ?
    2611/    DAA1 : 20 08               	jr	nz, chk_calln4	; not JP literal
    2612/    DAA3 :                     
    2613/    DAA3 :                     ; "JP nnnnH"
    2614/    DAA3 :                     
    2615/    DAA3 : 11 45 E0            	ld	de, JPstr
    2616/    DAA6 : CD 1E DF            	call	mkopcstr	; de : next string buffer addr
    2617/    DAA9 : 18 AD               	jr	get_n4crlf
    2618/    DAAB :                     
    2619/    DAAB :                     ; check call literal
    2620/    DAAB :                     
    2621/    DAAB :                     chk_calln4:
    2622/    DAAB : FE CD               	cp	0CDH		; CALL literal ?
    2623/    DAAD : 20 08               	jr	nz, chk_jpcc
    2624/    DAAF :                     
    2625/    DAAF :                     ; "CALL nnnnH",cr,lf
    2626/    DAAF :                     
    2627/    DAAF : 11 50 E0            	ld	de, CALLstr
    2628/    DAB2 : CD 1E DF            	call	mkopcstr	; de : next string buffer addr
    2629/    DAB5 : 18 A1               	jr	get_n4crlf
    2630/    DAB7 :                     
    2631/    DAB7 :                     
    2632/    DAB7 :                     ; check 3 byte machine code: branch JP CC, nnnn
    2633/    DAB7 :                     
    2634/    DAB7 :                     chk_jpcc:
    2635/    DAB7 : 01 08 00            	ld	bc, JPCC_TBLE - JPCC_TBLS
    2636/    DABA : 21 9D D4            	ld	hl, JPCC_TBLS
    2637/    DABD : ED B1               	cpir
    2638/    DABF : 20 11               	jr	nz, chk_calcc
    2639/    DAC1 :                     
    2640/    DAC1 :                     ; JP CC, nnnn
    2641/    DAC1 :                     ; BC : 7 >= BC >= 0
    2642/    DAC1 :                     
    2643/    DAC1 : 11 45 E0            	ld	de, JPstr
    2644/    DAC4 :                     
    2645/    DAC4 :                     CC_NNNN:
    2646/    DAC4 : CD 1E DF            	call	mkopcstr	; de : next string buffer addr
    2647/    DAC7 :                     
    2648/    DAC7 : 21 84 E1            	ld	hl, CC_opr	; string base
    2649/    DACA : CD 94 DE            	call	mk_str		; de: point (string end) + 1
    2650/    DACD : CD 96 DF            	call	ins_kmR		; " ,"
    2651/    DAD0 : 18 86               	jr	get_n4crlf	; "nnnnh", cr,lf
    2652/    DAD2 :                     
    2653/    DAD2 :                     
    2654/    DAD2 :                     ; check 3 byte machine code: branch (CALL CC, nnnn 16bit literal)
    2655/    DAD2 :                     
    2656/    DAD2 :                     chk_calcc:
    2657/    DAD2 : 01 08 00            	ld	bc, CLCC_TBLE - CLCC_TBLS
    2658/    DAD5 : 21 A5 D4            	ld	hl, CLCC_TBLS
    2659/    DAD8 : ED B1               	cpir
    2660/    DADA : 20 05               	jr	nz, chk_0CBH
    2661/    DADC :                     
    2662/    DADC :                     ; CALL CC, nnnn
    2663/    DADC :                     ; BC : 7 >= BC >= 0 CALLstr
    2664/    DADC :                     
    2665/    DADC : 11 50 E0            	ld	de, CALLstr
    2666/    DADF : 18 E3               	jr	CC_NNNN
    2667/    DAE1 :                     
    2668/    DAE1 :                     	;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    2669/    DAE1 :                     	; OPECODE 0CBH check
    2670/    DAE1 :                     	;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    2671/    DAE1 :                     
    2672/    DAE1 :                     chk_0CBH:
    2673/    DAE1 : 2A 70 FF            	ld	hl, (dasm_adr)
    2674/    DAE4 : 23                  	inc	hl		; 2nd opecode address
    2675/    DAE5 :                     
    2676/    DAE5 : F5                  	push	af
    2677/    DAE6 : 3E 02               	ld	a, 2
    2678/    DAE8 : 32 76 FF            	ld	(mc_Size), a	; set 2bytes MC
    2679/    DAEB : F1                  	pop	af
    2680/    DAEC :                     
    2681/    DAEC : FE CB               	cp	0cbh
    2682/    DAEE : C2 A7 DB            	jp	nz, chk_0DDH
    2683/    DAF1 :                     
    2684/    DAF1 : 7E                  	ld	a, (hl)		; a : 2nd opecode
    2685/    DAF2 : 21 92 FF            	ld	hl, dasm_OprStr ; set operand string buffer
    2686/    DAF5 :                     
    2687/    DAF5 : FE 08               	cp	08h
    2688/    DAF7 : DA 30 DB            	jp	c, mk_rlcr
    2689/    DAFA : FE 10               	cp	10h
    2690/    DAFC : DA 39 DB            	jp	c, mk_rrcr
    2691/    DAFF : FE 18               	cp	18h
    2692/    DB01 : DA 42 DB            	jp	c, mk_rlr
    2693/    DB04 : FE 20               	cp	20h
    2694/    DB06 : DA 4B DB            	jp	c, mk_rrr
    2695/    DB09 : FE 28               	cp	28h
    2696/    DB0B : DA 54 DB            	jp	c, mk_slar
    2697/    DB0E : FE 30               	cp	30h
    2698/    DB10 : DA 5D DB            	jp	c, mk_srar
    2699/    DB13 : FE 38               	cp	38h
    2700/    DB15 : DA 81 DB            	jp	c, op_err
    2701/    DB18 : FE 40               	cp	40h
    2702/    DB1A : DA 66 DB            	jp	c, mk_srlr
    2703/    DB1D : FE 80               	cp	80h
    2704/    DB1F : DA 6F DB            	jp	c, mk_bitr
    2705/    DB22 : FE C0               	cp	0c0h
    2706/    DB24 : DA 78 DB            	jp	c, mk_resr
    2707/    DB27 :                     
    2708/    DB27 :                     ; make SET n, r, SET n, (HL)
    2709/    DB27 :                     
    2710/    DB27 : CD 87 DB            	call	mk_bitr_str
    2711/    DB2A : 11 4F E1            	ld	de, SETstr
    2712/    DB2D : C3 1E DF            	jp	mkopcstr
    2713/    DB30 :                     
    2714/    DB30 :                     
    2715/    DB30 :                     ; make RLC r, RLC (HL)
    2716/    DB30 :                     mk_rlcr:
    2717/    DB30 : CD 8C DB            	call	ins_rstg
    2718/    DB33 : 11 CA E0            	ld	de, RLCstr
    2719/    DB36 : C3 1E DF            	jp	mkopcstr
    2720/    DB39 :                     
    2721/    DB39 :                     ; make RRC r, RRC (HL)
    2722/    DB39 :                     mk_rrcr:
    2723/    DB39 : CD 8C DB            	call	ins_rstg
    2724/    DB3C : 11 CE E0            	ld	de, RRCstr
    2725/    DB3F : C3 1E DF            	jp	mkopcstr
    2726/    DB42 :                     
    2727/    DB42 :                     ; make RL r, RL (HL)
    2728/    DB42 :                     mk_rlr:
    2729/    DB42 : CD 8C DB            	call	ins_rstg
    2730/    DB45 : 11 D2 E0            	ld	de, RLstr
    2731/    DB48 : C3 1E DF            	jp	mkopcstr
    2732/    DB4B :                     
    2733/    DB4B :                     ; make RR r, RR (HL)
    2734/    DB4B :                     mk_rrr:
    2735/    DB4B : CD 8C DB            	call	ins_rstg
    2736/    DB4E : 11 D5 E0            	ld	de, RRstr
    2737/    DB51 : C3 1E DF            	jp	mkopcstr
    2738/    DB54 :                     
    2739/    DB54 :                     ; make SLA r, SLA (HL)
    2740/    DB54 :                     mk_slar:
    2741/    DB54 : CD 8C DB            	call	ins_rstg
    2742/    DB57 : 11 D8 E0            	ld	de, SLAstr
    2743/    DB5A : C3 1E DF            	jp	mkopcstr
    2744/    DB5D :                     
    2745/    DB5D :                     ; make SRA r, SRA (HL)
    2746/    DB5D :                     mk_srar:
    2747/    DB5D : CD 8C DB            	call	ins_rstg
    2748/    DB60 : 11 DC E0            	ld	de, SRAstr
    2749/    DB63 : C3 1E DF            	jp	mkopcstr
    2750/    DB66 :                     
    2751/    DB66 :                     ; make SRL r, SRL (HL)
    2752/    DB66 :                     mk_srlr:
    2753/    DB66 : CD 8C DB            	call	ins_rstg
    2754/    DB69 : 11 E0 E0            	ld	de, SRLstr
    2755/    DB6C : C3 1E DF            	jp	mkopcstr
    2756/    DB6F :                     
    2757/    DB6F :                     ; make BIT n, r, BIT n, (HL)
    2758/    DB6F :                     mk_bitr:
    2759/    DB6F : CD 87 DB            	call	mk_bitr_str
    2760/    DB72 : 11 E4 E0            	ld	de, BITstr
    2761/    DB75 : C3 1E DF            	jp	mkopcstr
    2762/    DB78 :                     
    2763/    DB78 :                     ; make RES n, r, RES n, (HL)
    2764/    DB78 :                     mk_resr:
    2765/    DB78 : CD 87 DB            	call	mk_bitr_str
    2766/    DB7B : 11 E8 E0            	ld	de, RESstr
    2767/    DB7E : C3 1E DF            	jp	mkopcstr
    2768/    DB81 :                     
    2769/    DB81 :                     op_err:
    2770/    DB81 : 11 53 E1            	ld	de, ER_OPMSG
    2771/    DB84 : C3 1E DF            	jp	mkopcstr
    2772/    DB87 :                     
    2773/    DB87 :                     ;-------------------------------------------
    2774/    DB87 :                     ; input a : 2nd opecode
    2775/    DB87 :                     ;	hl : make string buffer
    2776/    DB87 :                     ; make "bit No, r" string to *hl
    2777/    DB87 :                     ; (ex) *hl = "1, B"
    2778/    DB87 :                     ;-------------------------------------------
    2779/    DB87 :                     mk_bitr_str:
    2780/    DB87 : F5                  	push	af
    2781/    DB88 : CD 99 DB            	call	set_bitno
    2782/    DB8B : F1                  	pop	af
    2783/    DB8C :                     
    2784/    DB8C :                     ins_rstg:
    2785/    DB8C : E6 07               	and	07h
    2786/    DB8E : 4F                  	ld	c, a	; table offset
    2787/    DB8F : 06 00               	ld	b, 0		; bc : string offset
    2788/    DB91 : E5                  	push	hl
    2789/    DB92 : CD 9D DE            	call	get_rstg_off	; get string address to de
    2790/    DB95 : E1                  	pop	hl
    2791/    DB96 : C3 47 DF            	jp	cpstr_crlf	; "REG", CR, LF, 00h
    2792/    DB99 :                     ;
    2793/    DB99 :                     ; input hl : make string buffer
    2794/    DB99 :                     ;
    2795/    DB99 :                     set_bitno:
    2796/    DB99 : E6 38               	and	38h
    2797/    DB9B : 0F                  	rrca
    2798/    DB9C : 0F                  	rrca
    2799/    DB9D : 0F                  	rrca
    2800/    DB9E : 47                  	ld	b, a	; bit number
    2801/    DB9F :                     
    2802/    DB9F : 3E 30               	ld	a, 30h
    2803/    DBA1 : B0                  	or	b		; a : bit string "0" - "7"
    2804/    DBA2 : 77                  	ld	(hl), a
    2805/    DBA3 : 23                  	inc	hl
    2806/    DBA4 : C3 96 DF            	jp	ins_kmR
    2807/    DBA7 :                     
    2808/    DBA7 :                     	;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    2809/    DBA7 :                     	; OPECODE 0DDH check
    2810/    DBA7 :                     	;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    2811/    DBA7 :                     
    2812/    DBA7 :                     chk_0DDH:
    2813/    DBA7 : FE DD               	cp	0ddh
    2814/    DBA9 : C2 4D DD            	jp	nz, chk_0EDH
    2815/    DBAC :                     
    2816/    DBAC : 11 15 FC            	ld	de, RNIX
    2817/    DBAF : ED 53 72 FF         	ld	(reg_xy), de	; save index reg string
    2818/    DBB3 : 11 F6 E1            	ld	de, addixrp_tbl
    2819/    DBB6 : ED 53 74 FF         	ld	(xy_srtp), de
    2820/    DBBA :                     
    2821/    DBBA :                     chk_0DDH_1:
    2822/    DBBA :                     
    2823/    DBBA : 7E                  	ld	a, (hl)		; get 2nd opcode
    2824/    DBBB :                     
    2825/    DBBB : FE E3               	cp	0E3h	; EX (SP),IX
    2826/    DBBD : CA 01 DC            	jp	z, ins_kspkix
    2827/    DBC0 : FE E9               	cp	0E9h	; JP (IX)
    2828/    DBC2 : CA EF DB            	jp	z, ins_jpix
    2829/    DBC5 : FE F9               	cp	0F9h	; LD SP, IX
    2830/    DBC7 : CA 10 DC            	jp	z, ins_spix
    2831/    DBCA :                     
    2832/    DBCA : 01 04 00            	ld	bc, DD_2NDTBL1 - DD_2NDTBL
    2833/    DBCD : 21 68 D5            	ld	hl, DD_2NDTBL
    2834/    DBD0 : ED B1               	cpir
    2835/    DBD2 : CA 19 DC            	jp	z, ins_ixrp
    2836/    DBD5 :                     
    2837/    DBD5 : 01 04 00            	ld	bc, DD_2NDTBL2 - DD_2NDTBL1
    2838/    DBD8 : 21 6C D5            	ld	hl, DD_2NDTBL1
    2839/    DBDB : ED B1               	cpir
    2840/    DBDD : C2 2E DC            	jp	nz, chk_0DD3op
    2841/    DBE0 :                     
    2842/    DBE0 :                     ; INC	IX
    2843/    DBE0 :                     ; DEC	IX
    2844/    DBE0 :                     ; PUSH	IX
    2845/    DBE0 :                     ; POP	IX
    2846/    DBE0 : 21 EE E1            	ld	hl, dd_2opt
    2847/    DBE3 : CD A0 DE            	call	get_strBufpoint
    2848/    DBE6 : CD 1E DF            	call	mkopcstr		; inseert OPCODE strings to dasm_OpcStr
    2849/    DBE9 :                     
    2850/    DBE9 : 21 92 FF            	ld	hl, dasm_OprStr
    2851/    DBEC : C3 3E DF            	jp	ix_crlf			; "IX", CR, LF, 00h
    2852/    DBEF :                     
    2853/    DBEF :                     ; JP	(IX)
    2854/    DBEF :                     ins_jpix:
    2855/    DBEF : ED 5B 72 FF         	ld	de, (reg_xy)
    2856/    DBF3 :                     ins_jpix1:
    2857/    DBF3 : D5                  	push	de
    2858/    DBF4 : 11 45 E0            	ld	de, JPstr
    2859/    DBF7 : CD 1E DF            	call	mkopcstr	; de : next string buffer addr
    2860/    DBFA :                     
    2861/    DBFA : D1                  	pop	de
    2862/    DBFB : CD 55 DF            	call	mk_krk_1
    2863/    DBFE : C3 4A DF            	jp	insPostStr	; CR, LF, 00h
    2864/    DC01 :                     
    2865/    DC01 :                     ; EX	(SP),IX
    2866/    DC01 :                     ins_kspkix:
    2867/    DC01 : 11 90 E0            	ld	de, EXstr
    2868/    DC04 : CD 1E DF            	call	mkopcstr	; de : next string buffer addr
    2869/    DC07 : 11 1B FC            	ld	de, RNSP
    2870/    DC0A : CD 60 DF            	call	mk_krkcs	; "(SP), "
    2871/    DC0D : C3 3E DF            	jp	ix_crlf		; "IX",cr,lf
    2872/    DC10 :                     
    2873/    DC10 :                     ; LD	SP,IX
    2874/    DC10 :                     ins_spix:
    2875/    DC10 : 11 1B FC            	ld	de, RNSP
    2876/    DC13 : CD 71 DF            	call	mk_rcs		; "SP, "
    2877/    DC16 : C3 3E DF            	jp	ix_crlf		; "IX",cr,lf
    2878/    DC19 :                     
    2879/    DC19 :                     ; ADD	IX,BC
    2880/    DC19 :                     ; ADD	IX,DE
    2881/    DC19 :                     ; ADD	IX,IX
    2882/    DC19 :                     ; ADD	IX,SP
    2883/    DC19 :                     ins_ixrp:
    2884/    DC19 : CD 1B DF            	call	add_opstr	; de : next string buffer addr
    2885/    DC1C :                     
    2886/    DC1C : ED 5B 72 FF         	ld	de, (reg_xy)
    2887/    DC20 : CD 71 DF            	call	mk_rcs		; "IX, "
    2888/    DC23 :                     
    2889/    DC23 : E5                  	push	hl
    2890/    DC24 : 2A 74 FF            	ld	hl, (xy_srtp)
    2891/    DC27 : CD A0 DE            	call	get_strBufpoint
    2892/    DC2A : E1                  	pop	hl
    2893/    DC2B : C3 47 DF            	jp	cpstr_crlf	; "REG",cr,lf
    2894/    DC2E :                     
    2895/    DC2E :                     ;
    2896/    DC2E :                     ; check 0DD 3bytes MC
    2897/    DC2E :                     ;
    2898/    DC2E :                     chk_0DD3op:
    2899/    DC2E : F5                  	push	af
    2900/    DC2F : 3E 03               	ld	a, 3
    2901/    DC31 : 32 76 FF            	ld	(mc_Size), a	; 2byte machine code
    2902/    DC34 : F1                  	pop	af
    2903/    DC35 :                     
    2904/    DC35 : 01 0E 00            	ld	bc, dd_ld_tble - dd_ld_tbl
    2905/    DC38 : 21 CE DF            	ld	hl, dd_ld_tbl
    2906/    DC3B : ED B1               	cpir
    2907/    DC3D : CA 6D DC            	jp	z, dd_ld
    2908/    DC40 :                     
    2909/    DC40 : FE 86               	cp	86h
    2910/    DC42 : CA 98 DC            	jp	z, dd_mix
    2911/    DC45 : FE 8E               	cp	8eh
    2912/    DC47 : CA A3 DC            	jp	z, dd_mix1
    2913/    DC4A : FE 9E               	cp	9eh
    2914/    DC4C : CA A8 DC            	jp	z, dd_mix2
    2915/    DC4F :                     
    2916/    DC4F : 01 07 00            	ld	bc, dd_log_tble - dd_log_tbl
    2917/    DC52 : 21 DC DF            	ld	hl, dd_log_tbl
    2918/    DC55 : ED B1               	cpir
    2919/    DC57 : C2 AD DC            	jp	nz, chk_0DD4op
    2920/    DC5A :                     
    2921/    DC5A :                     ;
    2922/    DC5A :                     ; make "SUB (IX+nn)", "AND (IX+nn)", "XOR (IX+nn)"
    2923/    DC5A :                     ;       "OR (IX+nn)",  "CP (IX+nn)"
    2924/    DC5A :                     ;      "INC (IX+nn)", "DEC (IX+nn)"
    2925/    DC5A :                     ;
    2926/    DC5A : 21 06 E2            	ld	hl, ddlogtbl
    2927/    DC5D : CD A0 DE            	call	get_strBufpoint
    2928/    DC60 : CD 1E DF            	call	mkopcstr
    2929/    DC63 :                     
    2930/    DC63 :                     mk_kixpnk:
    2931/    DC63 : ED 5B 72 FF         	ld	de, (reg_xy)
    2932/    DC67 :                     
    2933/    DC67 :                     mk_kiypnk:
    2934/    DC67 : 21 92 FF            	ld	hl, dasm_OprStr
    2935/    DC6A : C3 64 DE            	jp	kixypnk_crlf		; "(IX+nnH)",cr,lf
    2936/    DC6D :                     
    2937/    DC6D :                     ;
    2938/    DC6D :                     ; make "LD (IX+nn), r" or "LD r, (IX+nn)"
    2939/    DC6D :                     ;
    2940/    DC6D :                     dd_ld:
    2941/    DC6D : 79                  	ld	a, c
    2942/    DC6E : FE 07               	cp	7
    2943/    DC70 : D2 85 DC            	jp	nc, dd_ld1
    2944/    DC73 :                     	
    2945/    DC73 :                     ; LD (IX+nn), r
    2946/    DC73 : ED 5B 72 FF         	ld	de, (reg_xy)
    2947/    DC77 : CD 5B DE            	call	kixypnk_cs	; make "(IX+nn), "
    2948/    DC7A :                     
    2949/    DC7A : E5                  	push	hl
    2950/    DC7B : 21 14 E2            	ld	hl, dd_ldtbl
    2951/    DC7E : CD A0 DE            	call	get_strBufpoint
    2952/    DC81 : E1                  	pop	hl
    2953/    DC82 : C3 47 DF            	jp	cpstr_crlf	; "A", "L", "H", "E", D", "C", "B"
    2954/    DC85 :                     				; CR, LF, 00h
    2955/    DC85 :                     	
    2956/    DC85 :                     ; LD r, (IX+nn)
    2957/    DC85 :                     dd_ld1:
    2958/    DC85 : D6 07               	sub	7
    2959/    DC87 : 4F                  	ld	c, a
    2960/    DC88 : 21 14 E2            	ld	hl, dd_ldtbl
    2961/    DC8B : CD A0 DE            	call	get_strBufpoint
    2962/    DC8E :                     
    2963/    DC8E : CD 71 DF            	call	mk_rcs		; "REG, "
    2964/    DC91 :                     dd_mix4:
    2965/    DC91 : ED 5B 72 FF         	ld	de, (reg_xy)
    2966/    DC95 : C3 64 DE            	jp	kixypnk_crlf	; "(IX+nn)", CR, LF, 00h
    2967/    DC98 :                     
    2968/    DC98 :                     
    2969/    DC98 :                     ; "ADD A,(IX+nn)"
    2970/    DC98 :                     dd_mix:
    2971/    DC98 : 11 61 E0            	ld	de, ADDstr
    2972/    DC9B :                     dd_mix3:
    2973/    DC9B : CD 1E DF            	call	mkopcstr	; "ADD"
    2974/    DC9E : CD 6E DF            	call	a_colon_sp	; "A, "
    2975/    DCA1 : 18 EE               	jr	dd_mix4		; "(IX+nn)",cr,lf
    2976/    DCA3 :                     
    2977/    DCA3 :                     ;"ADC A,(IX+nn)"
    2978/    DCA3 :                     dd_mix1:
    2979/    DCA3 : 11 65 E0            	ld	de, ADCstr
    2980/    DCA6 : 18 F3               	jr	dd_mix3
    2981/    DCA8 :                     
    2982/    DCA8 :                     ;"SBC A,(IX+nn)"
    2983/    DCA8 :                     dd_mix2:
    2984/    DCA8 : 11 6D E0            	ld	de, SBCstr
    2985/    DCAB : 18 EE               	jr	dd_mix3
    2986/    DCAD :                     
    2987/    DCAD :                     ;
    2988/    DCAD :                     ; check 0DD 4bytes MC
    2989/    DCAD :                     ;
    2990/    DCAD :                     chk_0DD4op:
    2991/    DCAD : F5                  	push	af
    2992/    DCAE : 3E 04               	ld	a, 4
    2993/    DCB0 : 32 76 FF            	ld	(mc_Size), a	; 2byte machine code
    2994/    DCB3 : F1                  	pop	af
    2995/    DCB4 :                     
    2996/    DCB4 : FE 21               	cp	21h
    2997/    DCB6 : CA D3 DC            	jp	z, DD_21
    2998/    DCB9 : FE 22               	cp	22h
    2999/    DCBB : CA E0 DC            	jp	z, DD_22
    3000/    DCBE : FE 2A               	cp	2ah
    3001/    DCC0 : CA E9 DC            	jp	z, DD_2a
    3002/    DCC3 : FE 36               	cp	36h
    3003/    DCC5 : C2 F9 DC            	jp	nz, chk_DD_CB
    3004/    DCC8 :                     ; DD 36
    3005/    DCC8 :                     ; "LD (IX+xx), yy"
    3006/    DCC8 :                     
    3007/    DCC8 : ED 5B 72 FF         	ld	de, (reg_xy)
    3008/    DCCC : CD 5B DE            	call	kixypnk_cs	; "(IX+xx), "
    3009/    DCCF : 5A                  	ld	e, d		; e: yy
    3010/    DCD0 : C3 A9 DE            	jp	mk_n2crlf	; "0yyH",cr,lf
    3011/    DCD3 :                     
    3012/    DCD3 :                     
    3013/    DCD3 :                     ; "LD IX, nnnn"
    3014/    DCD3 :                     DD_21:
    3015/    DCD3 : ED 5B 72 FF         	ld	de, (reg_xy)
    3016/    DCD7 : CD 71 DF            	call	mk_rcs		; "IX, "
    3017/    DCDA : CD 89 DE            	call	get_nnnn
    3018/    DCDD : C3 AF DE            	jp	mk_n4crlf	; "nnnnH",cr,lf
    3019/    DCE0 :                     
    3020/    DCE0 :                     ; "LD (nnnn), IX"
    3021/    DCE0 :                     DD_22:
    3022/    DCE0 : CD 89 DE            	call	get_nnnn
    3023/    DCE3 : CD B5 DE            	call	ins_kn4kcs	; "(nnnnH), "
    3024/    DCE6 : C3 3E DF            	jp	ix_crlf		; "IX",cr,lf
    3025/    DCE9 :                     
    3026/    DCE9 :                     ; "LD IX, (nnnn)"
    3027/    DCE9 :                     DD_2a:
    3028/    DCE9 : ED 5B 72 FF         	ld	de, (reg_xy)
    3029/    DCED :                     DD_2a1:
    3030/    DCED : CD 71 DF            	call	mk_rcs		; "IX, "
    3031/    DCF0 : CD 89 DE            	call	get_nnnn
    3032/    DCF3 : CD C4 DE            	call	mk_kn4k		; "(nnnnH)"
    3033/    DCF6 : C3 4A DF            	jp	insPostStr	; cr,lf
    3034/    DCF9 :                     
    3035/    DCF9 :                     chk_DD_CB
    3036/    DCF9 : FE CB               	cp	0CBH
    3037/    DCFB : C2 81 DB            	jp	nz, op_err
    3038/    DCFE :                     
    3039/    DCFE : CD 89 DE            	call	get_nnnn	; d: 3rd OP, e:nn
    3040/    DD01 : 7A                  	ld	a, d
    3041/    DD02 :                     
    3042/    DD02 : 01 07 00            	ld	bc, dd_rt_tble - dd_rt_tbles
    3043/    DD05 : 21 E3 DF            	ld	hl, dd_rt_tbles
    3044/    DD08 : ED B1               	cpir
    3045/    DD0A : C2 19 DD            	jp	nz, DD_CB_nn_XX
    3046/    DD0D :                     
    3047/    DD0D : 21 4C E2            	ld	hl, dd_rt_str
    3048/    DD10 : CD A0 DE            	call	get_strBufpoint
    3049/    DD13 : CD 1E DF            	call	mkopcstr	; RLC, RRC, RL, RR, SLA, SRA, SRL
    3050/    DD16 : C3 63 DC            	jp	mk_kixpnk	; "(IX+nnH)",cr,lf
    3051/    DD19 :                     
    3052/    DD19 :                     ; check BIT, RES, SET
    3053/    DD19 :                     DD_CB_nn_XX:
    3054/    DD19 :                     
    3055/    DD19 :                     	; check undefine MC
    3056/    DD19 : 01 18 00            	ld	bc, dd_bit_opTble - dd_bit_opTbl
    3057/    DD1C : 21 EA DF            	ld	hl, dd_bit_opTbl
    3058/    DD1F : ED B1               	cpir
    3059/    DD21 : C2 81 DB            	jp	nz, op_err
    3060/    DD24 :                     
    3061/    DD24 : FE 80               	cp	80h
    3062/    DD26 : DA 3D DD            	jp	c, dd_bit
    3063/    DD29 : FE C0               	cp	0c0h
    3064/    DD2B : DA 45 DD            	jp	c, dd_res
    3065/    DD2E :                     
    3066/    DD2E :                     ; DD_SET
    3067/    DD2E :                     ; "SET i, (IX+nn)"
    3068/    DD2E :                     
    3069/    DD2E : 11 4F E1            	ld	de, SETstr
    3070/    DD31 : CD 1E DF            	call	mkopcstr
    3071/    DD34 :                     
    3072/    DD34 :                     DD_BSR:
    3073/    DD34 :                     
    3074/    DD34 : 21 92 FF            	ld	hl, dasm_OprStr ; set operand string buffer
    3075/    DD37 : CD 99 DB            	call	set_bitno	; "i, "
    3076/    DD3A : C3 91 DC            	jp	dd_mix4		; "(IX+nn)", cr,lf
    3077/    DD3D :                     
    3078/    DD3D :                     ; DD_BIT
    3079/    DD3D :                     ; "BIT i, (IX+nn)"
    3080/    DD3D :                     dd_bit:
    3081/    DD3D : 11 E4 E0            	ld	de, BITstr
    3082/    DD40 : CD 1E DF            	call	mkopcstr
    3083/    DD43 : 18 EF               	jr	DD_BSR
    3084/    DD45 :                     
    3085/    DD45 :                     ; DD_RES
    3086/    DD45 :                     ; "RES i, (IX+nn)"
    3087/    DD45 :                     dd_res:
    3088/    DD45 : 11 E8 E0            	ld	de, RESstr
    3089/    DD48 : CD 1E DF            	call	mkopcstr
    3090/    DD4B : 18 E7               	jr	DD_BSR
    3091/    DD4D :                     
    3092/    DD4D :                     	;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    3093/    DD4D :                     	; OPECODE 0EDH check
    3094/    DD4D :                     	;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    3095/    DD4D :                     
    3096/    DD4D :                     chk_0EDH:
    3097/    DD4D : FE ED               	cp	0edh
    3098/    DD4F : C2 4A DE            	jp	nz, chk_0FDH
    3099/    DD52 :                     
    3100/    DD52 : 7E                  	ld	a, (hl)		; get 2nd opcode
    3101/    DD53 :                     
    3102/    DD53 :                     	; check undefine MC
    3103/    DD53 : 01 38 00            	ld	bc, ed_op_tble - ed_op_tbl
    3104/    DD56 : 21 02 E0            	ld	hl, ed_op_tbl
    3105/    DD59 : ED B1               	cpir
    3106/    DD5B : C2 81 DB            	jp	nz, op_err
    3107/    DD5E :                     
    3108/    DD5E : 79                  	ld	a, c
    3109/    DD5F : FE 06               	cp	6
    3110/    DD61 : DA 2B DE            	jp	c, ed_4mc
    3111/    DD64 : FE 1B               	cp	27
    3112/    DD66 : DA 1D DE            	jp	c, ed_no_opr
    3113/    DD69 : FE 1E               	cp	30
    3114/    DD6B : DA 0A DE            	jp	c, ed_im
    3115/    DD6E : CA EA DD            	jp	z, ed_ld_ar
    3116/    DD71 : FE 1F               	cp	31
    3117/    DD73 : CA F3 DD            	jp	z, ed_ld_ai
    3118/    DD76 : FE 20               	cp	32
    3119/    DD78 : CA FC DD            	jp	z, ed_ld_ra
    3120/    DD7B : FE 21               	cp	33
    3121/    DD7D : CA 05 DE            	jp	z, ed_ld_ia
    3122/    DD80 : FE 26               	cp	38
    3123/    DD82 : DA D9 DD            	jp	c, ed_adc
    3124/    DD85 : FE 2A               	cp	42
    3125/    DD87 : DA C3 DD            	jp	c, ed_sbc
    3126/    DD8A : FE 31               	cp	49
    3127/    DD8C : DA A8 DD            	jp	c, ed_out
    3128/    DD8F :                     
    3129/    DD8F :                     ; c: 49 - 55 : IN r,(C) (r:B,C,D,E,H,L,A)
    3130/    DD8F :                     
    3131/    DD8F : 11 C7 E0            	ld	de, INstr
    3132/    DD92 : CD 1E DF            	call	mkopcstr
    3133/    DD95 :                     
    3134/    DD95 : 79                  	ld	a, c
    3135/    DD96 : D6 31               	sub	49
    3136/    DD98 : 4F                  	ld	c, a
    3137/    DD99 : 21 14 E2            	ld	hl, dd_ldtbl
    3138/    DD9C : CD A0 DE            	call	get_strBufpoint	; get strung buffer
    3139/    DD9F : CD 71 DF            	call	mk_rcs		; "REG, "
    3140/    DDA2 : 11 57 E1            	ld	de, KCKstr
    3141/    DDA5 : C3 47 DF            	jp	cpstr_crlf	; "(C)",cr,lf
    3142/    DDA8 :                     
    3143/    DDA8 :                     ; c: 42 - 48 : OUT (C),r(r:B,C,D,E,H,L,A)
    3144/    DDA8 :                     ed_out:
    3145/    DDA8 : 11 C3 E0            	ld	de, OUTstr
    3146/    DDAB : CD 1E DF            	call	mkopcstr
    3147/    DDAE :                     
    3148/    DDAE : 11 57 E1            	ld	de, KCKstr
    3149/    DDB1 : CD 71 DF            	call	mk_rcs		; "(C), "
    3150/    DDB4 :                     
    3151/    DDB4 : 79                  	ld	a, c
    3152/    DDB5 : D6 2A               	sub	42
    3153/    DDB7 : 4F                  	ld	c, a
    3154/    DDB8 : E5                  	push	hl
    3155/    DDB9 : 21 14 E2            	ld	hl, dd_ldtbl
    3156/    DDBC :                     
    3157/    DDBC :                     ed_out1:
    3158/    DDBC : CD A0 DE            	call	get_strBufpoint	; get strung buffer
    3159/    DDBF : E1                  	pop	hl
    3160/    DDC0 : C3 47 DF            	jp	cpstr_crlf	; "REG",cr,lf
    3161/    DDC3 :                     
    3162/    DDC3 :                     ; c: 38 - 41 : SBC HL,rr(rr:BC,DE,HL,SP)
    3163/    DDC3 :                     ed_sbc:
    3164/    DDC3 : 11 6D E0            	ld	de, SBCstr
    3165/    DDC6 : CD 1E DF            	call	mkopcstr
    3166/    DDC9 :                     
    3167/    DDC9 : 11 E8 FB            	ld	de, RNHL
    3168/    DDCC : CD 71 DF            	call	mk_rcs		; "HL, "
    3169/    DDCF :                     
    3170/    DDCF : 79                  	ld	a, c
    3171/    DDD0 : D6 26               	sub	38
    3172/    DDD2 :                     ed_sbc1:
    3173/    DDD2 : 4F                  	ld	c, a
    3174/    DDD3 : E5                  	push	hl
    3175/    DDD4 : 21 9C E1            	ld	hl, INC_DEC_ADDrp
    3176/    DDD7 : 18 E3               	jr	ed_out1
    3177/    DDD9 :                     
    3178/    DDD9 :                     ; c: 34 - 37 : ADC HL,rr(rr:BC,DE,HL,SP)
    3179/    DDD9 :                     ed_adc:
    3180/    DDD9 : 11 65 E0            	ld	de, ADCstr
    3181/    DDDC : CD 1E DF            	call	mkopcstr
    3182/    DDDF :                     
    3183/    DDDF : 11 E8 FB            	ld	de, RNHL
    3184/    DDE2 : CD 71 DF            	call	mk_rcs		; "HL, "
    3185/    DDE5 :                     
    3186/    DDE5 : 79                  	ld	a, c
    3187/    DDE6 : D6 22               	sub	34
    3188/    DDE8 : 18 E8               	jr	ed_sbc1
    3189/    DDEA :                     
    3190/    DDEA :                     ; c: 30, 31 : LD A,R ; LD A,I
    3191/    DDEA :                     ed_ld_ar:
    3192/    DDEA : CD 6E DF            	call	a_colon_sp	; "A, "
    3193/    DDED : 11 23 FC            	ld	de, RNR
    3194/    DDF0 : C3 47 DF            	jp	cpstr_crlf	; "R",cr,lf
    3195/    DDF3 :                     	
    3196/    DDF3 :                     ed_ld_ai:
    3197/    DDF3 : CD 6E DF            	call	a_colon_sp	; "A, "
    3198/    DDF6 : 11 21 FC            	ld	de, RNI
    3199/    DDF9 : C3 47 DF            	jp	cpstr_crlf	; "I",cr,lf
    3200/    DDFC :                     	
    3201/    DDFC :                     ; c: 32, 33 : LD R,A ; LD I,A
    3202/    DDFC :                     ed_ld_ra:
    3203/    DDFC : 11 23 FC            	ld	de, RNR
    3204/    DDFF :                     ed_ld_ra1:
    3205/    DDFF : CD 71 DF            	call	mk_rcs		; "R, "
    3206/    DE02 : C3 39 DF            	jp	a_crlf		; "A",cr,lf
    3207/    DE05 :                     
    3208/    DE05 :                     ed_ld_ia:
    3209/    DE05 : 11 21 FC            	ld	de, RNI
    3210/    DE08 : 18 F5               	jr	ed_ld_ra1
    3211/    DE0A :                     	
    3212/    DE0A :                     ; c: 27, 28, 29 : IM 2, IM 1, IM 0
    3213/    DE0A :                     ed_im:
    3214/    DE0A : 11 F0 E0            	ld	de, IMstr
    3215/    DE0D : CD 1E DF            	call	mkopcstr
    3216/    DE10 :                     
    3217/    DE10 : 3E 1D               	ld	a, 29
    3218/    DE12 : 91                  	sub	c
    3219/    DE13 : C6 30               	add	a, '0'		; '0', '1', '2'
    3220/    DE15 : 21 92 FF            	ld	hl, dasm_OprStr
    3221/    DE18 : 77                  	ld	(hl), a
    3222/    DE19 : 23                  	inc	hl
    3223/    DE1A : C3 4A DF            	jp	insPostStr
    3224/    DE1D :                     
    3225/    DE1D :                     ; c: 6 - 26 ed_noopr
    3226/    DE1D :                     ed_no_opr:
    3227/    DE1D : D6 06               	sub	6
    3228/    DE1F : 4F                  	ld	c, a
    3229/    DE20 : 06 00               	ld	b, 0
    3230/    DE22 : 21 22 E2            	ld	hl, ed_noopr
    3231/    DE25 : CD A0 DE            	call	get_strBufpoint		; de : string buffer
    3232/    DE28 : C3 1E DF            	jp	mkopcstr
    3233/    DE2B :                     ;
    3234/    DE2B :                     ; check ED 4 byte MC
    3235/    DE2B :                     ;
    3236/    DE2B :                     ed_4mc:
    3237/    DE2B : 3E 04               	ld	a, 4
    3238/    DE2D : 32 76 FF            	ld	(mc_Size), a	; 4byte machine code
    3239/    DE30 :                     
    3240/    DE30 : C5                  	push	bc
    3241/    DE31 : 79                  	ld	a, c
    3242/    DE32 : 21 E2 E1            	ld	hl, ed_rp_str
    3243/    DE35 : CD A0 DE            	call	get_strBufpoint		; de : string buffer
    3244/    DE38 : C1                  	pop	bc
    3245/    DE39 : 79                  	ld	a, c
    3246/    DE3A : FE 03               	cp	3
    3247/    DE3C : DA ED DC            	jp	c, DD_2a1		; "rr, (nnnnH)",cr,lf
    3248/    DE3F :                     					; rr: BC, DE, SP
    3249/    DE3F :                     ; "(nnnnH), rr" rr: BC, DE, SP
    3250/    DE3F :                     
    3251/    DE3F : D5                  	push	de
    3252/    DE40 : CD 89 DE            	call	get_nnnn
    3253/    DE43 : CD B5 DE            	call	ins_kn4kcs	; "(nnnnH), "
    3254/    DE46 : D1                  	pop	de
    3255/    DE47 : C3 47 DF            	jp	cpstr_crlf	; "REG",cr,lf
    3256/    DE4A :                     
    3257/    DE4A :                     	;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    3258/    DE4A :                     	; OPECODE 0FDH check
    3259/    DE4A :                     	;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    3260/    DE4A :                     
    3261/    DE4A :                     chk_0FDH:
    3262/    DE4A :                     
    3263/    DE4A : 11 18 FC            	ld	de, RNIY
    3264/    DE4D : ED 53 72 FF         	ld	(reg_xy), de	; save index reg string
    3265/    DE51 : 11 FE E1            	ld	de, addiyrp_tbl
    3266/    DE54 : ED 53 74 FF         	ld	(xy_srtp), de
    3267/    DE58 :                     
    3268/    DE58 : C3 BA DB            	jp	chk_0DDH_1
    3269/    DE5B :                     
    3270/    DE5B :                     ;-----------------------------------
    3271/    DE5B :                     ; make "(REG+nn), " at dasm_OprStr
    3272/    DE5B :                     ;	REG : IX or IY
    3273/    DE5B :                     ; input de: RNIX, or RNIY
    3274/    DE5B :                     ;-----------------------------------
    3275/    DE5B :                     kixypnk_cs:
    3276/    DE5B : 21 92 FF            	ld	hl, dasm_OprStr
    3277/    DE5E : CD 6A DE            	call	mk_kixypnk
    3278/    DE61 : C3 96 DF            	jp	ins_kmR
    3279/    DE64 :                     
    3280/    DE64 :                     ;-----------------------------------
    3281/    DE64 :                     ; make "(REG+nn)",cr,lf 
    3282/    DE64 :                     ;	REG : IX or IY
    3283/    DE64 :                     ; input de: RNIX, or RNIY
    3284/    DE64 :                     ;       hl: string buffer
    3285/    DE64 :                     ;-----------------------------------
    3286/    DE64 :                     kixypnk_crlf:
    3287/    DE64 : CD 6A DE            	call	mk_kixypnk
    3288/    DE67 : C3 4A DF            	jp	insPostStr	; CR, LF, 00h
    3289/    DE6A :                     
    3290/    DE6A :                     ;-----------------------------------
    3291/    DE6A :                     ; make "(IX+nn)", "(IY+nn)" string
    3292/    DE6A :                     ; input de: RNIX, or RNIY
    3293/    DE6A :                     ;       hl: string buffer
    3294/    DE6A :                     ;-----------------------------------
    3295/    DE6A :                     mk_kixypnk:
    3296/    DE6A : CD 81 DF            	call	ins_kakkoL	; "("
    3297/    DE6D : CD 79 DF            	call	st_copy	; IX
    3298/    DE70 : CD 89 DE            	call	get_nnnn
    3299/    DE73 : 7B                  	ld	a, e		;get number
    3300/    DE74 : FE 80               	cp	80h
    3301/    DE76 : 38 0C               	jr	c, numPlus	; number plus
    3302/    DE78 : ED 44               	neg			; a = not a + 1
    3303/    DE7A : 5F                  	ld	e, a
    3304/    DE7B : CD 92 DF            	call	ins_misR	; -
    3305/    DE7E :                     sv_nnkr:
    3306/    DE7E : CD EC DE            	call	hex2str_asm	; nnh
    3307/    DE81 : C3 85 DF            	jp	ins_kakkoR	; ")"
    3308/    DE84 :                     	
    3309/    DE84 :                     numPlus:
    3310/    DE84 : CD 8E DF            	call	ins_plsR	; +
    3311/    DE87 : 18 F5               	jr	sv_nnkr
    3312/    DE89 :                     
    3313/    DE89 :                     ; de : nnnn , or d:yy, e:xx
    3314/    DE89 :                     get_nnnn:
    3315/    DE89 : E5                  	push	hl
    3316/    DE8A : 2A 70 FF            	ld	hl, (dasm_adr)
    3317/    DE8D : 23                  	inc	hl		; 2nd opecode address
    3318/    DE8E : 23                  	inc	hl		; operand address
    3319/    DE8F : 5E                  	ld	e, (hl)		; get nn
    3320/    DE90 : 23                  	inc	hl
    3321/    DE91 : 56                  	ld	d, (hl)		; d:yy use for "LD (IX+xx), yy"
    3322/    DE92 :                     				; d:OP use for 4bytes MC like "DD CB xx OP"
    3323/    DE92 :                     				; de : YYXX : ED OP XX YY
    3324/    DE92 : E1                  	pop	hl
    3325/    DE93 : C9                  	ret
    3326/    DE94 :                     
    3327/    DE94 :                     ;-------------------------------------------------
    3328/    DE94 :                     ; hl: massage table
    3329/    DE94 :                     ; bc: found operand point
    3330/    DE94 :                     ;
    3331/    DE94 :                     ; output: copy strings to dasm_OprStr buffer
    3332/    DE94 :                     ;         hl = end point of copied string buffer
    3333/    DE94 :                     ;-------------------------------------------------
    3334/    DE94 :                     mk_str:
    3335/    DE94 : CD A0 DE            	call	get_strBufpoint
    3336/    DE97 : 21 92 FF            	ld	hl, dasm_OprStr
    3337/    DE9A : C3 79 DF            	jp	st_copy
    3338/    DE9D :                     
    3339/    DE9D :                     ;------------------------------------------------
    3340/    DE9D :                     ; get register strings address
    3341/    DE9D :                     ; input bc: string buffer offset
    3342/    DE9D :                     ; output de: register strings address
    3343/    DE9D :                     ;------------------------------------------------
    3344/    DE9D :                     get_rstg_off:
    3345/    DE9D : 21 74 E1            	ld	hl, disRegTbl
    3346/    DEA0 :                     
    3347/    DEA0 :                     ;-------------------------------------------------
    3348/    DEA0 :                     ; input
    3349/    DEA0 :                     ;	bc: found operand point
    3350/    DEA0 :                     ;	hl: massage table
    3351/    DEA0 :                     ; output: 
    3352/    DEA0 :                     ;	DE : string point
    3353/    DEA0 :                     ;-------------------------------------------------
    3354/    DEA0 :                     get_strBufpoint:
    3355/    DEA0 : CB 21               	sla	c
    3356/    DEA2 : CB 10               	rl	b		; bc *=2
    3357/    DEA4 : 09                  	add	hl, bc		; get operand string point
    3358/    DEA5 : 5E                  	ld	e, (hl)
    3359/    DEA6 : 23                  	inc	hl
    3360/    DEA7 : 56                  	ld	d, (hl)
    3361/    DEA8 : C9                  	ret
    3362/    DEA9 :                     
    3363/    DEA9 :                     ;------------------------------------------------
    3364/    DEA9 :                     ; insert "nnH", CR, LF to buffer
    3365/    DEA9 :                     ;input e: value
    3366/    DEA9 :                     ;      hl: string buffer
    3367/    DEA9 :                     ;------------------------------------------------
    3368/    DEA9 :                     mk_n2crlf:
    3369/    DEA9 : CD EC DE            	call	hex2str_asm
    3370/    DEAC : C3 4A DF            	jp	insPostStr
    3371/    DEAF :                     
    3372/    DEAF :                     ;------------------------------------------------
    3373/    DEAF :                     ; insert "nnnnH", CR, LF to buffer
    3374/    DEAF :                     ;input de: value
    3375/    DEAF :                     ;      hl: string buffer
    3376/    DEAF :                     ;------------------------------------------------
    3377/    DEAF :                     mk_n4crlf:
    3378/    DEAF : CD DB DE            	call	hex4str_asm
    3379/    DEB2 : C3 4A DF            	jp	insPostStr
    3380/    DEB5 :                     
    3381/    DEB5 :                     ;------------------------------------------------
    3382/    DEB5 :                     ; insert "(nnnnH), " to buffer dasm_OprStr
    3383/    DEB5 :                     ;input de: value
    3384/    DEB5 :                     ;
    3385/    DEB5 :                     ; make "(nnnnH), " to dasm_OprStr buffer
    3386/    DEB5 :                     ; output hl: end point of string buffer
    3387/    DEB5 :                     ;------------------------------------------------
    3388/    DEB5 :                     ins_kn4kcs:
    3389/    DEB5 : 21 92 FF            	ld	hl, dasm_OprStr	;operand str buffer
    3390/    DEB8 : CD 81 DF            	call	ins_kakkoL	; "("
    3391/    DEBB : CD DB DE            	call	hex4str_asm
    3392/    DEBE : CD 85 DF            	call	ins_kakkoR	; ")"
    3393/    DEC1 : C3 96 DF            	jp	ins_kmR		; ", "
    3394/    DEC4 :                     
    3395/    DEC4 :                     ;------------------------------------------------
    3396/    DEC4 :                     ; insert "(nnnnH)" to buffer
    3397/    DEC4 :                     ;input de: value
    3398/    DEC4 :                     ;      hl: string buffer
    3399/    DEC4 :                     ;------------------------------------------------
    3400/    DEC4 :                     mk_kn4k:
    3401/    DEC4 : CD 81 DF            	call	ins_kakkoL	; "("
    3402/    DEC7 : CD DB DE            	call	hex4str_asm
    3403/    DECA : C3 85 DF            	jp	ins_kakkoR	; ")"
    3404/    DECD :                     
    3405/    DECD :                     ;------------------------------------------------
    3406/    DECD :                     ; Make address string from branch relative value
    3407/    DECD :                     ; input hl: string buffer pointer
    3408/    DECD :                     ; output *hl= "nnnnH",cr,lf,0
    3409/    DECD :                     ;------------------------------------------------
    3410/    DECD :                     mkRel_str:
    3411/    DECD : E5                  	push	hl
    3412/    DECE : 2A 70 FF            	ld	hl, (dasm_adr)
    3413/    DED1 : CD 35 D4            	call	Rel_adr_c	; return hl : target addr
    3414/    DED4 : EB                  	ex	de, hl		; hl: buffer, de: addr value
    3415/    DED5 : E1                  	pop	hl
    3416/    DED6 : CD DB DE            	call	hex4str_asm
    3417/    DED9 : 18 6F               	jr	insPostStr
    3418/    DEDB :                     	
    3419/    DEDB :                     ;------------------------------------------------
    3420/    DEDB :                     ;input de: value, hl: save baffer.
    3421/    DEDB :                     ;output 4hex chars(asm format)
    3422/    DEDB :                     ;	(ex). "0FFFFH"
    3423/    DEDB :                     ;             "1234H"
    3424/    DEDB :                     ;       hl : hl = hl + 5(or 6); *hl=0
    3425/    DEDB :                     ;------------------------------------------------
    3426/    DEDB :                     hex4str_asm:
    3427/    DEDB : 7A                  	ld	a, d
    3428/    DEDC : FE A0               	cp	0a0h
    3429/    DEDE : 38 04               	jr	c, h4sa_1
    3430/    DEE0 : 3E 30               	ld	a, '0'
    3431/    DEE2 : 77                  	ld	(hl), a
    3432/    DEE3 : 23                  	inc	hl
    3433/    DEE4 :                     
    3434/    DEE4 :                     h4sa_1:
    3435/    DEE4 : CD FA DE            	call	hex4str
    3436/    DEE7 :                     h4sa_2:
    3437/    DEE7 : 3E 48               	ld	a, 'H'
    3438/    DEE9 : C3 87 DF            	jp	ikk_1
    3439/    DEEC :                     
    3440/    DEEC :                     ;------------------------------------------------
    3441/    DEEC :                     ;input e: value, hl: save baffer.
    3442/    DEEC :                     ;output: 2 hex chars(asm format)
    3443/    DEEC :                     ;	(ex). "0FFH"
    3444/    DEEC :                     ;             "12H"
    3445/    DEEC :                     ;       hl : hl = hl + 3(or 4); *hl=0
    3446/    DEEC :                     ;------------------------------------------------
    3447/    DEEC :                     hex2str_asm:
    3448/    DEEC : 7B                  	ld	a, e
    3449/    DEED : FE A0               	cp	0a0h
    3450/    DEEF : 38 04               	jr	c, h2sa_1
    3451/    DEF1 : 3E 30               	ld	a, '0'
    3452/    DEF3 : 77                  	ld	(hl), a
    3453/    DEF4 : 23                  	inc	hl
    3454/    DEF5 :                     
    3455/    DEF5 :                     h2sa_1:
    3456/    DEF5 : CD 02 DF            	call	hex2str
    3457/    DEF8 : 18 ED               	jr	h4sa_2
    3458/    DEFA :                     
    3459/    DEFA :                     ;------------------------------------------------
    3460/    DEFA :                     ;input de: value, hl: save baffer.
    3461/    DEFA :                     ;output: 4 hex chras in save buffer
    3462/    DEFA :                     ;	 hl = hl + 4
    3463/    DEFA :                     ;------------------------------------------------
    3464/    DEFA :                     hex4str:
    3465/    DEFA : 7A                  	ld	a, d
    3466/    DEFB : CD 0B DF            	call	h2s_n1
    3467/    DEFE : 7A                  	ld	a, d
    3468/    DEFF : CD 0F DF            	call	h2s_n2
    3469/    DF02 :                     
    3470/    DF02 :                     ;------------------------------------------------
    3471/    DF02 :                     ;input e: value, hl: save baffer.
    3472/    DF02 :                     ;output: 2 hex chras in save buffer
    3473/    DF02 :                     ;	 hl = hl + 2
    3474/    DF02 :                     ;------------------------------------------------
    3475/    DF02 :                     hex2str:
    3476/    DF02 : 7B                  	ld	a, e
    3477/    DF03 : CD 0B DF            	call	h2s_n1
    3478/    DF06 : 7B                  	ld	a, e
    3479/    DF07 : CD 0F DF            	call	h2s_n2
    3480/    DF0A : C9                  	ret
    3481/    DF0B :                     
    3482/    DF0B :                     h2s_n1:
    3483/    DF0B : 0F                  	rrca
    3484/    DF0C : 0F                  	rrca
    3485/    DF0D : 0F                  	rrca
    3486/    DF0E : 0F                  	rrca
    3487/    DF0F :                     h2s_n2:
    3488/    DF0F : E6 0F               	and	0fh
    3489/    DF11 : F6 30               	or	30h
    3490/    DF13 : FE 3A               	cp	3aH
    3491/    DF15 : 38 70               	jr	c, ikk_1	; '0' to '9'
    3492/    DF17 : C6 07               	add	a, 07h		; 'A' to 'F'
    3493/    DF19 : 18 6C               	jr	ikk_1
    3494/    DF1B :                     
    3495/    DF1B :                     add_opstr:
    3496/    DF1B : 11 61 E0            	ld	de, ADDstr
    3497/    DF1E :                     ;-----------------------------------
    3498/    DF1E :                     ; make opecode strings
    3499/    DF1E :                     ; input de : opecode strings
    3500/    DF1E :                     ;-----------------------------------
    3501/    DF1E :                     mkopcstr:
    3502/    DF1E : F5                  	push	af
    3503/    DF1F : C5                  	push	bc
    3504/    DF20 : 06 08               	ld	b, 8	;tab size
    3505/    DF22 : 21 8A FF            	ld	hl, dasm_OpcStr
    3506/    DF25 :                     dmkstr0:
    3507/    DF25 : 1A                  	ld	a, (de)
    3508/    DF26 : B7                  	or	a
    3509/    DF27 : 28 06               	jr	z, dmkst1
    3510/    DF29 : 77                  	ld	(hl), a
    3511/    DF2A : 23                  	inc	hl
    3512/    DF2B : 13                  	inc	de
    3513/    DF2C : 05                  	dec	b
    3514/    DF2D : 18 F6               	jr	dmkstr0
    3515/    DF2F :                     dmkst1:
    3516/    DF2F : 3E 20               	ld	a, ' '
    3517/    DF31 :                     dmkst2:
    3518/    DF31 : 77                  	ld	(hl), a
    3519/    DF32 : 23                  	inc	hl
    3520/    DF33 : 05                  	dec	b
    3521/    DF34 : 20 FB               	jr	nz, dmkst2
    3522/    DF36 : C1                  	pop	bc
    3523/    DF37 : F1                  	pop	af
    3524/    DF38 : C9                  	ret
    3525/    DF39 :                     
    3526/    DF39 :                     ;
    3527/    DF39 :                     ; "REG",CR,LF
    3528/    DF39 :                     ;
    3529/    DF39 :                     a_crlf:
    3530/    DF39 : 11 D8 FB            	ld	de, RNA
    3531/    DF3C : 18 09               	jr	cpstr_crlf	; "A",CR,LF
    3532/    DF3E :                     ;bc_crlf:
    3533/    DF3E :                     ;	ld	de, RNBC
    3534/    DF3E :                     ;	jr	cpstr_crlf
    3535/    DF3E :                     ;de_crlf:
    3536/    DF3E :                     ;	ld	de, RNDE
    3537/    DF3E :                     ;	jr	cpstr_crlf
    3538/    DF3E :                     ix_crlf:
    3539/    DF3E : ED 5B 72 FF         	ld	de, (reg_xy)
    3540/    DF42 : 18 03               	jr	cpstr_crlf
    3541/    DF44 :                     ;sp_crlf:
    3542/    DF44 :                     ;	ld	de, RNSP
    3543/    DF44 :                     ;	jr	cpstr_crlf
    3544/    DF44 :                     hl_crlf:
    3545/    DF44 : 11 E8 FB            	ld	de, RNHL
    3546/    DF47 :                     cpstr_crlf:
    3547/    DF47 : CD 79 DF            	call	st_copy		; "REG"
    3548/    DF4A :                     	
    3549/    DF4A :                     ;-----------------------------------
    3550/    DF4A :                     ; insert CR, LF, 00H(end delimiter)
    3551/    DF4A :                     ; input hl : insert buffer
    3552/    DF4A :                     ;-----------------------------------
    3553/    DF4A :                     insPostStr:
    3554/    DF4A : 3E 0D               	ld	a, CR
    3555/    DF4C : 77                  	ld	(hl), a		; CR code
    3556/    DF4D : 23                  	inc	hl
    3557/    DF4E : 3E 0A               	ld	a, LF
    3558/    DF50 : 77                  	ld	(hl), a		; LF code
    3559/    DF51 : 23                  	inc	hl
    3560/    DF52 : AF                  	xor	a
    3561/    DF53 : 77                  	ld	(hl), a		; end delimiter
    3562/    DF54 : C9                  	ret
    3563/    DF55 :                     
    3564/    DF55 :                     mk_krk_1:
    3565/    DF55 : 21 92 FF            	ld	hl, dasm_OprStr
    3566/    DF58 :                     ;----------------------------
    3567/    DF58 :                     ; insert "(Reg)" to buffer
    3568/    DF58 :                     ;
    3569/    DF58 :                     ; input de: register string
    3570/    DF58 :                     ;	hl: save buffer
    3571/    DF58 :                     ;----------------------------
    3572/    DF58 :                     mk_krk:
    3573/    DF58 : CD 81 DF            	call	ins_kakkoL	; "("
    3574/    DF5B : CD 79 DF            	call	st_copy		; "REG"
    3575/    DF5E : 18 25               	jr	ins_kakkoR	; ")"
    3576/    DF60 :                     
    3577/    DF60 :                     ;----------------------------
    3578/    DF60 :                     ; insert "(Reg), " to dasm_OprStr
    3579/    DF60 :                     ;
    3580/    DF60 :                     ; input de: register string
    3581/    DF60 :                     ;----------------------------
    3582/    DF60 :                     mk_krkcs:
    3583/    DF60 : 21 92 FF            	ld	hl, dasm_OprStr
    3584/    DF63 : CD 81 DF            	call	ins_kakkoL	; "("
    3585/    DF66 : CD 79 DF            	call	st_copy		; "REG"
    3586/    DF69 : CD 85 DF            	call	ins_kakkoR	; ")"
    3587/    DF6C : 18 28               	jr	ins_kmR		; ", "
    3588/    DF6E :                     
    3589/    DF6E :                     ;----------------------------
    3590/    DF6E :                     ; insert "A, " to dasm_OprStr
    3591/    DF6E :                     ;----------------------------
    3592/    DF6E :                     a_colon_sp:
    3593/    DF6E : 11 D8 FB            	ld	de, RNA
    3594/    DF71 :                     ;----------------------------
    3595/    DF71 :                     ; insert "Reg, " to dasm_OprStr
    3596/    DF71 :                     ;
    3597/    DF71 :                     ; input de: register string
    3598/    DF71 :                     ;----------------------------
    3599/    DF71 :                     mk_rcs:
    3600/    DF71 : 21 92 FF            	ld	hl, dasm_OprStr
    3601/    DF74 : CD 79 DF            	call	st_copy		; "REG"
    3602/    DF77 : 18 1D               	jr	ins_kmR		; ", "
    3603/    DF79 :                     
    3604/    DF79 :                     ;-------------------------------------------------
    3605/    DF79 :                     ; copy string to output buffer
    3606/    DF79 :                     ; input:
    3607/    DF79 :                     ;	de : string point
    3608/    DF79 :                     ;	hl : output buffer
    3609/    DF79 :                     ;-------------------------------------------------
    3610/    DF79 :                     st_copy:
    3611/    DF79 : 1A                  	ld	a, (de)
    3612/    DF7A : 77                  	ld	(hl), a
    3613/    DF7B : B7                  	or	a
    3614/    DF7C : C8                  	ret	z	; return after coping delimiter
    3615/    DF7D :                     			; hl : delimiter position
    3616/    DF7D : 23                  	inc	hl
    3617/    DF7E : 13                  	inc	de
    3618/    DF7F : 18 F8               	jr	st_copy
    3619/    DF81 :                     
    3620/    DF81 :                     ;--------------
    3621/    DF81 :                     ; insert "("
    3622/    DF81 :                     ;--------------
    3623/    DF81 :                     ins_kakkoL:
    3624/    DF81 : 3E 28               	ld	a, '('
    3625/    DF83 : 18 02               	jr	ikk_1
    3626/    DF85 :                     	
    3627/    DF85 :                     ;--------------
    3628/    DF85 :                     ; insert ")"
    3629/    DF85 :                     ;--------------
    3630/    DF85 :                     ins_kakkoR:
    3631/    DF85 : 3E 29               	ld	a, ')'
    3632/    DF87 :                     ikk_1:
    3633/    DF87 : 77                  	ld	(hl), a
    3634/    DF88 : 23                  	inc	hl
    3635/    DF89 : C9                  	ret
    3636/    DF8A :                     
    3637/    DF8A :                     ;--------------
    3638/    DF8A :                     ; insert " "
    3639/    DF8A :                     ;--------------
    3640/    DF8A :                     ins_spcR:
    3641/    DF8A : 3E 20               	ld	a, ' '
    3642/    DF8C : 18 F9               	jr	ikk_1
    3643/    DF8E :                     
    3644/    DF8E :                     ;--------------
    3645/    DF8E :                     ; insert "+"
    3646/    DF8E :                     ;--------------
    3647/    DF8E :                     ins_plsR:
    3648/    DF8E : 3E 2B               	ld	a, '+'
    3649/    DF90 : 18 F5               	jr	ikk_1
    3650/    DF92 :                     
    3651/    DF92 :                     ;--------------
    3652/    DF92 :                     ; insert "-"
    3653/    DF92 :                     ;--------------
    3654/    DF92 :                     ins_misR:
    3655/    DF92 : 3E 2D               	ld	a, '-'
    3656/    DF94 : 18 F1               	jr	ikk_1
    3657/    DF96 :                     
    3658/    DF96 :                     ;--------------
    3659/    DF96 :                     ; insert ", "
    3660/    DF96 :                     ;--------------
    3661/    DF96 :                     ins_kmR:
    3662/    DF96 : 3E 2C               	ld	a, ','
    3663/    DF98 : CD 87 DF            	call	ikk_1
    3664/    DF9B : 18 ED               	jr	ins_spcR
    3665/    DF9D :                     
    3666/    DF9D :                     ;------------------------------------------
    3667/    DF9D :                     ; Dis assemble tables
    3668/    DF9D :                     ;------------------------------------------
    3669/    DF9D :                     oth_1op_s:
    3670/    DF9D : 00                  	DB	00H	; NOP
    3671/    DF9E : 07                  	DB	07H	; RLCA
    3672/    DF9F : 0F                  	DB	0FH	; RRCA
    3673/    DFA0 : 17                  	DB	17H	; RLA
    3674/    DFA1 : 1F                  	DB	1FH	; RRA
    3675/    DFA2 : 27                  	DB	27H	; DAA
    3676/    DFA3 : 2F                  	DB	2FH	; CPL
    3677/    DFA4 : 37                  	DB	37H	; SCF
    3678/    DFA5 : 3F                  	DB	3FH	; CCF
    3679/    DFA6 : C9                  	DB	0C9H	; RET
    3680/    DFA7 : D9                  	DB	0D9H	; EXX
    3681/    DFA8 : F3                  	DB	0F3H	; DI
    3682/    DFA9 : FB                  	DB	0FBH	; EI
    3683/    DFAA :                     oth_1op_e:
    3684/    DFAA :                     
    3685/    DFAA :                     INC_OPCDTBLS:
    3686/    DFAA : 04                  	DB	04H	; INC	B
    3687/    DFAB : 0C                  	DB	0CH	; INC	C
    3688/    DFAC : 14                  	DB	14H	; INC	D
    3689/    DFAD : 1C                  	DB	1CH	; INC	E
    3690/    DFAE : 24                  	DB	24H	; INC	H
    3691/    DFAF : 2C                  	DB	2CH	; INC	L
    3692/    DFB0 : 34                  	DB	34H	; INC	(HL)
    3693/    DFB1 : 3C                  	DB	3CH	; INC	A
    3694/    DFB2 :                     INC_OPCDTBLE:
    3695/    DFB2 :                     
    3696/    DFB2 :                     DEC_OPCDTBLS:
    3697/    DFB2 : 05                  	DB	05H	; DEC	B
    3698/    DFB3 : 0D                  	DB	0DH	; DEC	C
    3699/    DFB4 : 15                  	DB	15H	; DEC	D
    3700/    DFB5 : 1D                  	DB	1DH	; DEC	E
    3701/    DFB6 : 25                  	DB	25H	; DEC	H
    3702/    DFB7 : 2D                  	DB	2DH	; DEC	L
    3703/    DFB8 : 35                  	DB	35H	; DEC	(HL)
    3704/    DFB9 : 3D                  	DB	3DH	; DEC	A
    3705/    DFBA :                     DEC_OPCDTBLE:
    3706/    DFBA :                     
    3707/    DFBA :                     inc_rp_s:
    3708/    DFBA : 03                  	DB	03H	; INC	BC
    3709/    DFBB : 13                  	DB	13H	; INC	DE
    3710/    DFBC : 23                  	DB	23H	; INC	HL
    3711/    DFBD : 33                  	DB	33H	; INC	SP
    3712/    DFBE :                     inc_rp_e:
    3713/    DFBE :                     
    3714/    DFBE :                     dec_rp_s:
    3715/    DFBE : 0B                  	DB	0BH	; DEC	BC
    3716/    DFBF : 1B                  	DB	1BH	; DEC	DE
    3717/    DFC0 : 2B                  	DB	2BH	; DEC	HL
    3718/    DFC1 : 3B                  	DB	3BH	; DEC	SP
    3719/    DFC2 :                     dec_rp_e:
    3720/    DFC2 :                     
    3721/    DFC2 :                     add_rp_s:
    3722/    DFC2 : 09                  	DB	09H	; ADD	HL,BC
    3723/    DFC3 : 19                  	DB	19H	; ADD	HL,DE
    3724/    DFC4 : 29                  	DB	29H	; ADD	HL,HL
    3725/    DFC5 : 39                  	DB	39H	; ADD	HL,SP
    3726/    DFC6 :                     add_rp_e:
    3727/    DFC6 :                     
    3728/    DFC6 :                     pop_rp_s:
    3729/    DFC6 : C1                  	DB	0C1H	; POP	BC
    3730/    DFC7 : D1                  	DB	0D1H	; POP	DE
    3731/    DFC8 : E1                  	DB	0E1H	; POP	HL
    3732/    DFC9 : F1                  	DB	0F1H	; POP	AF
    3733/    DFCA :                     pop_rp_e:
    3734/    DFCA :                     
    3735/    DFCA :                     push_rp_s:
    3736/    DFCA : C5                  	DB	0C5H	; PUSH	BC
    3737/    DFCB : D5                  	DB	0D5H	; PUSH	DE
    3738/    DFCC : E5                  	DB	0E5H	; PUSH	HL
    3739/    DFCD : F5                  	DB	0F5H	; PUSH	AF
    3740/    DFCE :                     push_rp_e:
    3741/    DFCE :                     
    3742/    DFCE :                     dd_ld_tbl:
    3743/    DFCE : 46                  	DB	46h	; nn: LD B,(IX+nn)
    3744/    DFCF : 4E                  	DB	4Eh	; nn: LD C,(IX+nn)
    3745/    DFD0 : 56                  	DB	56h	; nn: LD D,(IX+nn)
    3746/    DFD1 : 5E                  	DB	5Eh	; nn: LD E,(IX+nn)
    3747/    DFD2 : 66                  	DB	66h	; nn: LD H,(IX+nn)
    3748/    DFD3 : 6E                  	DB	6Eh	; nn: LD L,(IX+nn)
    3749/    DFD4 : 7E                  	DB	7Eh	; nn: LD A,(IX+nn)
    3750/    DFD5 :                     
    3751/    DFD5 : 70                  	DB	70h	; nn: LD (IX+nn),B
    3752/    DFD6 : 71                  	DB	71h	; nn: LD (IX+nn),C
    3753/    DFD7 : 72                  	DB	72h	; nn: LD (IX+nn),D
    3754/    DFD8 : 73                  	DB	73h	; nn: LD (IX+nn),E
    3755/    DFD9 : 74                  	DB	74h	; nn: LD (IX+nn),H
    3756/    DFDA : 75                  	DB	75h	; nn: LD (IX+nn),L
    3757/    DFDB : 77                  	DB	77h	; nn: LD (IX+nn),A
    3758/    DFDC :                     dd_ld_tble:
    3759/    DFDC :                     
    3760/    DFDC :                     dd_log_tbl:
    3761/    DFDC : 96                  	DB	96h	; nn: SUB (IX+nn)
    3762/    DFDD : A6                  	DB	0A6h	; nn: AND (IX+nn)
    3763/    DFDE : AE                  	DB	0AEh	; nn: XOR (IX+nn)
    3764/    DFDF : B6                  	DB	0B6h	; nn: OR  (IX+nn)
    3765/    DFE0 : BE                  	DB	0BEh	; nn: CP  (IX+nn)
    3766/    DFE1 : 34                  	DB	34h	; nn: INC (IX+nn)
    3767/    DFE2 : 35                  	DB	35h	; nn: DEC (IX+nn)
    3768/    DFE3 :                     dd_log_tble:
    3769/    DFE3 :                     
    3770/    DFE3 :                     dd_rt_tbles:
    3771/    DFE3 : 06                  	DB	06h	; RLC (IX+nn)
    3772/    DFE4 : 0E                  	DB	0Eh	; RRC (IX+nn)
    3773/    DFE5 : 16                  	DB	16h	; RL  (IX+nn)
    3774/    DFE6 : 1E                  	DB	1Eh	; RR  (IX+nn)
    3775/    DFE7 : 26                  	DB	26h	; SLA (IX+nn)
    3776/    DFE8 : 2E                  	DB	2Eh	; SRA (IX+nn)
    3777/    DFE9 : 3E                  	DB	3Eh	; SRL (IX+nn)
    3778/    DFEA :                     dd_rt_tble:
    3779/    DFEA :                     
    3780/    DFEA :                     ; use checking undefine MC ( DD CB nn XX )
    3781/    DFEA :                     dd_bit_opTbl:
    3782/    DFEA : 46                  	DB	46h	; BIT 0,(IX+12H)
    3783/    DFEB : 4E                  	DB	4Eh	; BIT 1,(IX+12H)
    3784/    DFEC : 56                  	DB	56h	; BIT 2,(IX+12H)
    3785/    DFED : 5E                  	DB	5Eh	; BIT 3,(IX+12H)
    3786/    DFEE : 66                  	DB	66h	; BIT 4,(IX+12H)
    3787/    DFEF : 6E                  	DB	6Eh	; BIT 5,(IX+12H)
    3788/    DFF0 : 76                  	DB	76h	; BIT 6,(IX+12H)
    3789/    DFF1 : 7E                  	DB	7Eh	; BIT 7,(IX+12H)
    3790/    DFF2 : 86                  	DB	86h	; RES 0,(IX+12H)
    3791/    DFF3 : 8E                  	DB	8Eh	; RES 1,(IX+12H)
    3792/    DFF4 : 96                  	DB	96h	; RES 2,(IX+12H)
    3793/    DFF5 : 9E                  	DB	9Eh	; RES 3,(IX+12H)
    3794/    DFF6 : A6                  	DB	0A6h	; RES 4,(IX+12H)
    3795/    DFF7 : AE                  	DB	0AEh	; RES 5,(IX+12H)
    3796/    DFF8 : B6                  	DB	0B6h	; RES 6,(IX+12H)
    3797/    DFF9 : BE                  	DB	0BEh	; RES 7,(IX+12H)
    3798/    DFFA : C6                  	DB	0C6h	; SET 0,(IX+12H)
    3799/    DFFB : CE                  	DB	0CEh	; SET 1,(IX+12H)
    3800/    DFFC : D6                  	DB	0D6h	; SET 2,(IX+12H)
    3801/    DFFD : DE                  	DB	0DEh	; SET 3,(IX+12H)
    3802/    DFFE : E6                  	DB	0E6h	; SET 4,(IX+12H)
    3803/    DFFF : EE                  	DB	0EEh	; SET 5,(IX+12H)
    3804/    E000 : F6                  	DB	0F6h	; SET 6,(IX+12H)
    3805/    E001 : FE                  	DB	0FEh	; SET 7,(IX+12H)
    3806/    E002 :                     dd_bit_opTble:
    3807/    E002 :                     
    3808/    E002 :                     ; use checking undefine MC ( ED XX ....)
    3809/    E002 :                     ed_op_tbl:
    3810/    E002 : 40                  	DB	40h	; 55:IN  B,(C)
    3811/    E003 : 48                   	DB	48h	; 54:IN  C,(C)
    3812/    E004 : 50                  	DB	50h	; 53:IN  D,(C)
    3813/    E005 : 58                  	DB	58h	; 52:IN  E,(C)
    3814/    E006 : 60                  	DB	60h	; 51:IN  H,(C)
    3815/    E007 : 68                  	DB	68h	; 50:IN  L,(C)
    3816/    E008 : 78                  	DB	78h	; 49:IN  A,(C)
    3817/    E009 :                     
    3818/    E009 : 41                  	DB	41h	; 48:OUT (C),B
    3819/    E00A : 49                  	DB	49h	; 47:OUT (C),C
    3820/    E00B : 51                  	DB	51h	; 46:OUT (C),D
    3821/    E00C : 59                  	DB	59h	; 45:OUT (C),E
    3822/    E00D : 61                  	DB	61h	; 44:OUT (C),H
    3823/    E00E : 69                  	DB	69h	; 43:OUT (C),L
    3824/    E00F : 79                  	DB	79h	; 42:OUT (C),A
    3825/    E010 :                     
    3826/    E010 : 42                  	DB	42h	; 41:SBC HL,BC
    3827/    E011 : 52                  	DB	52h	; 40:SBC HL,DE
    3828/    E012 : 62                  	DB	62h	; 39:SBC HL,HL
    3829/    E013 : 72                  	DB	72h	; 38:SBC HL,SP
    3830/    E014 :                     
    3831/    E014 : 4A                  	DB	4Ah	; 37:ADC HL,BC
    3832/    E015 : 5A                  	DB	5Ah	; 36:ADC HL,DE
    3833/    E016 : 6A                  	DB	6Ah	; 35:ADC HL,HL
    3834/    E017 : 7A                  	DB	7Ah	; 34:ADC HL,SP
    3835/    E018 :                     
    3836/    E018 : 47                  	DB	47h	; 33:LD I,A
    3837/    E019 : 4F                  	DB	4Fh	; 32:LD R,A
    3838/    E01A : 57                  	DB	57h	; 31:LD A,I
    3839/    E01B : 5F                  	DB	5Fh	; 30:LD A,R
    3840/    E01C :                     
    3841/    E01C : 46                  	DB	46h	; 29:IM  0
    3842/    E01D : 56                  	DB	56h	; 28:IM  1
    3843/    E01E : 5E                  	DB	5Eh	; 27:IM  2
    3844/    E01F :                     
    3845/    E01F : 44                  	DB	44h	; 26:NEG
    3846/    E020 : 45                  	DB	45h	; 25:RETN
    3847/    E021 : 4D                  	DB	4Dh	; 24:RETI
    3848/    E022 : 67                  	DB	67h	; 23:RRD
    3849/    E023 : 6F                  	DB	6Fh	; 22:RLD
    3850/    E024 : A0                  	DB	0A0h	; 21:LDI
    3851/    E025 : A1                  	DB	0A1h	; 20:CPI
    3852/    E026 : A2                  	DB	0A2h	; 19:INI
    3853/    E027 : A3                  	DB	0A3h	; 18:OUTI
    3854/    E028 : A8                  	DB	0A8h	; 17:LDD
    3855/    E029 : A9                  	DB	0A9h	; 16:CPD
    3856/    E02A : AA                  	DB	0AAh	; 15:IND
    3857/    E02B : AB                  	DB	0ABh	; 14:OUTD
    3858/    E02C : B0                  	DB	0B0h	; 13:LDIR
    3859/    E02D : B1                  	DB	0B1h	; 12:CPIR
    3860/    E02E : B2                  	DB	0B2h	; 11:INIR
    3861/    E02F : B3                  	DB	0B3h	; 10:OTIR
    3862/    E030 : B8                  	DB	0B8h	; 09:LDDR
    3863/    E031 : B9                  	DB	0B9h	; 08:CPDR
    3864/    E032 : BA                  	DB	0BAh	; 07:INDR
    3865/    E033 : BB                  	DB	0BBh	; 06:OTDR
    3866/    E034 :                     
    3867/    E034 : 43                  	DB	43h	; 05:LD (nnnn),BC
    3868/    E035 : 53                  	DB	53h	; 04:LD (nnnn),DE
    3869/    E036 : 73                  	DB	73h	; 03:LD (nnnn),SP
    3870/    E037 :                     
    3871/    E037 : 4B                  	DB	4Bh	; 02:LD BC,(nnnn)
    3872/    E038 : 5B                  	DB	5Bh	; 01:LD DE,(nnnn)
    3873/    E039 : 7B                  	DB	7Bh	; 00:LD SP,(nnnn)
    3874/    E03A :                     ed_op_tble:
    3875/    E03A :                     
    3876/    E03A : 41 46 00            RNAF:		DB	"AF",00H
    3877/    E03D : 41 46 27 00         RNAFX:		DB	"AF'",00H
    3878/    E041 :                     
    3879/    E041 : 52 45 54 00         RETstr:		db	"RET", 00h
    3880/    E045 : 4A 50 00            JPstr:		db	"JP", 00h
    3881/    E048 : 4A 52 00            JRstr:		db	"JR", 00h
    3882/    E04B : 44 4A 4E 5A 00      DJNZstr:	db	"DJNZ", 00h
    3883/    E050 : 43 41 4C 4C 00      CALLstr:	db	"CALL", 00h
    3884/    E055 : 52 53 54 00         RSTstr:		db	"RST", 00h
    3885/    E059 : 4C 44 00            LDstr:		db	"LD", 00h
    3886/    E05C : 48 41 4C 54 00      HLTstr:		db	"HALT", 00h
    3887/    E061 : 41 44 44 00         ADDstr:		db	"ADD", 00h
    3888/    E065 : 41 44 43 00         ADCstr:		db	"ADC", 00h
    3889/    E069 : 53 55 42 00         SUBstr:		db	"SUB", 00h
    3890/    E06D : 53 42 43 00         SBCstr:		db	"SBC", 00h
    3891/    E071 : 41 4E 44 00         ANDstr:		db	"AND", 00h
    3892/    E075 : 58 4F 52 00         XORstr:		db	"XOR", 00h
    3893/    E079 : 4F 52 00            ORstr:		db	"OR", 00h
    3894/    E07C : 43 50 00            CPstr:		db	"CP", 00h
    3895/    E07F : 49 4E 43 00         INCstr:		db	"INC", 00h
    3896/    E083 : 44 45 43 00         DECstr:		db	"DEC", 00h
    3897/    E087 : 50 4F 50 00         POPstr:		db	"POP", 00h
    3898/    E08B : 50 55 53 48 00      PUSHstr:	db	"PUSH",00h
    3899/    E090 : 45 58 00            EXstr:		db	"EX", 00h
    3900/    E093 :                     
    3901/    E093 : 45 58 58 00         EXXstr:		db	"EXX", 00h
    3902/    E097 : 4E 4F 50 00         NOPstr:		db	"NOP", 00h
    3903/    E09B : 52 4C 43 41 00      RLCAstr:	db	"RLCA", 00h
    3904/    E0A0 : 52 52 43 41 00      RRCAstr:	db	"RRCA", 00h
    3905/    E0A5 : 52 4C 41 00         RLAstr:		db	"RLA", 00h
    3906/    E0A9 : 52 52 41 00         RRAstr:		db	"RRA", 00h
    3907/    E0AD : 44 41 41 00         DAAstr:		db	"DAA", 00h
    3908/    E0B1 : 43 50 4C 00         CPLstr:		db	"CPL", 00h
    3909/    E0B5 : 53 43 46 00         SCFstr:		db	"SCF", 00h
    3910/    E0B9 : 43 43 46 00         CCFstr:		db	"CCF", 00h
    3911/    E0BD : 44 49 00            DIstr:		db	"DI", 00h
    3912/    E0C0 : 45 49 00            EIstr:		db	"EI", 00h
    3913/    E0C3 :                     
    3914/    E0C3 : 4F 55 54 00         OUTstr:		db	"OUT", 00h
    3915/    E0C7 : 49 4E 00            INstr:		db	"IN", 00h
    3916/    E0CA :                     
    3917/    E0CA : 52 4C 43 00         RLCstr		db	"RLC", 00h
    3918/    E0CE : 52 52 43 00         RRCstr		db	"RRC", 00h
    3919/    E0D2 : 52 4C 00            RLstr		db	"RL", 00h
    3920/    E0D5 : 52 52 00            RRstr		db	"RR", 00h
    3921/    E0D8 : 53 4C 41 00         SLAstr		db	"SLA", 00h
    3922/    E0DC : 53 52 41 00         SRAstr		db	"SRA", 00h
    3923/    E0E0 : 53 52 4C 00         SRLstr		db	"SRL", 00h
    3924/    E0E4 : 42 49 54 00         BITstr		db	"BIT", 00h
    3925/    E0E8 : 52 45 53 00         RESstr		db	"RES", 00h
    3926/    E0EC : 4E 45 47 00         NEGstr		db	"NEG", 00h
    3927/    E0F0 : 49 4D 00            IMstr		db	"IM", 00h
    3928/    E0F3 : 52 52 44 00         RRDstr		db	"RRD", 00h
    3929/    E0F7 : 52 4C 44 00         RLDstr		db	"RLD", 00h
    3930/    E0FB : 4C 44 49 00         LDIstr		db	"LDI", 00h
    3931/    E0FF : 43 50 49 00         CPIstr		db	"CPI", 00h
    3932/    E103 : 49 4E 49 00         INIstr		db	"INI", 00h
    3933/    E107 : 4F 55 54 49 00      OUTIstr		db	"OUTI", 00h
    3934/    E10C : 4C 44 44 00         LDDstr		db	"LDD", 00h
    3935/    E110 : 43 50 44 00         CPDstr		db	"CPD", 00h
    3936/    E114 : 49 4E 44 00         INDstr		db	"IND", 00h
    3937/    E118 : 4F 55 54 44 00      OUTDstr		db	"OUTD", 00h
    3938/    E11D : 4C 44 49 52 00      LDIRstr		db	"LDIR", 00h
    3939/    E122 : 43 50 49 52 00      CPIRstr		db	"CPIR", 00h
    3940/    E127 : 49 4E 49 52 00      INIRstr		db	"INIR", 00h
    3941/    E12C : 4F 54 49 52 00      OTIRstr		db	"OTIR", 00h
    3942/    E131 : 4C 44 44 52 00      LDDRstr		db	"LDDR", 00h
    3943/    E136 : 43 50 44 52 00      CPDRstr		db	"CPDR", 00h
    3944/    E13B : 49 4E 44 52 00      INDRstr		db	"INDR", 00h
    3945/    E140 : 4F 54 44 52 00      OTDRstr		db	"OTDR", 00h
    3946/    E145 : 52 45 54 49 00      RETIstr		db	"RETI", 00h
    3947/    E14A : 52 45 54 4E 00      RETNstr		db	"RETN", 00h
    3948/    E14F :                     ;BITstr		db	"BIT", 00h
    3949/    E14F :                     ;RESstr		db	"RES", 00h
    3950/    E14F : 53 45 54 00         SETstr		db	"SET", 00h
    3951/    E153 :                     com_errm:
    3952/    E153 : 3F 3F 3F 00         ER_OPMSG:	db	"???", 00h
    3953/    E157 : 28 43 29 00         KCKstr		db	"(C)", 00h
    3954/    E15B :                     
    3955/    E15B : 28 48 4C 29 00      kRNHL:	db	"(HL)", 00h
    3956/    E160 : 4E 5A 00            cc0:	db	"NZ", 00h
    3957/    E163 : 5A 00               cc1:	db	"Z", 00h
    3958/    E165 : 4E 43 00            cc2:	db	"NC", 00h
    3959/    E168 : 43 00               cc3:	db	"C", 00h
    3960/    E16A : 50 4F 00            cc4:	db	"PO", 00h
    3961/    E16D : 50 45 00            cc5:	db	"PE", 00h
    3962/    E170 : 50 00               cc6:	db	"P", 00h
    3963/    E172 : 4D 00               cc7:	db	"M", 00h
    3964/    E174 :                     
    3965/    E174 : DD FB DF FB E4 FB   disRegTbl:	dw	RNB, RNC, RND, RNE, RNH, RNL, kRNHL, RNA
             E17A : E6 FB EB FB ED FB 
             E180 : 5B E1 D8 FB       
    3966/    E184 : 72 E1 70 E1 6D E1   CC_opr:		dw	cc7, cc6, cc5, cc4, cc3, cc2, cc1, cc0
             E18A : 6A E1 68 E1 65 E1 
             E190 : 63 E1 60 E1       
    3967/    E194 : 68 E1 65 E1 63 E1   JRCC_opr1:	dw	cc3, cc2, cc1, cc0
             E19A : 60 E1             
    3968/    E19C : 1B FC E8 FB E1 FB   INC_DEC_ADDrp:	dw	RNSP, RNHL, RNDE, RNBC
             E1A2 : DA FB             
    3969/    E1A4 : 3A E0 E8 FB E1 FB   POP_PUSHrp:	dw	RNAF, RNHL, RNDE, RNBC
             E1AA : DA FB             
    3970/    E1AC :                     
    3971/    E1AC : C0 E0 BD E0 93 E0   oth_1op_tbl:	dw	EIstr, DIstr, EXXstr, RETstr, CCFstr
             E1B2 : 41 E0 B9 E0       
    3972/    E1B6 : B5 E0 B1 E0 AD E0   		dw	SCFstr, CPLstr, DAAstr, RRAstr
             E1BC : A9 E0             
    3973/    E1BE : A5 E0 A0 E0 9B E0   		dw	RLAstr, RRCAstr, RLCAstr, NOPstr
             E1C4 : 97 E0             
    3974/    E1C6 :                     
    3975/    E1C6 : C3 E0 C7 E0 7C E0   logop2str:	dw	OUTstr, INstr, CPstr, ORstr, XORstr
             E1CC : 79 E0 75 E0       
    3976/    E1D0 : 71 E0 69 E0 6D E0   		dw	ANDstr, SUBstr, SBCstr, ADCstr, ADDstr
             E1D6 : 65 E0 61 E0       
    3977/    E1DA :                     
    3978/    E1DA : 1B FC E8 FB E1 FB   logop3str	dw	RNSP, RNHL, RNDE, RNBC
             E1E0 : DA FB             
    3979/    E1E2 : 1B FC E1 FB DA FB   ed_rp_str	dw	RNSP, RNDE, RNBC, RNSP, RNDE, RNBC
             E1E8 : 1B FC E1 FB DA FB 
    3980/    E1EE :                     
    3981/    E1EE : 87 E0 8B E0 83 E0   dd_2opt:	dw	POPstr, PUSHstr, DECstr, INCstr
             E1F4 : 7F E0             
    3982/    E1F6 : 1B FC 15 FC E1 FB   addixrp_tbl:	dw	RNSP, RNIX, RNDE, RNBC
             E1FC : DA FB             
    3983/    E1FE : 1B FC 18 FC E1 FB   addiyrp_tbl:	dw	RNSP, RNIY, RNDE, RNBC
             E204 : DA FB             
    3984/    E206 :                     
    3985/    E206 : 83 E0 7F E0 7C E0   ddlogtbl:	dw	DECstr, INCstr, CPstr, ORstr, XORstr, ANDstr, SUBstr
             E20C : 79 E0 75 E0 71 E0 
             E212 : 69 E0             
    3986/    E214 : D8 FB ED FB EB FB   dd_ldtbl:	dw	RNA, RNL, RNH, RNE, RND, RNC, RNB
             E21A : E6 FB E4 FB DF FB 
             E220 : DD FB             
    3987/    E222 :                     
    3988/    E222 : 40 E1 3B E1 36 E1   ed_noopr:	dw	OTDRstr, INDRstr, CPDRstr, LDDRstr
             E228 : 31 E1             
    3989/    E22A : 2C E1 27 E1 22 E1   		dw	OTIRstr, INIRstr, CPIRstr, LDIRstr
             E230 : 1D E1             
    3990/    E232 : 18 E1 14 E1 10 E1   		dw	OUTDstr, INDstr, CPDstr, LDDstr
             E238 : 0C E1             
    3991/    E23A : 07 E1 03 E1 FF E0   		dw	OUTIstr, INIstr, CPIstr, LDIstr
             E240 : FB E0             
    3992/    E242 : F7 E0 F3 E0 45 E1   		dw	RLDstr, RRDstr, RETIstr, RETNstr
             E248 : 4A E1             
    3993/    E24A : EC E0               		dw	NEGstr
    3994/    E24C :                     
    3995/    E24C : E0 E0 DC E0 D8 E0   dd_rt_str:	dw	SRLstr, SRAstr, SLAstr, RRstr
             E252 : D5 E0             
    3996/    E254 : D2 E0 CE E0 CA E0   		dw	RLstr, RRCstr, RLCstr
    3997/    E25A :                     	
    3998/    E25A :                     ;;;
    3999/    E25A :                     ;;; GO address
    4000/    E25A :                     ;;; 
    4001/    E25A :                     
    4002/    E25A :                     GO:
    4003/    E25A : ED 5B 22 FF         	ld	de, (REGPC)
    4004/    E25E : ED 53 31 FF         	ld	(goTmp), de	; save go tmp go address
    4005/    E262 : 23                  	INC	HL
    4006/    E263 : CD E4 F4            	CALL	SKIPSP
    4007/    E266 : CD F4 F4            	CALL	RDHEX
    4008/    E269 : 30 03               	jr	nc, gostmp
    4009/    E26B : B7                  	OR	A
    4010/    E26C : 28 05               	JR	Z, g_stpadr
    4011/    E26E :                     gostmp:
    4012/    E26E : 7A                  	ld	a, d
    4013/    E26F :                     
    4014/    E26F : =>FALSE             	IF	SuperMEZ80 = 0
    4015/    E26F :                     	cp	IO_B >> 8	; a - 0F0H
    4016/    E26F :                     	jp	nc, ERR		; detect I/O area
    4017/    E26F : [4014]              	ENDIF
    4018/    E26F :                     
    4019/    E26F : ED 53 31 FF         	LD	(goTmp),DE	; save going address
    4020/    E273 :                     g_stpadr:
    4021/    E273 : CD E4 F4            	CALL	SKIPSP
    4022/    E276 : 7E                  	LD	A,(HL)
    4023/    E277 : B7                  	or	a
    4024/    E278 : 28 18               	jr	z, GO1
    4025/    E27A : FE 2C               	cp	','
    4026/    E27C : C2 CB D0            	jp	nz, ERR
    4027/    E27F :                     
    4028/    E27F :                     ; set break point with go command
    4029/    E27F :                     
    4030/    E27F : 23                  	INC	HL
    4031/    E280 : CD E4 F4            	CALL	SKIPSP
    4032/    E283 : CD F4 F4            	CALL	RDHEX		; 1st arg.
    4033/    E286 : DA CB D0            	jp	c, ERR
    4034/    E289 :                     
    4035/    E289 : 21 4A FF            	ld	hl, tmpb_f	; hl: temp break point buffer
    4036/    E28C : CD 86 D1            	call	setbpadr
    4037/    E28F : DA CB D0            	jp	c, ERR		; address is incorrect
    4038/    E292 :                     
    4039/    E292 :                     GO1:
    4040/    E292 : 2A 31 FF            	LD	hl, (goTmp)
    4041/    E295 : 22 22 FF            	ld	(REGPC), hl	; set go address
    4042/    E298 :                     
    4043/    E298 :                     G0:
    4044/    E298 :                     ; check Trace mode
    4045/    E298 :                     
    4046/    E298 : 3A 3A FF            	ld	a, (tpt1_f)
    4047/    E29B : B7                  	or	a
    4048/    E29C : 28 1A               	jr	z, donot_trace
    4049/    E29E :                     	
    4050/    E29E : 2A 37 FF            	ld	hl,(tmpT)
    4051/    E2A1 : 22 22 FF            	ld	(REGPC), hl	; set trace address
    4052/    E2A4 :                     
    4053/    E2A4 : 21 3A FF            	ld	hl, tpt1_f
    4054/    E2A7 : 11 3C FF            	ld	de, tpt1_adr
    4055/    E2AA : CD 10 E3            	call	set_bp
    4056/    E2AD : 21 3E FF            	ld	hl, tpt2_f
    4057/    E2B0 : 11 40 FF            	ld	de, tpt2_adr
    4058/    E2B3 : CD 10 E3            	call	set_bp
    4059/    E2B6 : 18 1B               	jr	skp_tbp		; skip set tmp bp and bp, if tracing
    4060/    E2B8 :                     
    4061/    E2B8 :                     ; set break point
    4062/    E2B8 :                     donot_trace:
    4063/    E2B8 : 21 42 FF            	ld	hl, bpt1_f
    4064/    E2BB : 11 44 FF            	ld	de, bpt1_adr
    4065/    E2BE : CD 10 E3            	call	set_bp
    4066/    E2C1 : 21 46 FF            	ld	hl, bpt2_f
    4067/    E2C4 : 11 48 FF            	ld	de, bpt2_adr
    4068/    E2C7 : CD 10 E3            	call	set_bp
    4069/    E2CA :                     
    4070/    E2CA :                     
    4071/    E2CA :                     ; check go, break pointer
    4072/    E2CA :                     
    4073/    E2CA : 21 4A FF            	ld	hl, tmpb_f
    4074/    E2CD : 11 4C FF            	ld	de, tmpb_adr
    4075/    E2D0 : CD 10 E3            	call	set_bp
    4076/    E2D3 :                     
    4077/    E2D3 :                     	;; R register adjustment
    4078/    E2D3 :                     
    4079/    E2D3 :                     skp_tbp:
    4080/    E2D3 : 2A 20 FF            	LD	HL,(REGSP)
    4081/    E2D6 : F9                  	LD	SP,HL
    4082/    E2D7 : 2A 22 FF            	LD	HL,(REGPC)
    4083/    E2DA : E5                  	PUSH	HL
    4084/    E2DB : DD 2A 1C FF         	LD	IX,(REGIX)
    4085/    E2DF : FD 2A 1E FF         	LD	IY,(REGIY)
    4086/    E2E3 : 2A 14 FF            	LD	HL,(REGAFX)
    4087/    E2E6 : E5                  	PUSH	HL
    4088/    E2E7 : ED 4B 16 FF         	LD	BC,(REGBCX)
    4089/    E2EB : ED 5B 18 FF         	LD	DE,(REGDEX)
    4090/    E2EF : 2A 1A FF            	LD	HL,(REGHLX)
    4091/    E2F2 : D9                  	EXX
    4092/    E2F3 : F1                  	POP	AF
    4093/    E2F4 : 08                  	EX	AF,AF'		;'
    4094/    E2F5 : 2A 0C FF            	LD	HL,(REGAF)
    4095/    E2F8 : E5                  	PUSH	HL
    4096/    E2F9 : ED 4B 0E FF         	LD	BC,(REGBC)
    4097/    E2FD : ED 5B 10 FF         	LD	DE,(REGDE)
    4098/    E301 : 2A 12 FF            	LD	HL,(REGHL)
    4099/    E304 : 3A 24 FF            	LD	A,(REGI)
    4100/    E307 : ED 47               	LD	I,A
    4101/    E309 : 3A 25 FF            	LD	A,(REGR)
    4102/    E30C : ED 4F               	LD	R,A
    4103/    E30E : F1                  	POP	AF
    4104/    E30F : C9                  	RET			; POP PC
    4105/    E310 :                     
    4106/    E310 :                     set_bp:
    4107/    E310 : 7E                  	ld	a, (hl)
    4108/    E311 : B7                  	or	a
    4109/    E312 : C8                  	ret	z
    4110/    E313 :                     
    4111/    E313 : 1A                  	ld	a, (de)
    4112/    E314 : 4F                  	ld	c, a
    4113/    E315 : 13                  	inc	de
    4114/    E316 : 1A                  	ld	a, (de)
    4115/    E317 : 47                  	ld	b, a	; bc = break point address
    4116/    E318 :                     
    4117/    E318 : 3E FF               	ld	a, 0FFH
    4118/    E31A : 02                  	ld	(bc), a	; insert RST 38H code
    4119/    E31B : C9                  	ret
    4120/    E31C :                     	
    4121/    E31C :                     ;;;
    4122/    E31C :                     ;;; SET memory
    4123/    E31C :                     ;;; 
    4124/    E31C :                     
    4125/    E31C :                     SETM:
    4126/    E31C : 23                  	INC	HL
    4127/    E31D : CD E4 F4            	CALL	SKIPSP
    4128/    E320 : CD F4 F4            	CALL	RDHEX
    4129/    E323 :                     
    4130/    E323 : DA CB D0            	jp	c, ERR
    4131/    E326 :                     
    4132/    E326 : CD E4 F4            	CALL	SKIPSP
    4133/    E329 : 7E                  	LD	A,(HL)
    4134/    E32A : B7                  	OR	A
    4135/    E32B : C2 CB D0            	JP	NZ,ERR
    4136/    E32E : 79                  	LD	A,C
    4137/    E32F : B7                  	OR	A
    4138/    E330 : 20 04               	JR	NZ,SM0
    4139/    E332 : ED 5B 07 FF         	LD	DE,(SADDR)
    4140/    E336 :                     
    4141/    E336 :                     
    4142/    E336 :                     SM0:
    4143/    E336 : EB                  	EX	DE,HL
    4144/    E337 :                     SM1:
    4145/    E337 : CD 03 F4            	CALL	HEXOUT4
    4146/    E33A : E5                  	PUSH	HL
    4147/    E33B : 21 F7 F9            	LD	HL,dsap
    4148/    E33E : CD FA F3            	CALL	STROUT
    4149/    E341 : E1                  	POP	HL
    4150/    E342 : 7E                  	LD	A,(HL)
    4151/    E343 : E5                  	PUSH	HL
    4152/    E344 : CD 08 F4            	CALL	HEXOUT2
    4153/    E347 : 3E 20               	LD	A,' '
    4154/    E349 : CD 33 FC            	CALL	CONOUT
    4155/    E34C : CD 5A F4            	CALL	GETLIN
    4156/    E34F : CD E4 F4            	CALL	SKIPSP
    4157/    E352 : 7E                  	LD	A,(HL)
    4158/    E353 : B7                  	OR	A
    4159/    E354 : 20 07               	JR	NZ,SM2
    4160/    E356 :                     	;; Empty  (Increment address)
    4161/    E356 : E1                  	POP	HL
    4162/    E357 : 23                  	INC	HL
    4163/    E358 : 22 07 FF            	LD	(SADDR),HL
    4164/    E35B : 18 DA               	JR	SM1
    4165/    E35D :                     SM2:
    4166/    E35D : FE 2D               	CP	'-'
    4167/    E35F : 20 07               	JR	NZ,SM3
    4168/    E361 :                     	;; '-'  (Decrement address)
    4169/    E361 : E1                  	POP	HL
    4170/    E362 : 2B                  	DEC	HL
    4171/    E363 : 22 07 FF            	LD	(SADDR),HL
    4172/    E366 : 18 CF               	JR	SM1
    4173/    E368 :                     SM3:
    4174/    E368 : FE 2E               	CP	'.'
    4175/    E36A : 20 07               	JR	NZ,SM4
    4176/    E36C : E1                  	POP	HL
    4177/    E36D : 22 07 FF            	LD	(SADDR),HL
    4178/    E370 : C3 87 D0            	JP	WSTART
    4179/    E373 :                     SM4:
    4180/    E373 : CD F4 F4            	CALL	RDHEX
    4181/    E376 : B7                  	OR	A
    4182/    E377 : E1                  	POP	HL
    4183/    E378 : CA CB D0            	JP	Z,ERR
    4184/    E37B : 73                  	LD	(HL),E
    4185/    E37C : 23                  	INC	HL
    4186/    E37D : 22 07 FF            	LD	(SADDR),HL	; set value
    4187/    E380 :                     
    4188/    E380 :                     	; resave opcode for BP command
    4189/    E380 : ED 5B 44 FF         	ld	de, (bpt1_adr)
    4190/    E384 : 1A                  	ld	a, (de)
    4191/    E385 : 32 43 FF            	ld	(bpt1_op), a
    4192/    E388 : ED 5B 48 FF         	ld	de, (bpt2_adr)
    4193/    E38C : 1A                  	ld	a, (de)
    4194/    E38D : 32 47 FF            	ld	(bpt2_op), a
    4195/    E390 :                     
    4196/    E390 : 18 A5               	JR	SM1
    4197/    E392 :                     
    4198/    E392 :                     ;;;
    4199/    E392 :                     ;;; LOAD HEX file
    4200/    E392 :                     ;;;
    4201/    E392 :                     
    4202/    E392 :                     LOADH:
    4203/    E392 :                     	; clear brk point
    4204/    E392 : AF                  	xor	a
    4205/    E393 : 4F                  	ld	c, a
    4206/    E394 : 32 42 FF            	ld	(bpt1_f), a
    4207/    E397 : 32 46 FF            	ld	(bpt2_f), a
    4208/    E39A : 32 26 FF            	ld	(l_jpflg), a
    4209/    E39D :                     	
    4210/    E39D : 23                  	INC	HL
    4211/    E39E : CD E4 F4            	CALL	SKIPSP
    4212/    E3A1 : FE 47               	cp	'G'
    4213/    E3A3 : 20 06               	jr	nz, lh00
    4214/    E3A5 : 32 26 FF            	ld	(l_jpflg), a
    4215/    E3A8 : 23                  	inc	hl
    4216/    E3A9 : 18 03               	jr	lh000
    4217/    E3AB :                     lh00:
    4218/    E3AB : CD F4 F4            	CALL	RDHEX
    4219/    E3AE :                     lh000:
    4220/    E3AE : CD E4 F4            	CALL	SKIPSP
    4221/    E3B1 : B7                  	OR	A
    4222/    E3B2 : C2 CB D0            	JP	NZ,ERR
    4223/    E3B5 :                     
    4224/    E3B5 : 79                  	LD	A,C
    4225/    E3B6 : B7                  	OR	A
    4226/    E3B7 : 20 03               	JR	NZ,LH0
    4227/    E3B9 :                     
    4228/    E3B9 : 11 00 00            	LD	DE,0		;Offset
    4229/    E3BC :                     LH0:
    4230/    E3BC : 3E 2E               	ld	a, '.'
    4231/    E3BE : CD 33 FC            	call	CONOUT
    4232/    E3C1 :                     
    4233/    E3C1 : CD 25 FC            	CALL	CONIN
    4234/    E3C4 : FE 53               	CP	'S'
    4235/    E3C6 : 28 78               	JR	Z,LHS0
    4236/    E3C8 :                     LH1:
    4237/    E3C8 : FE 3A               	CP	':'
    4238/    E3CA : 28 0D               	JR	Z,LHI0
    4239/    E3CC :                     LH2:
    4240/    E3CC :                     	;; Skip to EOL
    4241/    E3CC : FE 0D               	CP	CR
    4242/    E3CE : 28 EC               	JR	Z,LH0
    4243/    E3D0 : FE 0A               	CP	LF
    4244/    E3D2 : 28 E8               	JR	Z,LH0
    4245/    E3D4 :                     LH3:
    4246/    E3D4 : CD 25 FC            	CALL	CONIN
    4247/    E3D7 : 18 F3               	JR	LH2
    4248/    E3D9 :                     
    4249/    E3D9 :                     LHI0:
    4250/    E3D9 : CD 1F F4            	CALL	HEXIN
    4251/    E3DC : 4F                  	LD	C,A		; Checksum
    4252/    E3DD : 47                  	LD	B,A		; Length
    4253/    E3DE :                     
    4254/    E3DE : CD 1F F4            	CALL	HEXIN
    4255/    E3E1 : 67                  	LD	H,A		; Address H
    4256/    E3E2 : 81                  	ADD	A,C
    4257/    E3E3 : 4F                  	LD	C,A
    4258/    E3E4 :                     
    4259/    E3E4 : CD 1F F4            	CALL	HEXIN
    4260/    E3E7 : 6F                  	LD	L,A		; Address L
    4261/    E3E8 : 81                  	ADD	A,C
    4262/    E3E9 : 4F                  	LD	C,A
    4263/    E3EA :                     
    4264/    E3EA :                     	;; Add offset
    4265/    E3EA : 19                  	ADD	HL,DE
    4266/    E3EB : CD 31 E4            	call	sv_1staddr
    4267/    E3EE :                     
    4268/    E3EE : CD 1F F4            	CALL	HEXIN
    4269/    E3F1 : 32 0A FF            	LD	(RECTYP),A
    4270/    E3F4 : 81                  	ADD	A,C
    4271/    E3F5 : 4F                  	LD	C,A		; Checksum
    4272/    E3F6 :                     
    4273/    E3F6 : 78                  	LD	A,B
    4274/    E3F7 : B7                  	OR	A
    4275/    E3F8 : 28 14               	JR	Z,LHI3
    4276/    E3FA :                     LHI1:
    4277/    E3FA : CD 1F F4            	CALL	HEXIN
    4278/    E3FD : F5                  	PUSH	AF
    4279/    E3FE : 81                  	ADD	A,C
    4280/    E3FF : 4F                  	LD	C,A		; Checksum
    4281/    E400 :                     
    4282/    E400 : 3A 0A FF            	LD	A,(RECTYP)
    4283/    E403 : B7                  	OR	A
    4284/    E404 : 20 05               	JR	NZ,LHI20
    4285/    E406 :                     
    4286/    E406 : F1                  	POP	AF
    4287/    E407 : 77                  	LD	(HL),A
    4288/    E408 : 23                  	INC	HL
    4289/    E409 : 18 01               	JR	LHI2
    4290/    E40B :                     LHI20:
    4291/    E40B : F1                  	POP	AF
    4292/    E40C :                     LHI2:
    4293/    E40C : 10 EC               	DJNZ	LHI1
    4294/    E40E :                     LHI3:
    4295/    E40E : CD 1F F4            	CALL	HEXIN
    4296/    E411 : 81                  	ADD	A,C
    4297/    E412 : 20 14               	JR	NZ,LHIE		; Checksum error
    4298/    E414 : 3A 0A FF            	LD	A,(RECTYP)
    4299/    E417 : B7                  	OR	A
    4300/    E418 : CA D4 E3            	JP	Z,LH3
    4301/    E41B :                     
    4302/    E41B :                     lg_jump:
    4303/    E41B : CD 43 F4            	call	CRLF
    4304/    E41E : 3A 26 FF            	ld	a, (l_jpflg)
    4305/    E421 : B7                  	or	a
    4306/    E422 : 28 0A               	jr	z, l_end
    4307/    E424 : 2A 27 FF            	ld	hl, (ld_jmp)
    4308/    E427 : E9                  	jp	(hl)		; Jump to load address
    4309/    E428 :                     
    4310/    E428 :                     LHIE:
    4311/    E428 : 21 CE F9            	LD	HL,IHEMSG
    4312/    E42B :                     LHSR:
    4313/    E42B : CD FA F3            	CALL	STROUT
    4314/    E42E :                     l_end:
    4315/    E42E : C3 87 D0            	JP	WSTART
    4316/    E431 :                     	
    4317/    E431 :                     
    4318/    E431 :                     sv_1staddr:
    4319/    E431 : 3A 26 FF            	ld	a, (l_jpflg)
    4320/    E434 : FE 47               	cp	'G'
    4321/    E436 : C0                  	ret	nz
    4322/    E437 : 22 27 FF            	ld	(ld_jmp), hl
    4323/    E43A : 3E 01               	ld	a, 1
    4324/    E43C : 32 26 FF            	ld	(l_jpflg), a
    4325/    E43F : C9                  	ret
    4326/    E440 :                     
    4327/    E440 :                     LHS0:
    4328/    E440 : CD 25 FC            	CALL	CONIN
    4329/    E443 : 32 0A FF            	LD	(RECTYP),A
    4330/    E446 :                     
    4331/    E446 : CD 1F F4            	CALL	HEXIN
    4332/    E449 : 47                  	LD	B,A		; Length+3
    4333/    E44A : 4F                  	LD	C,A		; Checksum
    4334/    E44B :                     
    4335/    E44B : CD 1F F4            	CALL	HEXIN
    4336/    E44E : 67                  	LD	H,A
    4337/    E44F : 81                  	ADD	A,C
    4338/    E450 : 4F                  	LD	C,A
    4339/    E451 :                     	
    4340/    E451 : CD 1F F4            	CALL	HEXIN
    4341/    E454 : 6F                  	LD	L,A
    4342/    E455 : 81                  	ADD	A,C
    4343/    E456 : 4F                  	LD	C,A
    4344/    E457 :                     
    4345/    E457 : 19                  	ADD	HL,DE
    4346/    E458 : CD 31 E4            	call	sv_1staddr
    4347/    E45B :                     
    4348/    E45B : 05                  	DEC	B
    4349/    E45C : 05                  	DEC	B
    4350/    E45D : 05                  	DEC	B
    4351/    E45E : 28 15               	JR	Z,LHS3
    4352/    E460 :                     LHS1:
    4353/    E460 : CD 1F F4            	CALL	HEXIN
    4354/    E463 : F5                  	PUSH	AF
    4355/    E464 : 81                  	ADD	A,C
    4356/    E465 : 4F                  	LD	C,A		; Checksum
    4357/    E466 :                     
    4358/    E466 : 3A 0A FF            	LD	A,(RECTYP)
    4359/    E469 : FE 31               	CP	'1'
    4360/    E46B : 20 05               	JR	NZ,LHS2
    4361/    E46D :                     
    4362/    E46D : F1                  	POP	AF
    4363/    E46E : 77                  	LD	(HL),A
    4364/    E46F : 23                  	INC	HL
    4365/    E470 : 18 01               	JR	LHS20
    4366/    E472 :                     LHS2:
    4367/    E472 : F1                  	POP	AF
    4368/    E473 :                     LHS20:
    4369/    E473 : 10 EB               	DJNZ	LHS1
    4370/    E475 :                     LHS3:
    4371/    E475 : CD 1F F4            	CALL	HEXIN
    4372/    E478 : 81                  	ADD	A,C
    4373/    E479 : FE FF               	CP	0FFH
    4374/    E47B : 20 12               	JR	NZ,LHSE
    4375/    E47D :                     
    4376/    E47D : 3A 0A FF            	LD	A,(RECTYP)
    4377/    E480 : FE 37               	CP	'7'
    4378/    E482 : 28 AA               	JR	Z,l_end
    4379/    E484 : FE 38               	CP	'8'
    4380/    E486 : 28 A6               	JR	Z,l_end
    4381/    E488 : FE 39               	CP	'9'
    4382/    E48A : 28 8F               	JR	Z, lg_jump
    4383/    E48C : C3 D4 E3            	JP	LH3
    4384/    E48F :                     LHSE:
    4385/    E48F : 21 DB F9            	LD	HL,SHEMSG
    4386/    E492 : 18 97               	jr	LHSR
    4387/    E494 :                     ;;;
    4388/    E494 :                     ;;; SAVE HEX file
    4389/    E494 :                     ;;;
    4390/    E494 :                     
    4391/    E494 :                     SAVEH:
    4392/    E494 : 23                  	INC	HL
    4393/    E495 : 7E                  	LD	A,(HL)
    4394/    E496 : FE 49               	CP	'I'
    4395/    E498 : 28 04               	JR	Z,SH0
    4396/    E49A : FE 53               	CP	'S'
    4397/    E49C : 20 04               	JR	NZ,SH1
    4398/    E49E :                     SH0:
    4399/    E49E : 23                  	INC	HL
    4400/    E49F : 32 09 FF            	LD	(HEXMOD),A
    4401/    E4A2 :                     SH1:
    4402/    E4A2 : CD E4 F4            	CALL	SKIPSP
    4403/    E4A5 : CD F4 F4            	CALL	RDHEX
    4404/    E4A8 : B7                  	OR	A
    4405/    E4A9 : 28 1C               	JR	Z,SHE
    4406/    E4AB : D5                  	PUSH	DE
    4407/    E4AC : DD E1               	POP	IX		; IX = Start address
    4408/    E4AE : CD E4 F4            	CALL	SKIPSP
    4409/    E4B1 : 7E                  	LD	A,(HL)
    4410/    E4B2 : FE 2C               	CP	','
    4411/    E4B4 : 20 11               	JR	NZ,SHE
    4412/    E4B6 : 23                  	INC	HL
    4413/    E4B7 : CD E4 F4            	CALL	SKIPSP
    4414/    E4BA : CD F4 F4            	CALL	RDHEX		; DE = End address
    4415/    E4BD : B7                  	OR	A
    4416/    E4BE : 28 07               	JR	Z,SHE
    4417/    E4C0 : CD E4 F4            	CALL	SKIPSP
    4418/    E4C3 : 7E                  	LD	A,(HL)
    4419/    E4C4 : B7                  	OR	A
    4420/    E4C5 : 28 03               	JR	Z,SH2
    4421/    E4C7 :                     SHE:
    4422/    E4C7 : C3 CB D0            	JP	ERR
    4423/    E4CA :                     
    4424/    E4CA :                     SH2:
    4425/    E4CA : DD E5               	PUSH	IX
    4426/    E4CC : E1                  	POP	HL
    4427/    E4CD : EB                  	EX	DE,HL
    4428/    E4CE : 23                  	INC	HL
    4429/    E4CF : B7                  	OR	A
    4430/    E4D0 : ED 52               	SBC	HL,DE		; HL = Length
    4431/    E4D2 :                     SH3:
    4432/    E4D2 : CD F2 E4            	CALL	SHL00
    4433/    E4D5 : 7C                  	LD	A,H
    4434/    E4D6 : B5                  	OR	L
    4435/    E4D7 : 20 F9               	JR	NZ,SH3
    4436/    E4D9 :                     
    4437/    E4D9 : 3A 09 FF            	LD	A,(HEXMOD)
    4438/    E4DC : FE 49               	CP	'I'
    4439/    E4DE : 20 09               	JR	NZ,SH4
    4440/    E4E0 :                     	;; End record for Intel HEX
    4441/    E4E0 : 21 FA F9            	LD	HL,IHEXER
    4442/    E4E3 : CD FA F3            	CALL	STROUT
    4443/    E4E6 : C3 87 D0            	JP	WSTART
    4444/    E4E9 :                     SH4:
    4445/    E4E9 :                     	;; End record for Motorola S record
    4446/    E4E9 : 21 08 FA            	LD	HL,SRECER
    4447/    E4EC : CD FA F3            	CALL	STROUT
    4448/    E4EF : C3 87 D0            	JP	WSTART
    4449/    E4F2 :                     
    4450/    E4F2 :                     SHL00:
    4451/    E4F2 : 0E 10               	LD	C,16
    4452/    E4F4 : 7C                  	LD	A,H
    4453/    E4F5 : B7                  	OR	A
    4454/    E4F6 : 20 05               	JR	NZ,SHL0
    4455/    E4F8 : 7D                  	LD	A,L
    4456/    E4F9 : B9                  	CP	C
    4457/    E4FA : 30 01               	JR	NC,SHL0
    4458/    E4FC : 4F                  	LD	C,A
    4459/    E4FD :                     SHL0:
    4460/    E4FD : 06 00               	LD	B,0
    4461/    E4FF : B7                  	OR	A
    4462/    E500 : ED 42               	SBC	HL,BC
    4463/    E502 : 41                  	LD	B,C
    4464/    E503 :                     
    4465/    E503 : 3A 09 FF            	LD	A,(HEXMOD)
    4466/    E506 : FE 49               	CP	'I'
    4467/    E508 : 20 30               	JR	NZ,SHLS
    4468/    E50A :                     
    4469/    E50A :                     	;; Intel HEX
    4470/    E50A : 3E 3A               	LD	A,':'
    4471/    E50C : CD 33 FC            	CALL	CONOUT
    4472/    E50F :                     
    4473/    E50F : 78                  	LD	A,B
    4474/    E510 : CD 08 F4            	CALL	HEXOUT2		; Length
    4475/    E513 : 48                  	LD	C,B		; Checksum
    4476/    E514 :                     
    4477/    E514 : 7A                  	LD	A,D
    4478/    E515 : CD 08 F4            	CALL	HEXOUT2
    4479/    E518 : 7A                  	LD	A,D
    4480/    E519 : 81                  	ADD	A,C
    4481/    E51A : 4F                  	LD	C,A
    4482/    E51B :                     	
    4483/    E51B : 7B                  	LD	A,E
    4484/    E51C : CD 08 F4            	CALL	HEXOUT2
    4485/    E51F : 7B                  	LD	A,E
    4486/    E520 : 81                  	ADD	A,C
    4487/    E521 : 4F                  	LD	C,A
    4488/    E522 :                     	
    4489/    E522 : AF                  	XOR	A
    4490/    E523 : CD 08 F4            	CALL	HEXOUT2
    4491/    E526 :                     SHLI0:
    4492/    E526 : 1A                  	LD	A,(DE)
    4493/    E527 : F5                  	PUSH	AF
    4494/    E528 : CD 08 F4            	CALL	HEXOUT2
    4495/    E52B : F1                  	POP	AF
    4496/    E52C : 81                  	ADD	A,C
    4497/    E52D : 4F                  	LD	C,A
    4498/    E52E :                     
    4499/    E52E : 13                  	INC	DE
    4500/    E52F : 10 F5               	DJNZ	SHLI0
    4501/    E531 :                     
    4502/    E531 : 79                  	LD	A,C
    4503/    E532 : ED 44               	NEG
    4504/    E534 : CD 08 F4            	CALL	HEXOUT2
    4505/    E537 : C3 43 F4            	JP	CRLF
    4506/    E53A :                     
    4507/    E53A :                     SHLS:
    4508/    E53A :                     	;; Motorola S record
    4509/    E53A : 3E 53               	LD	A,'S'
    4510/    E53C : CD 33 FC            	CALL	CONOUT
    4511/    E53F : 3E 31               	LD	A,'1'
    4512/    E541 : CD 33 FC            	CALL	CONOUT
    4513/    E544 :                     
    4514/    E544 : 78                  	LD	A,B
    4515/    E545 : C6 03               	ADD	A,2+1		; DataLength + 2(Addr) + 1(Sum)
    4516/    E547 : 4F                  	LD	C,A
    4517/    E548 : CD 08 F4            	CALL	HEXOUT2
    4518/    E54B :                     
    4519/    E54B : 7A                  	LD	A,D
    4520/    E54C : CD 08 F4            	CALL	HEXOUT2
    4521/    E54F : 7A                  	LD	A,D
    4522/    E550 : 81                  	ADD	A,C
    4523/    E551 : 4F                  	LD	C,A
    4524/    E552 :                     	
    4525/    E552 : 7B                  	LD	A,E
    4526/    E553 : CD 08 F4            	CALL	HEXOUT2
    4527/    E556 : 7B                  	LD	A,E
    4528/    E557 : 81                  	ADD	A,C
    4529/    E558 : 4F                  	LD	C,A
    4530/    E559 :                     SHLS0:
    4531/    E559 : 1A                  	LD	A,(DE)
    4532/    E55A : F5                  	PUSH	AF
    4533/    E55B : CD 08 F4            	CALL	HEXOUT2		; Data
    4534/    E55E : F1                  	POP	AF
    4535/    E55F : 81                  	ADD	A,C
    4536/    E560 : 4F                  	LD	C,A
    4537/    E561 :                     
    4538/    E561 : 13                  	INC	DE
    4539/    E562 : 10 F5               	DJNZ	SHLS0
    4540/    E564 :                     
    4541/    E564 : 79                  	LD	A,C
    4542/    E565 : 2F                  	CPL
    4543/    E566 : CD 08 F4            	CALL	HEXOUT2
    4544/    E569 : C3 43 F4            	JP	CRLF
    4545/    E56C :                     
    4546/    E56C :                     ;;;
    4547/    E56C :                     ;;; Register
    4548/    E56C :                     ;;;
    4549/    E56C :                     
    4550/    E56C :                     REG:
    4551/    E56C : 23                  	INC	HL
    4552/    E56D : CD E4 F4            	CALL	SKIPSP
    4553/    E570 : B7                  	OR	A
    4554/    E571 : 20 06               	JR	NZ,RG0
    4555/    E573 : CD F2 E5            	CALL	RDUMP
    4556/    E576 : C3 87 D0            	JP	WSTART
    4557/    E579 :                     RG0:
    4558/    E579 : EB                  	EX	DE,HL
    4559/    E57A : 21 BE FA            	LD	HL,RNTAB
    4560/    E57D :                     RG1:
    4561/    E57D : BE                  	CP	(HL)
    4562/    E57E : 28 0D               	JR	Z,RG2		; Character match
    4563/    E580 : 4F                  	LD	C,A
    4564/    E581 : 23                  	INC	HL
    4565/    E582 : 7E                  	LD	A,(HL)
    4566/    E583 : B7                  	OR	A
    4567/    E584 : 28 69               	JR	Z,RGE		; Found end mark
    4568/    E586 : 79                  	LD	A,C
    4569/    E587 : 01 05 00            	LD	BC,5
    4570/    E58A : 09                  	ADD	HL,BC		; Next entry
    4571/    E58B : 18 F0               	JR	RG1
    4572/    E58D :                     RG2:
    4573/    E58D : 23                  	INC	HL
    4574/    E58E : 7E                  	LD	A,(HL)
    4575/    E58F : FE 0F               	CP	0FH		; Link code
    4576/    E591 : 20 09               	JR	NZ,RG3
    4577/    E593 :                     	;; Next table
    4578/    E593 : 23                  	INC	HL
    4579/    E594 : 4E                  	LD	C,(HL)
    4580/    E595 : 23                  	INC	HL
    4581/    E596 : 66                  	LD	H,(HL)
    4582/    E597 : 69                  	LD	L,C
    4583/    E598 : 13                  	INC	DE
    4584/    E599 : 1A                  	LD	A,(DE)
    4585/    E59A : 18 E1               	JR	RG1
    4586/    E59C :                     RG3:
    4587/    E59C : B7                  	OR	A
    4588/    E59D : 28 50               	JR	Z,RGE		; Found end mark
    4589/    E59F :                     
    4590/    E59F : 4E                  	LD	C,(HL)		; LD C,A???
    4591/    E5A0 : 23                  	INC	HL
    4592/    E5A1 : 5E                  	LD	E,(HL)
    4593/    E5A2 : 23                  	INC	HL
    4594/    E5A3 : 56                  	LD	D,(HL)
    4595/    E5A4 : D5                  	PUSH	DE		; Reg storage address
    4596/    E5A5 : 23                  	INC	HL
    4597/    E5A6 : 7E                  	LD	A,(HL)
    4598/    E5A7 : 23                  	INC	HL
    4599/    E5A8 : 66                  	LD	H,(HL)
    4600/    E5A9 : 6F                  	LD	L,A		; HL: Reg name
    4601/    E5AA : CD FA F3            	CALL	STROUT
    4602/    E5AD : 3E 3D               	LD	A,'='
    4603/    E5AF : CD 33 FC            	CALL	CONOUT
    4604/    E5B2 :                     
    4605/    E5B2 : 79                  	LD	A,C
    4606/    E5B3 : E6 07               	AND	07H
    4607/    E5B5 : FE 01               	CP	1
    4608/    E5B7 : 20 08               	JR	NZ,RG4
    4609/    E5B9 :                     	;; 8 bit register
    4610/    E5B9 : E1                  	POP	HL
    4611/    E5BA : 7E                  	LD	A,(HL)
    4612/    E5BB : E5                  	PUSH	HL
    4613/    E5BC : CD 08 F4            	CALL	HEXOUT2
    4614/    E5BF : 18 0C               	JR	RG5
    4615/    E5C1 :                     RG4:
    4616/    E5C1 :                     	;; 16 bit register
    4617/    E5C1 : E1                  	POP	HL
    4618/    E5C2 : E5                  	PUSH	HL
    4619/    E5C3 : 23                  	INC	HL
    4620/    E5C4 : 7E                  	LD	A,(HL)
    4621/    E5C5 : CD 08 F4            	CALL	HEXOUT2
    4622/    E5C8 : 2B                  	DEC	HL
    4623/    E5C9 : 7E                  	LD	A,(HL)
    4624/    E5CA : CD 08 F4            	CALL	HEXOUT2
    4625/    E5CD :                     RG5:
    4626/    E5CD : 3E 20               	LD	A,' '
    4627/    E5CF : CD 33 FC            	CALL	CONOUT
    4628/    E5D2 : C5                  	PUSH	BC		; C: reg size
    4629/    E5D3 : CD 5A F4            	CALL	GETLIN
    4630/    E5D6 : CD E4 F4            	CALL	SKIPSP
    4631/    E5D9 : CD F4 F4            	CALL	RDHEX
    4632/    E5DC : B7                  	OR	A
    4633/    E5DD : 28 0D               	JR	Z,RGR
    4634/    E5DF : C1                  	POP	BC
    4635/    E5E0 : E1                  	POP	HL
    4636/    E5E1 : 79                  	LD	A,C
    4637/    E5E2 : FE 01               	CP	1
    4638/    E5E4 : 20 03               	JR	NZ,RG6
    4639/    E5E6 :                     	;; 8 bit register
    4640/    E5E6 : 73                  	LD	(HL),E
    4641/    E5E7 : 18 03               	JR	RG7
    4642/    E5E9 :                     RG6:
    4643/    E5E9 :                     	;; 16 bit register
    4644/    E5E9 : 73                  	LD	(HL),E
    4645/    E5EA : 23                  	INC	HL
    4646/    E5EB : 72                  	LD	(HL),D
    4647/    E5EC :                     RG7:
    4648/    E5EC :                     RGR:
    4649/    E5EC : C3 87 D0            	JP	WSTART
    4650/    E5EF :                     RGE:
    4651/    E5EF : C3 CB D0            	JP	ERR
    4652/    E5F2 :                     
    4653/    E5F2 :                     RDUMP:
    4654/    E5F2 : 21 15 FA            	LD	HL,RDTAB
    4655/    E5F5 :                     RD0:
    4656/    E5F5 : 5E                  	LD	E,(HL)
    4657/    E5F6 : 23                  	INC	HL
    4658/    E5F7 : 56                  	LD	D,(HL)
    4659/    E5F8 : 23                  	INC	HL
    4660/    E5F9 : 7A                  	LD	A,D
    4661/    E5FA : B3                  	OR	E
    4662/    E5FB : CA 43 F4            	JP	Z,CRLF		; End
    4663/    E5FE : D5                  	push	de
    4664/    E5FF : EB                  	EX	DE,HL
    4665/    E600 : CD FA F3            	CALL	STROUT	; print name of register
    4666/    E603 : EB                  	EX	DE,HL
    4667/    E604 : D1                  	pop	de
    4668/    E605 :                     
    4669/    E605 :                     ; flag check
    4670/    E605 : 3E FA               	ld	a, RDSF_H
    4671/    E607 : BA                  	cp	d
    4672/    E608 : 20 07               	jr	nz, rd101
    4673/    E60A : 3E 80               	ld	a, RDSF_L
    4674/    E60C : BB                  	cp	e
    4675/    E60D : 20 02               	jr	nz, rd101
    4676/    E60F : 18 29               	jr	rd20
    4677/    E611 :                     
    4678/    E611 :                     rd101:
    4679/    E611 : 3E FA               	ld	a, RDSFX_H
    4680/    E613 : BA                  	cp	d
    4681/    E614 : 20 05               	jr	nz, rd10
    4682/    E616 : 3E A7               	ld	a, RDSFX_L
    4683/    E618 : BB                  	cp	e
    4684/    E619 : 28 1F               	jr	z, rd20
    4685/    E61B :                     
    4686/    E61B :                     rd10:
    4687/    E61B : 5E                  	LD	E,(HL)
    4688/    E61C : 23                  	INC	HL
    4689/    E61D : 56                  	LD	D,(HL)
    4690/    E61E : 23                  	INC	HL
    4691/    E61F : 7E                  	LD	A,(HL)
    4692/    E620 : 23                  	INC	HL
    4693/    E621 : EB                  	EX	DE,HL
    4694/    E622 : FE 01               	CP	1
    4695/    E624 : 20 07               	JR	NZ,RD1
    4696/    E626 :                     	;; 1 byte
    4697/    E626 : 7E                  	LD	A,(HL)
    4698/    E627 : CD 08 F4            	CALL	HEXOUT2
    4699/    E62A : EB                  	EX	DE,HL
    4700/    E62B : 18 C8               	JR	RD0
    4701/    E62D :                     RD1:
    4702/    E62D :                     	;; 2 byte
    4703/    E62D : 23                  	INC	HL
    4704/    E62E : 7E                  	LD	A,(HL)
    4705/    E62F : CD 08 F4            	CALL	HEXOUT2		; High byte
    4706/    E632 : 2B                  	DEC	HL
    4707/    E633 : 7E                  	LD	A,(HL)
    4708/    E634 : CD 08 F4            	CALL	HEXOUT2		; Low byte
    4709/    E637 : EB                  	EX	DE,HL
    4710/    E638 : 18 BB               	JR	RD0
    4711/    E63A :                     
    4712/    E63A :                     ; make flag image string
    4713/    E63A :                     rd20:
    4714/    E63A : 5E                  	LD	E,(HL)
    4715/    E63B : 23                  	INC	HL
    4716/    E63C : 56                  	LD	D,(HL)
    4717/    E63D : 23                  	INC	HL
    4718/    E63E : 1A                  	ld	a, (de)		; get flag values
    4719/    E63F :                     
    4720/    E63F : D5                  	push	de
    4721/    E640 : E5                  	push	hl
    4722/    E641 :                     
    4723/    E641 :                     ; make flag image
    4724/    E641 :                     
    4725/    E641 : 21 63 FF            	ld	hl, F_bit
    4726/    E644 : 01 6E E6            	ld	bc, F_bit_on
    4727/    E647 : 11 76 E6            	ld	de, F_bit_off
    4728/    E64A : F5                  	push	af		; adjustment SP. DO NOT DELETE THIS LINE!
    4729/    E64B :                     
    4730/    E64B :                     flg_loop:
    4731/    E64B : F1                  	pop	af		; "push af" before loop back
    4732/    E64C : CB 27               	sla	a
    4733/    E64E : 30 06               	jr	nc, flg_off
    4734/    E650 : F5                  	push	af
    4735/    E651 : 0A                  	ld	a, (bc)
    4736/    E652 : 77                  	ld	(hl), a
    4737/    E653 : F1                  	pop	af
    4738/    E654 : 18 04               	jr	flg_nxt
    4739/    E656 :                     flg_off:
    4740/    E656 : F5                  	push	af
    4741/    E657 : 1A                  	ld	a, (de)
    4742/    E658 : 77                  	ld	(hl), a
    4743/    E659 : F1                  	pop	af
    4744/    E65A :                     
    4745/    E65A :                     flg_nxt:
    4746/    E65A : 03                  	inc	bc
    4747/    E65B : 13                  	inc	de
    4748/    E65C : 23                  	inc	hl
    4749/    E65D :                     
    4750/    E65D : F5                  	push	af
    4751/    E65E : 7E                  	ld	a, (hl)
    4752/    E65F : B7                  	or	a		;check delimiter
    4753/    E660 : 20 E9               	jr	nz, flg_loop
    4754/    E662 :                     
    4755/    E662 : F1                  	pop	af		; restore stack position
    4756/    E663 : 21 63 FF            	ld	hl, F_bit
    4757/    E666 : CD FA F3            	call	STROUT		; print flag register for bit imaze
    4758/    E669 :                     
    4759/    E669 : E1                  	pop	hl
    4760/    E66A : D1                  	pop	de
    4761/    E66B :                     
    4762/    E66B : 23                  	inc	hl
    4763/    E66C : 18 87               	JR	RD0
    4764/    E66E :                     
    4765/    E66E : 53 5A 2E 48 2E 50   F_bit_on:	db	"SZ.H.PNC"
             E674 : 4E 43             
    4766/    E676 : 2E 2E 2E 2E 2E 2E   F_bit_off:	db	"........"
             E67C : 2E 2E             
    4767/    E67E :                     
    4768/    E67E :                     ;--------------------------------------------------
    4769/    E67E :                     ;
    4770/    E67E :                     ; Minimal assemble
    4771/    E67E :                     ;
    4772/    E67E :                     ;--------------------------------------------------
    4773/    E67E :                     
    4774/    E67E : =80H                dm_bit	equ	80h
    4775/    E67E :                     
    4776/    E67E :                     ope_cds:
    4777/    E67E :                     ; 4 bytes string
    4778/    E67E : 49 4E 49 52 B9      	db	"INIR",	dm_bit | 57
    4779/    E683 : 49 4E 44 52 BB      	db	"INDR",	dm_bit | 59
    4780/    E688 : 4F 55 54 49 BD      	db	"OUTI",	dm_bit | 61
    4781/    E68D : 4F 54 49 52 BE      	db	"OTIR",	dm_bit | 62
    4782/    E692 : 4F 55 54 44 BF      	db	"OUTD",	dm_bit | 63
    4783/    E697 : 4F 54 44 52 C0      	db	"OTDR",	dm_bit | 64
    4784/    E69C : 48 41 4C 54 B3      	db	"HALT",	dm_bit | 51
    4785/    E6A1 : 52 45 54 49 AF      	db	"RETI",	dm_bit | 47
    4786/    E6A6 : 52 45 54 4E B0      	db	"RETN",	dm_bit | 48
    4787/    E6AB : 44 4A 4E 5A AC      	db	"DJNZ",	dm_bit | 44
    4788/    E6B0 : 43 41 4C 4C AD      	db	"CALL",	dm_bit | 45
    4789/    E6B5 : 43 50 44 52 A8      	db	"CPDR",	dm_bit | 40
    4790/    E6BA : 4C 44 49 52 83      	db	"LDIR",	dm_bit | 03
    4791/    E6BF : 4C 44 44 52 85      	db	"LDDR",	dm_bit | 05
    4792/    E6C4 : 50 55 53 48 88      	db	"PUSH",	dm_bit | 08
    4793/    E6C9 : 52 4C 43 41 8A      	db	"RLCA",	dm_bit | 10
    4794/    E6CE : 52 52 43 41 8E      	db	"RRCA",	dm_bit | 14
    4795/    E6D3 : 43 50 49 52 A6      	db	"CPIR",	dm_bit | 38
    4796/    E6D8 :                     
    4797/    E6D8 :                     ; 3 bytes string
    4798/    E6D8 : 4C 44 49 82         	db	"LDI",	dm_bit | 02
    4799/    E6DC : 4C 44 44 84         	db	"LDD",	dm_bit | 04
    4800/    E6E0 : 45 58 58 87         	db	"EXX",	dm_bit | 07
    4801/    E6E4 : 50 4F 50 89         	db	"POP",	dm_bit | 09
    4802/    E6E8 : 52 4C 41 8B         	db	"RLA",	dm_bit | 11
    4803/    E6EC : 52 4C 43 8C         	db	"RLC",	dm_bit | 12
    4804/    E6F0 : 52 52 41 8F         	db	"RRA",	dm_bit | 15
    4805/    E6F4 : 52 52 43 90         	db	"RRC",	dm_bit | 16
    4806/    E6F8 : 53 4C 41 92         	db	"SLA",	dm_bit | 18
    4807/    E6FC : 53 52 41 93         	db	"SRA",	dm_bit | 19
    4808/    E700 : 53 52 4C 94         	db	"SRL",	dm_bit | 20
    4809/    E704 : 41 44 44 95         	db	"ADD",	dm_bit | 21
    4810/    E708 : 41 44 43 96         	db	"ADC",	dm_bit | 22
    4811/    E70C : 49 4E 43 97         	db	"INC",	dm_bit | 23
    4812/    E710 : 53 55 42 98         	db	"SUB",	dm_bit | 24
    4813/    E714 : 53 42 43 99         	db	"SBC",	dm_bit | 25
    4814/    E718 : 44 45 43 9A         	db	"DEC",	dm_bit | 26
    4815/    E71C : 41 4E 44 9B         	db	"AND",	dm_bit | 27
    4816/    E720 : 58 4F 52 9D         	db	"XOR",	dm_bit | 29
    4817/    E724 : 43 50 4C 9E         	db	"CPL",	dm_bit | 30
    4818/    E728 : 4E 45 47 9F         	db	"NEG",	dm_bit | 31
    4819/    E72C : 43 43 46 A0         	db	"CCF",	dm_bit | 32
    4820/    E730 : 53 43 46 A1         	db	"SCF",	dm_bit | 33
    4821/    E734 : 42 49 54 A2         	db	"BIT",	dm_bit | 34
    4822/    E738 : 53 45 54 A3         	db	"SET",	dm_bit | 35
    4823/    E73C : 52 45 53 A4         	db	"RES",	dm_bit | 36
    4824/    E740 : 43 50 49 A5         	db	"CPI",	dm_bit | 37
    4825/    E744 : 43 50 44 A7         	db	"CPD",	dm_bit | 39
    4826/    E748 : 52 45 54 AE         	db	"RET",	dm_bit | 46
    4827/    E74C : 52 53 54 B1         	db	"RST",	dm_bit | 49
    4828/    E750 : 4E 4F 50 B2         	db	"NOP",	dm_bit | 50
    4829/    E754 : 49 4E 49 B8         	db	"INI",	dm_bit | 56
    4830/    E758 : 49 4E 44 BA         	db	"IND",	dm_bit | 58
    4831/    E75C : 4F 55 54 BC         	db	"OUT",	dm_bit | 60
    4832/    E760 : 44 41 41 C1         	db	"DAA",	dm_bit | 65
    4833/    E764 : 52 4C 44 C2         	db	"RLD",	dm_bit | 66
    4834/    E768 : 52 52 44 C3         	db	"RRD",	dm_bit | 67
    4835/    E76C : 4F 52 47 C4         	db	"ORG",	dm_bit | 68
    4836/    E770 :                     
    4837/    E770 :                     ; 2 bytes string
    4838/    E770 : 45 58 86            	db	"EX",	dm_bit | 06
    4839/    E773 : 52 4C 8D            	db	"RL",	dm_bit | 13
    4840/    E776 : 52 52 91            	db	"RR",	dm_bit | 17
    4841/    E779 : 4F 52 9C            	db	"OR",	dm_bit | 28
    4842/    E77C : 43 50 A9            	db	"CP",	dm_bit | 41
    4843/    E77F : 4A 50 AA            	db	"JP",	dm_bit | 42
    4844/    E782 : 4A 52 AB            	db	"JR",	dm_bit | 43
    4845/    E785 : 49 4D B6            	db	"IM",	dm_bit | 54
    4846/    E788 : 49 4E B7            	db	"IN",	dm_bit | 55
    4847/    E78B : 44 49 B4            	db	"DI",	dm_bit | 52
    4848/    E78E : 45 49 B5            	db	"EI",	dm_bit | 53
    4849/    E791 : 4C 44 81            	db	"LD",	dm_bit | 01
    4850/    E794 : 44 42 C5            	db	"DB",	dm_bit | 69
    4851/    E797 : 44 57 C6            	db	"DW",	dm_bit | 70
    4852/    E79A : 00                  	db	0	; delimiter
    4853/    E79B :                     
    4854/    E79B :                     operand_cds:
    4855/    E79B :                     ; 4 bytes string
    4856/    E79B : 28 42 43 29 9A      	db	"(BC)",	dm_bit | 26
    4857/    E7A0 : 28 44 45 29 9B      	db	"(DE)",	dm_bit | 27
    4858/    E7A5 : 28 48 4C 29 9C      	db	"(HL)",	dm_bit | 28
    4859/    E7AA : 28 49 58 29 9D      	db	"(IX)",	dm_bit | 29
    4860/    E7AF : 28 49 59 29 9E      	db	"(IY)",	dm_bit | 30
    4861/    E7B4 : 28 53 50 29 A0      	db	"(SP)",	dm_bit | 32
    4862/    E7B9 :                     
    4863/    E7B9 :                     ; 3 bytes string
    4864/    E7B9 : 28 43 29 9F         	db	"(C)",	dm_bit | 31
    4865/    E7BD : 41 46 27 83         	db	"AF'",	dm_bit | 3
    4866/    E7C1 :                     
    4867/    E7C1 :                     ; 2 bytes string
    4868/    E7C1 : 41 46 82            	db	"AF",	dm_bit | 2
    4869/    E7C4 : 42 43 85            	db	"BC",	dm_bit | 5
    4870/    E7C7 : 44 45 88            	db	"DE",	dm_bit | 8
    4871/    E7CA : 48 4C 8B            	db	"HL",	dm_bit | 11
    4872/    E7CD : 49 58 8E            	db	"IX",	dm_bit | 14
    4873/    E7D0 : 49 59 8F            	db	"IY",	dm_bit | 15
    4874/    E7D3 : 53 50 90            	db	"SP",	dm_bit | 16
    4875/    E7D6 : 4E 5A 94            	db	"NZ",	dm_bit | 20
    4876/    E7D9 : 4E 43 95            	db	"NC",	dm_bit | 21
    4877/    E7DC : 50 4F 97            	db	"PO",	dm_bit | 23
    4878/    E7DF : 50 45 98            	db	"PE",	dm_bit | 24
    4879/    E7E2 :                     
    4880/    E7E2 :                     ; 1 bytes string
    4881/    E7E2 : 41 81               	db	"A",  	dm_bit | 1
    4882/    E7E4 : 42 84               	db	"B",	dm_bit | 4
    4883/    E7E6 : 43 86               	db	"C",	dm_bit | 6
    4884/    E7E8 : 44 87               	db	"D",	dm_bit | 7
    4885/    E7EA : 45 89               	db	"E",	dm_bit | 9
    4886/    E7EC : 48 8A               	db	"H",	dm_bit | 10
    4887/    E7EE : 4C 8C               	db	"L",	dm_bit | 12
    4888/    E7F0 : 49 8D               	db	"I",	dm_bit | 13
    4889/    E7F2 : 52 91               	db	"R",	dm_bit | 17
    4890/    E7F4 : 5A 92               	db	"Z",	dm_bit | 18
    4891/    E7F6 : 4D 93               	db	"M",	dm_bit | 19
    4892/    E7F8 : 50 96               	db	"P",	dm_bit | 22
    4893/    E7FA : 00                  	db	0	; delimiter
    4894/    E7FB :                     
    4895/    E7FB :                     opr_cd1:
    4896/    E7FB : 28 49 58 2B A1      	db	"(IX+",	dm_bit | 33
    4897/    E800 : 28 49 59 2B A2      	db	"(IY+",	dm_bit | 34
    4898/    E805 : 28 49 58 2D A4      	db	"(IX-",	dm_bit | 36
    4899/    E80A : 28 49 59 2D A5      	db	"(IY-",	dm_bit | 37
    4900/    E80F : 00                  	db	0	; delimiter
    4901/    E810 :                     
    4902/    E810 :                     ;----------------------------------------------
    4903/    E810 :                     ; A[<address>] : input line assemble mode
    4904/    E810 :                     ; A[.]<cr> : exit assemble mode
    4905/    E810 :                     ;----------------------------------------------
    4906/    E810 :                     line_asm:
    4907/    E810 : 23                  	inc	hl
    4908/    E811 : CD 64 F3            	call	skp_sp
    4909/    E814 : B7                  	or	a
    4910/    E815 : 28 11               	jr	z, skpa_adr
    4911/    E817 : CD F4 F4            	call	RDHEX		; get DE: address
    4912/    E81A : DA CB D0            	jp	c, ERR
    4913/    E81D : ED 53 4E FF         	ld	(asm_adr), de	; set start address
    4914/    E821 :                     
    4915/    E821 : CD 64 F3            	call	skp_sp
    4916/    E824 : B7                  	or	a
    4917/    E825 : C2 CB D0            	jp	nz, ERR
    4918/    E828 :                     	
    4919/    E828 :                     	; init work area
    4920/    E828 :                     skpa_adr:
    4921/    E828 : 2A 4E FF            	ld	hl, (asm_adr)
    4922/    E82B : 22 50 FF            	ld	(tasm_adr), hl
    4923/    E82E :                     	
    4924/    E82E :                     	; print address
    4925/    E82E :                     
    4926/    E82E :                     next_asm:
    4927/    E82E : AF                  	xor	a
    4928/    E82F : 32 52 FF            	ld	(element_cnt), a
    4929/    E832 : 32 54 FF            	ld	(opc_cd), a
    4930/    E835 : 32 55 FF            	ld	(opr1_cd), a
    4931/    E838 : 32 56 FF            	ld	(opr2_cd), a
    4932/    E83B :                     
    4933/    E83B : 2A 50 FF            	ld	hl, (tasm_adr)
    4934/    E83E : CD 03 F4            	call	HEXOUT4
    4935/    E841 : 21 F7 F9            	ld	hl, dsap
    4936/    E844 : CD FA F3            	call	STROUT
    4937/    E847 :                     
    4938/    E847 :                     ;-----------------------------
    4939/    E847 :                     ; get a line from console
    4940/    E847 :                     ;-----------------------------
    4941/    E847 : 21 6C FF            	ld	hl, ky_flg
    4942/    E84A : CB CE               	set	NO_LF>>1, (hl)
    4943/    E84C :                     
    4944/    E84C : CD 5A F4            	call	GETLIN
    4945/    E84F :                     
    4946/    E84F : E5                  	push	hl
    4947/    E850 : 21 6C FF            	ld	hl, ky_flg
    4948/    E853 : CB 8E               	res	NO_LF>>1, (hl)
    4949/    E855 : E1                  	pop	hl
    4950/    E856 :                     
    4951/    E856 : CD B4 F3            	call	recorrect
    4952/    E859 : 7E                  	ld	a, (hl)
    4953/    E85A : FE 1B               	cp	ESC
    4954/    E85C : 28 0D               	jr	z, ext_asm
    4955/    E85E : FE 2E               	cp	'.'
    4956/    E860 : 28 09               	jr	z, ext_asm
    4957/    E862 : B7                  	or	a		; NULL?
    4958/    E863 : C2 FA E8            	jp	nz, cont_asm
    4959/    E866 : CD 77 E8            	call	lf_out
    4960/    E869 : 18 C3               	jr	next_asm
    4961/    E86B :                     
    4962/    E86B :                     ext_asm:
    4963/    E86B : CD 77 E8            	call	lf_out
    4964/    E86E : 2A 50 FF            	ld	hl, (tasm_adr)
    4965/    E871 : 22 4E FF            	ld	(asm_adr), hl	; save new address
    4966/    E874 : C3 87 D0            	jp	WSTART		; exit assemble mode
    4967/    E877 :                     
    4968/    E877 :                     lf_out:
    4969/    E877 : 3E 0A               	ld	a, LF
    4970/    E879 : C3 33 FC            	jp	CONOUT
    4971/    E87C :                     
    4972/    E87C :                     asm_err:
    4973/    E87C : 21 53 E1            	ld	hl, com_errm
    4974/    E87F :                     asm_err1:
    4975/    E87F : CD 77 E8            	call	lf_out
    4976/    E882 : CD FA F3            	call	STROUT
    4977/    E885 : 21 E8 F9            	ld	hl, ERRMSG
    4978/    E888 : CD FA F3            	call	STROUT
    4979/    E88B : 18 A1               	jr	next_asm
    4980/    E88D :                     
    4981/    E88D :                     ;-------------------------------------------------
    4982/    E88D :                     ; post operation
    4983/    E88D :                     ;-------------------------------------------------
    4984/    E88D :                     cout_sp:
    4985/    E88D : 3A 54 FF            	ld	a, (opc_cd)
    4986/    E890 : FE 44               	cp	68
    4987/    E892 : 28 37               	jr	z, skp_outm
    4988/    E894 : FE 45               	cp	69
    4989/    E896 : 28 38               	jr	z, dmp_db
    4990/    E898 : FE 46               	cp	70
    4991/    E89A : 28 3F               	jr	z, dmp_dw
    4992/    E89C :                     
    4993/    E89C : 3E 20               	ld	a, ' '
    4994/    E89E : 0E 26               	ld	c, BUFLEN-2	; clear
    4995/    E8A0 : 21 77 FF            	ld	hl, line_buf	; disassemble string buffer
    4996/    E8A3 :                     cout_sp1:
    4997/    E8A3 : 77                  	ld	(hl), a
    4998/    E8A4 : 23                  	inc	hl
    4999/    E8A5 : 0D                  	dec	c
    5000/    E8A6 : 20 FB               	jr	nz, cout_sp1
    5001/    E8A8 : 3E 0D               	ld	a, CR
    5002/    E8AA : 77                  	ld	(hl), a
    5003/    E8AB : 23                  	inc	hl
    5004/    E8AC : AF                  	xor	a
    5005/    E8AD : 77                  	ld	(hl), a		; set delimitor
    5006/    E8AE : CD FA F3            	call	STROUT
    5007/    E8B1 :                     
    5008/    E8B1 : 2A 50 FF            	ld	hl, (tasm_adr)	; disassemble address
    5009/    E8B4 : 11 77 FF            	ld	de, line_buf	; disassemble string buffer
    5010/    E8B7 : D5                  	push	de
    5011/    E8B8 : CD 04 D7            	call	get_disasm_st
    5012/    E8BB : E1                  	pop	hl
    5013/    E8BC : CD FA F3            	call	STROUT		; cousole out result inline assemble
    5014/    E8BF :                     cout_sp2:
    5015/    E8BF : 2A 50 FF            	ld	hl, (tasm_adr)	; disassemble address
    5016/    E8C2 : CD F2 E8            	call	setbytec
    5017/    E8C5 : 22 50 FF            	ld	(tasm_adr), hl	; next address
    5018/    E8C8 : C3 2E E8            	jp	next_asm
    5019/    E8CB :                     
    5020/    E8CB :                     skp_outm:
    5021/    E8CB : CD 77 E8            	call	lf_out
    5022/    E8CE : 18 EF               	jr	cout_sp2
    5023/    E8D0 :                     
    5024/    E8D0 :                     dmp_db:
    5025/    E8D0 : CD E8 E8            	call	setdsadr
    5026/    E8D3 : CD F2 E8            	call	setbytec
    5027/    E8D6 : 22 02 FF            	ld	(deaddr), hl
    5028/    E8D9 : 18 08               	jr	prtdmp
    5029/    E8DB :                     
    5030/    E8DB :                     dmp_dw:
    5031/    E8DB : CD E8 E8            	call	setdsadr
    5032/    E8DE : 23                  	inc	hl
    5033/    E8DF : 23                  	inc	hl
    5034/    E8E0 : 22 02 FF            	ld	(deaddr), hl
    5035/    E8E3 :                     prtdmp:	
    5036/    E8E3 : CD C8 D5            	call	dpm
    5037/    E8E6 : 18 D7               	jr	cout_sp2
    5038/    E8E8 :                     
    5039/    E8E8 :                     setdsadr:
    5040/    E8E8 : CD 77 E8            	call	lf_out
    5041/    E8EB : 2A 50 FF            	ld	hl, (tasm_adr)
    5042/    E8EE : 22 00 FF            	ld	(dsaddr), hl
    5043/    E8F1 : C9                  	ret
    5044/    E8F2 :                     
    5045/    E8F2 :                     setbytec:
    5046/    E8F2 : 3A 53 FF            	ld	a, (byte_count)
    5047/    E8F5 : 4F                  	ld	c, a
    5048/    E8F6 : AF                  	xor	a
    5049/    E8F7 : 47                  	ld	b, a
    5050/    E8F8 : 09                  	add	hl, bc
    5051/    E8F9 : C9                  	ret
    5052/    E8FA :                     
    5053/    E8FA :                     ;----------------------------
    5054/    E8FA :                     ; analize input data
    5055/    E8FA :                     ;----------------------------
    5056/    E8FA :                     cont_asm:
    5057/    E8FA : CD 3D F2            	call	analize_input
    5058/    E8FD : DA 7C E8            	jp	c, asm_err		;error
    5059/    E900 :                     
    5060/    E900 :                     ; make machine code
    5061/    E900 :                     
    5062/    E900 : 3A 52 FF            	ld	a, (element_cnt)
    5063/    E903 : FE 01               	cp	1
    5064/    E905 : CA D5 EE            	jp	z, mk_e1
    5065/    E908 : FE 02               	cp	2
    5066/    E90A : CA 5F EF            	jp	z, mk_e2
    5067/    E90D :                     
    5068/    E90D :                     ;333333333333333333333333333333333333333
    5069/    E90D :                     ;
    5070/    E90D :                     ; make machine code,
    5071/    E90D :                     ; element_cnt = 3 (ex. LD SP, HL)
    5072/    E90D :                     ;
    5073/    E90D :                     ;333333333333333333333333333333333333333
    5074/    E90D :                     
    5075/    E90D : =0DH                el3_um	equ	el3_stbe - el3_stb
    5076/    E90D :                     
    5077/    E90D : 3A 54 FF            mk_e3:	ld	a, (opc_cd)
    5078/    E910 : 01 0D 00            	ld	bc, el3_um
    5079/    E913 : 21 25 E9            	ld	hl, el3_stb
    5080/    E916 : ED B1               	cpir
    5081/    E918 : C2 7C E8            	jp	nz, asm_err
    5082/    E91B :                     	
    5083/    E91B : 21 32 E9            	ld	hl, el3_jtb
    5084/    E91E :                     
    5085/    E91E :                     jp_each:
    5086/    E91E : 09                  	add	hl, bc		; offset : BC = BC * 2
    5087/    E91F : 09                  	add	hl, bc		; HL = ent_el2 + offset
    5088/    E920 : 4E                  	ld	c, (hl)
    5089/    E921 : 23                  	inc	hl
    5090/    E922 : 46                  	ld	b, (hl)
    5091/    E923 : C5                  	push	bc
    5092/    E924 : C9                  	ret
    5093/    E925 :                     
    5094/    E925 : 01                  el3_stb:	db	1			; normal, DD, FD, ED
    5095/    E926 : 06 15               		db	6, 21 			; normal, DD, FD
    5096/    E928 : 16 19               		db	22, 25			; normal, DD, FD, ED
    5097/    E92A : 2B                  		db	43 			; normal
    5098/    E92B : 37 3C               		db	55, 60			; normal, ED
    5099/    E92D : 2A 2D               		db	42, 45			; normal
    5100/    E92F : 22 24 23            		db	34, 36, 35 		; CB, DD, FD
    5101/    E932 :                     el3_stbe:	
    5102/    E932 :                     
    5103/    E932 : 5C E9               el3_jtb:	dw	el3_35
    5104/    E934 : 7A E9               		dw	el3_36
    5105/    E936 : 98 E9               		dw	el3_34
    5106/    E938 : 19 EA               		dw	el3_45
    5107/    E93A : 26 EA               		dw	el3_42
    5108/    E93C : 46 EA               		dw	el3_60
    5109/    E93E : 4F EA               		dw	el3_55
    5110/    E940 : 8F EA               		dw	el3_43
    5111/    E942 : C4 EA               		dw	el3_25
    5112/    E944 : CC EA               		dw	el3_22
    5113/    E946 : 45 EB               		dw	el3_21
    5114/    E948 : C7 EB               		dw	el3_6
    5115/    E94A : 51 EC               		dw	el3_1
    5116/    E94C :                     
    5117/    E94C :                     
    5118/    E94C :                     ;
    5119/    E94C :                     ; SET section
    5120/    E94C :                     ;
    5121/    E94C :                     ; r_hl_nn:	db	1, 4, 6, 7, 9, 10, 12, 28
    5122/    E94C :                     
    5123/    E94C : C0 C8 D0 D8 E0 E8   set_mcb:	db	0C0h, 0C8h, 0D0h, 0D8h, 0E0h, 0E8h, 0F0h, 0F8h
             E952 : F0 F8             
    5124/    E954 : C6 CE D6 DE E6 EE   set_xyt:	db	0C6h, 0CEh, 0D6h, 0DEh, 0E6h, 0EEh, 0F6h, 0FEh
             E95A : F6 FE             
    5125/    E95C :                     
    5126/    E95C :                     el3_35: ; SET  ( CB, DD, FD )
    5127/    E95C :                     
    5128/    E95C : 21 4C E9            	ld	hl, set_mcb
    5129/    E95F : 22 5F FF            	ld	(cb_mcw), hl
    5130/    E962 : 21 54 E9            	ld	hl, set_xyt
    5131/    E965 : 22 61 FF            	ld	(cb_xyw), hl
    5132/    E968 : 18 3A               	jr	bit_res_set
    5133/    E96A :                     
    5134/    E96A :                     ;
    5135/    E96A :                     ; RES section
    5136/    E96A :                     ;
    5137/    E96A :                     ; r_hl_nn:	db	1, 4, 6, 7, 9, 10, 12, 28
    5138/    E96A :                     
    5139/    E96A : 80 88 90 98 A0 A8   res_mcb:	db	80h, 88h, 90h, 98h, 0A0h, 0A8h, 0B0h, 0B8h
             E970 : B0 B8             
    5140/    E972 : 86 8E 96 9E A6 AE   res_xyt:	db	86h, 8Eh, 96h, 9Eh, 0A6h, 0AEh, 0B6h, 0BEh
             E978 : B6 BE             
    5141/    E97A :                     
    5142/    E97A :                     el3_36: ; RES  ( CB, DD, FD )
    5143/    E97A :                     
    5144/    E97A : 21 6A E9            	ld	hl, res_mcb
    5145/    E97D : 22 5F FF            	ld	(cb_mcw), hl
    5146/    E980 : 21 72 E9            	ld	hl, res_xyt
    5147/    E983 : 22 61 FF            	ld	(cb_xyw), hl
    5148/    E986 : 18 1C               	jr	bit_res_set
    5149/    E988 :                     
    5150/    E988 :                     ;
    5151/    E988 :                     ; BIT section
    5152/    E988 :                     ;
    5153/    E988 :                     ; r_hl_nn:	db	1, 4, 6, 7, 9, 10, 12, 28
    5154/    E988 :                     
    5155/    E988 : =8H                 bit_mcbn	equ	bit_mcbe - bit_mcb
    5156/    E988 : 40 48 50 58 60 68   bit_mcb:	db	40h, 48h, 50h, 58h, 60h, 68h, 70h, 78h
             E98E : 70 78             
    5157/    E990 :                     bit_mcbe:
    5158/    E990 : 46 4E 56 5E 66 6E   bit_xyt:	db	46h, 4Eh, 56h, 5Eh, 66h, 6Eh, 76h, 7Eh
             E996 : 76 7E             
    5159/    E998 :                     
    5160/    E998 :                     
    5161/    E998 :                     el3_34: ; BIT  ( CB, DD, FD )
    5162/    E998 :                     
    5163/    E998 : 21 88 E9            	ld	hl, bit_mcb
    5164/    E99B : 22 5F FF            	ld	(cb_mcw), hl
    5165/    E99E : 21 90 E9            	ld	hl, bit_xyt
    5166/    E9A1 : 22 61 FF            	ld	(cb_xyw), hl
    5167/    E9A4 :                     
    5168/    E9A4 :                     bit_res_set:
    5169/    E9A4 : 3A 55 FF            	ld	a, (opr1_cd)
    5170/    E9A7 : FE 19               	cp	25
    5171/    E9A9 : C2 7C E8            	jp	nz, asm_err
    5172/    E9AC :                     
    5173/    E9AC : 2A 57 FF            	ld	hl, (opr_num25)
    5174/    E9AF : 7C                  	ld	a, h
    5175/    E9B0 : B7                  	or	a
    5176/    E9B1 : C2 7C E8            	jp	nz, asm_err
    5177/    E9B4 : 7D                  	ld	a, l
    5178/    E9B5 : FE 08               	cp	8
    5179/    E9B7 : D2 7C E8            	jp	nc, asm_err
    5180/    E9BA :                     
    5181/    E9BA :                     	; HL : 0 - 7
    5182/    E9BA :                     
    5183/    E9BA : 3A 56 FF            	ld	a, (opr2_cd)
    5184/    E9BD : FE 21               	cp	33
    5185/    E9BF : 28 2C               	jr	z, bit_ixp
    5186/    E9C1 : FE 24               	cp	36
    5187/    E9C3 : 28 3A               	jr	z, bit_ixm
    5188/    E9C5 : FE 22               	cp	34
    5189/    E9C7 : 28 3B               	jr	z, bit_iyp
    5190/    E9C9 : FE 25               	cp	37
    5191/    E9CB : 28 3F               	jr	z, bit_iym
    5192/    E9CD :                     ;
    5193/    E9CD :                     ; CB : bit n, [r | (hl)]
    5194/    E9CD :                     ;
    5195/    E9CD : ED 4B 5F FF         	ld	bc, (cb_mcw)
    5196/    E9D1 : 09                  	add	hl, bc
    5197/    E9D2 : 56                  	ld	d, (hl)		; get MC base
    5198/    E9D3 :                     
    5199/    E9D3 : 3A 56 FF            	ld	a, (opr2_cd)
    5200/    E9D6 : 21 24 EC            	ld	hl, r_hl_nn
    5201/    E9D9 : 01 08 00            	ld	bc, bit_mcbn
    5202/    E9DC : ED B1               	cpir
    5203/    E9DE : C2 7C E8            	jp	nz, asm_err
    5204/    E9E1 :                     
    5205/    E9E1 : 79                  	ld	a, c
    5206/    E9E2 : FE 07               	cp	7
    5207/    E9E4 : 28 03               	jr	z, el3_341
    5208/    E9E6 :                     
    5209/    E9E6 : 3E 06               	ld	a, 6
    5210/    E9E8 : 91                  	sub	c
    5211/    E9E9 :                     el3_341:
    5212/    E9E9 : 82                  	add	a, d		; make 2nd MC
    5213/    E9EA : C3 E9 F1            	jp	el2_130
    5214/    E9ED :                     
    5215/    E9ED :                     	; HL : 0 - 7
    5216/    E9ED :                     
    5217/    E9ED :                     bit_ixp:
    5218/    E9ED : 3A 5E FF            	ld	a, (opr_num33)
    5219/    E9F0 :                     bit_ixp1:
    5220/    E9F0 : 5F                  	ld	e, a
    5221/    E9F1 : 16 DD               	ld	d, 0DDh
    5222/    E9F3 :                     
    5223/    E9F3 :                     ; adjust I/F
    5224/    E9F3 :                     ; d: 1st MC, a: 2nd MC, c: 3rd MC, e: 4th MC
    5225/    E9F3 :                     
    5226/    E9F3 :                     el3_342:
    5227/    E9F3 : ED 4B 61 FF         	ld	bc, (cb_xyw)
    5228/    E9F7 : 09                  	add	hl, bc
    5229/    E9F8 : 4B                  	ld	c, e		; adjust I/F
    5230/    E9F9 : 5E                  	ld	e, (hl)		; 4th MC
    5231/    E9FA : 3E CB               	ld	a, 0CBh
    5232/    E9FC : C3 0C F2            	jp	mc_end41	; save 4byte MC
    5233/    E9FF :                     
    5234/    E9FF :                     bit_ixm:
    5235/    E9FF : 3A 5D FF            	ld	a, (opr_num36)
    5236/    EA02 : 18 EC               	jr	bit_ixp1
    5237/    EA04 :                     
    5238/    EA04 :                     
    5239/    EA04 :                     bit_iyp:
    5240/    EA04 : 3A 5C FF            	ld	a, (opr_num34)
    5241/    EA07 :                     bit_iyp1:
    5242/    EA07 : 5F                  	ld	e, a
    5243/    EA08 : 16 FD               	ld	d, 0FDh
    5244/    EA0A : 18 E7               	jr	el3_342
    5245/    EA0C :                     
    5246/    EA0C :                     bit_iym:
    5247/    EA0C : 3A 5B FF            	ld	a, (opr_num37)
    5248/    EA0F : 18 F6               	jr	bit_iyp1
    5249/    EA11 :                     
    5250/    EA11 :                     ;
    5251/    EA11 :                     ; CALL section
    5252/    EA11 :                     ; ret_no:	db	6, 18, 19, 20, 21, 22, 23, 24
    5253/    EA11 :                     ;
    5254/    EA11 : EC E4 F4 D4 C4 FC   call_mc1t:	db	0ECh, 0E4h, 0F4h, 0D4h, 0C4h, 0FCh, 0CCh, 0DCh
             EA17 : CC DC             
    5255/    EA19 :                     
    5256/    EA19 :                     el3_45: ; CALL ( normal )
    5257/    EA19 :                     
    5258/    EA19 : 11 11 EA            	ld	de, call_mc1t
    5259/    EA1C : 18 0B               	jr	el3_421
    5260/    EA1E :                     ;
    5261/    EA1E :                     ; JP section
    5262/    EA1E :                     ; ret_no:	db	6, 18, 19, 20, 21, 22, 23, 24
    5263/    EA1E :                     ;
    5264/    EA1E : =8H                 jp_mc1tm	equ	jp_mc1te - jp_mc1t
    5265/    EA1E : EA E2 F2 D2 C2 FA   jp_mc1t:	db	0EAh, 0E2h, 0F2h, 0D2h, 0C2h, 0FAh, 0CAh, 0DAh
             EA24 : CA DA             
    5266/    EA26 :                     jp_mc1te:
    5267/    EA26 :                     
    5268/    EA26 :                     el3_42: ; JP   ( normal )
    5269/    EA26 :                     
    5270/    EA26 : 11 1E EA            	ld	de, jp_mc1t
    5271/    EA29 :                     
    5272/    EA29 :                     el3_421:
    5273/    EA29 : 21 5A F0            	ld	hl, ret_no
    5274/    EA2C : 01 08 00            	ld	bc, jp_mc1tm
    5275/    EA2F : 3A 55 FF            	ld	a, (opr1_cd)
    5276/    EA32 : ED B1               	cpir
    5277/    EA34 : C2 7C E8            	jp	nz, asm_err
    5278/    EA37 :                     
    5279/    EA37 : 3A 56 FF            	ld	a, (opr2_cd)
    5280/    EA3A : FE 19               	cp	25
    5281/    EA3C : C2 7C E8            	jp	nz, asm_err
    5282/    EA3F :                     
    5283/    EA3F : 62                  	ld	h, d		; DE : MC target table
    5284/    EA40 : 6B                  	ld	l, e		; DE : MC target table
    5285/    EA41 : 09                  	add	hl, bc
    5286/    EA42 : 7E                  	ld	a, (hl)		; get 1st MC
    5287/    EA43 : C3 DD EF            	jp	el2_451
    5288/    EA46 :                     
    5289/    EA46 :                     ;
    5290/    EA46 :                     ; OUT section
    5291/    EA46 :                     ;
    5292/    EA46 : =6H                 in_selm		equ	ld_e2_tbl1 - in_selt
    5293/    EA46 :                     
    5294/    EA46 :                     el3_60: ; OUT  ( normal, ED )
    5295/    EA46 :                     
    5296/    EA46 : 11 D3 41            	ld	de, 41D3H
    5297/    EA49 : ED 4B 55 FF         	ld	bc, (opr1_cd)	; c = (opr1_cd), b = (opr2_cd)
    5298/    EA4D : 18 0B               	jr	el3_550
    5299/    EA4F :                     
    5300/    EA4F :                     ;
    5301/    EA4F :                     ; IN section
    5302/    EA4F :                     ;
    5303/    EA4F :                     el3_55: ; IN   ( normal, ED )
    5304/    EA4F :                     
    5305/    EA4F : 11 DB 40            	ld	de, 40DBH
    5306/    EA52 : 3A 55 FF            	ld	a, (opr1_cd)
    5307/    EA55 : 47                  	ld	b, a
    5308/    EA56 : 3A 56 FF            	ld	a, (opr2_cd)
    5309/    EA59 : 4F                  	ld	c, a
    5310/    EA5A :                     
    5311/    EA5A :                     el3_550:
    5312/    EA5A : 79                  	ld	a, c
    5313/    EA5B : FE 23               	cp	35
    5314/    EA5D : 28 1F               	jr	z, in_a_nn
    5315/    EA5F : FE 1F               	cp	31
    5316/    EA61 : C2 7C E8            	jp	nz, asm_err
    5317/    EA64 :                     
    5318/    EA64 : 78                  	ld	a, b
    5319/    EA65 : FE 01               	cp	1
    5320/    EA67 : 28 0F               	jr	z, el3_551	; passing search
    5321/    EA69 :                     	
    5322/    EA69 : 21 0E EC            	ld	hl, in_selt
    5323/    EA6C : 01 06 00            	ld	bc, in_selm
    5324/    EA6F : CD B3 EA            	call	mkmc_sh
    5325/    EA72 : DA 7C E8            	jp	c, asm_err
    5326/    EA75 : 7A                  	ld	a, d
    5327/    EA76 : 18 03               	jr	el3_552
    5328/    EA78 :                     	
    5329/    EA78 :                     el3_551:
    5330/    EA78 : 7A                  	ld	a, d
    5331/    EA79 : C6 38               	add	a, 38h		; get 2nd MC
    5332/    EA7B :                     el3_552:
    5333/    EA7B : C3 37 F2            	jp	el2_5411
    5334/    EA7E :                     
    5335/    EA7E :                     in_a_nn:
    5336/    EA7E : 2A 59 FF            	ld	hl, (opr_num35)
    5337/    EA81 : 7C                  	ld	a, h
    5338/    EA82 : B7                  	or	a
    5339/    EA83 : C2 7C E8            	jp	nz, asm_err
    5340/    EA86 : 7D                  	ld	a, l
    5341/    EA87 : F5                  	push	af		; adjust I/F
    5342/    EA88 : 7B                  	ld	a, e		; 1st MC
    5343/    EA89 : 18 25               	jr	el3_431		; save 2byte MC (el2_441)
    5344/    EA8B :                     	
    5345/    EA8B :                     ;
    5346/    EA8B :                     ; JR section
    5347/    EA8B :                     ;
    5348/    EA8B : 14 12 15 06         jr_cct:	db	20, 18, 21, 6
    5349/    EA8F :                     
    5350/    EA8F :                     el3_43: ; JR   ( normal )
    5351/    EA8F :                     
    5352/    EA8F : 21 8B EA            	ld	hl, jr_cct
    5353/    EA92 : 01 04 00            	ld	bc, 4
    5354/    EA95 : 16 20               	ld	d, 20h		; base MC
    5355/    EA97 : 3A 55 FF            	ld	a, (opr1_cd)
    5356/    EA9A : CD B3 EA            	call	mkmc_sh
    5357/    EA9D : DA 7C E8            	jp	c, asm_err
    5358/    EAA0 :                     
    5359/    EAA0 : 3A 56 FF            	ld	a, (opr2_cd)
    5360/    EAA3 : FE 19               	cp	25		; number?
    5361/    EAA5 : C2 7C E8            	jp	nz, asm_err
    5362/    EAA8 :                     
    5363/    EAA8 : CD 86 F3            	call	calc_reladr
    5364/    EAAB : DA 7C E8            	jp	c, asm_err
    5365/    EAAE :                     	
    5366/    EAAE : F5                  	push	af		; adjust I/F
    5367/    EAAF : 7A                  	ld	a, d		; adjust I/F
    5368/    EAB0 :                     el3_431:
    5369/    EAB0 : C3 FF EF            	jp	el2_441		; save 2byte MC
    5370/    EAB3 :                     ;
    5371/    EAB3 :                     ; hl : search table
    5372/    EAB3 :                     ; bc : loop counter
    5373/    EAB3 :                     ; d  : base MC 
    5374/    EAB3 :                     ;
    5375/    EAB3 :                     ; output:
    5376/    EAB3 :                     ;	  CF=1 : error
    5377/    EAB3 :                     ;	  CF=0 : D = MC
    5378/    EAB3 :                     mkmc_sh:
    5379/    EAB3 : ED A1               	cpi
    5380/    EAB5 : 28 0C               	jr	z, mkmc_shed
    5381/    EAB7 :                     	
    5382/    EAB7 : 5F                  	ld	e, a	; save a
    5383/    EAB8 : 7A                  	ld	a, d
    5384/    EAB9 : C6 08               	add	a, 8
    5385/    EABB : 57                  	ld	d, a
    5386/    EABC :                     
    5387/    EABC : 79                  	ld	a, c
    5388/    EABD : B0                  	or	b
    5389/    EABE : 7B                  	ld	a, e	; restore a
    5390/    EABF : 20 F2               	jr	nz, mkmc_sh
    5391/    EAC1 : 37                  	scf
    5392/    EAC2 : C9                  	ret
    5393/    EAC3 :                     
    5394/    EAC3 :                     mkmc_shed:
    5395/    EAC3 : C9                  	ret
    5396/    EAC4 :                     
    5397/    EAC4 :                     ;
    5398/    EAC4 :                     ; ADC section
    5399/    EAC4 :                     ;
    5400/    EAC4 :                     
    5401/    EAC4 :                     el3_25: ; SBC  ( normal, DD, FD, ED )
    5402/    EAC4 :                     
    5403/    EAC4 : 11 9F 42            	ld	de, 429fh
    5404/    EAC7 : 3E DE               	ld	a, 0DEh
    5405/    EAC9 : 08                  	ex	af, af'
    5406/    EACA : 18 06               	jr	el3_221
    5407/    EACC :                     ;
    5408/    EACC :                     ; ADC section
    5409/    EACC :                     ;
    5410/    EACC :                     ; defined other section
    5411/    EACC :                     ; r_hl_nn:	db	1, 4, 6, 7, 9, 10, 12, 28
    5412/    EACC :                     ; ld_rr_:	db	25
    5413/    EACC :                     ; ex_sr_:	db	33, 36, 34, 37
    5414/    EACC :                     ; r_hl_nne:
    5415/    EACC :                     
    5416/    EACC : =9H                 adc_MC	equ	ex_sr_ - r_hl_nn
    5417/    EACC : =4H                 adc_3MC	equ	r_hl_nne - ex_sr_
    5418/    EACC :                     
    5419/    EACC :                     el3_22: ; ADC  ( normal, DD, FD, ED )
    5420/    EACC :                     
    5421/    EACC : 11 8F 4A            	ld	de, 4a8fh
    5422/    EACF : 3E CE               	ld	a, 0CEh
    5423/    EAD1 : 08                  	ex	af, af'
    5424/    EAD2 :                     
    5425/    EAD2 :                     el3_221:
    5426/    EAD2 : 3A 55 FF            	ld	a, (opr1_cd)
    5427/    EAD5 : FE 01               	cp	1		; A?
    5428/    EAD7 : 28 2A               	jr	z, adc_a_
    5429/    EAD9 : FE 0B               	cp	11		; HL?
    5430/    EADB : C2 7C E8            	jp	nz, asm_err
    5431/    EADE :                     
    5432/    EADE :                     ; adc hl,[ BC | DE | HL | SP ]
    5433/    EADE :                     
    5434/    EADE : 3A 56 FF            	ld	a, (opr2_cd)
    5435/    EAE1 : FE 05               	cp	5
    5436/    EAE3 : 28 19               	jr	z, adc_hl_bc
    5437/    EAE5 : FE 08               	cp	8
    5438/    EAE7 : 28 11               	jr	z, adc_hl_de
    5439/    EAE9 : FE 0B               	cp	11
    5440/    EAEB : 28 09               	jr	z, adc_hl_hl
    5441/    EAED : FE 10               	cp	16
    5442/    EAEF : C2 7C E8            	jp	nz, asm_err
    5443/    EAF2 :                     
    5444/    EAF2 :                     adc_hl_sp:
    5445/    EAF2 : 3E 30               	ld	a, 30h
    5446/    EAF4 : 18 09               	jr	adc_hl_
    5447/    EAF6 :                     adc_hl_hl:
    5448/    EAF6 : 3E 20               	ld	a, 20h
    5449/    EAF8 : 18 05               	jr	adc_hl_
    5450/    EAFA :                     adc_hl_de:
    5451/    EAFA : 3E 10               	ld	a, 10h
    5452/    EAFC : 18 01               	jr	adc_hl_
    5453/    EAFE :                     adc_hl_bc:
    5454/    EAFE : AF                  	xor	a
    5455/    EAFF :                     adc_hl_:
    5456/    EAFF : 82                  	add	a, d		; make 2nd MC
    5457/    EB00 :                     
    5458/    EB00 : C3 37 F2            	jp	el2_5411
    5459/    EB03 :                     
    5460/    EB03 :                     adc_a_:
    5461/    EB03 : 3A 56 FF            	ld	a, (opr2_cd)
    5462/    EB06 : 21 24 EC            	ld	hl, r_hl_nn
    5463/    EB09 : 01 09 00            	ld	bc, adc_MC
    5464/    EB0C : ED B1               	cpir
    5465/    EB0E : 20 18               	jr	nz, chk_adc3mc
    5466/    EB10 :                     
    5467/    EB10 : 79                  	ld	a, c
    5468/    EB11 : FE 08               	cp	8
    5469/    EB13 : 28 10               	jr	z, adc_a_a
    5470/    EB15 : B7                  	or	a
    5471/    EB16 : 28 05               	jr	z, adc_a_n
    5472/    EB18 : 7B                  	ld	a, e
    5473/    EB19 : 91                  	sub	c		; make MC 1
    5474/    EB1A :                     adc_a_x:
    5475/    EB1A : C3 E8 EE            	jp	st_mc11
    5476/    EB1D :                     	
    5477/    EB1D :                     adc_a_n:
    5478/    EB1D : 2A 57 FF            	ld	hl, (opr_num25)
    5479/    EB20 : 08                  	ex	af, af'		; get 1st MC
    5480/    EB21 : 57                  	ld	d, a		; adjust I/F
    5481/    EB22 : C3 E1 EC            	jp	ld_r251
    5482/    EB25 :                     
    5483/    EB25 :                     adc_a_a:
    5484/    EB25 :                     ;	inc	e
    5485/    EB25 : 7B                  	ld	a, e
    5486/    EB26 : 18 F2               	jr	adc_a_x
    5487/    EB28 :                     
    5488/    EB28 :                     chk_adc3mc:
    5489/    EB28 : 21 2D EC            	ld	hl, ex_sr_
    5490/    EB2B : 01 04 00            	ld	bc, adc_3MC
    5491/    EB2E : ED B1               	cpir
    5492/    EB30 : C2 7C E8            	jp	nz, asm_err
    5493/    EB33 :                     
    5494/    EB33 : 21 5B FF            	ld	hl, opr_num37
    5495/    EB36 : 09                  	add	hl, bc
    5496/    EB37 : 56                  	ld	d, (hl)		; 3rd MC
    5497/    EB38 :                     
    5498/    EB38 : 79                  	ld	a, c
    5499/    EB39 : 0E FD               	ld	c, 0FDH		; 1st MC
    5500/    EB3B : FE 02               	cp	2
    5501/    EB3D : 38 02               	jr	c, adc_fd
    5502/    EB3F :                     
    5503/    EB3F : 0E DD               	ld	c, 0DDH		; 1st MC
    5504/    EB41 :                     
    5505/    EB41 :                     adc_fd:
    5506/    EB41 : 1D                  	dec	e		; get 2nd MC
    5507/    EB42 : C3 24 ED            	jp	ld_bc_n42	; save 3MC
    5508/    EB45 :                     ;
    5509/    EB45 :                     ; ADD section
    5510/    EB45 :                     ;
    5511/    EB45 :                     el3_21: ; ADD  ( normal, DD, FD )
    5512/    EB45 :                     
    5513/    EB45 : 11 87 09            	ld	de, 0987h
    5514/    EB48 : 3E C6               	ld	a, 0C6h
    5515/    EB4A : 08                  	ex	af, af'
    5516/    EB4B :                     
    5517/    EB4B : 3A 56 FF            	ld	a, (opr2_cd)
    5518/    EB4E : 47                  	ld	b, a
    5519/    EB4F : 3A 55 FF            	ld	a, (opr1_cd)
    5520/    EB52 : FE 01               	cp	1
    5521/    EB54 : 28 AD               	jr	z, adc_a_
    5522/    EB56 : FE 0B               	cp	11
    5523/    EB58 : 28 47               	jr	z, add_hl_
    5524/    EB5A : FE 0E               	cp	14
    5525/    EB5C : 28 09               	jr	z, add_ix_
    5526/    EB5E : FE 0F               	cp	15
    5527/    EB60 : C2 7C E8            	jp	nz, asm_err
    5528/    EB63 :                     ;;
    5529/    EB63 :                     ;;
    5530/    EB63 :                     add_iy_:
    5531/    EB63 : 0E FD               	ld	c, 0FDh
    5532/    EB65 : 18 02               	jr	el3_211
    5533/    EB67 :                     ;;
    5534/    EB67 :                     ;;
    5535/    EB67 :                     add_ix_:
    5536/    EB67 : 0E DD               	ld	c, 0DDh
    5537/    EB69 :                     el3_211:
    5538/    EB69 : 78                  	ld	a, b
    5539/    EB6A : FE 05               	cp	5
    5540/    EB6C : 28 19               	jr	z, add_xy_bc
    5541/    EB6E : FE 08               	cp	8
    5542/    EB70 : 28 19               	jr	z, add_xy_de
    5543/    EB72 : FE 0E               	cp	14
    5544/    EB74 : 28 19               	jr	z, add_ix_ix
    5545/    EB76 : FE 0F               	cp	15
    5546/    EB78 : CA 99 EB            	jp	z, add_iy_iy
    5547/    EB7B : FE 10               	cp	16
    5548/    EB7D : C2 7C E8            	jp	nz, asm_err
    5549/    EB80 :                     add_xy_sp:
    5550/    EB80 : 3E 39               	ld	a, 39h
    5551/    EB82 :                     el3_212:
    5552/    EB82 : F5                  	push	af		; adjust I/F
    5553/    EB83 : 79                  	ld	a, c
    5554/    EB84 : C3 FF EF            	jp	el2_441
    5555/    EB87 :                     
    5556/    EB87 :                     add_xy_bc:
    5557/    EB87 : 3E 09               	ld	a, 9h
    5558/    EB89 : 18 F7               	jr	el3_212
    5559/    EB8B :                     add_xy_de:
    5560/    EB8B : 3E 19               	ld	a, 19h
    5561/    EB8D : 18 F3               	jr	el3_212
    5562/    EB8F :                     add_ix_ix:
    5563/    EB8F : 79                  	ld	a, c
    5564/    EB90 : FE DD               	cp	0ddh
    5565/    EB92 : C2 7C E8            	jp	nz, asm_err
    5566/    EB95 :                     add_xy_xy:
    5567/    EB95 : 3E 29               	ld	a, 29h
    5568/    EB97 : 18 E9               	jr	el3_212
    5569/    EB99 :                     add_iy_iy:
    5570/    EB99 : 79                  	ld	a, c
    5571/    EB9A : FE FD               	cp	0fdh
    5572/    EB9C : C2 7C E8            	jp	nz, asm_err
    5573/    EB9F : 18 F4               	jr	add_xy_xy
    5574/    EBA1 :                     
    5575/    EBA1 :                     ;;
    5576/    EBA1 :                     ;;
    5577/    EBA1 :                     add_hl_:
    5578/    EBA1 : 78                  	ld	a, b
    5579/    EBA2 : FE 05               	cp	5
    5580/    EBA4 : 28 12               	jr	z, add_hl_bc
    5581/    EBA6 : FE 08               	cp	8
    5582/    EBA8 : 28 13               	jr	z, add_hl_de
    5583/    EBAA : FE 0B               	cp	11
    5584/    EBAC : 28 14               	jr	z, add_hl_hl
    5585/    EBAE : FE 10               	cp	16
    5586/    EBB0 : C2 7C E8            	jp	nz, asm_err
    5587/    EBB3 :                     add_hl_sp:
    5588/    EBB3 : 3E 39               	ld	a, 39h
    5589/    EBB5 : C3 1A EB            	jp	adc_a_x
    5590/    EBB8 :                     add_hl_bc:
    5591/    EBB8 : 3E 09               	ld	a, 09h
    5592/    EBBA : C3 1A EB            	jp	adc_a_x
    5593/    EBBD :                     add_hl_de:
    5594/    EBBD : 3E 19               	ld	a, 19h
    5595/    EBBF : C3 1A EB            	jp	adc_a_x
    5596/    EBC2 :                     add_hl_hl:
    5597/    EBC2 : 3E 29               	ld	a, 29h
    5598/    EBC4 : C3 1A EB            	jp	adc_a_x
    5599/    EBC7 :                     
    5600/    EBC7 :                     ;
    5601/    EBC7 :                     ; EX section
    5602/    EBC7 :                     ;
    5603/    EBC7 :                     
    5604/    EBC7 :                     el3_6:  ; EX   ( normal, DD, FD )
    5605/    EBC7 :                     
    5606/    EBC7 : 3A 56 FF            	ld	a, (opr2_cd)
    5607/    EBCA : 47                  	ld	b, a
    5608/    EBCB : 3A 55 FF            	ld	a, (opr1_cd)
    5609/    EBCE : FE 02               	cp	2
    5610/    EBD0 : 28 26               	jr	z, ex_af_
    5611/    EBD2 : FE 08               	cp	8
    5612/    EBD4 : 28 2C               	jr	z, ex_de_
    5613/    EBD6 : FE 20               	cp	32
    5614/    EBD8 : C2 7C E8            	jp	nz, asm_err
    5615/    EBDB :                     
    5616/    EBDB :                     ; ex (sp),
    5617/    EBDB : 78                  	ld	a, b
    5618/    EBDC : 1E E3               	ld	e, 0E3h
    5619/    EBDE :                     
    5620/    EBDE : FE 0B               	cp	11		; hl
    5621/    EBE0 : 28 13               	jr	z, ex_sp_hl
    5622/    EBE2 : FE 0E               	cp	14
    5623/    EBE4 : 16 DD               	ld	d, 0ddh
    5624/    EBE6 : 28 07               	jr	z, ex_sp_ix
    5625/    EBE8 : FE 0F               	cp	15
    5626/    EBEA : C2 7C E8            	jp	nz, asm_err
    5627/    EBED : 16 FD               	ld	d, 0fdh
    5628/    EBEF :                     ex_sp_ix:
    5629/    EBEF : 7B                  	ld	a, e
    5630/    EBF0 : F5                  	push	af		; adjust I/F
    5631/    EBF1 : 7A                  	ld	a, d
    5632/    EBF2 : C3 FF EF            	jp	el2_441
    5633/    EBF5 :                     
    5634/    EBF5 :                     ex_sp_hl:
    5635/    EBF5 : 7B                  	ld	a, e
    5636/    EBF6 : 18 12               	jr	el3_61
    5637/    EBF8 :                     
    5638/    EBF8 :                     ex_af_:
    5639/    EBF8 : 78                  	ld	a, b
    5640/    EBF9 : FE 03               	cp	3
    5641/    EBFB : C2 7C E8            	jp	nz, asm_err
    5642/    EBFE : 3E 08               	ld	a, 08h		; 1st MC
    5643/    EC00 : 18 08               	jr	el3_61
    5644/    EC02 :                     
    5645/    EC02 :                     ex_de_:
    5646/    EC02 : 78                  	ld	a, b
    5647/    EC03 : FE 0B               	cp	11		; hl
    5648/    EC05 : C2 7C E8            	jp	nz, asm_err
    5649/    EC08 : 3E EB               	ld	a, 0ebh		; 1st MC
    5650/    EC0A :                     el3_61:
    5651/    EC0A : C3 E8 EE            	jp	st_mc11
    5652/    EC0D :                     
    5653/    EC0D :                     ;
    5654/    EC0D :                     ; LD section
    5655/    EC0D :                     ;
    5656/    EC0D :                     
    5657/    EC0D :                     ; ld_en1 = 7 (1, 4, 6, 7, 9, 10, 12)
    5658/    EC0D :                     ; ld_en2 = 5 (5, 8, 11, 14, 15)
    5659/    EC0D :                     ; ld_en3 = 4 (33, 36, 34, 37 )
    5660/    EC0D :                     ; ld_en4 =  7 (13, 16, 17, 26, 27, 28, 35)
    5661/    EC0D : =7H                 ld_en1		equ	ld_e2_tbl1 - ld_e2_tbl
    5662/    EC0D : =5H                 ld_en2		equ	ld_e2_tbl2 - ld_e2_tbl1
    5663/    EC0D : =4H                 ld_en3		equ	ld_e2_tbl3 - ld_e2_tbl2
    5664/    EC0D : =7H                 ld_en4		equ	ld_e2_tble - ld_e2_tbl3
    5665/    EC0D :                     
    5666/    EC0D : 01                  ld_e2_tbl:	db	1
    5667/    EC0E : 04 06 07 09 0A 0C   in_selt:	db	4, 6, 7, 9, 10, 12
    5668/    EC14 : 05 08 0B 0E 0F      ld_e2_tbl1:	db	5, 8, 11, 14, 15
    5669/    EC19 : 21 24 22 25         ld_e2_tbl2:	db	33, 36, 34, 37
    5670/    EC1D : 0D                  ld_e2_tbl3:	db	13
    5671/    EC1E : 10                  		db	16
    5672/    EC1F : 11                  		db	17
    5673/    EC20 : 1A                  		db	26
    5674/    EC21 : 1B                  		db	27
    5675/    EC22 : 1C                  		db	28
    5676/    EC23 : 23                  		db	35
    5677/    EC24 :                     ld_e2_tble:
    5678/    EC24 :                     
    5679/    EC24 : =0DH                rhlnnxy		equ	r_hl_nne - r_hl_nn
    5680/    EC24 : =8H                 ld_rrn		equ	ld_rr_ -  r_hl_nn
    5681/    EC24 : =0AH                ld_rxyn_sp	equ	lda_spe - ld_rr_
    5682/    EC24 :                     
    5683/    EC24 : =5H                 m_num		equ	r_hl_nne - ld_rr_	; except No.0 - 4  (IX+,IY+,IX-,IY-,nn)
    5684/    EC24 :                     
    5685/    EC24 : 01 04 06 07 09 0A   r_hl_nn:	db	1, 4, 6, 7, 9, 10, 12, 28
             EC2A : 0C 1C             
    5686/    EC2C : 19                  ld_rr_:		db	25
    5687/    EC2D : 21 24 22 25         ex_sr_:		db	33, 36, 34, 37
    5688/    EC31 :                     r_hl_nne:
    5689/    EC31 : 1A                  lda_sp:		db	26 ; LD A (BC)
    5690/    EC32 : 1B                  		db	27 ; LD A (DE)
    5691/    EC33 : 0D                  		db	13 ; LD A I
    5692/    EC34 : 11                  		db	17 ; LD A R
    5693/    EC35 : 23                  		db	35 ; LD A (1234H)
    5694/    EC36 :                     lda_spe:
    5695/    EC36 :                     
    5696/    EC36 : 68                  ld1_base:	db	68h	; L
    5697/    EC37 : 60                  		db	60h	; H
    5698/    EC38 : 58                  		db	58h	; E
    5699/    EC39 : 50                  		db	50h	; D
    5700/    EC3A : 48                  		db	48h	; C
    5701/    EC3B : 40                  		db	40h	; B
    5702/    EC3C : 78                  		db	78h	; A
    5703/    EC3D :                     
    5704/    EC3D : 99 EC               ld_r_jt:	dw	ld_r35 ; LD A (1234H)
    5705/    EC3F : AA EC               		dw	ld_r17 ; LD A R
    5706/    EC41 : AF EC               		dw	ld_r13 ; LD A I
    5707/    EC43 : B3 EC               		dw	ld_r27 ; LD A (DE)
    5708/    EC45 : B8 EC               		dw	ld_r26 ; LD A (BC)
    5709/    EC47 : BD EC               		dw	ld_r37
    5710/    EC49 : CB EC               		dw	ld_r34
    5711/    EC4B : D0 EC               		dw	ld_r36
    5712/    EC4D : D8 EC               		dw	ld_r33
    5713/    EC4F : DD EC               		dw	ld_r25
    5714/    EC51 :                     
    5715/    EC51 :                     ; LD XXXX, XXXX
    5716/    EC51 :                     el3_1:
    5717/    EC51 : 3A 55 FF            	ld	a, (opr1_cd)
    5718/    EC54 : 21 0D EC            	ld	hl, ld_e2_tbl
    5719/    EC57 : 01 07 00            	ld	bc, ld_en1
    5720/    EC5A : ED B1               	cpir
    5721/    EC5C : C2 EF EC            	jp	nz, el3_11
    5722/    EC5F :                     	
    5723/    EC5F : 21 36 EC            	ld	hl, ld1_base
    5724/    EC62 : 09                  	add	hl, bc
    5725/    EC63 : 56                  	ld	d, (hl)		; met MC base code
    5726/    EC64 :                     
    5727/    EC64 : 3A 56 FF            	ld	a, (opr2_cd)
    5728/    EC67 : 21 24 EC            	ld	hl, r_hl_nn
    5729/    EC6A : 01 08 00            	ld	bc, ld_rrn
    5730/    EC6D : ED B1               	cpir
    5731/    EC6F : 20 0C               	jr	nz, el3_125
    5732/    EC71 :                     	
    5733/    EC71 : 79                  	ld	a, c
    5734/    EC72 : FE 07               	cp	7		; A param?
    5735/    EC74 : 28 03               	jr	z, el3_12
    5736/    EC76 : 3E 06               	ld	a, 6
    5737/    EC78 : 91                  	sub	c		; make B, C, D, E, H, L, (HL) param
    5738/    EC79 :                     el3_12:
    5739/    EC79 : B2                  	or	d		; make MC
    5740/    EC7A : C3 E8 EE            	jp	st_mc11	
    5741/    EC7D :                     
    5742/    EC7D :                     
    5743/    EC7D :                     el3_125:
    5744/    EC7D : 21 2C EC            	ld	hl, ld_rr_
    5745/    EC80 : 01 0A 00            	ld	bc, ld_rxyn_sp
    5746/    EC83 : ED B1               	cpir
    5747/    EC85 : C2 7C E8            	jp	nz, asm_err
    5748/    EC88 :                     
    5749/    EC88 : 79                  	ld	a, c
    5750/    EC89 : FE 05               	cp	5		; check LD A, special
    5751/    EC8B : 30 06               	jr	nc, el3_126
    5752/    EC8D :                     
    5753/    EC8D : 7A                  	ld	a, d
    5754/    EC8E : FE 78               	cp	78h		; LD A ?
    5755/    EC90 : C2 7C E8            	jp	nz, asm_err	; err, if B, C, D, E, H, L, (HL)
    5756/    EC93 :                     
    5757/    EC93 :                     el3_126:
    5758/    EC93 : 21 3D EC            	ld	hl, ld_r_jt
    5759/    EC96 : C3 1E E9            	jp	jp_each
    5760/    EC99 :                     
    5761/    EC99 :                     ld_r35: ; LD A,(1234H)
    5762/    EC99 : 3E 3A               	ld	a, 3ah		; 1st MC
    5763/    EC9B :                     
    5764/    EC9B : 2A 50 FF            	ld	hl, (tasm_adr)
    5765/    EC9E : 77                  	ld	(hl), a
    5766/    EC9F : 23                  	inc	hl
    5767/    ECA0 : ED 5B 59 FF         	ld	de, (opr_num35)
    5768/    ECA4 : 73                  	ld	(hl), e
    5769/    ECA5 : 23                  	inc	hl
    5770/    ECA6 : 72                  	ld	(hl), d
    5771/    ECA7 : C3 E9 EF            	jp	mc_end3
    5772/    ECAA :                     
    5773/    ECAA :                     ld_r17: ; LD A,R
    5774/    ECAA : 3E 5F               	ld	a, 5fh
    5775/    ECAC :                     ld_r171:
    5776/    ECAC : C3 37 F2            	jp	el2_5411
    5777/    ECAF :                     	
    5778/    ECAF :                     ld_r13: ; LD A,I
    5779/    ECAF : 3E 57               	ld	a, 57h
    5780/    ECB1 : 18 F9               	jr	ld_r171
    5781/    ECB3 :                     
    5782/    ECB3 :                     ld_r27: ; LD A,(DE)
    5783/    ECB3 : 3E 1A               	ld	a, 1ah
    5784/    ECB5 : C3 E8 EE            	jp	st_mc11
    5785/    ECB8 :                     	
    5786/    ECB8 :                     ld_r26: ; LD A,(BC)
    5787/    ECB8 : 3E 0A               	ld	a, 0ah
    5788/    ECBA : C3 E8 EE            	jp	st_mc11
    5789/    ECBD :                     
    5790/    ECBD :                     ld_r37:	; LD r,(IY-nn)
    5791/    ECBD : 3A 5B FF            	ld	a, (opr_num37)
    5792/    ECC0 :                     ld_r371:
    5793/    ECC0 : 4F                  	ld	c, a
    5794/    ECC1 : 1E FD               	ld	e, 0FDH
    5795/    ECC3 :                     ld_r372:
    5796/    ECC3 : 3E 06               	ld	a, 6
    5797/    ECC5 : B2                  	or	d		; make 2nd MC
    5798/    ECC6 : 57                  	ld	d, a		; adjust I/F
    5799/    ECC7 : 7B                  	ld	a, e		; adjust I/F
    5800/    ECC8 : C3 F4 F0            	jp	cp_xy1
    5801/    ECCB :                     
    5802/    ECCB :                     ld_r34: ; LD r,(IY+nn)
    5803/    ECCB : 3A 5C FF            	ld	a, (opr_num34)
    5804/    ECCE : 18 F0               	jr	ld_r371
    5805/    ECD0 :                     
    5806/    ECD0 :                     ld_r36: ; LD r,(IX-nn)
    5807/    ECD0 : 3A 5D FF            	ld	a, (opr_num36)
    5808/    ECD3 :                     ld_r361:
    5809/    ECD3 : 4F                  	ld	c, a
    5810/    ECD4 : 1E DD               	ld	e, 0DDH
    5811/    ECD6 : 18 EB               	jr	ld_r372
    5812/    ECD8 :                     
    5813/    ECD8 :                     ld_r33: ; LD r,(IX+nn)
    5814/    ECD8 : 3A 5E FF            	ld	a, (opr_num33)
    5815/    ECDB : 18 F6               	jr	ld_r361
    5816/    ECDD :                     
    5817/    ECDD :                     ld_r25: ; LD r, nn
    5818/    ECDD : 7A                  	ld	a, d		; get 1st MC base
    5819/    ECDE : D6 3A               	sub	3ah		; get 1st MC
    5820/    ECE0 : 57                  	ld	d, a
    5821/    ECE1 :                     
    5822/    ECE1 :                     ld_r251:
    5823/    ECE1 : 2A 57 FF            	ld	hl, (opr_num25)
    5824/    ECE4 : 7C                  	ld	a, h
    5825/    ECE5 : B7                  	or	a
    5826/    ECE6 : C2 7C E8            	jp	nz, asm_err
    5827/    ECE9 : 7D                  	ld	a, l
    5828/    ECEA : F5                  	push	af		; adjust I/F
    5829/    ECEB : 7A                  	ld	a, d		; adjust I/F
    5830/    ECEC : C3 FF EF            	jp	el2_441
    5831/    ECEF :                     
    5832/    ECEF :                     ;
    5833/    ECEF :                     ; LD rp16, nnnn
    5834/    ECEF :                     ; LD rp16, (nnnn)
    5835/    ECEF :                     ; rp16 : BC, DE, HL, IX, IY
    5836/    ECEF :                     ; ld_e2_tbl1:	db	5, 8, 11, 14, 15
    5837/    ECEF :                     
    5838/    ECEF :                     el3_11:
    5839/    ECEF :                     ;	hl = ld_e2_tbl1
    5840/    ECEF : 01 05 00            	ld	bc, ld_en2
    5841/    ECF2 : ED B1               	cpir
    5842/    ECF4 : 20 74               	jr	nz, el3_1_2
    5843/    ECF6 : 79                  	ld	a, c
    5844/    ECF7 : B7                  	or	a
    5845/    ECF8 : 28 6C               	jr	z, ld_iy_n4
    5846/    ECFA : FE 01               	cp	1
    5847/    ECFC : 28 4E               	jr	z, ld_ix_n4
    5848/    ECFE : FE 02               	cp	2
    5849/    ED00 : 28 35               	jr	z, ld_hl_n4
    5850/    ED02 : FE 03               	cp	3
    5851/    ED04 : 28 29               	jr	z, ld_de_n4
    5852/    ED06 :                     
    5853/    ED06 :                     
    5854/    ED06 :                     ; LD BC, nnnn; LD BC, (nnnn)
    5855/    ED06 :                     ld_bc_n4:
    5856/    ED06 : 16 ED               	ld	d, 0EDH		; 1st MC
    5857/    ED08 : 1E 4B               	ld	e, 4bh		; 2nd MC
    5858/    ED0A : 0E 01               	ld	c, 1		; 1st MC
    5859/    ED0C :                     
    5860/    ED0C :                     ld_bc_n40:
    5861/    ED0C : 3A 56 FF            	ld	a, (opr2_cd)
    5862/    ED0F : FE 19               	cp	25
    5863/    ED11 : 28 0A               	jr	z, ld_bc_n41
    5864/    ED13 :                     
    5865/    ED13 : 7B                  	ld	a, e		; 2nd MC
    5866/    ED14 : 21 59 FF            	ld	hl, opr_num35
    5867/    ED17 : 4E                  	ld	c, (hl)		; 3rd MC
    5868/    ED18 : 23                  	inc	hl
    5869/    ED19 : 5E                  	ld	e, (hl)		; 4th MC
    5870/    ED1A : C3 0C F2            	jp	mc_end41
    5871/    ED1D :                     
    5872/    ED1D :                     ld_bc_n41:
    5873/    ED1D : 21 57 FF            	ld	hl, opr_num25
    5874/    ED20 : 5E                  	ld	e, (hl)		; 2rd MC
    5875/    ED21 : 23                  	inc	hl
    5876/    ED22 : 56                  	ld	d, (hl)		; 3rd MC
    5877/    ED23 : 79                  	ld	a, c		; 1st MC
    5878/    ED24 :                     
    5879/    ED24 :                     ld_bc_n42:
    5880/    ED24 : 2A 50 FF            	ld	hl, (tasm_adr)
    5881/    ED27 : 71                  	ld	(hl), c		; save 1st MC
    5882/    ED28 : 23                  	inc	hl
    5883/    ED29 : 73                  	ld	(hl), e
    5884/    ED2A : 23                  	inc	hl
    5885/    ED2B : 72                  	ld	(hl), d
    5886/    ED2C : C3 E9 EF            	jp	mc_end3
    5887/    ED2F :                     	
    5888/    ED2F :                     ; LD DE, nnnn; LD DE, (nnnn)
    5889/    ED2F :                     ld_de_n4:
    5890/    ED2F : 16 ED               	ld	d, 0EDH		; 1st MC
    5891/    ED31 : 1E 5B               	ld	e, 5bh		; 2nd MC
    5892/    ED33 : 0E 11               	ld	c, 11h		; 1st MC
    5893/    ED35 : 18 D5               	jr	ld_bc_n40
    5894/    ED37 :                     
    5895/    ED37 :                     ; LD HL, nnnn; LD HL, (nnnn)
    5896/    ED37 :                     ld_hl_n4:
    5897/    ED37 : 0E 21               	ld	c, 21h
    5898/    ED39 : ED 5B 57 FF         	ld	de, (opr_num25)
    5899/    ED3D : 3A 56 FF            	ld	a, (opr2_cd)
    5900/    ED40 : FE 19               	cp	25
    5901/    ED42 : 28 E0               	jr	z, ld_bc_n42
    5902/    ED44 : 0E 2A               	ld	c, 2Ah
    5903/    ED46 : ED 5B 59 FF         	ld	de, (opr_num35)
    5904/    ED4A : 18 D8               	jr	ld_bc_n42
    5905/    ED4C :                     
    5906/    ED4C :                     ; LD IX, nnnn; LD IX, (nnnn)
    5907/    ED4C :                     ld_ix_n4:
    5908/    ED4C : 16 DD               	ld	d, 0DDh		; 1st MC
    5909/    ED4E :                     
    5910/    ED4E :                     ld_ix_n40:
    5911/    ED4E : 0E 21               	ld	c, 21h
    5912/    ED50 : 21 57 FF            	ld	hl, opr_num25
    5913/    ED53 :                     
    5914/    ED53 : 3A 56 FF            	ld	a, (opr2_cd)
    5915/    ED56 : FE 19               	cp	25
    5916/    ED58 : 28 05               	jr	z, ld_ix_n42
    5917/    ED5A :                     
    5918/    ED5A : 0E 2A               	ld	c, 2Ah
    5919/    ED5C : 21 59 FF            	ld	hl, opr_num35
    5920/    ED5F :                     
    5921/    ED5F :                     ld_ix_n42:
    5922/    ED5F : 79                  	ld	a, c		; 2nd MC
    5923/    ED60 : 4E                  	ld	c, (hl)		; 3rd MC
    5924/    ED61 : 23                  	inc	hl
    5925/    ED62 : 5E                  	ld	e, (hl)		; 4th MC
    5926/    ED63 : C3 0C F2            	jp	mc_end41
    5927/    ED66 :                     
    5928/    ED66 :                     ; LD IY, nnnn; LD IY, (nnnn)
    5929/    ED66 :                     ld_iy_n4:
    5930/    ED66 : 16 FD               	ld	d, 0FDh		; 1st MC
    5931/    ED68 : 18 E4               	jr	ld_ix_n40
    5932/    ED6A :                     
    5933/    ED6A :                     ;
    5934/    ED6A :                     ; LD ([IX|IY][+|-]nn), [r|nn]
    5935/    ED6A :                     ;
    5936/    ED6A :                     ;ld_e2_tbl2:	db	33, 36, 34, 37
    5937/    ED6A :                     ; LD (IX | IY +|- nn), r | nn
    5938/    ED6A :                     el3_1_2:
    5939/    ED6A :                     ;	hl = ld_e2_tbl2
    5940/    ED6A : 01 04 00            	ld	bc, ld_en3
    5941/    ED6D : ED B1               	cpir
    5942/    ED6F : 20 3F               	jr	nz, el3_13
    5943/    ED71 :                     	
    5944/    ED71 : 21 5B FF            	ld	hl, opr_num37
    5945/    ED74 : 09                  	add	hl, bc
    5946/    ED75 : 56                  	ld	d, (hl)		; get 3rd MC
    5947/    ED76 :                     
    5948/    ED76 : 79                  	ld	a, c
    5949/    ED77 : 1E FD               	ld	e, 0FDh		; 1st MC
    5950/    ED79 : FE 02               	cp	2
    5951/    ED7B : 38 02               	jr	c, el3_121
    5952/    ED7D : 1E DD               	ld	e, 0DDh		; 1st MC
    5953/    ED7F :                     
    5954/    ED7F :                     ; reg_A = (opr2_cd)
    5955/    ED7F :                     ; if (reg_A = 25) 2nd_MC = 36h
    5956/    ED7F :                     ; else {
    5957/    ED7F :                     ;     if (Reg_C = 6) 2nd_MC =77h
    5958/    ED7F :                     ;     else 2nd_MC = 75h - reg_C
    5959/    ED7F :                     ; }
    5960/    ED7F :                     el3_121: ; check element No.3
    5961/    ED7F : 3A 56 FF            	ld	a, (opr2_cd)
    5962/    ED82 : FE 19               	cp	25
    5963/    ED84 : 28 1A               	jr	z, ld_xynln
    5964/    ED86 :                     
    5965/    ED86 : 21 0D EC            	ld	hl, ld_e2_tbl
    5966/    ED89 : 01 07 00            	ld	bc, ld_en1
    5967/    ED8C : ED B1               	cpir
    5968/    ED8E : C2 7C E8            	jp	nz, asm_err
    5969/    ED91 :                     
    5970/    ED91 : 79                  	ld	a, c
    5971/    ED92 : FE 06               	cp	6
    5972/    ED94 : 3E 77               	ld	a, 077h		; a : 2nd MC
    5973/    ED96 : 28 03               	jr	z, mc2_77
    5974/    ED98 :                     
    5975/    ED98 : 3E 75               	ld	a, 75h
    5976/    ED9A : 91                  	sub	c	; a : 2nd MC
    5977/    ED9B :                     
    5978/    ED9B :                      ; adjust 1: c, 2: e, 3: d
    5979/    ED9B :                     mc2_77:
    5980/    ED9B : 4B                  	ld	c, e		; adjust I/F
    5981/    ED9C : 5F                  	ld	e, a		; adjust I/F
    5982/    ED9D : C3 24 ED            	jp	ld_bc_n42
    5983/    EDA0 :                     
    5984/    EDA0 :                     ld_xynln: ; 4byte MC 
    5985/    EDA0 :                     	  ; LD ([IX|IY] [+|-]), nn
    5986/    EDA0 :                     	  ; 2nd MC = 36h
    5987/    EDA0 :                     
    5988/    EDA0 : 2A 57 FF            	ld	hl, (opr_num25)
    5989/    EDA3 : 7C                  	ld	a, h
    5990/    EDA4 : B7                  	or	a
    5991/    EDA5 : C2 7C E8            	jp	nz, asm_err
    5992/    EDA8 :                     
    5993/    EDA8 :                     ; adjust I/F
    5994/    EDA8 :                     ; d: 1st MC, a: 2nd MC, c: 3rd MC, e: 4th MC
    5995/    EDA8 :                     
    5996/    EDA8 : 3E 36               	ld	a, 36h		; 2nd MC
    5997/    EDAA : 4A                  	ld	c, d		; 3rd MC
    5998/    EDAB : 53                  	ld	d, e		; 1st MC
    5999/    EDAC : 5D                  	ld	e, l		; 4th MC
    6000/    EDAD : C3 0C F2            	jp	mc_end41
    6001/    EDB0 :                     
    6002/    EDB0 :                     ;
    6003/    EDB0 :                     ; 35 : ld (nnnn), reg
    6004/    EDB0 :                     ; 28 : ld (hl), r | nn
    6005/    EDB0 :                     ; 16 : ld SP, hl | ix | iy | nnnn | (nnnn)
    6006/    EDB0 :                     ; 27 : LD (DE), A
    6007/    EDB0 :                     ; 26 : LD (BC), A
    6008/    EDB0 :                     ; 17 : LD R, A
    6009/    EDB0 :                     ; 13 : LD I, A
    6010/    EDB0 :                     ;
    6011/    EDB0 :                     el3_13:
    6012/    EDB0 :                     ;	hl = ld_e2_tbl3
    6013/    EDB0 : 01 07 00            	ld	bc, ld_en4
    6014/    EDB3 : ED B1               	cpir
    6015/    EDB5 : C2 7C E8            	jp	nz, asm_err
    6016/    EDB8 : 21 BE ED            	ld	hl, el3_14
    6017/    EDBB : C3 1E E9            	jp	jp_each
    6018/    EDBE :                     
    6019/    EDBE :                     ; jump table
    6020/    EDBE : DA ED               el3_14:		dw	el3_s35
    6021/    EDC0 : 0F EE               		dw	el3_s28
    6022/    EDC2 : 7C EE               		dw	el3_s27
    6023/    EDC4 : 80 EE               		dw	el3_s26
    6024/    EDC6 : 85 EE               		dw	el3_s17
    6025/    EDC8 : 3E EE               		dw	el3_s16
    6026/    EDCA : 8A EE               		dw	el3_s13
    6027/    EDCC :                     
    6028/    EDCC : =7H                 ldnr_n	equ	ldnr_c - ldnr_t
    6029/    EDCC :                     
    6030/    EDCC : 01 0B 05 08 10 0E   ldnr_t:		db	1, 11, 5, 8, 16, 14, 15
             EDD2 : 0F                
    6031/    EDD3 : 22 22 73 53 43 22   ldnr_c:		db	22h, 22h, 73h, 53h, 43h, 22h, 32h
             EDD9 : 32                
    6032/    EDDA :                     
    6033/    EDDA :                     el3_s35: ; ld (nnnn), reg
    6034/    EDDA :                     
    6035/    EDDA : 3A 56 FF            	ld	a, (opr2_cd)
    6036/    EDDD :                     
    6037/    EDDD : 21 CC ED            	ld	hl, ldnr_t
    6038/    EDE0 : 01 07 00            	ld	bc, ldnr_n
    6039/    EDE3 : ED B1               	cpir
    6040/    EDE5 : C2 7C E8            	jp	nz, asm_err
    6041/    EDE8 :                     
    6042/    EDE8 : 21 D3 ED            	ld	hl, ldnr_c
    6043/    EDEB : 09                  	add	hl, bc
    6044/    EDEC : 79                  	ld	a, c
    6045/    EDED : 4E                  	ld	c, (hl)		; 1st MC
    6046/    EDEE :                     
    6047/    EDEE : 2A 59 FF            	ld	hl, (opr_num35)
    6048/    EDF1 : FE 05               	cp	5
    6049/    EDF3 : 38 05               	jr	c, el3_s351
    6050/    EDF5 :                     
    6051/    EDF5 :                      ; adjust 1: c, 2: e, 3: d
    6052/    EDF5 :                     
    6053/    EDF5 : 5D                  	ld	e, l			; 2nd MC
    6054/    EDF6 : 54                  	ld	d, h			; 3rd MC
    6055/    EDF7 : C3 24 ED            	jp	ld_bc_n42
    6056/    EDFA :                     
    6057/    EDFA :                     el3_s351:
    6058/    EDFA : FE 02               	cp	2
    6059/    EDFC : 38 08               	jr	c, el3_s352
    6060/    EDFE :                      ; ED
    6061/    EDFE :                     ; d: 1st MC, a: 2nd MC, c: 3rd MC, e: 4th MC
    6062/    EDFE :                     
    6063/    EDFE : 16 ED               	ld	d, 0EDH			; 1st MC
    6064/    EE00 :                     el3_s353:
    6065/    EE00 : 79                  	ld	a, c			; 2nd MC
    6066/    EE01 : 4D                  	ld	c, l			; 3rd MC
    6067/    EE02 : 5C                  	ld	e, h			; 4th mc
    6068/    EE03 : C3 0C F2            	jp	mc_end41
    6069/    EE06 :                     
    6070/    EE06 :                     el3_s352: ; DD, FD
    6071/    EE06 : 16 FD               	ld	d, 0FDh			; 1st MC
    6072/    EE08 : B7                  	or	a
    6073/    EE09 : 28 F5               	jr	z, el3_s353
    6074/    EE0B : 16 DD               	ld	d, 0DDh			; 1st MC
    6075/    EE0D : 18 F1               	jr	el3_s353
    6076/    EE0F :                     
    6077/    EE0F :                     ; ld (hl), r | nn
    6078/    EE0F :                     el3_s28:
    6079/    EE0F : 3A 56 FF            	ld	a, (opr2_cd)
    6080/    EE12 : FE 19               	cp	25
    6081/    EE14 : 28 19               	jr	z, el3_s281
    6082/    EE16 : FE 01               	cp	1
    6083/    EE18 : 28 11               	jr	z, el3_s282
    6084/    EE1A : 21 0E EC            	ld	hl, ld_e2_tbl + 1
    6085/    EE1D : 01 06 00            	ld	bc, ld_en1 - 1
    6086/    EE20 : ED B1               	cpir
    6087/    EE22 : C2 7C E8            	jp	nz, asm_err
    6088/    EE25 : 3E 75               	ld	a, 75h
    6089/    EE27 : 91                  	sub	c
    6090/    EE28 :                     el3_s283:
    6091/    EE28 : C3 E8 EE            	jp	st_mc11
    6092/    EE2B :                     
    6093/    EE2B :                     el3_s282: ; LD (HL), A
    6094/    EE2B : 3E 77               	ld	a, 77h
    6095/    EE2D : 18 F9               	jr	el3_s283
    6096/    EE2F :                     
    6097/    EE2F :                     el3_s281: ; LD (HL), nn
    6098/    EE2F : 2A 57 FF            	ld	hl, (opr_num25)
    6099/    EE32 : 7C                  	ld	a, h
    6100/    EE33 : B7                  	or	a
    6101/    EE34 : C2 7C E8            	jp	nz, asm_err
    6102/    EE37 :                     
    6103/    EE37 : 7D                  	ld	a, l
    6104/    EE38 : F5                  	push	af		; adjust I/F
    6105/    EE39 : 3E 36               	ld	a, 36h		; 1st MC
    6106/    EE3B : C3 FF EF            	jp	el2_441
    6107/    EE3E :                     
    6108/    EE3E :                     el3_s16: ; ld SP, hl | ix | iy | nnnn | (nnnn)
    6109/    EE3E :                     
    6110/    EE3E : 3A 56 FF            	ld	a, (opr2_cd)
    6111/    EE41 : FE 0B               	cp	11
    6112/    EE43 : 28 1D               	jr	z, el3_s161
    6113/    EE45 : FE 0E               	cp	14
    6114/    EE47 : 28 1D               	jr	z, el3_s162
    6115/    EE49 : FE 0F               	cp	15
    6116/    EE4B : 28 1D               	jr	z, el3_s163
    6117/    EE4D : FE 19               	cp	25
    6118/    EE4F : 28 22               	jr	z, el3_s164
    6119/    EE51 : FE 23               	cp	35
    6120/    EE53 : C2 7C E8            	jp	nz, asm_err
    6121/    EE56 :                     
    6122/    EE56 :                     ; LD SP, (nnnn)
    6123/    EE56 :                     ; d: 1st MC, a: 2nd MC, c: 3rd MC, e: 4th MC
    6124/    EE56 :                     
    6125/    EE56 : 16 ED               	ld	d, 0edh		; 1st MC
    6126/    EE58 : 3E 7B               	ld	a, 7bh		; 2nd MC
    6127/    EE5A : 2A 59 FF            	ld	hl, (opr_num35)
    6128/    EE5D : 4D                  	ld	c, l		; 3rd MC
    6129/    EE5E : 5C                  	ld	e, h		; 4th MC
    6130/    EE5F : C3 0C F2            	jp	mc_end41
    6131/    EE62 :                     	
    6132/    EE62 :                     
    6133/    EE62 :                     el3_s161: ; LD SP, HL
    6134/    EE62 : 3E F9               	ld	a, 0f9h
    6135/    EE64 : 18 1C               	jr	el3_s261
    6136/    EE66 :                     
    6137/    EE66 :                     el3_s162: ; LD SP, IX
    6138/    EE66 : 16 DD               	ld	d, 0DDh
    6139/    EE68 : 18 02               	jr	el3_s1631
    6140/    EE6A :                     	
    6141/    EE6A :                     el3_s163: ; LD SP, IY
    6142/    EE6A : 16 FD               	ld	d, 0FDh
    6143/    EE6C :                     el3_s1631:
    6144/    EE6C : 3E F9               	ld	a, 0f9h
    6145/    EE6E : F5                  	push	af		; adjust I/F
    6146/    EE6F : 7A                  	ld	a, d
    6147/    EE70 : C3 FF EF            	jp	el2_441
    6148/    EE73 :                     
    6149/    EE73 :                     el3_s164: ; LD SP, nnnn
    6150/    EE73 :                     ; adjust 1: c, 2: e, 3: d
    6151/    EE73 :                     
    6152/    EE73 : 0E 31               	ld	c, 31h		; 1st MC
    6153/    EE75 : ED 5B 57 FF         	ld	de, (opr_num25)	; e: 2nd MC, d: 3rd MC
    6154/    EE79 : C3 24 ED            	jp	ld_bc_n42
    6155/    EE7C :                     
    6156/    EE7C :                     el3_s27: ; LD (DE), A
    6157/    EE7C : 3E 12               	ld	a, 12h		; set MC
    6158/    EE7E : 18 02               	jr	el3_s261
    6159/    EE80 :                     	
    6160/    EE80 :                     el3_s26: ; LD (BC), A
    6161/    EE80 : 3E 02               	ld	a, 2h		; set MC
    6162/    EE82 :                     el3_s261:
    6163/    EE82 : C3 E8 EE            	jp	st_mc11
    6164/    EE85 :                     	
    6165/    EE85 :                     el3_s17: ; LD R, A
    6166/    EE85 : 3E 4F               	ld	a, 4fh		; set 2nd MC
    6167/    EE87 : C3 37 F2            	jp	el2_5411
    6168/    EE8A :                     
    6169/    EE8A :                     el3_s13: ; LD I, A
    6170/    EE8A : 3E 47               	ld	a, 47h		; set 2nd MC
    6171/    EE8C : C3 37 F2            	jp	el2_5411
    6172/    EE8F :                     
    6173/    EE8F :                     ;1111111111111111111111111111111111
    6174/    EE8F :                     ;
    6175/    EE8F :                     ; element count = 1 
    6176/    EE8F :                     ;
    6177/    EE8F :                     ;1111111111111111111111111111111111
    6178/    EE8F :                     
    6179/    EE8F : =0EH                e1s	equ	e1_e - e1_s
    6180/    EE8F : =15H                e1s1	equ	e1_e1 - e1_s1
    6181/    EE8F :                     
    6182/    EE8F :                     e1_s: ;------------------------------------------------
    6183/    EE8F : 07 0A 0B 0E 0F 1E   elem1_cd:	db	7, 10, 11, 14, 15, 30, 32
             EE95 : 20                
    6184/    EE96 : 21 2E 32 33 34 35   		db	33, 46, 50, 51, 52, 53, 65
             EE9C : 41                
    6185/    EE9D :                     e1_e: ;------------------------------------------------
    6186/    EE9D :                     
    6187/    EE9D : 27 FB F3 76 00 C9   elem1_opcd:	db	27H, 0FBH, 0F3H, 76H, 00H, 0C9H, 37H
             EEA3 : 37                
    6188/    EEA4 : 3F 2F 1F 0F 17 07   		db	3FH, 2FH, 1FH, 0FH, 17H, 07H, 0D9H
             EEAA : D9                
    6189/    EEAB :                     
    6190/    EEAB :                     e1_s1: ; ----------------------------------------------
    6191/    EEAB : 27 28 25 26 3A 3B   elem1_cd1:	db	39, 40, 37, 38, 58, 59, 56
             EEB1 : 38                
    6192/    EEB2 : 39 04 05 02 03 1F   		db	57, 4,  5,  2,  3,  31, 64
             EEB8 : 40                
    6193/    EEB9 : 3E 3F 3D 2F 30 42   		db	62, 63, 61, 47, 48, 66, 67
             EEBF : 43                
    6194/    EEC0 :                     e1_e1: ; ----------------------------------------------
    6195/    EEC0 :                     
    6196/    EEC0 : 67 6F 45 4D A3 AB   elem1_opcd1:	db	 67h,  6Fh,  45h,  4Dh, 0A3h, 0ABh, 0B3h
             EEC6 : B3                
    6197/    EEC7 : BB 44 B0 A0 B8 A8   		db	0BBh,  44h, 0B0h, 0A0h, 0B8h, 0A8h, 0B2h
             EECD : B2                
    6198/    EECE : A2 BA AA B1 A1 B9   		db	0A2h, 0BAh, 0AAh, 0B1h, 0A1h, 0B9h, 0A9h
             EED4 : A9                
    6199/    EED5 :                     
    6200/    EED5 :                     ;
    6201/    EED5 :                     ; make machine code,
    6202/    EED5 :                     ; element_cnt = 1 (ex. NOP)
    6203/    EED5 :                     ; output : 1 byte Machine code
    6204/    EED5 :                     ;
    6205/    EED5 :                     mk_e1:	; 1byte MC
    6206/    EED5 : 3A 54 FF            	ld	a, (opc_cd)
    6207/    EED8 : 01 0E 00            	ld	bc, e1s
    6208/    EEDB : 21 8F EE            	ld	hl, elem1_cd
    6209/    EEDE : ED B1               	cpir
    6210/    EEE0 : C2 F4 EE            	jp	nz, mk_e11
    6211/    EEE3 :                     	
    6212/    EEE3 : 21 9D EE            	ld	hl, elem1_opcd
    6213/    EEE6 :                     
    6214/    EEE6 :                     st_mc1:
    6215/    EEE6 : 09                  	add	hl, bc
    6216/    EEE7 :                     	; get MC
    6217/    EEE7 : 7E                  	ld	a, (hl)
    6218/    EEE8 :                     st_mc11:
    6219/    EEE8 : 2A 50 FF            	ld	hl, (tasm_adr)
    6220/    EEEB : 77                  	ld	(hl), a
    6221/    EEEC : 3E 01               	ld	a, 1
    6222/    EEEE :                     
    6223/    EEEE :                     mc_end:
    6224/    EEEE : 32 53 FF            	ld	(byte_count), a	; set MC bytes
    6225/    EEF1 : C3 8D E8            	jp	cout_sp
    6226/    EEF4 :                     
    6227/    EEF4 :                     mk_e11: ; 2byte MC (0EDh, XX)
    6228/    EEF4 : 01 15 00            	ld	bc, e1s1
    6229/    EEF7 : 21 AB EE            	ld	hl, elem1_cd1
    6230/    EEFA : ED B1               	cpir
    6231/    EEFC : C2 7C E8            	jp	nz, asm_err
    6232/    EEFF :                     	
    6233/    EEFF : 2A 50 FF            	ld	hl, (tasm_adr)
    6234/    EF02 : 3E ED               	ld	a, 0EDH
    6235/    EF04 : 77                  	ld	(hl), a		; set MC No.1
    6236/    EF05 : 23                  	inc	hl
    6237/    EF06 : EB                  	ex	de, hl
    6238/    EF07 :                     
    6239/    EF07 : 21 C0 EE            	ld	hl, elem1_opcd1
    6240/    EF0A : 09                  	add	hl, bc
    6241/    EF0B :                     	; get MC
    6242/    EF0B : 7E                  	ld	a, (hl)
    6243/    EF0C : 12                  	ld	(de), a		; set MC No.2
    6244/    EF0D :                     
    6245/    EF0D :                     mc_end2:
    6246/    EF0D : 3E 02               	ld	a, 2
    6247/    EF0F : 18 DD               	jr	mc_end
    6248/    EF11 :                     
    6249/    EF11 :                     ;2222222222222222222222222222222222222222222222
    6250/    EF11 :                     ;
    6251/    EF11 :                     ; element count = 2 
    6252/    EF11 :                     ;
    6253/    EF11 :                     ;2222222222222222222222222222222222222222222222
    6254/    EF11 :                     
    6255/    EF11 : =1AH                e2s	equ	e2_e - e2_s
    6256/    EF11 :                     
    6257/    EF11 :                     e2_s:
    6258/    EF11 :                     elem2_cd:
    6259/    EF11 : 08 09               	db	8, 9			; DD, FD
    6260/    EF13 : 17 1A               	db	23, 26			; DD, FD
    6261/    EF15 : 18 1B 1C 1D 29      	db	24, 27, 28 ,29, 41	; DD, FD
    6262/    EF1A : 2A                  	db	42			; DD, FD
    6263/    EF1B : 2E                  	db	46
    6264/    EF1C : 31                  	db	49
    6265/    EF1D : 2B                  	db	43
    6266/    EF1E : 2C                  	db	44
    6267/    EF1F : 2D                  	db	45
    6268/    EF20 :                     ; CB
    6269/    EF20 : 0C                  	db	12			; DD, FD
    6270/    EF21 : 10                  	db	16			; DD, FD
    6271/    EF22 : 0D                  	db	13			; DD, FD
    6272/    EF23 : 11                  	db	17			; DD, FD
    6273/    EF24 : 12                  	db	18			; DD, FD
    6274/    EF25 : 13                  	db	19			; DD, FD
    6275/    EF26 : 14                  	db	20			; DD, FD
    6276/    EF27 :                     ; ED
    6277/    EF27 : 36                  	db	54			; ED
    6278/    EF28 : 44                  	db	68			; ORG
    6279/    EF29 : 45                  	db	69			; DB
    6280/    EF2A : 46                  	db	70			; DW
    6281/    EF2B :                     e2_e:
    6282/    EF2B :                     
    6283/    EF2B :                     ent_el2:
    6284/    EF2B : 73 EF               	dw	el2_70		; DW
    6285/    EF2D : 88 EF               	dw	el2_69		; DB
    6286/    EF2F : C1 EF               	dw	el2_68		; ORG
    6287/    EF31 : 1B F2               	dw	el2_54		; IM
    6288/    EF33 : B5 F1               	dw	el2_20		; SRL
    6289/    EF35 : BA F1               	dw	el2_19		; SRA
    6290/    EF37 : BF F1               	dw	el2_18		; SLA
    6291/    EF39 : C4 F1               	dw	el2_17		; RR
    6292/    EF3B : C9 F1               	dw	el2_13		; RL
    6293/    EF3D : CE F1               	dw	el2_16		; RRC
    6294/    EF3F : D3 F1               	dw	el2_12		; RLC
    6295/    EF41 :                     
    6296/    EF41 : D3 EF               	dw	el2_45		; CALL nnnn
    6297/    EF43 : EE EF               	dw	el2_44		; DJNZ e
    6298/    EF45 : 09 F0               	dw	el2_43		; jR e
    6299/    EF47 : 1C F0               	dw	el2_49		; RST nn
    6300/    EF49 : 46 F0               	dw	el2_46		; RET CC
    6301/    EF4B : 6A F0               	dw	el2_42		; JP (HL), JP nnnn
    6302/    EF4D :                     
    6303/    EF4D :                     ; code base 0a0h, or 00h, 08h, 10h, 18h
    6304/    EF4D : A4 F0               	dw	el2_41		; CP
    6305/    EF4F : A8 F0               	dw	el2_29		; XOR
    6306/    EF51 : AC F0               	dw	el2_28		; OR
    6307/    EF53 : B0 F0               	dw	el2_27		; AND
    6308/    EF55 :                     
    6309/    EF55 : B4 F0               	dw	el2_24		; SUB
    6310/    EF57 :                     
    6311/    EF57 : 36 F1               	dw	el2_26		; DEC
    6312/    EF59 : 3B F1               	dw	el2_23		; INC
    6313/    EF5B :                     
    6314/    EF5B : 7D F1               	dw	el2_9		; POP
    6315/    EF5D : 81 F1               	dw	el2_8		; PUSH
    6316/    EF5F :                     
    6317/    EF5F :                     ;
    6318/    EF5F :                     ; make machine code,
    6319/    EF5F :                     ; element_cnt = 2 (ex. PUSH AF)
    6320/    EF5F :                     ; output : 1 to 3 bytes Machine code
    6321/    EF5F :                     ;
    6322/    EF5F :                     
    6323/    EF5F :                     mk_e2:
    6324/    EF5F : 3A 54 FF            	ld	a, (opc_cd)
    6325/    EF62 : 01 1A 00            	ld	bc, e2s
    6326/    EF65 : 21 11 EF            	ld	hl, elem2_cd
    6327/    EF68 : ED B1               	cpir
    6328/    EF6A : C2 7C E8            	jp	nz, asm_err
    6329/    EF6D :                     	
    6330/    EF6D : 21 2B EF            	ld	hl, ent_el2
    6331/    EF70 : C3 1E E9            	jp	jp_each
    6332/    EF73 :                     
    6333/    EF73 :                     el2_70: ; DW
    6334/    EF73 : 3A 55 FF            	ld	a, (opr1_cd)
    6335/    EF76 : FE 19               	cp	25
    6336/    EF78 : C2 7C E8            	jp	nz, asm_err
    6337/    EF7B :                     
    6338/    EF7B : 2A 50 FF            	ld	hl, (tasm_adr)
    6339/    EF7E : ED 4B 57 FF         	ld	bc, (opr_num25)
    6340/    EF82 : 71                  	ld	(hl), c
    6341/    EF83 : 23                  	inc	hl
    6342/    EF84 : 70                  	ld	(hl), b
    6343/    EF85 : C3 0D EF            	jp	mc_end2
    6344/    EF88 :                     
    6345/    EF88 :                     el2_69: ; DB
    6346/    EF88 : 3A 55 FF            	ld	a, (opr1_cd)
    6347/    EF8B : FE 19               	cp	25
    6348/    EF8D : 28 20               	jr	z, el2_691
    6349/    EF8F : FE 26               	cp	38
    6350/    EF91 : C2 7C E8            	jp	nz, asm_err
    6351/    EF94 :                     	
    6352/    EF94 : 2A 57 FF            	ld	hl, (opr_num25)
    6353/    EF97 :                     
    6354/    EF97 : AF                  	xor	a
    6355/    EF98 : 4F                  	ld	c, a
    6356/    EF99 : ED 5B 50 FF         	ld	de, (tasm_adr)
    6357/    EF9D :                     
    6358/    EF9D :                     el2_692:
    6359/    EF9D : 7E                  	ld	a, (hl)
    6360/    EF9E : FE 22               	cp	'"'
    6361/    EFA0 : 28 09               	jr	z, cpstrend
    6362/    EFA2 : B7                  	or	a
    6363/    EFA3 : 28 06               	jr	z, cpstrend
    6364/    EFA5 :                     
    6365/    EFA5 : 12                  	ld	(de), a
    6366/    EFA6 : 23                  	inc	hl
    6367/    EFA7 : 13                  	inc	de
    6368/    EFA8 : 0C                  	inc	c
    6369/    EFA9 : 18 F2               	jr	el2_692
    6370/    EFAB :                     
    6371/    EFAB :                     cpstrend:
    6372/    EFAB : 79                  	ld	a, c
    6373/    EFAC : C3 EE EE            	jp	mc_end
    6374/    EFAF :                     
    6375/    EFAF :                     el2_691:
    6376/    EFAF : ED 4B 57 FF         	ld	bc, (opr_num25)
    6377/    EFB3 : 78                  	ld	a, b
    6378/    EFB4 : B7                  	or	a
    6379/    EFB5 : C2 7C E8            	jp	nz, asm_err
    6380/    EFB8 :                     
    6381/    EFB8 : 2A 50 FF            	ld	hl, (tasm_adr)
    6382/    EFBB : 71                  	ld	(hl), c
    6383/    EFBC : 3E 01               	ld	a, 1
    6384/    EFBE : C3 EE EE            	jp	mc_end
    6385/    EFC1 :                     
    6386/    EFC1 :                     el2_68: ; ORG
    6387/    EFC1 : 3A 55 FF            	ld	a, (opr1_cd)
    6388/    EFC4 : FE 19               	cp	25
    6389/    EFC6 : C2 7C E8            	jp	nz, asm_err
    6390/    EFC9 :                     
    6391/    EFC9 : =>FALSE             	IF SuperMEZ80 = 0
    6392/    EFC9 :                     	xor	a
    6393/    EFC9 :                     	ld	hl, (opr_num25)
    6394/    EFC9 :                     	ld	bc, RAM_B
    6395/    EFC9 :                     	sbc	hl, bc
    6396/    EFC9 :                     	jp	c, asm_err
    6397/    EFC9 :                     
    6398/    EFC9 :                     	ld	bc, RAM_B + RAM_SIZ
    6399/    EFC9 :                     	ld	hl, (opr_num25)
    6400/    EFC9 :                     	sbc	hl, bc
    6401/    EFC9 :                     	jp	nc, asm_err
    6402/    EFC9 : [6391]              	ENDIF
    6403/    EFC9 :                     
    6404/    EFC9 :                     okram:
    6405/    EFC9 : 2A 57 FF            	ld	hl, (opr_num25)
    6406/    EFCC : 22 50 FF            	ld	(tasm_adr), hl
    6407/    EFCF : AF                  	xor	a
    6408/    EFD0 : C3 EE EE            	jp	mc_end
    6409/    EFD3 :                     
    6410/    EFD3 :                     ; CALL nnnn
    6411/    EFD3 :                     el2_45:
    6412/    EFD3 : 3A 55 FF            	ld	a, (opr1_cd)
    6413/    EFD6 : FE 19               	cp	25
    6414/    EFD8 : C2 7C E8            	jp	nz, asm_err
    6415/    EFDB :                     
    6416/    EFDB : 3E CD               	ld	a, 0CDH
    6417/    EFDD :                     
    6418/    EFDD :                     el2_451:
    6419/    EFDD : 2A 50 FF            	ld	hl, (tasm_adr)
    6420/    EFE0 : 77                  	ld	(hl), a		; save op_code
    6421/    EFE1 : 23                  	inc	hl
    6422/    EFE2 : ED 5B 57 FF         	ld	de, (opr_num25)
    6423/    EFE6 : 73                  	ld	(hl), e
    6424/    EFE7 : 23                  	inc	hl
    6425/    EFE8 : 72                  	ld	(hl), d
    6426/    EFE9 :                     
    6427/    EFE9 :                     mc_end3:
    6428/    EFE9 : 3E 03               	ld	a, 3
    6429/    EFEB : C3 EE EE            	jp	mc_end
    6430/    EFEE :                     
    6431/    EFEE :                     ; DJNZ relative number
    6432/    EFEE :                     el2_44:
    6433/    EFEE : 3A 55 FF            	ld	a, (opr1_cd)
    6434/    EFF1 : FE 19               	cp	25
    6435/    EFF3 : C2 7C E8            	jp	nz, asm_err
    6436/    EFF6 :                     
    6437/    EFF6 : CD 86 F3            	call	calc_reladr
    6438/    EFF9 : DA 7C E8            	jp	c, asm_err
    6439/    EFFC : F5                  	push	af
    6440/    EFFD : 3E 10               	ld	a, 10H
    6441/    EFFF :                     el2_441:
    6442/    EFFF : 2A 50 FF            	ld	hl, (tasm_adr)
    6443/    F002 : 77                  	ld	(hl), a		; save op_code
    6444/    F003 : 23                  	inc	hl
    6445/    F004 : F1                  	pop	af
    6446/    F005 : 77                  	ld	(hl), a
    6447/    F006 : C3 0D EF            	jp	mc_end2
    6448/    F009 :                     
    6449/    F009 :                     ;ovr_msg:
    6450/    F009 :                     ;	db	"Over. ", 0
    6451/    F009 :                     
    6452/    F009 :                     ; JR e
    6453/    F009 :                     el2_43:
    6454/    F009 : 3A 55 FF            	ld	a, (opr1_cd)
    6455/    F00C : FE 19               	cp	25
    6456/    F00E : C2 7C E8            	jp	nz, asm_err
    6457/    F011 : CD 86 F3            	call	calc_reladr
    6458/    F014 : DA 7C E8            	jp	c, asm_err
    6459/    F017 : F5                  	push	af
    6460/    F018 : 3E 18               	ld	a, 18H
    6461/    F01A : 18 E3               	jr	el2_441
    6462/    F01C :                     
    6463/    F01C :                     ; RST
    6464/    F01C :                     el2_49:
    6465/    F01C : 2A 57 FF            	ld	hl, (opr_num25)
    6466/    F01F : 7C                  	ld	a, h
    6467/    F020 : B7                  	or	a
    6468/    F021 : C2 7C E8            	jp	nz, asm_err
    6469/    F024 : 7D                  	ld	a, l
    6470/    F025 : 21 36 F0            	ld	hl, rst_no
    6471/    F028 : 01 08 00            	ld	bc, 8
    6472/    F02B : ED B1               	cpir
    6473/    F02D : C2 7C E8            	jp	nz, asm_err
    6474/    F030 :                     
    6475/    F030 : 21 3E F0            	ld	hl, rst_cd
    6476/    F033 : C3 E6 EE            	jp	st_mc1		; get and store MC code
    6477/    F036 :                     
    6478/    F036 : 00 08 10 18 20 28   rst_no:	db	0, 8, 10H, 18H, 20H, 28H, 30H, 38H
             F03C : 30 38             
    6479/    F03E : FF F7 EF E7 DF D7   rst_cd:	db	0FFH, 0F7H, 0EFH, 0E7H, 0DFH, 0D7H, 0CFH, 0C7H
             F044 : CF C7             
    6480/    F046 :                     
    6481/    F046 :                     ;ill_num:	db	"Ill-No. ", 0
    6482/    F046 :                     
    6483/    F046 :                     ; RET CC
    6484/    F046 :                     el2_46:
    6485/    F046 : 3A 55 FF            	ld	a, (opr1_cd)	; get code number of operand No.1
    6486/    F049 : 21 5A F0            	ld	hl, ret_no
    6487/    F04C : 01 08 00            	ld	bc, 8
    6488/    F04F : ED B1               	cpir
    6489/    F051 : C2 7C E8            	jp	nz, asm_err
    6490/    F054 :                     
    6491/    F054 : 21 62 F0            	ld	hl, ret_cd
    6492/    F057 : C3 E6 EE            	jp	st_mc1		; get and store MC code
    6493/    F05A :                     
    6494/    F05A : 06 12 13 14 15 16   ret_no:	db	6, 18, 19, 20, 21, 22, 23, 24
             F060 : 17 18             
    6495/    F062 : E8 E0 F0 D0 C0 F8   ret_cd:	db	0E8H, 0E0H, 0F0H, 0D0H, 0C0H, 0F8H, 0C8H, 0D8H
             F068 : C8 D8             
    6496/    F06A :                     
    6497/    F06A :                     ; JP (HL), JP nnnn, JP (IX), JP (IY)
    6498/    F06A :                     el2_42:
    6499/    F06A : 3A 55 FF            	ld	a, (opr1_cd)	; get code number of operand No.1
    6500/    F06D : FE 19               	cp	25
    6501/    F06F : 28 21               	jr	z, jpnnnn	; JP nnnn
    6502/    F071 : 2E E9               	ld	l, 0E9H
    6503/    F073 : FE 1C               	cp	28		; (HL)?
    6504/    F075 : 28 17               	jr	z, jphl
    6505/    F077 : FE 1D               	cp	29		; (IX)?
    6506/    F079 : 28 0C               	jr	z, jpix
    6507/    F07B : FE 1E               	cp	30		; (IY)?
    6508/    F07D : C2 7C E8            	jp	nz, asm_err
    6509/    F080 :                     
    6510/    F080 :                     ; JP (IY)
    6511/    F080 : 7D                  	ld	a, l
    6512/    F081 : F5                  	push	af
    6513/    F082 : 3E FD               	ld	a, 0FDH
    6514/    F084 : C3 FF EF            	jp	el2_441
    6515/    F087 :                     
    6516/    F087 :                     ; JP (IX)
    6517/    F087 :                     jpix:
    6518/    F087 : 7D                  	ld	a, l
    6519/    F088 : F5                  	push	af
    6520/    F089 : 3E DD               	ld	a, 0DDH
    6521/    F08B : C3 FF EF            	jp	el2_441
    6522/    F08E :                     
    6523/    F08E :                     ; JP (HL)
    6524/    F08E :                     jphl:
    6525/    F08E : 7D                  	ld	a, l
    6526/    F08F : C3 E8 EE            	jp	st_mc11		; set JP (HL) MC code
    6527/    F092 :                     
    6528/    F092 :                     ; JP nnnn
    6529/    F092 :                     jpnnnn:
    6530/    F092 : 3E C3               	ld	a, 0c3h
    6531/    F094 : C3 DD EF            	jp	el2_451		; save OP and jmp address
    6532/    F097 :                     
    6533/    F097 :                     ;
    6534/    F097 :                     ; CP, XOR, OR, AND, SUB section
    6535/    F097 :                     ;
    6536/    F097 :                     ; (defined already)
    6537/    F097 :                     ;rhlnnxy	equ	r_hl_nne - r_hl_nn
    6538/    F097 :                     ;m_num		equ	5	; except No.0 - 4  (IX+,IY+,IX-,IY-,nnnn)
    6539/    F097 :                     ;r_hl_nn:	db	1, 4, 6, 7, 9, 10, 12, 28
    6540/    F097 :                     ;		db	25
    6541/    F097 :                     ;ex_sr_:	db	33, 36, 34, 37
    6542/    F097 :                     ;r_hl_nne:
    6543/    F097 :                     ;
    6544/    F097 : 06 06 06 06 46      base1:		db	06H, 06H, 06H, 06H, 46h
    6545/    F09C : 06 05 04 03 02 01   		db	06H, 05H, 04H, 03H, 02H, 01H, 00H, 07H
             F0A2 : 00 07             
    6546/    F0A4 :                     
    6547/    F0A4 :                     el2_41: ; CP
    6548/    F0A4 : 16 B8               	ld	d, 0b8h
    6549/    F0A6 : 18 0E               	jr	and_cp
    6550/    F0A8 :                     
    6551/    F0A8 :                     el2_29: ; XOR
    6552/    F0A8 : 16 A8               	ld	d, 0a8h
    6553/    F0AA : 18 0A               	jr	and_cp
    6554/    F0AC :                     
    6555/    F0AC :                     el2_28: ; OR
    6556/    F0AC : 16 B0               	ld	d, 0b0h
    6557/    F0AE : 18 06               	jr	and_cp
    6558/    F0B0 :                     
    6559/    F0B0 :                     el2_27: ; AND
    6560/    F0B0 : 16 A0               	ld	d, 0a0h
    6561/    F0B2 : 18 02               	jr	and_cp
    6562/    F0B4 :                     
    6563/    F0B4 :                     el2_24: ; SUB
    6564/    F0B4 : 16 90               	ld	d, 090h
    6565/    F0B6 :                     
    6566/    F0B6 :                     and_cp:
    6567/    F0B6 : 3A 55 FF            	ld	a, (opr1_cd)	; get code number of operand No.1
    6568/    F0B9 : 21 24 EC            	ld	hl, r_hl_nn
    6569/    F0BC : 01 0D 00            	ld	bc, rhlnnxy
    6570/    F0BF : ED B1               	cpir
    6571/    F0C1 : C2 7C E8            	jp	nz, asm_err
    6572/    F0C4 :                     
    6573/    F0C4 : 21 97 F0            	ld	hl, base1
    6574/    F0C7 : 09                  	add	hl, bc
    6575/    F0C8 : 7E                  	ld	a, (hl)
    6576/    F0C9 : B2                  	or	a, d		; make code operand1
    6577/    F0CA : 57                  	ld	d, a		; save operand1
    6578/    F0CB : 79                  	ld	a, c
    6579/    F0CC : FE 05               	cp	m_num		; check IX+,IY+,IX-,IY-,nnnn
    6580/    F0CE : DA D5 F0            	jp	c, el2_410
    6581/    F0D1 : 7A                  	ld	a, d		; restore
    6582/    F0D2 : C3 E8 EE            	jp	st_mc11
    6583/    F0D5 :                     	
    6584/    F0D5 :                     ; IX+,IY+,IX-,IY-,nnnn
    6585/    F0D5 :                     el2_410:
    6586/    F0D5 : FE 04               	cp	4 		; cp nn ?
    6587/    F0D7 : 38 0E               	jr	c, cp_ixiy	; no, IX+,IY+,IX-,IY-
    6588/    F0D9 :                     
    6589/    F0D9 :                     ; CP nn
    6590/    F0D9 : 2A 57 FF            	ld	hl, (opr_num25)
    6591/    F0DC : 7C                  	ld	a, h
    6592/    F0DD : B7                  	or	a
    6593/    F0DE : C2 7C E8            	jp	nz, asm_err
    6594/    F0E1 :                     
    6595/    F0E1 : 7D                  	ld	a, l
    6596/    F0E2 :                     el2_411:
    6597/    F0E2 : F5                  	push	af		; adjust save I/F
    6598/    F0E3 : 7A                  	ld	a, d		; restore cp opecode
    6599/    F0E4 : C3 FF EF            	jp	el2_441
    6600/    F0E7 :                     	
    6601/    F0E7 :                     ; CP (IX+nn), CP (IY+nn), CP (IX-nn), CP (IY-nn)
    6602/    F0E7 :                     
    6603/    F0E7 :                     cp_ixiy:
    6604/    F0E7 : FE 02               	cp	2
    6605/    F0E9 : 3E FD               	ld	a, 0FDH
    6606/    F0EB : 38 02               	jr	c, cp_iy
    6607/    F0ED : 3E DD               	ld	a, 0DDH
    6608/    F0EF :                     cp_iy:
    6609/    F0EF : 21 5B FF            	ld	hl, opr_num37
    6610/    F0F2 : 09                  	add	hl, bc
    6611/    F0F3 : 4E                  	ld	c, (hl)
    6612/    F0F4 :                     cp_xy1:	
    6613/    F0F4 : 2A 50 FF            	ld	hl, (tasm_adr)
    6614/    F0F7 : 77                  	ld	(hl), a		; save op_code
    6615/    F0F8 : 7A                  	ld	a, d		; restore 2nd operand
    6616/    F0F9 : 23                  	inc	hl
    6617/    F0FA : 77                  	ld	(hl), a
    6618/    F0FB : 23                  	inc	hl
    6619/    F0FC : 71                  	ld	(hl), c
    6620/    F0FD : C3 E9 EF            	jp	mc_end3
    6621/    F100 :                     
    6622/    F100 :                     ;
    6623/    F100 :                     ; DEC, INC section
    6624/    F100 :                     ;
    6625/    F100 :                     
    6626/    F100 : =12H                di_nbs		equ	d_i_tbe - d_i_tb
    6627/    F100 : =6H                 di_ixynum	equ	d_i_tbe - dix_tbl
    6628/    F100 : =4H                 di_ixnnum	equ	d_i_tbe - dixn_tbl
    6629/    F100 : =2H                 di_iynnum	equ	d_i_tbe - diyn_tbl
    6630/    F100 :                     
    6631/    F100 : 01 04 05 06 07 08   d_i_tb:		db	1, 4, 5, 6, 7, 8
    6632/    F106 : 09 0A 0B 0C 10 1C   		db	9, 10, 11, 12, 16, 28
    6633/    F10C : 0E 0F               dix_tbl:	db	14, 15		; IX, IY
    6634/    F10E : 21 24               dixn_tbl:	db	33, 36		; IX+nn, IX-nn
    6635/    F110 : 22 25               diyn_tbl:	db	34, 37		; IY+nn, IY-nn
    6636/    F112 :                     d_i_tbe:
    6637/    F112 :                     
    6638/    F112 : 35 35               DEC_opr:	db	35h, 35h	; IY-, IY+
    6639/    F114 : 35 35               		db	35h, 35h	; IX-, IX+
    6640/    F116 : 2B 2B               		db	2bh, 2bh 	; IY, IX
    6641/    F118 : 35 3B 2D 2B 25 1D   		db	35h, 3Bh, 2Dh, 2Bh, 25h, 1Dh
    6642/    F11E : 1B 15 0D 0B 05 3D   		db	1Bh, 15h, 0Dh, 0Bh, 05h, 3Dh
    6643/    F124 :                     
    6644/    F124 : 34 34               INC_opr:	db	34h, 34h	; IY-, IY+
    6645/    F126 : 34 34               		db	34h, 34h	; IX-, IX+
    6646/    F128 : 23 23               		db	23h, 23h	; IY,  IX
    6647/    F12A : 34 33 2C 23 24 1C   		db	34h, 33h, 2Ch, 23h, 24h, 1Ch
    6648/    F130 : 13 14 0C 03 04 3C   		db	13h, 14h, 0Ch, 03h, 04h, 3Ch
    6649/    F136 :                     
    6650/    F136 :                     el2_26: ; DEC
    6651/    F136 : 11 12 F1            	ld	de, DEC_opr
    6652/    F139 : 18 03               	jr	el2_di
    6653/    F13B :                     
    6654/    F13B :                     el2_23: ; INC
    6655/    F13B : 11 24 F1            	ld	de, INC_opr
    6656/    F13E :                     
    6657/    F13E :                     el2_di:
    6658/    F13E : 3A 55 FF            	ld	a, (opr1_cd)	; get code number of operand No.1
    6659/    F141 : 21 00 F1            	ld	hl, d_i_tb
    6660/    F144 : 01 12 00            	ld	bc, di_nbs
    6661/    F147 : ED B1               	cpir
    6662/    F149 : 62                  	ld	h, d
    6663/    F14A : 6B                  	ld	l, e
    6664/    F14B : C2 7C E8            	jp	nz, asm_err
    6665/    F14E :                     
    6666/    F14E : 79                  	ld	a, c
    6667/    F14F : 16 FD               	ld	d, 0FDH		; set IY extended OP
    6668/    F151 : FE 06               	cp	di_ixynum
    6669/    F153 : D2 E6 EE            	jp	nc, st_mc1	; 1 MC code
    6670/    F156 :                     
    6671/    F156 : 09                  	add	hl, bc
    6672/    F157 : 7E                  	ld	a, (hl)		; get 2nd operand
    6673/    F158 : 5F                  	ld	e, a		; save
    6674/    F159 : 79                  	ld	a, c
    6675/    F15A : FE 04               	cp	di_ixnnum
    6676/    F15C : 38 08               	jr	c, di_3mc
    6677/    F15E :                     	
    6678/    F15E :                     	; 2 MC. : INC IX, IY, DEC IX, IY
    6679/    F15E :                     	
    6680/    F15E : 28 02               	jr	z, di_iy
    6681/    F160 : 16 DD               	ld	d, 0DDH		; set IX extended OP
    6682/    F162 :                     di_iy:
    6683/    F162 : 7B                  	ld	a, e		; restoe 2nd operand
    6684/    F163 : C3 E2 F0            	jp	el2_411		; 2 MC (IX, IY)
    6685/    F166 :                     
    6686/    F166 :                     	; 3 MC. : INC (IX+nn) etc,.
    6687/    F166 :                     di_3mc:
    6688/    F166 : FE 02               	cp	di_iynnum	; IY+-nn?
    6689/    F168 : 38 02               	jr	c, di_3mc1
    6690/    F16A : 16 DD               	ld	d, 0DDH		; set IX extended OP
    6691/    F16C :                     di_3mc1:
    6692/    F16C : 7A                  	ld	a, d		; adjust I/F
    6693/    F16D : 53                  	ld	d, e		; adjust I/F
    6694/    F16E : C3 EF F0            	jp	cp_iy		; make 3 MC
    6695/    F171 :                     	
    6696/    F171 :                     ;
    6697/    F171 :                     ; PUSH, POP section
    6698/    F171 :                     ;
    6699/    F171 :                     
    6700/    F171 : =6H                 pp_no		equ	pp_tble - pp_tbl
    6701/    F171 : =2H                 pp_ixiy		equ	pp_tble - pp_ixy
    6702/    F171 :                     
    6703/    F171 : 02 05 08 0B         pp_tbl:		db	2, 5, 8, 11
    6704/    F175 : 0E 0F               pp_ixy:		db	14, 15
    6705/    F177 :                     pp_tble:	
    6706/    F177 :                     
    6707/    F177 : E0 E0               pp_base:	db	0E0h, 0E0h ; IY, IX
    6708/    F179 : E0 D0 C0 F0         		db	0E0h, 0D0h, 0C0h, 0f0h
    6709/    F17D :                     
    6710/    F17D :                     el2_9:  ; POP
    6711/    F17D : 16 01               	ld	d, 01h		; base code for pop operand
    6712/    F17F : 18 02               	jr	el2_81
    6713/    F181 :                     
    6714/    F181 :                     el2_8:  ; PUSH
    6715/    F181 : 16 05               	ld	d, 05h
    6716/    F183 :                     
    6717/    F183 :                     el2_81:
    6718/    F183 : 21 71 F1            	ld	hl, pp_tbl
    6719/    F186 : 01 06 00            	ld	bc, pp_no
    6720/    F189 : 3A 55 FF            	ld	a, (opr1_cd)	; get code number of operand No.1
    6721/    F18C : ED B1               	cpir
    6722/    F18E : C2 7C E8            	jp	nz, asm_err
    6723/    F191 :                     
    6724/    F191 : 21 77 F1            	ld	hl, pp_base
    6725/    F194 : 09                  	add	hl, bc
    6726/    F195 : 7E                  	ld	a, (hl)
    6727/    F196 : B2                  	or	d		; make opecode
    6728/    F197 : 57                  	ld	d, a		; save
    6729/    F198 :                     
    6730/    F198 : 79                  	ld	a, c
    6731/    F199 : FE 02               	cp	pp_ixiy
    6732/    F19B : 7A                  	ld	a, d		; restore
    6733/    F19C : D2 E8 EE            	jp	nc, st_mc11	; 1 MC code
    6734/    F19F :                     
    6735/    F19F : 1E FD               	ld	e, 0FDH		; set IY extended OP
    6736/    F1A1 : 79                  	ld	a, c
    6737/    F1A2 : B7                  	or	a		; IY
    6738/    F1A3 : 28 02               	jr	z, el2_82
    6739/    F1A5 : 1E DD               	ld	e, 0DDH		; set IX code
    6740/    F1A7 :                     el2_82:
    6741/    F1A7 : 7A                  	ld	a, d
    6742/    F1A8 : F5                  	push	af		; adjust I/F
    6743/    F1A9 : 7B                  	ld	a, e		; adjust I/F
    6744/    F1AA : C3 FF EF            	jp	el2_441		; make 2 MC
    6745/    F1AD :                     
    6746/    F1AD :                     ;
    6747/    F1AD :                     ; SRL, SRA, SLA, RR, RL, RRC, RLC section
    6748/    F1AD :                     ;
    6749/    F1AD :                     
    6750/    F1AD :                     
    6751/    F1AD :                     ; already defined
    6752/    F1AD :                     ; r_hl_nn:	db	1, 4, 6, 7, 9, 10, 12, 28
    6753/    F1AD :                     ;		db	25
    6754/    F1AD :                     ; ex_sr_:		db	33, 36, 34, 37
    6755/    F1AD :                     
    6756/    F1AD : =8H                 sr_num		equ	8
    6757/    F1AD : =4H                 ex_sr_num	equ	ld_en3
    6758/    F1AD :                     
    6759/    F1AD :                     ;SRL_cd:	db	3Eh, 3Dh, 3Ch, 3Bh, 3Ah, 39h, 38h, 3Fh
    6760/    F1AD :                     ;SRA_cd:	db	2Eh, 2Dh, 2Ch, 2Bh, 2Ah, 29h, 28h, 2Fh
    6761/    F1AD :                     ;RR_cd:		db	1Eh, 1Dh, 1Ch, 1Bh, 1Ah, 19h, 18h, 1Fh
    6762/    F1AD :                     ;RRC_cd:	db	0Eh, 0Dh, 0Ch, 0Bh, 0Ah, 09h, 08h, 0Fh
    6763/    F1AD :                     ;SLA_cd:	db	26h, 25h, 24h, 23h, 22h, 21h, 20h, 27h
    6764/    F1AD :                     ;RL_cd:		db	16h, 15h, 14h, 13h, 12h, 11h, 10h, 17h
    6765/    F1AD :                     ;RLC_cd:	db	06h, 05h, 04h, 03h, 02h, 01h, 00h, 07h
    6766/    F1AD :                     ;RLC_cd:	db	06h, 05h, 04h, 03h, 02h, 01h, 00h, 07h
    6767/    F1AD :                     
    6768/    F1AD : =0H                 RLC_or	equ	0
    6769/    F1AD : =10H                RL_or	equ	10h
    6770/    F1AD : =20H                SLA_or	equ	20h
    6771/    F1AD : =8H                 RRC_or	equ	08h
    6772/    F1AD : =18H                RR_or	equ	18h
    6773/    F1AD : =28H                SRA_or	equ	28h
    6774/    F1AD : =38H                SRL_or	equ	38h
    6775/    F1AD :                     
    6776/    F1AD : 06 05 04 03 02 01   SR_base:	db	06h, 05h, 04h, 03h, 02h, 01h, 00h, 07h
             F1B3 : 00 07             
    6777/    F1B5 :                     
    6778/    F1B5 :                     
    6779/    F1B5 :                     
    6780/    F1B5 :                     el2_20:	; SRL
    6781/    F1B5 : 11 3E 38            	ld	de, (SRL_or << 8) | 3Eh
    6782/    F1B8 : 18 1C               	jr	sr_lookfor
    6783/    F1BA :                     el2_19:	; SRA
    6784/    F1BA : 11 2E 28            	ld	de, (SRA_or << 8) | 2Eh
    6785/    F1BD : 18 17               	jr	sr_lookfor
    6786/    F1BF :                     el2_18:	; SLA
    6787/    F1BF : 11 26 20            	ld	de, (SLA_or << 8) | 26h
    6788/    F1C2 : 18 12               	jr	sr_lookfor
    6789/    F1C4 :                     el2_17:	; RR
    6790/    F1C4 : 11 1E 18            	ld	de, (RR_or << 8) | 1Eh
    6791/    F1C7 : 18 0D               	jr	sr_lookfor
    6792/    F1C9 :                     el2_13:	; RL
    6793/    F1C9 : 11 16 10            	ld	de, (RL_or << 8) | 16h
    6794/    F1CC : 18 08               	jr	sr_lookfor
    6795/    F1CE :                     el2_16:	; RRC
    6796/    F1CE : 11 0E 08            	ld	de, (RRC_or << 8) | 0Eh
    6797/    F1D1 : 18 03               	jr	sr_lookfor
    6798/    F1D3 :                     el2_12:	; RLC
    6799/    F1D3 : 11 06 00            	ld	de, (RLC_or << 8) | 06h
    6800/    F1D6 :                     
    6801/    F1D6 :                     sr_lookfor:
    6802/    F1D6 : 3A 55 FF            	ld	a, (opr1_cd)	; get code number of operand No.1
    6803/    F1D9 : 21 24 EC            	ld	hl, r_hl_nn
    6804/    F1DC : 01 08 00            	ld	bc, sr_num
    6805/    F1DF : ED B1               	cpir
    6806/    F1E1 : 20 0C               	jr	nz, nxt_sr
    6807/    F1E3 :                     
    6808/    F1E3 : 21 AD F1            	ld	hl, SR_base
    6809/    F1E6 : 09                  	add	hl, bc
    6810/    F1E7 : 7E                  	ld	a, (hl)
    6811/    F1E8 : B2                  	or	d		; make 2nd opcode
    6812/    F1E9 :                     
    6813/    F1E9 :                     el2_130:
    6814/    F1E9 : F5                  	push	af		; adjust I/F
    6815/    F1EA : 3E CB               	ld	a, 0cbh		; set OP code
    6816/    F1EC : C3 FF EF            	jp	el2_441
    6817/    F1EF :                     
    6818/    F1EF :                     nxt_sr:
    6819/    F1EF : 21 2D EC            	ld	hl, ex_sr_
    6820/    F1F2 : 01 04 00            	ld	bc, ex_sr_num
    6821/    F1F5 : ED B1               	cpir
    6822/    F1F7 : C2 7C E8            	jp	nz, asm_err
    6823/    F1FA :                     
    6824/    F1FA : 16 FD               	ld	d, 0FDh		; for IY
    6825/    F1FC : 79                  	ld	a, c
    6826/    F1FD : FE 02               	cp	2
    6827/    F1FF : 38 02               	jr	c, sr_iy1
    6828/    F201 : 16 DD               	ld	d, 0DDh		; for IX
    6829/    F203 :                     
    6830/    F203 :                     sr_iy1:	; D: opecode, E : code operand4
    6831/    F203 :                     
    6832/    F203 : 21 5B FF            	ld	hl, opr_num37
    6833/    F206 : 09                  	add	hl, bc
    6834/    F207 : 4E                  	ld	c, (hl)
    6835/    F208 : 23                  	inc	hl
    6836/    F209 : 46                  	ld	b, (hl)
    6837/    F20A : 3E CB               	ld	a, 0CBH
    6838/    F20C :                     
    6839/    F20C :                     mc_end41:
    6840/    F20C : 2A 50 FF            	ld	hl, (tasm_adr)
    6841/    F20F : 72                  	ld	(hl), d		; save 1st MC
    6842/    F210 : 23                  	inc	hl
    6843/    F211 : 77                  	ld	(hl), a		; save 2nd MC 
    6844/    F212 : 23                  	inc	hl
    6845/    F213 : 71                  	ld	(hl), c		; save 3rd MC (8bit litelal)
    6846/    F214 : 23                  	inc	hl
    6847/    F215 : 73                  	ld	(hl), e		; save 4th MC
    6848/    F216 :                     mc_end4:
    6849/    F216 : 3E 04               	ld	a, 4
    6850/    F218 : C3 EE EE            	jp	mc_end
    6851/    F21B :                     
    6852/    F21B :                     ;
    6853/    F21B :                     ; IM section
    6854/    F21B :                     ;
    6855/    F21B :                     el2_54:	; IM
    6856/    F21B : 3A 58 FF            	ld	a, (opr_num25+1)	; get high byte
    6857/    F21E : B7                  	or	a
    6858/    F21F : C2 7C E8            	jp	nz, asm_err
    6859/    F222 : 3A 57 FF            	ld	a, (opr_num25)		; get low byte
    6860/    F225 : FE 03               	cp	3
    6861/    F227 : D2 7C E8            	jp	nc, asm_err
    6862/    F22A :                     
    6863/    F22A : 0E 46               	ld	c, 046h		; IM 0
    6864/    F22C : B7                  	or	a
    6865/    F22D : 28 07               	jr	z, el2_541
    6866/    F22F :                     
    6867/    F22F : 0E 56               	ld	c, 056h		; IM 1
    6868/    F231 : 3D                  	dec	a
    6869/    F232 : 28 02               	jr	z, el2_541
    6870/    F234 : 0E 5E               	ld	c, 05Eh		; IM 2
    6871/    F236 :                     
    6872/    F236 :                     el2_541:
    6873/    F236 : 79                  	ld	a, c
    6874/    F237 :                     
    6875/    F237 :                     el2_5411:
    6876/    F237 : F5                  	push	af		; adjust I/F
    6877/    F238 : 3E ED               	ld	a, 0EDh		; set MC 1
    6878/    F23A : C3 FF EF            	jp	el2_441
    6879/    F23D :                     
    6880/    F23D :                     ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    6881/    F23D :                     ; get opecode
    6882/    F23D :                     ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    6883/    F23D :                     analize_input:
    6884/    F23D : CD 00 F3            	call	sch_opecode
    6885/    F240 : D8                  	ret	c		; error return
    6886/    F241 : 32 54 FF            	ld	(opc_cd), a	; save code number of opecode
    6887/    F244 : CD 77 F2            	call	inc_element
    6888/    F247 :                     
    6889/    F247 : 7E                  	ld	a, (hl)
    6890/    F248 : B7                  	or	a
    6891/    F249 : C8                  	ret	z		; no operand
    6892/    F24A : FE 20               	cp	a, ' '		; check opecode delimiter
    6893/    F24C : C2 75 F2            	jp	nz, sx_err	; not space then syntax error
    6894/    F24F :                     
    6895/    F24F :                     	; get code of operand 1
    6896/    F24F :                     
    6897/    F24F : CD 7F F2            	call	analize_opr
    6898/    F252 : D8                  	ret	c		; error
    6899/    F253 : 32 55 FF            	ld	(opr1_cd), a	; save operand code to opr1
    6900/    F256 : 08                  	ex	af, af'
    6901/    F257 : CD 77 F2            	call	inc_element
    6902/    F25A : 08                  	ex	af, af'
    6903/    F25B : FE 26               	cp	38		; check operand code 38:='"'
    6904/    F25D : C8                  	ret	z
    6905/    F25E : 7E                  	ld	a, (hl)
    6906/    F25F : B7                  	or	a
    6907/    F260 : C8                  	ret	z		; no operand2
    6908/    F261 : FE 2C               	cp	a, ','		; check opecode delimiter
    6909/    F263 : 20 10               	jr	nz, sx_err
    6910/    F265 :                     
    6911/    F265 :                     	; get code of operand 2
    6912/    F265 :                     
    6913/    F265 : CD 7F F2            	call	analize_opr
    6914/    F268 : D8                  	ret	c		; error
    6915/    F269 : 32 56 FF            	ld	(opr2_cd), a	; save operand code to opr1
    6916/    F26C : CD 77 F2            	call	inc_element
    6917/    F26F :                     
    6918/    F26F : 7E                  	ld	a, (hl)
    6919/    F270 : B7                  	or	a
    6920/    F271 : 20 02               	jr	nz, sx_err	; error end
    6921/    F273 : C9                  	ret
    6922/    F274 :                     
    6923/    F274 :                     an_err:
    6924/    F274 : F1                  	pop	af
    6925/    F275 :                     sx_err:
    6926/    F275 : 37                  	scf
    6927/    F276 : C9                  	ret
    6928/    F277 :                     
    6929/    F277 :                     inc_element:
    6930/    F277 : 3A 52 FF            	ld	a, (element_cnt)
    6931/    F27A : 3C                  	inc	a
    6932/    F27B : 32 52 FF            	ld	(element_cnt), a
    6933/    F27E : C9                  	ret
    6934/    F27F :                     
    6935/    F27F :                     ;------------------------
    6936/    F27F :                     ; HL : input buffer
    6937/    F27F :                     ;------------------------
    6938/    F27F :                     analize_opr:
    6939/    F27F : 23                  	inc	hl		; HL : top of operand strings point
    6940/    F280 : CD F6 F2            	call	sch_operand1
    6941/    F283 : D0                  	ret	nc		; match, then retrun
    6942/    F284 :                     	
    6943/    F284 :                     	; search (IX+, (IY+, (IX-, (IY-
    6944/    F284 :                     
    6945/    F284 : CD FB F2            	call	sch_operand1_1
    6946/    F287 : 38 40               	jr	c, nxt_a1	; jump, in not match
    6947/    F289 :                     
    6948/    F289 :                     	; analize "nn)"
    6949/    F289 :                     
    6950/    F289 : F5                  	push	af		; save operand code
    6951/    F28A : CD 29 F3            	call	get_number	; DE : binary
    6952/    F28D : DA 74 F2            	jp	c, an_err
    6953/    F290 :                     	
    6954/    F290 : 7A                  	ld	a, d
    6955/    F291 : B7                  	or	a
    6956/    F292 : 20 E0               	jr	nz, an_err	; over 255
    6957/    F294 :                     	
    6958/    F294 : 7E                  	ld	a, (hl)
    6959/    F295 : FE 29               	cp	')'
    6960/    F297 : 20 DB               	jr	nz, an_err
    6961/    F299 :                     
    6962/    F299 : 23                  	inc	hl
    6963/    F29A : F1                  	pop	af		; restore operand code
    6964/    F29B :                     
    6965/    F29B : F5                  	push	af
    6966/    F29C : FE 21               	cp 	33		; IX+?
    6967/    F29E : 20 05               	jr	nz, nxt_a2
    6968/    F2A0 : 01 5E FF            	ld	bc, opr_num33
    6969/    F2A3 : 18 07               	jr	nxt_a21
    6970/    F2A5 :                     
    6971/    F2A5 :                     nxt_a2:
    6972/    F2A5 : FE 22               	cp 	34		; IY+?
    6973/    F2A7 : 20 0B               	jr	nz, nxt_a3
    6974/    F2A9 : 01 5C FF            	ld	bc, opr_num34
    6975/    F2AC :                     
    6976/    F2AC :                     nxt_a21:
    6977/    F2AC : 7B                  	ld	a, e
    6978/    F2AD : FE 80               	cp	80H
    6979/    F2AF : 30 C3               	jr	nc, an_err
    6980/    F2B1 :                     
    6981/    F2B1 :                     nxt_a22:
    6982/    F2B1 : 02                  	ld	(bc),a		; save binary
    6983/    F2B2 : F1                  	pop	af
    6984/    F2B3 : C9                  	ret
    6985/    F2B4 :                     	
    6986/    F2B4 :                     nxt_a3:
    6987/    F2B4 : FE 24               	cp 	36		; IX-?
    6988/    F2B6 : 20 0C               	jr	nz, nxt_a4
    6989/    F2B8 : 01 5D FF            	ld	bc, opr_num36
    6990/    F2BB :                     
    6991/    F2BB :                     nxt_a31:
    6992/    F2BB : 7B                  	ld	a, e
    6993/    F2BC : FE 81               	cp	81H
    6994/    F2BE : 30 B4               	jr	nc, an_err
    6995/    F2C0 : ED 44               	neg
    6996/    F2C2 : 18 ED               	jr	nxt_a22
    6997/    F2C4 :                     	
    6998/    F2C4 :                     nxt_a4:	; IY-
    6999/    F2C4 : 01 5B FF            	ld	bc, opr_num37
    7000/    F2C7 : 18 F2               	jr	nxt_a31
    7001/    F2C9 :                     
    7002/    F2C9 :                     ; check '('
    7003/    F2C9 :                     nxt_a1:
    7004/    F2C9 : 7E                  	ld	a, (hl)
    7005/    F2CA : FE 28               	cp	'('
    7006/    F2CC : 20 12               	jr	nz, chk_strings
    7007/    F2CE :                     	
    7008/    F2CE :                     	; get number
    7009/    F2CE :                     	
    7010/    F2CE : 23                  	inc	hl
    7011/    F2CF : CD 29 F3            	call	get_number
    7012/    F2D2 : D8                  	ret	c		; error number
    7013/    F2D3 :                     
    7014/    F2D3 : 7E                  	ld	a, (hl)
    7015/    F2D4 : FE 29               	cp	')'
    7016/    F2D6 : 20 9D               	jr	nz, sx_err
    7017/    F2D8 :                     
    7018/    F2D8 : 23                  	inc	hl
    7019/    F2D9 : ED 53 59 FF         	ld	(opr_num35),de	; save binary
    7020/    F2DD : 3E 23               	ld	a, 35		; set operand code
    7021/    F2DF : C9                  	ret			; normal end
    7022/    F2E0 :                     
    7023/    F2E0 :                     chk_strings:
    7024/    F2E0 : FE 22               	cp	'"'
    7025/    F2E2 : 20 07               	jr	nz, only_num
    7026/    F2E4 : 23                  	inc	hl
    7027/    F2E5 : 22 57 FF            	ld	(opr_num25), hl
    7028/    F2E8 : 3E 26               	ld	a, 38
    7029/    F2EA : C9                  	ret
    7030/    F2EB :                     
    7031/    F2EB :                     only_num:
    7032/    F2EB : CD 29 F3            	call	get_number
    7033/    F2EE : D8                  	ret	c		; error number
    7034/    F2EF : ED 53 57 FF         	ld	(opr_num25),de	; save binary
    7035/    F2F3 : 3E 19               	ld	a, 25		; set operand code
    7036/    F2F5 : C9                  	ret			; normal end
    7037/    F2F6 :                     
    7038/    F2F6 :                     ;------------------
    7039/    F2F6 :                     ; HL : input buffer
    7040/    F2F6 :                     ;------------------
    7041/    F2F6 :                     sch_operand1:
    7042/    F2F6 : 11 9B E7            	ld	de, operand_cds
    7043/    F2F9 : 18 0B               	jr	sh_0
    7044/    F2FB :                     
    7045/    F2FB :                     ;------------------
    7046/    F2FB :                     ; HL : input buffer
    7047/    F2FB :                     ; search (IX+, (IY+, (IX-, (IY-
    7048/    F2FB :                     ;------------------
    7049/    F2FB :                     sch_operand1_1:
    7050/    F2FB : 11 FB E7            	ld	de, opr_cd1
    7051/    F2FE : 18 06               	jr	sh_0
    7052/    F300 :                     
    7053/    F300 :                     ;----------------------------------------------------------
    7054/    F300 :                     ; Search code number of opecode from input strings
    7055/    F300 :                     ; 
    7056/    F300 :                     ; output:
    7057/    F300 :                     ; if mach opecode ; HL : next point of input strings
    7058/    F300 :                     ;		    A  : a code number of opecode
    7059/    F300 :                     ; not mach	  ; CF = 1
    7060/    F300 :                     ;----------------------------------------------------------
    7061/    F300 :                     sch_opecode:
    7062/    F300 : 21 77 FF            	ld	hl, line_buf
    7063/    F303 : 11 7E E6            	ld	de, ope_cds
    7064/    F306 :                     
    7065/    F306 :                     sh_0:
    7066/    F306 : E5                  	push	hl
    7067/    F307 :                     sh_1:
    7068/    F307 : 1A                  	ld	a, (de)
    7069/    F308 : BE                  	cp	(hl)
    7070/    F309 : 20 04               	jr	nz, sch_next
    7071/    F30B :                     	
    7072/    F30B :                     	; match
    7073/    F30B : 23                  	inc	hl
    7074/    F30C : 13                  	inc	de
    7075/    F30D : 18 F8               	jr	sh_1
    7076/    F30F :                     
    7077/    F30F :                     sch_next:
    7078/    F30F : E6 80               	and	dm_bit		; delimiter?
    7079/    F311 : 20 0E               	jr	nz, ok_match
    7080/    F313 :                     	
    7081/    F313 :                     skip_next:
    7082/    F313 : 13                  	inc	de
    7083/    F314 : 1A                  	ld	a, (de)
    7084/    F315 : E6 80               	and	dm_bit
    7085/    F317 : 28 FA               	jr	z, skip_next
    7086/    F319 :                     
    7087/    F319 :                     	; detect delimiter string
    7088/    F319 :                     
    7089/    F319 : 13                  	inc	de		; next search strings
    7090/    F31A :                     	
    7091/    F31A : 1A                  	ld	a, (de)
    7092/    F31B : B7                  	or	a		; tabel end?
    7093/    F31C : 28 08               	jr	z, n_end	; yes, no match return
    7094/    F31E :                     
    7095/    F31E : E1                  	pop	hl
    7096/    F31F : 18 E5               	jr	sh_0		; search again
    7097/    F321 :                     
    7098/    F321 :                     	; match opecode strings
    7099/    F321 :                     	; a : opecode number
    7100/    F321 :                     
    7101/    F321 :                     ok_match:
    7102/    F321 : 1A                  	ld	a, (de)
    7103/    F322 : E6 7F               	and	a, 7Fh		; mask dm_bit, get code of opecode
    7104/    F324 : D1                  	pop	de		; discard top string address
    7105/    F325 : C9                  	ret
    7106/    F326 :                     	
    7107/    F326 :                     ; no opecode strings maching
    7108/    F326 :                     n_end:
    7109/    F326 : E1                  	pop	hl
    7110/    F327 : 37                  	scf
    7111/    F328 : C9                  	ret
    7112/    F329 :                     
    7113/    F329 :                     ;---------------------
    7114/    F329 :                     ; HL : string buffer
    7115/    F329 :                     ;
    7116/    F329 :                     ; output : de or CF
    7117/    F329 :                     ;----------------------
    7118/    F329 :                     get_number:
    7119/    F329 :                     
    7120/    F329 : 11 9A FF            	ld	de, num_string
    7121/    F32C : 0E 00               	ld	c, 0
    7122/    F32E :                     	
    7123/    F32E :                     ; check first character
    7124/    F32E :                     
    7125/    F32E : CD 6B F3            	call	dec_chr		; check decimal chrarcter
    7126/    F331 : D8                  	ret	c		; no number inputs detect
    7127/    F332 :                     
    7128/    F332 :                     ;  detect 1st number( only 0 to 9 )
    7129/    F332 :                     
    7130/    F332 : 12                  	ld	(de), a		; save to buffer
    7131/    F333 : 13                  	inc	de
    7132/    F334 : 23                  	inc	hl
    7133/    F335 : 0C                  	inc	c
    7134/    F336 :                     
    7135/    F336 :                     ; check 2nd, 3rd, 4th, 5th number string
    7136/    F336 :                     
    7137/    F336 :                     lop_gnum:
    7138/    F336 : CD 75 F3            	call	hex_chr
    7139/    F339 : 38 0B               	jr	c, ck_endmk	; no number inputs detect
    7140/    F33B :                     
    7141/    F33B :                     ; detect 2nd, 3rd, 4th, 5th number (include A to F)
    7142/    F33B :                     
    7143/    F33B : 12                  	ld	(de), a		; save to buffer
    7144/    F33C : 13                  	inc	de
    7145/    F33D : 23                  	inc	hl
    7146/    F33E : 0C                  	inc	c
    7147/    F33F : 79                  	ld	a, c
    7148/    F340 : FE 07               	cp	NUMLEN		; buffer check
    7149/    F342 : 28 2F               	jr	z, no_num	; overfllow. error return
    7150/    F344 : 18 F0               	jr	lop_gnum
    7151/    F346 :                     
    7152/    F346 :                     ck_endmk:
    7153/    F346 : 08                  	ex	af, af'
    7154/    F347 : AF                  	xor	a
    7155/    F348 : 12                  	ld	(de), a		; set delimiter
    7156/    F349 : 08                  	ex	af, af'
    7157/    F34A : FE 48               	cp	'H'		; check hex?
    7158/    F34C : 28 0B               	jr	z, bi_hex
    7159/    F34E :                     
    7160/    F34E :                     ;	get binary from decimal string
    7161/    F34E :                     ;bi_dec:
    7162/    F34E : E5                  	push	hl
    7163/    F34F : 21 9A FF            	ld	hl, num_string
    7164/    F352 : CD DB D0            	call	GET_dNUM	; return bc
    7165/    F355 : E1                  	pop	hl
    7166/    F356 : 50                  	ld	d, b		; set binary to DE
    7167/    F357 : 59                  	ld	e, c		; set binary to DE
    7168/    F358 : C9                  	ret
    7169/    F359 :                     
    7170/    F359 :                     ;	ret	nc		; if CF =1, try hex to bin
    7171/    F359 :                     ;	dec	hl		; adjust hl pointer
    7172/    F359 :                     
    7173/    F359 :                     	;hex to binary
    7174/    F359 :                     bi_hex:
    7175/    F359 : 23                  	inc	hl
    7176/    F35A : E5                  	push	hl
    7177/    F35B : 21 9A FF            	ld	hl, num_string
    7178/    F35E : CD F4 F4            	call	RDHEX		; get binary to DE
    7179/    F361 : E1                  	pop	hl
    7180/    F362 : B7                  	or	a		; clear CF
    7181/    F363 : C9                  	ret
    7182/    F364 :                     
    7183/    F364 :                     ;--------------------------
    7184/    F364 :                     ; skip sp
    7185/    F364 :                     ;--------------------------
    7186/    F364 :                     skp_sp:
    7187/    F364 : 7E                  	ld	a, (hl)
    7188/    F365 : FE 20               	cp	' '
    7189/    F367 : C0                  	ret	nz
    7190/    F368 : 23                  	inc	hl
    7191/    F369 : 18 F9               	jr	skp_sp
    7192/    F36B :                     
    7193/    F36B :                     ;--------------------------
    7194/    F36B :                     ; check decimal char
    7195/    F36B :                     ;--------------------------
    7196/    F36B :                     dec_chr:
    7197/    F36B : 7E                  	ld	a, (hl)
    7198/    F36C : FE 3A               	cp	':'
    7199/    F36E : 30 03               	jr	nc, no_num
    7200/    F370 : FE 30               	cp	'0'
    7201/    F372 : D0                  	ret	nc
    7202/    F373 :                     	
    7203/    F373 : 37                  no_num:	scf
    7204/    F374 : C9                  	ret
    7205/    F375 :                     
    7206/    F375 :                     ;--------------------------
    7207/    F375 :                     ; check HEX char
    7208/    F375 :                     ;--------------------------
    7209/    F375 :                     hex_chr:
    7210/    F375 : 7E                  	ld	a, (hl)
    7211/    F376 : FE 30               	cp	'0'
    7212/    F378 : D8                  	ret	c	; error return
    7213/    F379 : FE 3A               	cp	'9'+1
    7214/    F37B : 38 07               	jr	c, dec_num
    7215/    F37D : FE 41               	cp	'A'
    7216/    F37F : D8                  	ret	c	; error return
    7217/    F380 : FE 47               	cp	'F'+1
    7218/    F382 : 30 EF               	jr	nc, no_num
    7219/    F384 :                     dec_num:
    7220/    F384 : B7                  	or	a	; clear carry
    7221/    F385 : C9                  	ret
    7222/    F386 :                     
    7223/    F386 :                     ;--------------------------------------
    7224/    F386 :                     ; 2 byte machine code branch
    7225/    F386 :                     ; - 2nd byte is Relative address
    7226/    F386 :                     ; - output a = (e-2) relative number
    7227/    F386 :                     ;          CF=1 : target address error
    7228/    F386 :                     ;--------------------------------------
    7229/    F386 :                     calc_reladr:
    7230/    F386 : E5                  	push	hl
    7231/    F387 : D5                  	push	de
    7232/    F388 :                     
    7233/    F388 : ED 5B 50 FF         	ld	de, (tasm_adr)	; base address
    7234/    F38C : 13                  	inc	de
    7235/    F38D : 13                  	inc	de
    7236/    F38E : 2A 57 FF            	ld	hl, (opr_num25)	; target address
    7237/    F391 : AF                  	xor	a
    7238/    F392 : ED 52               	sbc	hl, de
    7239/    F394 : 38 0D               	jr	c, cal_1	; CF=1 :target address is lower
    7240/    F396 :                     
    7241/    F396 : 7C                  	ld	a, h
    7242/    F397 : B7                  	or	a
    7243/    F398 : 20 17               	jr	nz, adr_ovr
    7244/    F39A :                     
    7245/    F39A : 7D                  	ld	a, l
    7246/    F39B : FE 80               	cp	80H
    7247/    F39D : 30 12               	jr	nc, adr_ovr
    7248/    F39F : B7                  	or	a
    7249/    F3A0 :                     
    7250/    F3A0 :                     cal_01:
    7251/    F3A0 : D1                  	pop	de
    7252/    F3A1 : E1                  	pop	hl
    7253/    F3A2 : C9                  	ret
    7254/    F3A3 :                     
    7255/    F3A3 :                     cal_1:
    7256/    F3A3 : 7C                  	ld	a, h
    7257/    F3A4 : FE FF               	cp	0ffh
    7258/    F3A6 : 20 09               	jr	nz, adr_ovr
    7259/    F3A8 : 7D                  	ld	a, l
    7260/    F3A9 : ED 44               	neg
    7261/    F3AB : FE 81               	cp	81h
    7262/    F3AD : 7D                  	ld	a, l
    7263/    F3AE : 3F                  	ccf
    7264/    F3AF : 18 EF               	jr	cal_01
    7265/    F3B1 :                     
    7266/    F3B1 :                     adr_ovr:
    7267/    F3B1 : 37                  	scf
    7268/    F3B2 : 18 EC               	jr	cal_01
    7269/    F3B4 :                     
    7270/    F3B4 :                     ;-----------------------------
    7271/    F3B4 :                     ;
    7272/    F3B4 :                     ; Recorrect input strings
    7273/    F3B4 :                     ;
    7274/    F3B4 :                     ;-----------------------------
    7275/    F3B4 :                     recorrect:
    7276/    F3B4 : E5                  	push	hl
    7277/    F3B5 : D5                  	push	de
    7278/    F3B6 : C5                  	push	bc
    7279/    F3B7 :                     
    7280/    F3B7 : 21 77 FF            	ld	hl, line_buf
    7281/    F3BA : 54                  	ld	d, h
    7282/    F3BB : 5D                  	ld	e, l
    7283/    F3BC :                     
    7284/    F3BC : 0E 20               	ld	c, ' '		; space delimitor. (opecode and operand)
    7285/    F3BE : CD 64 F3            	call	skp_sp
    7286/    F3C1 : CD D9 F3            	call	recorr
    7287/    F3C4 : B7                  	or	a
    7288/    F3C5 : 28 0E               	jr	z, gle_end
    7289/    F3C7 :                     
    7290/    F3C7 : 0E 00               	ld	c, 0		; end delimitor. (end strings)
    7291/    F3C9 : 23                  	inc	hl
    7292/    F3CA : CD 64 F3            	call	skp_sp
    7293/    F3CD : B7                  	or	a
    7294/    F3CE : 28 03               	jr	z, gle_end1
    7295/    F3D0 : CD D9 F3            	call	recorr
    7296/    F3D3 :                     
    7297/    F3D3 :                     gle_end1:
    7298/    F3D3 : 1B                  	dec	de
    7299/    F3D4 : 12                  	ld	(de), a		; replace space to 0
    7300/    F3D5 :                     gle_end:
    7301/    F3D5 : C1                  	pop	bc
    7302/    F3D6 : D1                  	pop	de
    7303/    F3D7 : E1                  	pop	hl
    7304/    F3D8 : C9                  	ret
    7305/    F3D9 :                     
    7306/    F3D9 :                     ; extract space from input buffer
    7307/    F3D9 :                     recorr:
    7308/    F3D9 : 06 00               	ld	b, 0
    7309/    F3DB :                     recorr1:
    7310/    F3DB : 12                  	ld	(de), a
    7311/    F3DC : 13                  	inc	de
    7312/    F3DD : B7                  	or	a
    7313/    F3DE : C8                  	ret	z
    7314/    F3DF : B9                  	cp	c
    7315/    F3E0 : C8                  	ret	z
    7316/    F3E1 :                     
    7317/    F3E1 :                     next_char:
    7318/    F3E1 : FE 22               	cp	'"'
    7319/    F3E3 : 20 06               	jr	nz, nxchr
    7320/    F3E5 :                     
    7321/    F3E5 : 08                  	ex	af, af'		;'
    7322/    F3E6 : 78                  	ld	a, b
    7323/    F3E7 : EE 01               	xor	a, 1
    7324/    F3E9 : 47                  	ld	b, a		; toggle '"' flag
    7325/    F3EA : 08                  	ex	af, af'		;'
    7326/    F3EB :                     ;"	
    7327/    F3EB :                     nxchr:
    7328/    F3EB : 23                  	inc	hl
    7329/    F3EC : 7E                  	ld	a, (hl)
    7330/    F3ED : B9                  	cp	c
    7331/    F3EE : 28 EB               	jr	z, recorr1
    7332/    F3F0 : CB 40               	bit	0, b
    7333/    F3F2 : 20 E7               	jr	nz, recorr1
    7334/    F3F4 :                     
    7335/    F3F4 : FE 20               	cp	' '
    7336/    F3F6 : 28 E9               	jr	z, next_char
    7337/    F3F8 : 18 E1               	jr	recorr1
    7338/    F3FA :                     	
    7339/    F3FA :                     ;;;
    7340/    F3FA :                     ;;; Other support routines
    7341/    F3FA :                     ;;;
    7342/    F3FA :                     
    7343/    F3FA :                     STROUT:
    7344/    F3FA : 7E                  	LD	A,(HL)
    7345/    F3FB : A7                  	AND	A
    7346/    F3FC : C8                  	RET	Z
    7347/    F3FD : CD 33 FC            	CALL	CONOUT
    7348/    F400 : 23                  	INC	HL
    7349/    F401 : 18 F7               	JR	STROUT
    7350/    F403 :                     
    7351/    F403 :                     ; input:  HL
    7352/    F403 :                     ; output: 4 hex_char output console
    7353/    F403 :                     
    7354/    F403 :                     HEXOUT4:
    7355/    F403 : 7C                  	LD	A,H
    7356/    F404 : CD 08 F4            	CALL	HEXOUT2
    7357/    F407 : 7D                  	LD	A,L
    7358/    F408 :                     
    7359/    F408 :                     ; input:  A
    7360/    F408 :                     ; output: 2 hex_char output console
    7361/    F408 :                     HEXOUT2:
    7362/    F408 : F5                  	PUSH	AF
    7363/    F409 : 1F                  	RRA
    7364/    F40A : 1F                  	RRA
    7365/    F40B : 1F                  	RRA
    7366/    F40C : 1F                  	RRA
    7367/    F40D : CD 11 F4            	CALL	HEXOUT1
    7368/    F410 : F1                  	POP	AF
    7369/    F411 :                     
    7370/    F411 :                     ; input:  A
    7371/    F411 :                     ; output: 1 hex_char output console
    7372/    F411 :                     HEXOUT1:
    7373/    F411 : E6 0F               	AND	0FH
    7374/    F413 : C6 30               	ADD	A,'0'
    7375/    F415 : FE 3A               	CP	'9'+1
    7376/    F417 : DA 33 FC            	JP	C,CONOUT
    7377/    F41A : C6 07               	ADD	A,'A'-'9'-1
    7378/    F41C : C3 33 FC            	JP	CONOUT
    7379/    F41F :                     
    7380/    F41F :                     HEXIN:
    7381/    F41F : AF                  	XOR	A
    7382/    F420 : CD 27 F4            	CALL	HI0
    7383/    F423 : 07                  	RLCA
    7384/    F424 : 07                  	RLCA
    7385/    F425 : 07                  	RLCA
    7386/    F426 : 07                  	RLCA
    7387/    F427 :                     HI0:
    7388/    F427 : C5                  	PUSH	BC
    7389/    F428 : 4F                  	LD	C,A
    7390/    F429 : CD 25 FC            	CALL	CONIN
    7391/    F42C : FE 30               	CP	'0'
    7392/    F42E : 38 11               	JR	C,HIR
    7393/    F430 : FE 3A               	CP	'9'+1
    7394/    F432 : 38 0A               	JR	C,HI1
    7395/    F434 : FE 41               	CP	'A'
    7396/    F436 : 38 09               	JR	C,HIR
    7397/    F438 : FE 47               	CP	'F'+1
    7398/    F43A : 30 05               	JR	NC,HIR
    7399/    F43C : D6 07               	SUB	'A'-'9'-1
    7400/    F43E :                     HI1:
    7401/    F43E : D6 30               	SUB	'0'
    7402/    F440 : B1                  	OR	C
    7403/    F441 :                     HIR:
    7404/    F441 : C1                  	POP	BC
    7405/    F442 : C9                  	RET
    7406/    F443 :                     	
    7407/    F443 :                     CRLF:
    7408/    F443 : 3E 0D               	LD	A,CR
    7409/    F445 : CD 33 FC            	CALL	CONOUT
    7410/    F448 : 3E 0A               	LD	A,LF
    7411/    F44A : C3 33 FC            	JP	CONOUT
    7412/    F44D :                     
    7413/    F44D :                     CLR_CRT:
    7414/    F44D : E5                  	PUSH	HL
    7415/    F44E : 21 56 F4            	LD	HL, ESC_CRT_CLR
    7416/    F451 : CD FA F3            	CALL	STROUT
    7417/    F454 : E1                  	POP	HL
    7418/    F455 : C9                  	RET
    7419/    F456 :                     	
    7420/    F456 :                     ESC_CRT_CLR:
    7421/    F456 : 1B                  	db	01BH
    7422/    F457 : 5B 32               	db	"[2"
    7423/    F459 : 00                  	db	0
    7424/    F45A :                     
    7425/    F45A :                     GETLIN:
    7426/    F45A : 21 77 FF            	LD	HL,INBUF
    7427/    F45D : 06 28               	ld	b, BUFLEN
    7428/    F45F :                     
    7429/    F45F :                     GL0:	; input hl
    7430/    F45F :                     
    7431/    F45F : D5                  	PUSH	de
    7432/    F460 : E5                  	push	hl
    7433/    F461 : 58                  	ld	e, b	; E: buffer length
    7434/    F462 : 1D                  	dec	e	; buffer lenght -1
    7435/    F463 : 06 00               	LD	B,0
    7436/    F465 :                     
    7437/    F465 :                     GL00:
    7438/    F465 : CD 25 FC            	CALL	CONIN
    7439/    F468 : FE 0D               	CP	CR
    7440/    F46A : 28 5A               	JR	Z,GLE
    7441/    F46C : FE 0A               	CP	LF
    7442/    F46E : 28 56               	JR	Z,GLE
    7443/    F470 : FE 08               	CP	BS
    7444/    F472 : 28 3B               	JR	Z,GLB
    7445/    F474 : FE 7F               	CP	DEL
    7446/    F476 : 28 37               	JR	Z,GLB
    7447/    F478 : FE 22               	cp	'"'
    7448/    F47A : 20 0A               	jr	nz, GL001
    7449/    F47C : F5                  	push	af
    7450/    F47D : 3A 6C FF            	ld	a, (ky_flg)
    7451/    F480 : EE 04               	xor	NO_UPPER	; toggle UPPER or NO UPPER
    7452/    F482 : 32 6C FF            	ld	(ky_flg), a
    7453/    F485 : F1                  	pop	af
    7454/    F486 :                     
    7455/    F486 : FE 20               GL001:	CP	' '
    7456/    F488 : 38 DB               	JR	C,GL00
    7457/    F48A : FE 80               	CP	80H
    7458/    F48C : 30 D7               	JR	NC,GL00
    7459/    F48E : 4F                  	LD	C,A
    7460/    F48F : 78                  	LD	A,B
    7461/    F490 : BB                  	CP	e	; buffer full check
    7462/    F491 : 30 D2               	JR	NC,GL00	; Too long
    7463/    F493 : 04                  	INC	B
    7464/    F494 : 79                  	LD	A,C
    7465/    F495 : CD 33 FC            	CALL	CONOUT
    7466/    F498 : FE 61               	cp	'a'
    7467/    F49A : 38 0F               	jr	c, GL1
    7468/    F49C : FE 7B               	cp	'z'+1
    7469/    F49E : 30 0B               	jr	nc, GL1
    7470/    F4A0 :                     
    7471/    F4A0 : E5                  	push	hl
    7472/    F4A1 : 21 6C FF            	ld	hl, ky_flg
    7473/    F4A4 : CB 56               	bit	NO_UPPER>>1, (hl)
    7474/    F4A6 : 20 02               	jr	nz, skip_upper
    7475/    F4A8 : E6 DF               	and	0DFH	; make upper code
    7476/    F4AA :                     skip_upper:
    7477/    F4AA : E1                  	pop	hl
    7478/    F4AB :                     GL1:
    7479/    F4AB : 77                  	LD	(HL),A
    7480/    F4AC : 23                  	INC	HL
    7481/    F4AD : 18 B6               	JR	GL00
    7482/    F4AF :                     GLB:
    7483/    F4AF : 78                  	LD	A,B
    7484/    F4B0 : A7                  	AND	A
    7485/    F4B1 : 28 B2               	JR	Z,GL00
    7486/    F4B3 : 05                  	DEC	B
    7487/    F4B4 : 2B                  	DEC	HL
    7488/    F4B5 : 3E 08               	LD	A,08H
    7489/    F4B7 : CD 33 FC            	CALL	CONOUT
    7490/    F4BA : 3E 20               	LD	A,' '
    7491/    F4BC : CD 33 FC            	CALL	CONOUT
    7492/    F4BF : 3E 08               	LD	A,08H
    7493/    F4C1 : CD 33 FC            	CALL	CONOUT
    7494/    F4C4 : 18 9F               	JR	GL00
    7495/    F4C6 :                     GLE:
    7496/    F4C6 : E5                  	push	hl
    7497/    F4C7 : 21 6C FF            	ld	hl, ky_flg
    7498/    F4CA : CB 46               	bit	NO_CR>>1, (hl)
    7499/    F4CC : 20 05               	jr	nz, skip_cr
    7500/    F4CE : 3E 0D               	ld	a, CR
    7501/    F4D0 : CD 33 FC            	call	CONOUT
    7502/    F4D3 :                     skip_cr:
    7503/    F4D3 : CB 4E               	bit	NO_LF>>1, (hl)
    7504/    F4D5 : 20 05               	jr	nz, skip_lf
    7505/    F4D7 : 3E 0A               	ld	a, LF
    7506/    F4D9 : CD 33 FC            	call	CONOUT
    7507/    F4DC :                     skip_lf:
    7508/    F4DC : CB 96               	res	NO_UPPER>>1,(HL)	; set upper flag
    7509/    F4DE : E1                  	pop	hl
    7510/    F4DF : 36 00               	LD	(HL),00H
    7511/    F4E1 :                     
    7512/    F4E1 : E1                  	pop	hl
    7513/    F4E2 : D1                  	POP	de
    7514/    F4E3 : C9                  	RET
    7515/    F4E4 :                     
    7516/    F4E4 :                     SKIPSP:
    7517/    F4E4 : 7E                  	LD	A,(HL)
    7518/    F4E5 : FE 20               	CP	' '
    7519/    F4E7 : C0                  	RET	NZ
    7520/    F4E8 : 23                  	INC	HL
    7521/    F4E9 : 18 F9               	JR	SKIPSP
    7522/    F4EB :                     
    7523/    F4EB :                     UPPER:
    7524/    F4EB : FE 61               	CP	'a'
    7525/    F4ED : D8                  	RET	C
    7526/    F4EE : FE 7B               	CP	'z'+1
    7527/    F4F0 : D0                  	RET	NC
    7528/    F4F1 : C6 E0               	ADD	A,'A'-'a'
    7529/    F4F3 : C9                  	RET
    7530/    F4F4 :                     
    7531/    F4F4 :                     RDHEX:
    7532/    F4F4 : 0E 00               	LD	C,0
    7533/    F4F6 : 11 00 00            	LD	DE,0
    7534/    F4F9 :                     RH0:
    7535/    F4F9 : 7E                  	LD	A,(HL)
    7536/    F4FA : FE 30               	CP	'0'
    7537/    F4FC : 38 2C               	JR	C,RHE
    7538/    F4FE : FE 3A               	CP	'9'+1
    7539/    F500 : 38 0A               	JR	C,RH1
    7540/    F502 : FE 41               	CP	'A'
    7541/    F504 : 38 24               	JR	C,RHE
    7542/    F506 : FE 47               	CP	'F'+1
    7543/    F508 : 30 20               	JR	NC,RHE
    7544/    F50A : D6 07               	SUB	'A'-'9'-1
    7545/    F50C :                     RH1:
    7546/    F50C : D6 30               	SUB	'0'
    7547/    F50E : 17                  	RLA
    7548/    F50F : 17                  	RLA
    7549/    F510 : 17                  	RLA
    7550/    F511 : 17                  	RLA
    7551/    F512 : 17                  	RLA
    7552/    F513 : CB 13               	RL	E
    7553/    F515 : CB 12               	RL	D
    7554/    F517 : 17                  	RLA
    7555/    F518 : CB 13               	RL	E
    7556/    F51A : CB 12               	RL	D
    7557/    F51C : 17                  	RLA
    7558/    F51D : CB 13               	RL	E
    7559/    F51F : CB 12               	RL	D
    7560/    F521 : 17                  	RLA
    7561/    F522 : CB 13               	RL	E
    7562/    F524 : CB 12               	RL	D
    7563/    F526 : 23                  	INC	HL
    7564/    F527 : 0C                  	INC	C
    7565/    F528 : 18 CF               	JR	RH0
    7566/    F52A :                     RHE:
    7567/    F52A : 79                  	ld	a, c
    7568/    F52B : B7                  	or	a
    7569/    F52C : 28 06               	jr	z, rhe1
    7570/    F52E : FE 05               	cp	5
    7571/    F530 : 30 02               	jr	nc, rhe1
    7572/    F532 : B7                  	or	a	; clear carry
    7573/    F533 : C9                  	ret
    7574/    F534 :                     	
    7575/    F534 :                     rhe1:
    7576/    F534 : 37                  	scf	; set carry
    7577/    F535 : C9                  	RET
    7578/    F536 :                     
    7579/    F536 :                     ;;;
    7580/    F536 :                     ;;; API Handler
    7581/    F536 :                     ;;:   C : API entory NO.
    7582/    F536 :                     ;;;
    7583/    F536 :                     
    7584/    F536 :                     RST30H_IN:
    7585/    F536 :                     
    7586/    F536 : E5                  	PUSH	HL
    7587/    F537 : C5                  	PUSH	BC
    7588/    F538 : 21 53 F5            	LD	HL,APITBL
    7589/    F53B : 06 00               	LD	B,0
    7590/    F53D : 09                  	ADD	HL,BC
    7591/    F53E : 09                  	ADD	HL,BC
    7592/    F53F :                     
    7593/    F53F : 01 7F F5            	ld	bc, APITBL_E
    7594/    F542 : B7                  	or	a
    7595/    F543 : E5                  	push	hl
    7596/    F544 : ED 42               	sbc	hl, bc
    7597/    F546 : E1                  	pop	hl
    7598/    F547 : 30 07               	jr	nc, no_api	; request No. is not exist
    7599/    F549 :                     
    7600/    F549 : 46                  	LD	B,(HL)
    7601/    F54A : 23                  	INC	HL
    7602/    F54B : 66                  	LD	H,(HL)
    7603/    F54C : 68                  	LD	L,B
    7604/    F54D :                     
    7605/    F54D : C1                  	POP	BC
    7606/    F54E : E3                  	EX	(SP),HL		; Restore HL, jump address on stack top
    7607/    F54F :                     no_operate:
    7608/    F54F : C9                  	RET
    7609/    F550 :                     
    7610/    F550 :                     no_api:
    7611/    F550 : C1                  	pop	bc
    7612/    F551 : E1                  	pop	hl
    7613/    F552 : C9                  	ret
    7614/    F553 :                     
    7615/    F553 :                     APITBL:
    7616/    F553 : 03 D0               	DW	CSTART		; 00: CSTART
    7617/    F555 : 7F F5               	DW	API01		; 01: WSTART
    7618/    F557 : 33 FC               	DW	CONOUT		; 02: CONOUT
    7619/    F559 : FA F3               	DW	STROUT		; 03: STROUT
    7620/    F55B : 25 FC               	DW	CONIN		; 04: CONIN
    7621/    F55D : 2E FC               	DW	CONST		; 05: CONST
    7622/    F55F : C1 F5               	DW	API06		; 06: PSPEC
    7623/    F561 : 03 F4               	DW	HEXOUT4		; 07: CONOUT HEX4bytes: input HL
    7624/    F563 : 08 F4               	DW	HEXOUT2		; 08: CONOUT HEX2bytes: input A
    7625/    F565 : 11 F4               	DW	HEXOUT1		; 09: CONOUT HEX1byte : input A
    7626/    F567 : 4D F4               	DW	CLR_CRT		; 10: Clear screen (ESC+[2)
    7627/    F569 : 5F F4               	DW	GL0		; 11: GET a line.  input HL : input buffer address)
    7628/    F56B :                     				;                         B : buffer length
    7629/    F56B :                     				;                  output B : length of strings
    7630/    F56B : E4 F4               	DW	SKIPSP		; 12: SKIP Spase
    7631/    F56D : 43 F4               	DW	CRLF		; 13: CONOUT CRLF
    7632/    F56F : EB F4               	DW	UPPER		; 14: Lower to UPPER
    7633/    F571 : F4 F4               	DW	RDHEX		; 15: get hex number from chr buffer
    7634/    F573 :                     				;     input  HL : hex string buffer
    7635/    F573 :                     				;     output DE : hex number
    7636/    F573 :                     				;            CF=1 : error, C, A = hex counts(1-4)
    7637/    F573 : F8 F6               	DW	DEC_STR		; 16: get decimal srtings
    7638/    F575 :                     				; input hl : return strings buffer addr.
    7639/    F575 :                     				;       de : 16bit binary
    7640/    F575 : 2E F7               	DW	DIV16_8		; 17; division 16bit / 8bit
    7641/    F577 : A4 F7               	DW	MUL_8		; 18: multiply 8bit * 8bit
    7642/    F579 : =>FALSE             	IF RAM12K
    7643/    F579 :                     	DW	STOPW		; 19: stopwatch
    7644/    F579 : =>TRUE              	ELSE
    7645/    F579 : 4F F5               	DW	no_operate	; 19: no operation : if RAM12K=0
    7646/    F57B : [7642]              	ENDIF
    7647/    F57B : 04 D7               	dw	get_disasm_st	; 20: dis assemble string
    7648/    F57D :                     				;     input: HL buffer. need 42bytes
    7649/    F57D :                     				;     output : DE : next MC address
    7650/    F57D :                     				;              A  : disassembled MC size
    7651/    F57D : DB D0               	dw	GET_dNUM	; 21: get number from decimal strings
    7652/    F57F :                     				;     input HL : string buffer
    7653/    F57F :                     				;     Return
    7654/    F57F :                     				;        CF =1 : Error
    7655/    F57F :                     				;        BC: Calculation result
    7656/    F57F :                     APITBL_E:
    7657/    F57F :                     
    7658/    F57F :                     	;; WSTART from API
    7659/    F57F :                     API01:
    7660/    F57F : 31 00 FF            	LD	SP,STACKM	; reset SP for monitor
    7661/    F582 :                     
    7662/    F582 :                     ; check stop by bp and trace operation
    7663/    F582 :                     
    7664/    F582 : 3A 4A FF            	ld	a, (tmpb_f)
    7665/    F585 : B7                  	or	a
    7666/    F586 : 28 06               	jr	z, ws_chk1
    7667/    F588 : 21 4B FF            	ld	hl, tmpb_op
    7668/    F58B : CD B0 F6            	call	rstr_tpt
    7669/    F58E :                     ws_chk1:
    7670/    F58E : 3A 3A FF            	ld	a, (tpt1_f)
    7671/    F591 : B7                  	or	a
    7672/    F592 : 28 06               	jr	z, ws_chk2
    7673/    F594 : 21 3B FF            	ld	hl, tpt1_op
    7674/    F597 : CD B0 F6            	call	rstr_tpt
    7675/    F59A :                     
    7676/    F59A :                     ws_chk2:
    7677/    F59A : 3A 3E FF            	ld	a, (tpt2_f)
    7678/    F59D : B7                  	or	a
    7679/    F59E : 28 06               	jr	z, ws_chk3
    7680/    F5A0 : 21 3F FF            	ld	hl, tpt2_op
    7681/    F5A3 : CD B0 F6            	call	rstr_tpt
    7682/    F5A6 :                     ws_chk3:
    7683/    F5A6 : 3A 46 FF            	ld	a, (bpt2_f)
    7684/    F5A9 : B7                  	or	a
    7685/    F5AA : 28 06               	jr	z, ws_chk4
    7686/    F5AC : 21 47 FF            	ld	hl, bpt2_op
    7687/    F5AF : CD BC F6            	call	rstr_bpt
    7688/    F5B2 :                     ws_chk4:
    7689/    F5B2 : 3A 42 FF            	ld	a, (bpt1_f)
    7690/    F5B5 : B7                  	or	a
    7691/    F5B6 : 28 06               	jr	z, ws_chk5
    7692/    F5B8 : 21 43 FF            	ld	hl, bpt1_op
    7693/    F5BB : CD BC F6            	call	rstr_bpt
    7694/    F5BE :                     ws_chk5:
    7695/    F5BE : C3 86 F6            	JP	backTomon
    7696/    F5C1 :                     
    7697/    F5C1 :                     	;; PSPEC
    7698/    F5C1 :                     API06:
    7699/    F5C1 : AF                  	XOR	A
    7700/    F5C2 : C9                  	RET
    7701/    F5C3 :                     
    7702/    F5C3 :                     ;;;
    7703/    F5C3 :                     ;;; Break Point
    7704/    F5C3 :                     ;;; trace Point
    7705/    F5C3 :                     ;;; go, stop point
    7706/    F5C3 :                     ;;; operation handler
    7707/    F5C3 :                     ;;
    7708/    F5C3 :                     RST38H_IN:
    7709/    F5C3 : F5                  	PUSH	AF
    7710/    F5C4 : ED 5F               	LD	A,R
    7711/    F5C6 : 32 25 FF            	LD	(REGR),A
    7712/    F5C9 : ED 57               	LD	A,I
    7713/    F5CB : 32 24 FF            	LD	(REGI),A
    7714/    F5CE : 22 12 FF            	LD	(REGHL),HL
    7715/    F5D1 : ED 53 10 FF         	LD	(REGDE),DE
    7716/    F5D5 : ED 43 0E FF         	LD	(REGBC),BC
    7717/    F5D9 : E1                  	POP	HL
    7718/    F5DA : 22 0C FF            	LD	(REGAF),HL
    7719/    F5DD : 08                  	EX	AF,AF'		;'
    7720/    F5DE : F5                  	PUSH	AF
    7721/    F5DF : D9                  	EXX
    7722/    F5E0 : 22 1A FF            	LD	(REGHLX),HL
    7723/    F5E3 : ED 53 18 FF         	LD	(REGDEX),DE
    7724/    F5E7 : ED 43 16 FF         	LD	(REGBCX),BC
    7725/    F5EB : E1                  	POP	HL
    7726/    F5EC : 22 14 FF            	LD	(REGAFX),HL
    7727/    F5EF : DD 22 1C FF         	LD	(REGIX),IX
    7728/    F5F3 : FD 22 1E FF         	LD	(REGIY),IY
    7729/    F5F7 : E1                  	POP	HL
    7730/    F5F8 : 2B                  	DEC	HL
    7731/    F5F9 : 22 22 FF            	LD	(REGPC),HL
    7732/    F5FC : ED 73 20 FF         	LD	(REGSP),SP
    7733/    F600 :                     
    7734/    F600 :                     ; check bp and trace operation
    7735/    F600 :                     
    7736/    F600 : 31 00 FF            	LD	SP,STACKM	; reset SP for monitor
    7737/    F603 : AF                  	xor	a
    7738/    F604 : 57                  	ld	d, a
    7739/    F605 : 5F                  	ld	e, a		;clear msg pointer
    7740/    F606 :                     
    7741/    F606 :                     
    7742/    F606 :                     ; check go, end operation
    7743/    F606 : 3A 4A FF            	ld	a, (tmpb_f)
    7744/    F609 : B7                  	or	a
    7745/    F60A : 28 09               	jr	z, chk_bp
    7746/    F60C : 11 E6 F6            	ld	de, stpBrk_msg
    7747/    F60F : 21 4B FF            	ld	hl, tmpb_op
    7748/    F612 : CD B0 F6            	call	rstr_tpt
    7749/    F615 :                     
    7750/    F615 :                     ; check set break point
    7751/    F615 :                     
    7752/    F615 :                     chk_bp:
    7753/    F615 : 3A 46 FF            	ld	a, (bpt2_f)
    7754/    F618 : B7                  	or	a
    7755/    F619 : 28 09               	jr	z, bp_chk1
    7756/    F61B : 11 E6 F6            	ld	de, stpBrk_msg
    7757/    F61E : 21 47 FF            	ld	hl, bpt2_op
    7758/    F621 : CD BC F6            	call	rstr_bpt
    7759/    F624 :                     
    7760/    F624 :                     bp_chk1:
    7761/    F624 : 3A 42 FF            	ld	a, (bpt1_f)
    7762/    F627 : B7                  	or	a
    7763/    F628 : 28 09               	jr	z, tp_chk1
    7764/    F62A : 11 E6 F6            	ld	de, stpBrk_msg
    7765/    F62D : 21 43 FF            	ld	hl, bpt1_op
    7766/    F630 : CD BC F6            	call	rstr_bpt
    7767/    F633 :                     
    7768/    F633 :                     ; check trace operation
    7769/    F633 :                     tp_chk1:
    7770/    F633 : 3A 3A FF            	ld	a, (tpt1_f)
    7771/    F636 : B7                  	or	a
    7772/    F637 : 28 09               	jr	z, tp_chk2
    7773/    F639 : 11 EF F6            	ld	de, trace_msg
    7774/    F63C : 21 3B FF            	ld	hl, tpt1_op
    7775/    F63F : CD B0 F6            	call	rstr_tpt
    7776/    F642 :                     
    7777/    F642 :                     tp_chk2:
    7778/    F642 : 3A 3E FF            	ld	a, (tpt2_f)
    7779/    F645 : B7                  	or	a
    7780/    F646 : 28 09               	jr	z, bp_chk_end
    7781/    F648 :                     
    7782/    F648 : 11 EF F6            	ld	de, trace_msg
    7783/    F64B : 21 3F FF            	ld	hl, tpt2_op
    7784/    F64E : CD B0 F6            	call	rstr_tpt
    7785/    F651 :                     
    7786/    F651 :                     bp_chk_end:
    7787/    F651 : 7A                  	ld	a, d
    7788/    F652 : B3                  	or	e
    7789/    F653 : 20 03               	jr	nz, no_rst38_msg
    7790/    F655 :                     
    7791/    F655 :                     	; set RST 38H message
    7792/    F655 : 11 DC F6            	LD	de,RST38MSG
    7793/    F658 :                     
    7794/    F658 :                     no_rst38_msg:
    7795/    F658 : 1A                  	ld	a, (de)		; get first char of message
    7796/    F659 : FE 54               	cp	'T'		; trace ?
    7797/    F65B : 28 0C               	jr	z, chk_ntrace
    7798/    F65D :                     	
    7799/    F65D : EB                  	ex	de, hl
    7800/    F65E : CD FA F3            	CALL	STROUT
    7801/    F661 :                     
    7802/    F661 :                     	;; R register adjustment
    7803/    F661 :                     
    7804/    F661 : CD F2 E5            	CALL	RDUMP
    7805/    F664 : CD C3 F6            	call	dis_call	; list disassemble
    7806/    F667 : 18 1D               	jr	backTomon	; goto WBOOT
    7807/    F669 :                     
    7808/    F669 :                     ;
    7809/    F669 :                     ; check continue trace operation
    7810/    F669 :                     ;
    7811/    F669 :                     chk_ntrace:
    7812/    F669 : 3A 33 FF            	ld	a, (TP_mode)
    7813/    F66C : FE 46               	cp	'F'		; chk
    7814/    F66E : 28 0A               	jr	z, skp_rmsg
    7815/    F670 :                     
    7816/    F670 :                     ;no_trace:
    7817/    F670 : EB                  	ex	de, hl
    7818/    F671 : CD FA F3            	CALL	STROUT
    7819/    F674 :                     
    7820/    F674 :                     	;; R register adjustment
    7821/    F674 :                     
    7822/    F674 : CD F2 E5            	CALL	RDUMP
    7823/    F677 : CD C3 F6            	call	dis_call	; list disassemble
    7824/    F67A :                     
    7825/    F67A :                     skp_rmsg:
    7826/    F67A : CD 2E FC            	call	CONST
    7827/    F67D : 28 13               	jr	z, t_no_ky		; no key in
    7828/    F67F : CD 25 FC            	call	CONIN
    7829/    F682 : FE 03               	cp	03h	; chk CTL+C
    7830/    F684 : 20 0C               	jr	nz, t_no_ky
    7831/    F686 :                     
    7832/    F686 :                     	; stop_trace
    7833/    F686 :                     backTomon:
    7834/    F686 : AF                  	xor	a
    7835/    F687 : 32 39 FF            	ld	(fever_t), a	; clear forever flag
    7836/    F68A : 67                  	ld	h, a
    7837/    F68B : 6F                  	ld	l, a
    7838/    F68C : 22 35 FF            	ld	(TC_cnt), hl
    7839/    F68F : C3 87 D0            	JP	WSTART
    7840/    F692 :                     	
    7841/    F692 :                     	; check trace forever
    7842/    F692 :                     t_no_ky:
    7843/    F692 : 3A 39 FF            	ld	a, (fever_t)
    7844/    F695 : B7                  	or	a
    7845/    F696 : C2 A7 F6            	jp	nz, repeat_trace
    7846/    F699 :                     
    7847/    F699 : 2A 35 FF            	ld	hl, (TC_cnt)
    7848/    F69C : 2B                  	dec	hl
    7849/    F69D : 22 35 FF            	ld	(TC_cnt), hl
    7850/    F6A0 : 7D                  	ld	a, l
    7851/    F6A1 : B4                  	or	h
    7852/    F6A2 : 20 03               	jr	nz, repeat_trace
    7853/    F6A4 : C3 87 D0            	JP	WSTART
    7854/    F6A7 :                     
    7855/    F6A7 :                     repeat_trace:
    7856/    F6A7 : 2A 22 FF            	ld	hl, (REGPC)
    7857/    F6AA : 22 37 FF            	ld	(tmpT), hl
    7858/    F6AD : C3 FC D2            	jp	t_op_chk
    7859/    F6B0 :                     
    7860/    F6B0 :                     rstr_tpt:	; HL=buffer point
    7861/    F6B0 : E5                  	push	hl
    7862/    F6B1 : 7E                  	ld	a, (hl)
    7863/    F6B2 : 23                  	inc	hl
    7864/    F6B3 : 4E                  	ld	c, (hl)
    7865/    F6B4 : 23                  	inc	hl
    7866/    F6B5 : 46                  	ld	b, (hl)
    7867/    F6B6 :                     
    7868/    F6B6 : 02                  	ld	(bc), a		; restor OP CODE
    7869/    F6B7 : E1                  	pop	hl
    7870/    F6B8 : AF                  	xor	a
    7871/    F6B9 : 2B                  	dec	hl
    7872/    F6BA : 77                  	ld	(hl), a		; clear trace flag
    7873/    F6BB : C9                  	ret
    7874/    F6BC :                     
    7875/    F6BC :                     rstr_bpt:	; HL=buffer point
    7876/    F6BC : 7E                  	ld	a, (hl)
    7877/    F6BD : 23                  	inc	hl
    7878/    F6BE : 4E                  	ld	c, (hl)
    7879/    F6BF : 23                  	inc	hl
    7880/    F6C0 : 46                  	ld	b, (hl)
    7881/    F6C1 :                     
    7882/    F6C1 : 02                  	ld	(bc), a		; restor OP CODE
    7883/    F6C2 : C9                  	ret
    7884/    F6C3 :                     
    7885/    F6C3 :                     dis_call:
    7886/    F6C3 : 2A 22 FF            	ld	hl, (REGPC)
    7887/    F6C6 : 22 70 FF            	ld	(dasm_adr), hl	; set disasm address
    7888/    F6C9 : CD 5A D7            	call	dis_analysis
    7889/    F6CC : CD 1F D7            	call	mk_adr_str	; conout address and machine code
    7890/    F6CF : 21 77 FF            	ld	hl, adr_mc_buf
    7891/    F6D2 : CD FA F3            	call	STROUT		; conout disassemble strings
    7892/    F6D5 : 2A 22 FF            	ld	hl, (REGPC)
    7893/    F6D8 : 22 70 FF            	ld	(dasm_adr), hl	; restrore disasm address
    7894/    F6DB : C9                  	ret
    7895/    F6DC :                     
    7896/    F6DC :                     RST38MSG:
    7897/    F6DC : 52 53 54 20 33 38   	DB	"RST 38H",CR,LF,00H
             F6E2 : 48 0D 0A 00       
    7898/    F6E6 :                     stpBrk_msg:	
    7899/    F6E6 : 42 72 65 61 6B 21   	db	"Break!",CR,LF,00H
             F6EC : 0D 0A 00          
    7900/    F6EF :                     trace_msg:	
    7901/    F6EF : 54 72 61 63 65 21   	db	"Trace!",CR,LF,00H
             F6F5 : 0D 0A 00          
    7902/    F6F8 :                     
    7903/    F6F8 : =>FALSE             	IF RAM12K
    7904/    F6F8 :                     STOPW:
    7905/    F6F8 :                     	; (input) A = 0 : start timer, (output) none
    7906/    F6F8 :                     	; (input) A = 1 : stop timer,  (output) BC : msec time, DE : Sec time
    7907/    F6F8 :                     	; (input) A = 2 : lap timer,   (output) BC : msec time, DE : Sec time
    7908/    F6F8 :                     	; (input) A = 3 : clear timer counter,  (output) none
    7909/    F6F8 :                     
    7910/    F6F8 :                     	push	af
    7911/    F6F8 :                     	push	hl
    7912/    F6F8 :                     	or	a
    7913/    F6F8 :                     	jr	z, start_tim
    7914/    F6F8 :                     	cp	1
    7915/    F6F8 :                     	jr	z, stop_tim
    7916/    F6F8 :                     	cp	2
    7917/    F6F8 :                     	jr	z, lap_tim
    7918/    F6F8 :                     	cp	3
    7919/    F6F8 :                     	jr	z, clr_tim
    7920/    F6F8 :                     	pop	hl
    7921/    F6F8 :                     	pop	af
    7922/    F6F8 :                     	ret
    7923/    F6F8 :                     
    7924/    F6F8 :                     start_tim:
    7925/    F6F8 :                     	ld	hl, TIM0_CTL0
    7926/    F6F8 :                     	ld	a, 90h
    7927/    F6F8 :                     	ld	(hl),a		; enable timer 0
    7928/    F6F8 :                     	pop	hl
    7929/    F6F8 :                     	pop	af
    7930/    F6F8 :                     	ret
    7931/    F6F8 :                     	
    7932/    F6F8 :                     stop_tim:
    7933/    F6F8 :                     	ld	hl, TIM0_CTL0
    7934/    F6F8 :                     	ld	a, 10h
    7935/    F6F8 :                     	ld	(hl), a		; disable timer 0
    7936/    F6F8 :                     
    7937/    F6F8 :                     	; save timer counter
    7938/    F6F8 :                     
    7939/    F6F8 :                     lap_tim:
    7940/    F6F8 :                     	ld	a, (TIMER0_CNTL)
    7941/    F6F8 :                     	ld	(c16b), a
    7942/    F6F8 :                     	ld	a, (TIMER0_CNTH)
    7943/    F6F8 :                     	ld	(c16b+1), a
    7944/    F6F8 :                     
    7945/    F6F8 :                     ; adjust 16bit counter
    7946/    F6F8 :                     
    7947/    F6F8 :                     	ld	bc, TIMER0_INITC
    7948/    F6F8 :                     	ld	hl, (c16b)
    7949/    F6F8 :                     	ld	a, h
    7950/    F6F8 :                     	or	l	; HL = 0?
    7951/    F6F8 :                     	jr	nz, adj_tim1
    7952/    F6F8 :                     	ld	(c16b), bc
    7953/    F6F8 :                     	jr	rd_sec
    7954/    F6F8 :                     
    7955/    F6F8 :                     adj_tim1:
    7956/    F6F8 :                     	sbc	hl, bc
    7957/    F6F8 :                     	ld	(c16b), hl
    7958/    F6F8 :                     
    7959/    F6F8 :                     ; read seconds counter
    7960/    F6F8 :                     
    7961/    F6F8 :                     rd_sec:
    7962/    F6F8 :                     	ld	a, (TIMER0_SCTL)
    7963/    F6F8 :                     	ld	(secb), a
    7964/    F6F8 :                     	ld	a, (TIMER0_SCTH)
    7965/    F6F8 :                     	ld	(secb+1), a
    7966/    F6F8 :                     
    7967/    F6F8 :                     	; convert msec from 16bit counter
    7968/    F6F8 :                     
    7969/    F6F8 :                     	ld	hl,(c16b)
    7970/    F6F8 :                     	call	chg_msec	; result BC
    7971/    F6F8 :                     	ld	(msecb),bc	; save result
    7972/    F6F8 :                     	ld	de,(secb)	; get sec counter
    7973/    F6F8 :                     	pop	hl
    7974/    F6F8 :                     	pop	af
    7975/    F6F8 :                     	ret
    7976/    F6F8 :                     
    7977/    F6F8 :                     clr_tim:
    7978/    F6F8 :                     	xor	a
    7979/    F6F8 :                     	ld	h, a
    7980/    F6F8 :                     	ld	l, a
    7981/    F6F8 :                     	ld	(msecb), hl
    7982/    F6F8 :                     	ld	(secb), hl
    7983/    F6F8 :                     	ld	(c16b), hl
    7984/    F6F8 :                     	
    7985/    F6F8 :                     	ld	(TIMER0_SCTL), a
    7986/    F6F8 :                     	ld	(TIMER0_SCTH), a
    7987/    F6F8 :                     	ld	a, 0e8h
    7988/    F6F8 :                     	ld	(TIMER0_CNTL), a
    7989/    F6F8 :                     	ld	a, 86H
    7990/    F6F8 :                     	ld	(TIMER0_CNTH), a
    7991/    F6F8 :                     	pop	hl
    7992/    F6F8 :                     	pop	af
    7993/    F6F8 :                     	ret
    7994/    F6F8 :                     
    7995/    F6F8 :                     chg_msec:
    7996/    F6F8 :                     	xor	a
    7997/    F6F8 :                     	ld	b, a
    7998/    F6F8 :                     	ld	c ,a		;cear BC
    7999/    F6F8 :                     	ld	hl, (c16b)	; get 16bit counter
    8000/    F6F8 :                     	ld	a, l
    8001/    F6F8 :                     u_00:
    8002/    F6F8 :                     	cp	31
    8003/    F6F8 :                     	jr	c, u_1
    8004/    F6F8 :                     	sub	31
    8005/    F6F8 :                     u_0:
    8006/    F6F8 :                     	ld	l, a
    8007/    F6F8 :                     	inc	bc
    8008/    F6F8 :                     	jr	u_00
    8009/    F6F8 :                     
    8010/    F6F8 :                     u_1:
    8011/    F6F8 :                     	ld	a, h
    8012/    F6F8 :                     	or	a
    8013/    F6F8 :                     	ret	z	; can't sub
    8014/    F6F8 :                     
    8015/    F6F8 :                     	ld	a, l
    8016/    F6F8 :                     	sub	31
    8017/    F6F8 :                     	neg
    8018/    F6F8 :                     	dec	h
    8019/    F6F8 :                     	jr	u_0
    8020/    F6F8 :                     
    8021/    F6F8 : [7903]              	ENDIF
    8022/    F6F8 :                     
    8023/    F6F8 :                     ;
    8024/    F6F8 :                     ; make decimal string
    8025/    F6F8 :                     ;
    8026/    F6F8 :                     ; input HL : output string buffer
    8027/    F6F8 :                     ;       DE : 16bit binary
    8028/    F6F8 :                     ;
    8029/    F6F8 :                     ; output (HL) : decimal strings
    8030/    F6F8 :                     
    8031/    F6F8 :                     DEC_STR:
    8032/    F6F8 : F5                  	PUSH	AF
    8033/    F6F9 : C5                  	PUSH	BC
    8034/    F6FA : D5                  	PUSH	DE
    8035/    F6FB : E5                  	push	hl
    8036/    F6FC : DD E5               	push	ix
    8037/    F6FE :                     
    8038/    F6FE : E5                  	push	hl
    8039/    F6FF : DD E1               	pop	ix		; ix: save buffer top address
    8040/    F701 :                     
    8041/    F701 : EB                  	ex	de, hl		; hl: 16bit binary, de: buffer
    8042/    F702 : E5                  	push	hl		; save 16bit binary
    8043/    F703 : 21 05 00            	ld	hl, 5
    8044/    F706 : 19                  	add	hl, de		; hl = buffer + 5
    8045/    F707 : AF                  	xor	a
    8046/    F708 : 77                  	ld	(hl), A
    8047/    F709 : EB                  	ex	de, hl		; de: buffer + 5, hl : buffer
    8048/    F70A : E1                  	pop	hl		; hl : 16bit binary
    8049/    F70B : 01 01 00            	LD	BC, 1
    8050/    F70E :                     
    8051/    F70E :                     LOOP_DEC:
    8052/    F70E : 3E 0A               	LD	A, 10
    8053/    F710 : CD 2E F7            	CALL	DIV16_8
    8054/    F713 : F6 30               	OR	30H
    8055/    F715 : 1B                  	DEC	DE
    8056/    F716 : 12                  	LD	(DE), A
    8057/    F717 : 0C                  	INC	C
    8058/    F718 : 7C                  	LD	A, H
    8059/    F719 : B5                  	OR	L
    8060/    F71A : 20 F2               	JR	NZ, LOOP_DEC
    8061/    F71C :                     
    8062/    F71C : 79                  	LD	A, C
    8063/    F71D : FE 06               	CP	6
    8064/    F71F : 28 06               	JR	Z, END_DEC
    8065/    F721 :                     
    8066/    F721 : DD E5               	push	ix
    8067/    F723 : E1                  	pop	hl		; hl : buffer top address
    8068/    F724 : EB                  	EX	DE, HL
    8069/    F725 : ED B0               	LDIR
    8070/    F727 :                     
    8071/    F727 :                     END_DEC:
    8072/    F727 : DD E1               	pop	ix
    8073/    F729 : E1                  	pop	hl
    8074/    F72A : D1                  	POP	DE
    8075/    F72B : C1                  	POP	BC
    8076/    F72C : F1                  	POP	AF
    8077/    F72D : C9                  	RET
    8078/    F72E :                     
    8079/    F72E :                     
    8080/    F72E :                     ; DIV 16bit / 8 bit
    8081/    F72E :                     ; input
    8082/    F72E :                     ;	HL, A
    8083/    F72E :                     ; output
    8084/    F72E :                     ;	result = HL, mod = A
    8085/    F72E :                     
    8086/    F72E :                     DIV16_8:
    8087/    F72E : C5                  	PUSH	BC
    8088/    F72F : D5                  	PUSH	DE
    8089/    F730 :                     
    8090/    F730 : 4F                  	LD	C, A
    8091/    F731 : 06 0F               	LD	B, 15
    8092/    F733 : AF                  	XOR	A
    8093/    F734 : 29                  	ADD	HL, HL
    8094/    F735 : 17                  	RLA
    8095/    F736 : 91                  	SUB	C
    8096/    F737 : 38 0D               	JR	C, D16_MINUS_BEFORE
    8097/    F739 : 29                  	ADD	HL, HL
    8098/    F73A : 2C                  	INC	L
    8099/    F73B :                     
    8100/    F73B :                     D16_PLUS:
    8101/    F73B : 17                  	RLA
    8102/    F73C : 91                  	SUB	C
    8103/    F73D : 38 0C               	JR	C, D16_MINUS_AFTER
    8104/    F73F :                     
    8105/    F73F :                     D16_PLUS_AFTER:
    8106/    F73F : 29                  	ADD	HL, HL
    8107/    F740 : 2C                  	INC	L
    8108/    F741 : 10 F8               	DJNZ	D16_PLUS
    8109/    F743 : C3 4F F7            	JP	D16_END
    8110/    F746 :                     
    8111/    F746 :                     D16_MINUS_BEFORE:
    8112/    F746 : 29                  	ADD	HL, HL
    8113/    F747 :                     
    8114/    F747 :                     D16_MINUS:
    8115/    F747 : 17                  	RLA
    8116/    F748 : 81                  	ADD	A, C
    8117/    F749 : 38 F4               	JR	C, D16_PLUS_AFTER
    8118/    F74B :                     
    8119/    F74B :                     D16_MINUS_AFTER:
    8120/    F74B : 29                  	ADD	HL, HL
    8121/    F74C : 10 F9               	DJNZ	D16_MINUS
    8122/    F74E : 81                  	ADD	A,C
    8123/    F74F :                     D16_END:
    8124/    F74F : D1                  	POP	DE
    8125/    F750 : C1                  	POP	BC
    8126/    F751 : C9                  	RET
    8127/    F752 :                     
    8128/    F752 :                     ;
    8129/    F752 :                     ; input : HL / DE
    8130/    F752 :                     ; output : quotient HL
    8131/    F752 :                     ;	   remainder DE
    8132/    F752 :                     
    8133/    F752 :                     DIV16:
    8134/    F752 : 22 29 FF            	LD	(DIV16_NA), HL
    8135/    F755 : ED 53 2B FF         	LD	(DIV16_NB), DE
    8136/    F759 :                     
    8137/    F759 : AF                  	XOR	A
    8138/    F75A : 32 2D FF            	LD	(DIV16_NC), A
    8139/    F75D : 32 2E FF            	LD	(DIV16_NC+1), A
    8140/    F760 : 32 2F FF            	LD	(DIV16_ND), A
    8141/    F763 : 32 30 FF            	LD	(DIV16_ND+1), A
    8142/    F766 : 06 10               	LD	B, 16
    8143/    F768 :                     
    8144/    F768 :                     DIV16_X2:
    8145/    F768 : 21 2D FF            	LD	HL, DIV16_NC
    8146/    F76B : CB 26               	SLA	(HL)
    8147/    F76D : 23                  	INC	HL
    8148/    F76E : CB 16               	RL	(HL)
    8149/    F770 :                     
    8150/    F770 : 21 29 FF            	LD	HL, DIV16_NA
    8151/    F773 : CB 26               	SLA	(HL)
    8152/    F775 : 23                  	INC	HL
    8153/    F776 : CB 16               	RL	(HL)
    8154/    F778 : 21 2F FF            	LD	HL, DIV16_ND
    8155/    F77B : CB 16               	RL	(HL)
    8156/    F77D : 23                  	INC	HL
    8157/    F77E : CB 16               	RL	(HL)
    8158/    F780 :                     
    8159/    F780 : 2A 2B FF            	LD	HL, (DIV16_NB)
    8160/    F783 : 5D                  	LD	E, L
    8161/    F784 : 54                  	LD	D, H
    8162/    F785 : 2A 2F FF            	LD	HL, (DIV16_ND)
    8163/    F788 : AF                  	XOR	A
    8164/    F789 : ED 52               	SBC	HL, DE
    8165/    F78B : 30 02               	JR	NC, DIV16_X0
    8166/    F78D : 18 0B               	JR	DIV16_X1
    8167/    F78F :                     
    8168/    F78F :                     DIV16_X0:
    8169/    F78F : 22 2F FF            	LD	(DIV16_ND), HL
    8170/    F792 :                     
    8171/    F792 : 3A 2D FF            	LD	A, (DIV16_NC)
    8172/    F795 : F6 01               	OR	1
    8173/    F797 : 32 2D FF            	LD	(DIV16_NC), A
    8174/    F79A :                     
    8175/    F79A :                     DIV16_X1:
    8176/    F79A : 10 CC               	DJNZ	DIV16_X2
    8177/    F79C :                     
    8178/    F79C : 2A 2D FF            	LD	HL,(DIV16_NC)
    8179/    F79F : ED 5B 2F FF         	LD	DE,(DIV16_ND)
    8180/    F7A3 : C9                  	RET
    8181/    F7A4 :                     
    8182/    F7A4 :                     ; 8bit * 8bit : ans = 16bit
    8183/    F7A4 :                     ; input A , BC
    8184/    F7A4 :                     ; output HL
    8185/    F7A4 :                     
    8186/    F7A4 :                     MUL_8:
    8187/    F7A4 : F5                  	PUSH	AF
    8188/    F7A5 : C5                  	PUSH	BC
    8189/    F7A6 : B7                  	OR	A	; clear carry
    8190/    F7A7 : 18 04               	JR	ST_MUL8
    8191/    F7A9 :                     
    8192/    F7A9 :                     LOOP_M8:
    8193/    F7A9 : CB 21               	SLA	C
    8194/    F7AB : CB 10               	RL	B
    8195/    F7AD :                     
    8196/    F7AD :                     ST_MUL8:
    8197/    F7AD : 1F                  	RRA
    8198/    F7AE : 30 F9               	JR	NC, LOOP_M8
    8199/    F7B0 : 09                  	ADD	HL, BC
    8200/    F7B1 : 20 F6               	JR	NZ, LOOP_M8
    8201/    F7B3 : C1                  	POP	BC
    8202/    F7B4 : F1                  	POP	AF
    8203/    F7B5 : C9                  	RET
    8204/    F7B6 :                     ;;;
    8205/    F7B6 :                     ;;; Messages
    8206/    F7B6 :                     ;;;
    8207/    F7B6 :                     
    8208/    F7B6 : 3F 20 3A 43 6F 6D   cmd_hlp:	db	"? :Command Help", CR, LF
             F7BC : 6D 61 6E 64 20 48 
             F7C2 : 65 6C 70 0D 0A    
    8209/    F7C7 :                     
    8210/    F7C7 : =>FALSE             	if (SuperMEZ80=0) || (SMEZ80Full=1)
    8211/    F7C7 :                     		db	"#L|<num> :Launch program", CR, LF
    8212/    F7C7 : [8210]              	endif
    8213/    F7C7 : 41 5B 3C 61 64 64   		db	"A[<address>] : Mini Assemble mode", CR, LF
             F7CD : 72 65 73 73 3E 5D 
             F7D3 : 20 3A 20 4D 69 6E 
             F7D9 : 69 20 41 73 73 65 
             F7DF : 6D 62 6C 65 20 6D 
             F7E5 : 6F 64 65 0D 0A    
    8214/    F7EA : 42 5B 31 7C 32 5B   		db	"B[1|2[,<adr>]] :Set or List Break Point", CR, LF
             F7F0 : 2C 3C 61 64 72 3E 
             F7F6 : 5D 5D 20 3A 53 65 
             F7FC : 74 20 6F 72 20 4C 
             F802 : 69 73 74 20 42 72 
             F808 : 65 61 6B 20 50 6F 
             F80E : 69 6E 74 0D 0A    
    8215/    F813 : 42 43 5B 31 7C 32   		db	"BC[1|2] :Clear Break Point", CR, LF
             F819 : 5D 20 3A 43 6C 65 
             F81F : 61 72 20 42 72 65 
             F825 : 61 6B 20 50 6F 69 
             F82B : 6E 74 0D 0A       
    8216/    F82F : 44 5B 3C 61 64 72   		db	"D[<adr>] :Dump Memory", CR, LF
             F835 : 3E 5D 20 3A 44 75 
             F83B : 6D 70 20 4D 65 6D 
             F841 : 6F 72 79 0D 0A    
    8217/    F846 : 44 49 5B 3C 61 64   		db	"DI[<adr>][,s<steps>|<adr>] :Disassemble", CR, LF
             F84C : 72 3E 5D 5B 2C 73 
             F852 : 3C 73 74 65 70 73 
             F858 : 3E 7C 3C 61 64 72 
             F85E : 3E 5D 20 3A 44 69 
             F864 : 73 61 73 73 65 6D 
             F86A : 62 6C 65 0D 0A    
    8218/    F86F : 47 5B 3C 61 64 72   		db	"G[<adr>][,<stop adr>] :Go and Stop", CR, LF
             F875 : 3E 5D 5B 2C 3C 73 
             F87B : 74 6F 70 20 61 64 
             F881 : 72 3E 5D 20 3A 47 
             F887 : 6F 20 61 6E 64 20 
             F88D : 53 74 6F 70 0D 0A 
    8219/    F893 : 4C 5B 47 7C 3C 6F   		db	"L[G|<offset>] :Load HexFile (and GO)", CR, LF
             F899 : 66 66 73 65 74 3E 
             F89F : 5D 20 3A 4C 6F 61 
             F8A5 : 64 20 48 65 78 46 
             F8AB : 69 6C 65 20 28 61 
             F8B1 : 6E 64 20 47 4F 29 
             F8B7 : 0D 0A             
    8220/    F8B9 : 50 5B 49 7C 53 5D   		db	"P[I|S] :Save HexFile(I:Intel,S:Motorola)", CR, LF
             F8BF : 20 3A 53 61 76 65 
             F8C5 : 20 48 65 78 46 69 
             F8CB : 6C 65 28 49 3A 49 
             F8D1 : 6E 74 65 6C 2C 53 
             F8D7 : 3A 4D 6F 74 6F 72 
             F8DD : 6F 6C 61 29 0D 0A 
    8221/    F8E3 : 52 5B 3C 72 65 67   		db	"R[<reg>] :Set or Dump register", CR, LF
             F8E9 : 3E 5D 20 3A 53 65 
             F8EF : 74 20 6F 72 20 44 
             F8F5 : 75 6D 70 20 72 65 
             F8FB : 67 69 73 74 65 72 
             F901 : 0D 0A             
    8222/    F903 : 53 5B 3C 61 64 72   		db	"S[<adr>] :Set Memory", CR, LF
             F909 : 3E 5D 20 3A 53 65 
             F90F : 74 20 4D 65 6D 6F 
             F915 : 72 79 0D 0A       
    8223/    F919 : 54 5B 3C 61 64 72   		db	"T[<adr>][,<steps>|-1] : Trace command", CR, LF
             F91F : 3E 5D 5B 2C 3C 73 
             F925 : 74 65 70 73 3E 7C 
             F92B : 2D 31 5D 20 3A 20 
             F931 : 54 72 61 63 65 20 
             F937 : 63 6F 6D 6D 61 6E 
             F93D : 64 0D 0A          
    8224/    F940 : 54 4D 5B 49 7C 53   		db	"TM[I|S] :Trace Option for CALL", CR, LF
             F946 : 5D 20 3A 54 72 61 
             F94C : 63 65 20 4F 70 74 
             F952 : 69 6F 6E 20 66 6F 
             F958 : 72 20 43 41 4C 4C 
             F95E : 0D 0A             
    8225/    F960 : 54 50 5B 4F 4E 7C   		db	"TP[ON|OFF] :Trace Print Mode", CR, LF, 00h
             F966 : 4F 46 46 5D 20 3A 
             F96C : 54 72 61 63 65 20 
             F972 : 50 72 69 6E 74 20 
             F978 : 4D 6F 64 65 0D 0A 
             F97E : 00                
    8226/    F97F :                     
    8227/    F97F :                     OPNMSG:
    8228/    F97F : 0D 0A               	DB	CR,LF
    8229/    F981 :                     
    8230/    F981 : =>TRUE              	if SuperMEZ80
    8231/    F981 : 45 4D 55 5A 38 30   	db	"EMUZ80 MONITOR Rev.B05 for SuperMEZ80",CR,LF
             F987 : 20 4D 4F 4E 49 54 
             F98D : 4F 52 20 52 65 76 
             F993 : 2E 42 30 35 20 66 
             F999 : 6F 72 20 53 75 70 
             F99F : 65 72 4D 45 5A 38 
             F9A5 : 30 0D 0A          
    8232/    F9A8 : =>FALSE             	else
    8233/    F9A8 :                     	db	"EMUZ80 MONITOR Rev.B05",CR,LF
    8234/    F9A8 : [8230]              	endif
    8235/    F9A8 :                     	
    8236/    F9A8 : 54 68 69 73 20 6D   	db	"This monitor is based on unimon.",CR,LF,00H
             F9AE : 6F 6E 69 74 6F 72 
             F9B4 : 20 69 73 20 62 61 
             F9BA : 73 65 64 20 6F 6E 
             F9C0 : 20 75 6E 69 6D 6F 
             F9C6 : 6E 2E 0D 0A 00    
    8237/    F9CB :                     
    8238/    F9CB :                     PROMPT:
    8239/    F9CB : 5D 20 00            	DB	"] ",00H
    8240/    F9CE :                     
    8241/    F9CE :                     IHEMSG:
    8242/    F9CE : 45 72 72 6F 72 20   	DB	"Error ihex",CR,LF,00H
             F9D4 : 69 68 65 78 0D 0A 
             F9DA : 00                
    8243/    F9DB :                     SHEMSG:
    8244/    F9DB : 45 72 72 6F 72 20   	DB	"Error srec",CR,LF,00H
             F9E1 : 73 72 65 63 0D 0A 
             F9E7 : 00                
    8245/    F9E8 :                     ERRMSG:
    8246/    F9E8 : 45 72 72 6F 72 0D   	DB	"Error",CR,LF,00H
             F9EE : 0A 00             
    8247/    F9F0 :                     
    8248/    F9F0 :                     DSEP0:
    8249/    F9F0 : 20 3A 00            	DB	" :",00H
    8250/    F9F3 :                     DSEP1:
    8251/    F9F3 : 20 7C 20 00         	DB	" | ",00H
    8252/    F9F7 :                     
    8253/    F9F7 : 20 20 00            dsap	db	"  ", 00
    8254/    F9FA :                     
    8255/    F9FA :                     IHEXER:
    8256/    F9FA : 3A 30 30 30 30 30           DB	":00000001FF",CR,LF,00H
             FA00 : 30 30 31 46 46 0D 
             FA06 : 0A 00             
    8257/    FA08 :                     SRECER:
    8258/    FA08 : 53 39 30 33 30 30           DB	"S9030000FC",CR,LF,00H
             FA0E : 30 30 46 43 0D 0A 
             FA14 : 00                
    8259/    FA15 :                     
    8260/    FA15 :                     	;; Register dump table
    8261/    FA15 : 6A FA 0D FF         RDTAB:	DW	RDSA,   REGAF+1
    8262/    FA19 : 01                  	DB	1
    8263/    FA1A : 6E FA 0E FF         	DW	RDSBC,  REGBC
    8264/    FA1E : 02                  	DB	2
    8265/    FA1F : 74 FA 10 FF         	DW	RDSDE,  REGDE
    8266/    FA23 : 02                  	DB	2
    8267/    FA24 : 7A FA 12 FF         	DW	RDSHL,  REGHL
    8268/    FA28 : 02                  	DB	2
    8269/    FA29 : 80 FA 0C FF         	DW	RDSF,   REGAF
    8270/    FA2D : 01                  	DB	1
    8271/    FA2E :                     
    8272/    FA2E : 85 FA 1C FF         	DW	RDSIX,  REGIX
    8273/    FA32 : 02                  	DB	2
    8274/    FA33 : 8A FA 1E FF         	DW	RDSIY,  REGIY
    8275/    FA37 : 02                  	DB	2
    8276/    FA38 :                     
    8277/    FA38 : 8F FA 15 FF         	DW	RDSAX,  REGAFX+1
    8278/    FA3C : 01                  	DB	1
    8279/    FA3D : 95 FA 16 FF         	DW	RDSBCX, REGBCX
    8280/    FA41 : 02                  	DB	2
    8281/    FA42 : 9B FA 18 FF         	DW	RDSDEX, REGDEX
    8282/    FA46 : 02                  	DB	2
    8283/    FA47 : A1 FA 1A FF         	DW	RDSHLX, REGHLX
    8284/    FA4B : 02                  	DB	2
    8285/    FA4C : A7 FA 14 FF         	DW	RDSFX,  REGAFX
    8286/    FA50 : 01                  	DB	1
    8287/    FA51 :                     
    8288/    FA51 : AC FA 20 FF         	DW	RDSSP,  REGSP
    8289/    FA55 : 02                  	DB	2
    8290/    FA56 : B1 FA 22 FF         	DW	RDSPC,  REGPC
    8291/    FA5A : 02                  	DB	2
    8292/    FA5B : B6 FA 24 FF         	DW	RDSI,   REGI
    8293/    FA5F : 01                  	DB	1
    8294/    FA60 : BA FA 25 FF         	DW	RDSR,   REGR
    8295/    FA64 : 01                  	DB	1
    8296/    FA65 :                     
    8297/    FA65 : 00 00 00 00         	DW	0000H,  0000H
    8298/    FA69 : 00                  	DB	0
    8299/    FA6A :                     
    8300/    FA6A : 41 20 3D 00         RDSA:	DB	"A =",00H
    8301/    FA6E : 20 42 43 20 3D 00   RDSBC:	DB	" BC =",00H
    8302/    FA74 : 20 44 45 20 3D 00   RDSDE:	DB	" DE =",00H
    8303/    FA7A : 20 48 4C 20 3D 00   RDSHL:	DB	" HL =",00H
    8304/    FA80 :                     
    8305/    FA80 : 20 46 20 3D 00      RDSF:	DB	" F =",00H
    8306/    FA85 :                     
    8307/    FA85 : =0FAH               RDSF_H	equ	RDSF >> 8
    8308/    FA85 : =80H                RDSF_L	equ	RDSF & 0FFh
    8309/    FA85 :                     
    8310/    FA85 :                     
    8311/    FA85 : 20 49 58 3D 00      RDSIX:	DB	" IX=",00H
    8312/    FA8A : 20 49 59 3D 00      RDSIY:	DB	" IY=",00H
    8313/    FA8F : 0D 0A 41 27 3D 00   RDSAX:	DB	CR,LF,"A'=",00H
    8314/    FA95 : 20 42 43 27 3D 00   RDSBCX:	DB	" BC'=",00H
    8315/    FA9B : 20 44 45 27 3D 00   RDSDEX:	DB	" DE'=",00H
    8316/    FAA1 : 20 48 4C 27 3D 00   RDSHLX:	DB	" HL'=",00H
    8317/    FAA7 :                     
    8318/    FAA7 : 20 46 27 3D 00      RDSFX:	DB	" F'=",00H
    8319/    FAAC :                     
    8320/    FAAC : =0FAH               RDSFX_H	equ	RDSFX >> 8
    8321/    FAAC : =0A7H               RDSFX_L	equ	RDSFX & 0FFh
    8322/    FAAC :                     
    8323/    FAAC : 20 53 50 3D 00      RDSSP:	DB	" SP=",00H
    8324/    FAB1 : 20 50 43 3D 00      RDSPC:	DB	" PC=",00H
    8325/    FAB6 : 20 49 3D 00         RDSI:	DB	" I=",00H
    8326/    FABA : 20 52 3D 00         RDSR:	DB	" R=",00H
    8327/    FABE :                     
    8328/    FABE :                     RNTAB:
    8329/    FABE : 41 0F               	DB	'A',0FH		; "A?"
    8330/    FAC0 : 08 FB 00 00         	DW	RNTABA,0
    8331/    FAC4 : 42 0F               	DB	'B',0FH		; "B?"
    8332/    FAC6 : 16 FB 00 00         	DW	RNTABB,0
    8333/    FACA : 43 0F               	DB	'C',0FH		; "C?"
    8334/    FACC : 38 FB 00 00         	DW	RNTABC,0
    8335/    FAD0 : 44 0F               	DB	'D',0FH		; "D?"
    8336/    FAD2 : 46 FB 00 00         	DW	RNTABD,0
    8337/    FAD6 : 45 0F               	DB	'E',0FH		; "E?"
    8338/    FAD8 : 68 FB 00 00         	DW	RNTABE,0
    8339/    FADC : 46 0F               	DB	'F',0FH		; "F?"
    8340/    FADE : 76 FB 00 00         	DW	RNTABF,0
    8341/    FAE2 : 48 0F               	DB	'H',0FH		; "H?"
    8342/    FAE4 : 84 FB 00 00         	DW	RNTABH,0
    8343/    FAE8 : 49 0F               	DB	'I',0FH		; "I?"
    8344/    FAEA : B4 FB 00 00         	DW	RNTABI,0
    8345/    FAEE : 4C 0F               	DB	'L',0FH		; "L?"
    8346/    FAF0 : A6 FB 00 00         	DW	RNTABL,0
    8347/    FAF4 : 50 0F               	DB	'P',0FH		; "P?"
    8348/    FAF6 : C8 FB 00 00         	DW	RNTABP,0
    8349/    FAFA : 52 01               	DB	'R',1		; "R"
    8350/    FAFC : 25 FF 23 FC         	DW	REGR,RNR
    8351/    FB00 : 53 0F               	DB	'S',0FH		; "S?"
    8352/    FB02 : D0 FB 00 00         	DW	RNTABS,0
    8353/    FB06 :                     
    8354/    FB06 : 00 00               	DB	00H,0		; End mark
    8355/    FB08 :                     
    8356/    FB08 :                     RNTABA:
    8357/    FB08 : 00 01               	DB	00H,1		; "A"
    8358/    FB0A : 0D FF D8 FB         	DW	REGAF+1,RNA
    8359/    FB0E : 27 01               	DB	27H,1		; "A'"
    8360/    FB10 :                     ;;	DB	'\'',1		; "A'"
    8361/    FB10 : 15 FF F1 FB         	DW	REGAFX+1,RNAX
    8362/    FB14 :                     
    8363/    FB14 : 00 00               	DB	00H,0
    8364/    FB16 :                     	
    8365/    FB16 :                     RNTABB:
    8366/    FB16 : 00 01               	DB	00H,1		; "B"
    8367/    FB18 : 0F FF DD FB         	DW	REGBC+1,RNB
    8368/    FB1C : 27 01               	DB	27H,1		; "B'"
    8369/    FB1E :                     ;;	DB	'\'',1		; "B'"
    8370/    FB1E : 17 FF F8 FB         	DW	REGBCX+1,RNBX
    8371/    FB22 : 43 0F               	DB	'C',0FH		; "BC?"
    8372/    FB24 : 2A FB 00 00         	DW	RNTABBC,0
    8373/    FB28 :                     
    8374/    FB28 : 00 00               	DB	00H,0		; End mark
    8375/    FB2A :                     
    8376/    FB2A :                     RNTABBC:
    8377/    FB2A : 00 02               	DB	00H,2		; "BC"
    8378/    FB2C : 0E FF DA FB         	DW	REGBC,RNBC
    8379/    FB30 : 27 02               	DB	27H,2		; "BC'"
    8380/    FB32 :                     ;;	DB	'\'',2		; "BC'"
    8381/    FB32 : 16 FF F4 FB         	DW	REGBCX,RNBCX
    8382/    FB36 :                     
    8383/    FB36 : 00 00               	DB	00H,0
    8384/    FB38 :                     	
    8385/    FB38 :                     RNTABC:
    8386/    FB38 : 00 01               	DB	00H,1		; "C"
    8387/    FB3A : 0E FF DF FB         	DW	REGBC,RNC
    8388/    FB3E : 27 01               	DB	27H,1		; "C'"
    8389/    FB40 :                     ;;	DB	'\'',1		; "C'"
    8390/    FB40 : 16 FF FB FB         	DW	REGBCX,RNCX
    8391/    FB44 :                     
    8392/    FB44 : 00 00               	DB	00H,0
    8393/    FB46 :                     	
    8394/    FB46 :                     RNTABD:
    8395/    FB46 : 00 01               	DB	00H,1		; "D"
    8396/    FB48 : 11 FF E4 FB         	DW	REGDE+1,RND
    8397/    FB4C : 27 01               	DB	27H,1		; "D'"
    8398/    FB4E :                     ;;	DB	'\'',1		; "D'"
    8399/    FB4E : 19 FF 02 FC         	DW	REGDEX+1,RNDX
    8400/    FB52 : 45 0F               	DB	'E',0FH		; "DE?"
    8401/    FB54 : 5A FB 00 00         	DW	RNTABDE,0
    8402/    FB58 :                     
    8403/    FB58 : 00 00               	DB	00H,0
    8404/    FB5A :                     
    8405/    FB5A :                     RNTABDE:
    8406/    FB5A : 00 02               	DB	00H,2		; "DE"
    8407/    FB5C : 10 FF E1 FB         	DW	REGDE,RNDE
    8408/    FB60 : 27 02               	DB	27H,2		; "DE'"
    8409/    FB62 :                     ;;	DB	'\'',2		; "DE'"
    8410/    FB62 : 18 FF FE FB         	DW	REGDEX,RNDEX
    8411/    FB66 :                     
    8412/    FB66 : 00 00               	DB	00H,0
    8413/    FB68 :                     	
    8414/    FB68 :                     RNTABE:
    8415/    FB68 : 00 01               	DB	00H,1		; "E"
    8416/    FB6A : 10 FF E6 FB         	DW	REGDE,RNE
    8417/    FB6E : 27 01               	DB	27H,1		; "E'"
    8418/    FB70 :                     ;;	DB	'\'',1		; "E'"
    8419/    FB70 : 18 FF 05 FC         	DW	REGDEX,RNEX
    8420/    FB74 :                     
    8421/    FB74 : 00 00               	DB	00H,0
    8422/    FB76 :                     	
    8423/    FB76 :                     RNTABF:
    8424/    FB76 : 00 01               	DB	00H,1		; "F"
    8425/    FB78 : 0C FF EF FB         	DW	REGAF,RNF
    8426/    FB7C : 27 01               	DB	27H,1		; "F'"
    8427/    FB7E :                     ;;	DB	'\'',1		; "F'"
    8428/    FB7E : 14 FF 12 FC         	DW	REGAFX,RNFX
    8429/    FB82 :                     
    8430/    FB82 : 00 00               	DB	00H,0
    8431/    FB84 :                     	
    8432/    FB84 :                     RNTABH:
    8433/    FB84 : 00 01               	DB	00H,1		; "H"
    8434/    FB86 : 13 FF EB FB         	DW	REGHL+1,RNH
    8435/    FB8A : 27 01               	DB	27H,1		; "H'"
    8436/    FB8C :                     ;;	DB	'\'',1		; "H'"
    8437/    FB8C : 1B FF 0C FC         	DW	REGHLX+1,RNHX
    8438/    FB90 : 4C 0F               	DB	'L',0FH		; "HL?"
    8439/    FB92 : 98 FB 00 00         	DW	RNTABHL,0
    8440/    FB96 :                     
    8441/    FB96 : 00 00               	DB	00H,0
    8442/    FB98 :                     
    8443/    FB98 :                     RNTABHL:
    8444/    FB98 : 00 02               	DB	00H,2		; "HL"
    8445/    FB9A : 12 FF E8 FB         	DW	REGHL,RNHL
    8446/    FB9E : 27 02               	DB	27H,2		; "HL'"
    8447/    FBA0 :                     ;;	DB	'\'',2		; "HL'"
    8448/    FBA0 : 1A FF 08 FC         	DW	REGHLX,RNHLX
    8449/    FBA4 :                     
    8450/    FBA4 : 00 00               	DB	00H,0
    8451/    FBA6 :                     	
    8452/    FBA6 :                     RNTABL:
    8453/    FBA6 : 00 01               	DB	00H,1		; "L"
    8454/    FBA8 : 12 FF ED FB         	DW	REGHL,RNL
    8455/    FBAC : 27 01               	DB	27H,1		; "L'"
    8456/    FBAE :                     ;;	DB	'\'',1		; "L'"
    8457/    FBAE : 1A FF 0F FC         	DW	REGHLX,RNLX
    8458/    FBB2 :                     
    8459/    FBB2 : 00 00               	DB	00H,0
    8460/    FBB4 :                     	
    8461/    FBB4 :                     RNTABI:
    8462/    FBB4 : 00 01               	DB	00H,1		; "I"
    8463/    FBB6 : 24 FF 21 FC         	DW	REGI,RNI
    8464/    FBBA : 58 02               	DB	'X',2		; "IX"
    8465/    FBBC : 1C FF 15 FC         	DW	REGIX,RNIX
    8466/    FBC0 : 59 02               	DB	'Y',2		; "IY"
    8467/    FBC2 : 1E FF 18 FC         	DW	REGIY,RNIY
    8468/    FBC6 :                     	
    8469/    FBC6 : 00 00               	DB	00H,0
    8470/    FBC8 :                     
    8471/    FBC8 :                     RNTABP:
    8472/    FBC8 : 43 02               	DB	'C',2		; "PC"
    8473/    FBCA : 22 FF 1E FC         	DW	REGPC,RNPC
    8474/    FBCE :                     
    8475/    FBCE : 00 00               	DB	00H,0
    8476/    FBD0 :                     
    8477/    FBD0 :                     RNTABS:
    8478/    FBD0 : 50 02               	DB	'P',2		; "SP"
    8479/    FBD2 : 20 FF 1B FC         	DW	REGSP,RNSP
    8480/    FBD6 :                     
    8481/    FBD6 : 00 00               	DB	00H,0
    8482/    FBD8 :                     
    8483/    FBD8 : 41 00               RNA:	DB	"A",00H
    8484/    FBDA : 42 43 00            RNBC:	DB	"BC",00H
    8485/    FBDD : 42 00               RNB:	DB	"B",00H
    8486/    FBDF : 43 00               RNC:	DB	"C",00H
    8487/    FBE1 : 44 45 00            RNDE:	DB	"DE",00H
    8488/    FBE4 : 44 00               RND:	DB	"D",00H
    8489/    FBE6 : 45 00               RNE:	DB	"E",00H
    8490/    FBE8 : 48 4C 00            RNHL:	DB	"HL",00H
    8491/    FBEB : 48 00               RNH:	DB	"H",00H
    8492/    FBED : 4C 00               RNL:	DB	"L",00H
    8493/    FBEF : 46 00               RNF:	DB	"F",00H
    8494/    FBF1 : 41 27 00            RNAX:	DB	"A'",00H
    8495/    FBF4 : 42 43 27 00         RNBCX:	DB	"BC'",00H
    8496/    FBF8 : 42 27 00            RNBX:	DB	"B'",00H
    8497/    FBFB : 43 27 00            RNCX:	DB	"C'",00H
    8498/    FBFE : 44 45 27 00         RNDEX:	DB	"DE'",00H
    8499/    FC02 : 44 27 00            RNDX:	DB	"D'",00H
    8500/    FC05 : 45 27 00            RNEX:	DB	"E'",00H
    8501/    FC08 : 48 4C 27 00         RNHLX:	DB	"HL'",00H
    8502/    FC0C : 48 27 00            RNHX:	DB	"H'",00H
    8503/    FC0F : 4C 27 00            RNLX:	DB	"L'",00H
    8504/    FC12 : 46 27 00            RNFX:	DB	"F'",00H
    8505/    FC15 : 49 58 00            RNIX:	DB	"IX",00H
    8506/    FC18 : 49 59 00            RNIY:	DB	"IY",00H
    8507/    FC1B : 53 50 00            RNSP:	DB	"SP",00H
    8508/    FC1E : 50 43 00            RNPC:	DB	"PC",00H
    8509/    FC21 : 49 00               RNI:	DB	"I",00H
    8510/    FC23 : 52 00               RNR:	DB	"R",00H
    8511/    FC25 :                     
    8512/    FC25 :                     ;;;
    8513/    FC25 :                     ;;; Console drivers
    8514/    FC25 :                     ;;;
    8515/    FC25 :                     
    8516/    FC25 : =>TRUE              	IF	SuperMEZ80
    8517/    FC25 :                     
    8518/    FC25 :                     CONIN:
    8519/    FC25 : DB 01               	IN	A,(UARTCR)
    8520/    FC27 : CB 47               	BIT	0,A
    8521/    FC29 : 28 FA               	JR	Z,CONIN
    8522/    FC2B : DB 00               	IN	A,(UARTDR)
    8523/    FC2D : C9                  	RET
    8524/    FC2E :                     
    8525/    FC2E :                     CONST:
    8526/    FC2E : DB 01               	IN	A,(UARTCR)
    8527/    FC30 : CB 47               	BIT	0,A
    8528/    FC32 : C9                  	RET
    8529/    FC33 :                     
    8530/    FC33 :                     CONOUT:
    8531/    FC33 : F5                  	PUSH	AF
    8532/    FC34 : DB 01               PCST1:	IN	A,(UARTCR)
    8533/    FC36 : CB 4F               	BIT	1,A
    8534/    FC38 : 28 FA               	JR	Z,PCST1
    8535/    FC3A : F1                  	POP	AF
    8536/    FC3B : D3 00               	OUT	(UARTDR),A
    8537/    FC3D : C9                  	RET
    8538/    FC3E :                     
    8539/    FC3E : =>TRUE              	IF	SMEZ80Full=0
    8540/    FC3E :                     end_mon:
    8541/    FC3E : FF FF FF FF FF FF   	db	($ & 0FF00H)+100H-$ dup(0FFH)
             FC44 : FF FF FF FF FF FF 
             FC4A : FF FF FF FF FF FF 
             FC50 : FF FF FF FF FF FF 
             FC56 : FF FF FF FF FF FF 
             FC5C : FF FF FF FF FF FF 
             FC62 : FF FF FF FF FF FF 
             FC68 : FF FF FF FF FF FF 
             FC6E : FF FF FF FF FF FF 
             FC74 : FF FF FF FF FF FF 
             FC7A : FF FF FF FF FF FF 
             FC80 : FF FF FF FF FF FF 
             FC86 : FF FF FF FF FF FF 
             FC8C : FF FF FF FF FF FF 
             FC92 : FF FF FF FF FF FF 
             FC98 : FF FF FF FF FF FF 
             FC9E : FF FF FF FF FF FF 
             FCA4 : FF FF FF FF FF FF 
             FCAA : FF FF FF FF FF FF 
             FCB0 : FF FF FF FF FF FF 
             FCB6 : FF FF FF FF FF FF 
             FCBC : FF FF FF FF FF FF 
             FCC2 : FF FF FF FF FF FF 
             FCC8 : FF FF FF FF FF FF 
             FCCE : FF FF FF FF FF FF 
             FCD4 : FF FF FF FF FF FF 
             FCDA : FF FF FF FF FF FF 
             FCE0 : FF FF FF FF FF FF 
             FCE6 : FF FF FF FF FF FF 
             FCEC : FF FF FF FF FF FF 
             FCF2 : FF FF FF FF FF FF 
             FCF8 : FF FF FF FF FF FF 
             FCFE : FF FF             
    8542/    FD00 : [8539]              	ENDIF
    8543/    FD00 :                     
    8544/    FD00 : =>FALSE             	ELSE
    8545/    FD00 :                     
    8546/    FD00 :                     CONIN:
    8547/    FD00 :                     	LD	A,(UARTCR)
    8548/    FD00 :                     	BIT	0,A
    8549/    FD00 :                     	JR	Z,CONIN
    8550/    FD00 :                     	LD	A,(UARTDR)
    8551/    FD00 :                     	RET
    8552/    FD00 :                     
    8553/    FD00 :                     CONST:
    8554/    FD00 :                     	LD	A,(UARTCR)
    8555/    FD00 :                     	BIT	0,A
    8556/    FD00 :                     	RET
    8557/    FD00 :                     
    8558/    FD00 :                     CONOUT:
    8559/    FD00 :                     	PUSH	AF
    8560/    FD00 :                     PCST1:	LD	A,(UARTCR)
    8561/    FD00 :                     	BIT	1,A
    8562/    FD00 :                     	JR	Z,PCST1
    8563/    FD00 :                     	POP	AF
    8564/    FD00 :                     	LD	(UARTDR),A
    8565/    FD00 :                     	RET
    8566/    FD00 : [8516]              	ENDIF
    8567/    FD00 :                     
    8568/    FD00 : =>FALSE             	IF	(SuperMEZ80=0) || (SMEZ80Full=1)
    8569/    FD00 :                     	db	BASIC_TOP - $ dup(0ffH)
    8570/    FD00 :                     ;	ORG	BASIC_TOP
    8571/    FD00 : [8568]              	ENDIF
    8572/    FD00 :                     
    8573/    FD00 :                     	;;
    8574/    FD00 :                     	;; Work Area
    8575/    FD00 :                     	;;
    8576/    FD00 :                     	
    8577/    FF00 :                     	ORG	WORK_B
    8578/    FF00 :                     
    8579/    FF00 : =>FALSE             	IF	BACKDOOR
    8580/    FF00 :                     stealRST08:	ds	2	; hacking RST 08H, set jump address
    8581/    FF00 :                     stealRST10:	ds	2	; hacking RST 10H, set jump address
    8582/    FF00 :                     stealRST18:	ds	2	; hacking RST 18H, set jump address
    8583/    FF00 :                     stealRST20:	ds	2	; hacking RST 20H, set jump address
    8584/    FF00 :                     stealRST28:	ds	2	; hacking RST 28H, set jump address
    8585/    FF00 :                     stealRST30:	ds	2	; hacking RST 30H, set jump address
    8586/    FF00 :                     stealRST38:	ds	2	; hacking RST 38H, set jump address
    8587/    FF00 :                     save_hl:	ds	2
    8588/    FF00 : [8579]              	ENDIF
    8589/    FF00 :                     	
    8590/    FF00 :                     DSADDR:	DS	2	; Dump start address
    8591/    FF02 :                     DEADDR:	DS	2	; Dump end address
    8592/    FF04 :                     DSTATE:	DS	1	; Dump state
    8593/    FF05 :                     GADDR:	DS	2	; Go address
    8594/    FF07 :                     SADDR:	DS	2	; Set address
    8595/    FF09 :                     HEXMOD:	DS	1	; HEX file mode
    8596/    FF0A :                     RECTYP:	DS	1	; Record type
    8597/    FF0B :                     SIZE:	DS	1	; I/O Size 00H,'W','S'
    8598/    FF0C :                     
    8599/    FF0C :                     REG_B:	
    8600/    FF0C :                     REGAF:	DS	2
    8601/    FF0E :                     REGBC:	DS	2
    8602/    FF10 :                     REGDE:	DS	2
    8603/    FF12 :                     REGHL:	DS	2
    8604/    FF14 :                     REGAFX:	DS	2		; Register AF'
    8605/    FF16 :                     REGBCX:	DS	2
    8606/    FF18 :                     REGDEX:	DS	2
    8607/    FF1A :                     REGHLX:	DS	2		; Register HL'
    8608/    FF1C :                     REGIX:	DS	2
    8609/    FF1E :                     REGIY:	DS	2
    8610/    FF20 :                     REGSP:	DS	2
    8611/    FF22 :                     REGPC:	DS	2
    8612/    FF24 :                     REGI:	DS	1
    8613/    FF25 :                     REGR:	DS	1
    8614/    FF26 :                     REG_E:
    8615/    FF26 :                     
    8616/    FF26 :                     l_jpflg	ds	1		; L command jp flag
    8617/    FF27 :                     ld_jmp	ds	2		; jump address after load
    8618/    FF29 :                     
    8619/    FF29 : =>FALSE             	IF RAM12K
    8620/    FF29 :                     ; stop watch timer
    8621/    FF29 :                     
    8622/    FF29 :                     c16b:	ds	2	; copy of TIMER0_CNT
    8623/    FF29 :                     secb:	ds	2	; copy of TIMER0_SCTT
    8624/    FF29 :                     msecb:	ds	2
    8625/    FF29 : [8619]              	ENDIF
    8626/    FF29 :                     
    8627/    FF29 :                     ; DIV 16 /16 buffer
    8628/    FF29 :                     DIV16_NA:	ds	2
    8629/    FF2B :                     DIV16_NB:	ds	2
    8630/    FF2D :                     DIV16_NC:	DS	2
    8631/    FF2F :                     DIV16_ND:	DS	2
    8632/    FF31 :                     
    8633/    FF31 :                     ; go command temp start address
    8634/    FF31 :                     goTmp:		ds	2
    8635/    FF33 :                     
    8636/    FF33 :                     ; trace mode switch
    8637/    FF33 :                     TP_mode:	ds	1	; N: display on, F: display off
    8638/    FF34 :                     TM_mode:	ds	1	; 'S':skip call, 'I':trace CALL IN
    8639/    FF35 :                     TC_cnt:		ds	2	; numbers of step
    8640/    FF37 :                     tmpT:		ds	2	; save temp buffer
    8641/    FF39 :                     fever_t:	ds	1	; flag trace forever
    8642/    FF3A :                     
    8643/    FF3A :                     ; break, trace point work area
    8644/    FF3A : =0FF3AH             dbg_wtop	equ	$
    8645/    FF3A :                     tpt1_f:		ds	1
    8646/    FF3B :                     tpt1_op:	ds	1	; save trace point1 opcode
    8647/    FF3C :                     tpt1_adr:	ds	2
    8648/    FF3E :                     tpt2_f:		ds	1
    8649/    FF3F :                     tpt2_op:	ds	1	; save trace point2 opcode (for branch)
    8650/    FF40 :                     tpt2_adr:	ds	2
    8651/    FF42 :                     
    8652/    FF42 :                     ; break point work area
    8653/    FF42 :                     bpt1_f:		ds	1
    8654/    FF43 :                     bpt1_op:	ds	1
    8655/    FF44 :                     bpt1_adr:	ds	2
    8656/    FF46 :                     bpt2_f:		ds	1
    8657/    FF47 :                     bpt2_op:	ds	1
    8658/    FF48 :                     bpt2_adr:	ds	2
    8659/    FF4A :                     
    8660/    FF4A :                     tmpb_f:		ds	1
    8661/    FF4B :                     tmpb_op:	ds	1
    8662/    FF4C :                     tmpb_adr:	ds	2
    8663/    FF4E : =0FF4EH             dbg_wend	equ	$
    8664/    FF4E :                     
    8665/    FF4E :                     ; minimal assembler
    8666/    FF4E :                     
    8667/    FF4E :                     asm_adr:	ds	2
    8668/    FF50 :                     tasm_adr:	ds	2
    8669/    FF52 :                     element_cnt:	ds	1	; Element count of input string
    8670/    FF53 :                     byte_count:	ds	1	; numbers of Machine code
    8671/    FF54 :                     opc_cd:		ds	1	; opecode number
    8672/    FF55 :                     opr1_cd:	ds	1	; 1st operand number
    8673/    FF56 :                     opr2_cd:	ds	1	; 2nd operand number
    8674/    FF57 :                     opr_num25:	ds	2	; save number nnnn
    8675/    FF59 :                     opr_num35:	ds	2	; save number (nnnn)
    8676/    FF5B :                     opr_num37:	ds	1	; save number (IY-nn)
    8677/    FF5C :                     opr_num34:	ds	1	; save number (IY+nn)
    8678/    FF5D :                     opr_num36:	ds	1	; save number (IX-nn)
    8679/    FF5E :                     opr_num33:	ds	1	; save number (IX+nn)
    8680/    FF5F :                     cb_mcw		ds	2	; use BIT, RES, SET
    8681/    FF61 :                     cb_xyw		ds	2	; use BIT, RES, SET
    8682/    FF63 :                     
    8683/    FF63 :                     F_bit:		ds	F_bitSize+1
    8684/    FF6C :                     ky_flg:		ds	1	; b00000ULC ( U: UPPER L: LF C: CR )
    8685/    FF6D :                     				; U=0: Lower To Upper
    8686/    FF6D :                     				; L=0: End of line is added LF
    8687/    FF6D :                     				; C=0: End of line is added CR
    8688/    FF6D :                     ;::::::::::::::::::::::::::
    8689/    FF6D :                     ; DISASEM work area
    8690/    FF6D :                     ;;;;;;;;;;;;;;;;;;;;;;;;;;;
    8691/    FF6D :                     dasm_ed:	ds	2
    8692/    FF6F :                     dasm_stpf:	ds	1
    8693/    FF70 :                     dasm_adr:	ds	2
    8694/    FF72 :                     reg_xy:		ds	2	; RNIX or RNIY
    8695/    FF74 :                     xy_srtp		ds	2	; strings pointer
    8696/    FF76 :                     
    8697/    FF76 :                     mc_Size:	ds	1
    8698/    FF77 :                     
    8699/    FF77 :                     ;;;;;;;;;;;;;;;;;;;
    8700/    FF77 :                     ; union area
    8701/    FF77 :                     ;;;;;;;;;;;;;;;;;;;
    8702/    FF77 :                     INBUF: ; Line input buffer
    8703/    FF77 :                     line_buf:
    8704/    FF77 :                     
    8705/    FF77 :                     ;  DidAsm string buffer
    8706/    FF77 :                     ; total 42 bytes
    8707/    FF77 :                     dasm_bs:
    8708/    FF77 :                     adr_mc_buf:	ds	19
    8709/    FF8A :                     dasm_OpcStr:	ds	8
    8710/    FF92 :                     dasm_OprStr:	ds	15 - NUMLEN
    8711/    FF9A :                     num_string:	ds	NUMLEN	; max 65536 or 0FFFFH + null( max 7bytes )
    8712/    FFA1 :                     dasm_be:
    8713/    FFA1 :                     
    8714/    FFA1 :                     	END
 AS V1.42 Beta [Bld 246] - Source File emuz80mon_RevB05.asm - Page 2 - 9/17/2023 2:29:38


  Symbol Table (* = unused):
  --------------------------

 ACS_KN2K :                   0D9E3 C |  ADCSTR :                     0E065 C |
 ADC_3MC :                        4 - |  ADC_A_ :                     0EB03 C |
 ADC_A_A :                    0EB25 C |  ADC_A_N :                    0EB1D C |
 ADC_A_X :                    0EB1A C |  ADC_FD :                     0EB41 C |
 ADC_HL_ :                    0EAFF C |  ADC_HL_BC :                  0EAFE C |
 ADC_HL_DE :                  0EAFA C |  ADC_HL_HL :                  0EAF6 C |
*ADC_HL_SP :                  0EAF2 C |  ADC_MC :                         9 - |
 ADDIXRP_TBL :                0E1F6 C |  ADDIYRP_TBL :                0E1FE C |
 ADDSTR :                     0E061 C |  ADD_HL_ :                    0EBA1 C |
 ADD_HL_BC :                  0EBB8 C |  ADD_HL_DE :                  0EBBD C |
 ADD_HL_HL :                  0EBC2 C | *ADD_HL_SP :                  0EBB3 C |
 ADD_IX_ :                    0EB67 C |  ADD_IX_IX :                  0EB8F C |
*ADD_IY_ :                    0EB63 C |  ADD_IY_IY :                  0EB99 C |
 ADD_OPSTR :                  0DF1B C |  ADD_RP_E :                   0DFC6 C |
 ADD_RP_S :                   0DFC2 C |  ADD_XY_BC :                  0EB87 C |
 ADD_XY_DE :                  0EB8B C | *ADD_XY_SP :                  0EB80 C |
 ADD_XY_XY :                  0EB95 C |  ADR_MC_BUF :                 0FF77 C |
 ADR_OVR :                    0F3B1 C |  ANALIZE_INPUT :              0F23D C |
 ANALIZE_OPR :                0F27F C |  ANDSTR :                     0E071 C |
 AND_CP :                     0F0B6 C |  AN_ERR :                     0F274 C |
 API01 :                      0F57F C |  API06 :                      0F5C1 C |
 APITBL :                     0F553 C |  APITBL_E :                   0F57F C |
*ARCHITECTURE :                                        "i386-unknown-win32" - |
 ASM_ADR :                    0FF4E C |  ASM_ERR :                    0E87C C |
*ASM_ERR1 :                   0E87F C |  A_COLON_SP :                 0DF6E C |
 A_CRLF :                     0DF39 C |  BACKDOOR :                       0 - |
 BACKTOMON :                  0F686 C |  BASE1 :                      0F097 C |
*BASIC_CST :                   2F00 - | *BASIC_TOP :                   2F00 - |
*BASIC_WST :                   2F03 - |  BITSTR :                     0E0E4 C |
 BIT_IXM :                    0E9FF C |  BIT_IXP :                    0E9ED C |
 BIT_IXP1 :                   0E9F0 C |  BIT_IYM :                    0EA0C C |
 BIT_IYP :                    0EA04 C |  BIT_IYP1 :                   0EA07 C |
 BIT_MCB :                    0E988 C |  BIT_MCBE :                   0E990 C |
 BIT_MCBN :                       8 - |  BIT_RES_SET :                0E9A4 C |
 BIT_XYT :                    0E990 C |  BI_HEX :                     0F359 C |
 BPT1_ADR :                   0FF44 C |  BPT1_F :                     0FF42 C |
 BPT1_OP :                    0FF43 C |  BPT2_ADR :                   0FF48 C |
 BPT2_F :                     0FF46 C |  BPT2_OP :                    0FF47 C |
 BP_CHK1 :                    0F624 C |  BP_CHK_END :                 0F651 C |
 BP_CLR :                     0D194 C |  BP_CLR1 :                    0D1AA C |
 BP_LOT :                     0D1BB C |  BP_MSG1 :                    0D1D1 C |
 BP_MSG2 :                    0D1D5 C |  BRK_CMD :                    0D148 C |
 BS :                             8 - |  BUFLEN :                        28 - |
 BYTE_COUNT :                 0FF53 C |  B_ACLR :                     0D1AF C |
 B_LIST :                     0D128 C |  B_LIST1 :                    0D136 C |
 B_MSG_OUT :                  0D1D8 C |  CALC_DIS_STEP :              0D6F6 C |
 CALC_RELADR :                0F386 C |  CALLSTR :                    0E050 C |
 CALL_MC1T :                  0EA11 C |  CAL_01 :                     0F3A0 C |
 CAL_1 :                      0F3A3 C | *CASESENSITIVE :                  0 - |
 CB_MCW :                     0FF5F C |  CB_XYW :                     0FF61 C |
 CC0 :                        0E160 C |  CC1 :                        0E163 C |
 CC2 :                        0E165 C |  CC3 :                        0E168 C |
 CC4 :                        0E16A C |  CC5 :                        0E16D C |
 CC6 :                        0E170 C |  CC7 :                        0E172 C |
 CCFSTR :                     0E0B9 C |  CC_NNNN :                    0DAC4 C |
 CC_OPR :                     0E184 C | *CHKERR :                     0D192 C |
 CHK_0CBH :                   0DAE1 C |  CHK_0DD3OP :                 0DC2E C |
 CHK_0DD4OP :                 0DCAD C |  CHK_0DDH :                   0DBA7 C |
 CHK_0DDH_1 :                 0DBBA C |  CHK_0EDH :                   0DD4D C |
 CHK_0FDH :                   0DE4A C |  CHK_1MC_BNH :                0D940 C |
 CHK_2MC :                    0D98D C |  CHK_3MC :                    0DA3D C |
 CHK_ADC :                    0D806 C |  CHK_ADC3MC :                 0EB28 C |
 CHK_ADD :                    0D7FA C |  CHK_ADD_RP :                 0D8BF C |
 CHK_AND :                    0D830 C |  CHK_BP :                     0F615 C |
 CHK_CALCC :                  0DAD2 C |  CHK_CALLN4 :                 0DAAB C |
 CHK_CP :                     0D854 C |  CHK_DD_CB :                  0DCF9 C |
 CHK_DEC :                    0D879 C |  CHK_DEC_RP :                 0D8A6 C |
 CHK_DI1 :                    0D69E C |  CHK_DJNZ :                   0DA08 C |
 CHK_EX :                     0D90F C |  CHK_FEVRE :                  0D2E6 C |
 CHK_INC :                    0D861 C |  CHK_INC_RP :                 0D88D C |
 CHK_JPCC :                   0DAB7 C |  CHK_JPN4 :                   0DA9F C |
 CHK_JRCC :                   0DA21 C |  CHK_JRNN :                   0DA11 C |
 CHK_LD :                     0D78B C |  CHK_LD1 :                    0D7C9 C |
 CHK_LD16 :                   0DA5E C |  CHK_LOGOP2 :                 0D9B4 C |
 CHK_NTRACE :                 0F669 C |  CHK_OR :                     0D848 C |
 CHK_POP_RP :                 0D8DD C |  CHK_PUSH_RP :                0D8F6 C |
 CHK_RET :                    0D953 C |  CHK_RST :                    0D96C C |
 CHK_SBC :                    0D821 C |  CHK_STPDI :                  0D6BD C |
 CHK_STRINGS :                0F2E0 C |  CHK_SUB :                    0D815 C |
 CHK_XOR :                    0D83C C |  CK_ENDMK :                   0F346 C |
 CLCC_TBLE :                  0D4AD C |  CLCC_TBLS :                  0D4A5 C |
 CLR_CRT :                    0F44D C |  CMD_HLP :                    0F7B6 C |
 COLD_ST :                       40 C |  COMMAND_HLP :                0D0D3 C |
 COM_ERRM :                   0E153 C |  CONIN :                      0FC25 C |
 CONOUT :                     0FC33 C |  CONST :                      0FC2E C |
*CONSTPI :        3.141592653589793 - |  CONT_ASM :                   0E8FA C |
 COUT_SP :                    0E88D C |  COUT_SP1 :                   0E8A3 C |
 COUT_SP2 :                   0E8BF C |  CPDRSTR :                    0E136 C |
 CPDSTR :                     0E110 C |  CPIRSTR :                    0E122 C |
 CPISTR :                     0E0FF C |  CPLSTR :                     0E0B1 C |
 CPSTR :                      0E07C C |  CPSTREND :                   0EFAB C |
 CPSTR_CRLF :                 0DF47 C |  CP_IXIY :                    0F0E7 C |
 CP_IY :                      0F0EF C |  CP_XY1 :                     0F0F4 C |
 CR :                            0D - |  CRLF :                       0F443 C |
 CSTART :                     0D003 C |  D16_END :                    0F74F C |
 D16_MINUS :                  0F747 C |  D16_MINUS_AFTER :            0F74B C |
 D16_MINUS_BEFORE :           0F746 C |  D16_PLUS :                   0F73B C |
 D16_PLUS_AFTER :             0F73F C |  DAASTR :                     0E0AD C |
 DASM_ADR :                   0FF70 C |  DASM_BE :                    0FFA1 C |
 DASM_BS :                    0FF77 C |  DASM_ED :                    0FF6D C |
 DASM_OPCSTR :                0FF8A C |  DASM_OPRSTR :                0FF92 C |
 DASM_STPF :                  0FF6F C | *DATE :                 "9/17/2023" - |
 DBG_WEND :                   0FF4E - |  DBG_WINI :                   0D047 C |
 DBG_WTOP :                   0FF3A - |  DDLOGTBL :                   0E206 C |
 DD_21 :                      0DCD3 C |  DD_22 :                      0DCE0 C |
 DD_2A :                      0DCE9 C |  DD_2A1 :                     0DCED C |
 DD_2NDTBL :                  0D568 C |  DD_2NDTBL1 :                 0D56C C |
 DD_2NDTBL2 :                 0D570 C |  DD_2NDTBL_E :                0D572 C |
 DD_2OPT :                    0E1EE C |  DD_BIT :                     0DD3D C |
 DD_BIT_OPTBL :               0DFEA C |  DD_BIT_OPTBLE :              0E002 C |
 DD_BSR :                     0DD34 C |  DD_CB_NN_XX :                0DD19 C |
 DD_LD :                      0DC6D C |  DD_LD1 :                     0DC85 C |
 DD_LDTBL :                   0E214 C |  DD_LD_TBL :                  0DFCE C |
 DD_LD_TBLE :                 0DFDC C |  DD_LOG_TBL :                 0DFDC C |
 DD_LOG_TBLE :                0DFE3 C |  DD_MIX :                     0DC98 C |
 DD_MIX1 :                    0DCA3 C |  DD_MIX2 :                    0DCA8 C |
 DD_MIX3 :                    0DC9B C |  DD_MIX4 :                    0DC91 C |
 DD_RES :                     0DD45 C |  DD_RT_STR :                  0E24C C |
 DD_RT_TBLE :                 0DFEA C |  DD_RT_TBLES :                0DFE3 C |
 DEADDR :                     0FF02 C |  DECSTR :                     0E083 C |
 DEC_CHR :                    0F36B C |  DEC_NUM :                    0F384 C |
 DEC_OPCDTBLE :               0DFBA C |  DEC_OPCDTBLS :               0DFB2 C |
 DEC_OPR :                    0F112 C |  DEC_RP_E :                   0DFC2 C |
 DEC_RP_S :                   0DFBE C |  DEC_STR :                    0F6F8 C |
 DEL :                           7F - |  DEX_SP_HL :                  0D938 C |
 DIP_TM :                     0D229 C |  DISASM_GO :                  0D6CB C |
 DISASSEMBLE :                0D67B C |  DISREGTBL :                  0E174 C |
 DISTR :                      0E0BD C |  DIS_ANALYSIS :               0D75A C |
 DIS_CALL :                   0F6C3 C |  DIS_GO1 :                    0D6D6 C |
*DIV16 :                      0F752 C |  DIV16_8 :                    0F72E C |
 DIV16_NA :                   0FF29 C |  DIV16_NB :                   0FF2B C |
 DIV16_NC :                   0FF2D C |  DIV16_ND :                   0FF2F C |
 DIV16_X0 :                   0F78F C |  DIV16_X1 :                   0F79A C |
 DIV16_X2 :                   0F768 C |  DIXN_TBL :                   0F10E C |
 DIX_TBL :                    0F10C C |  DIYN_TBL :                   0F110 C |
 DI_3MC :                     0F166 C |  DI_3MC1 :                    0F16C C |
 DI_IXNNUM :                      4 - |  DI_IXYNUM :                      6 - |
 DI_IY :                      0F162 C |  DI_IYNNUM :                      2 - |
 DI_NBS :                        12 - |  DI_NXT :                     0D684 C |
 DJNZSTR :                    0E04B C |  DJPHL :                      0D3B8 C |
 DMKST1 :                     0DF2F C |  DMKST2 :                     0DF31 C |
 DMKSTR0 :                    0DF25 C |  DMP_DB :                     0E8D0 C |
 DMP_DW :                     0E8DB C |  DM_BIT :                        80 - |
 DONOT_TRACE :                0E2B8 C |  DP0 :                        0D587 C |
 DP00 :                       0D597 C |  DP1 :                        0D5AC C |
 DPB :                        0D62F C |  DPB0 :                       0D646 C |
 DPB1 :                       0D655 C |  DPB2 :                       0D65A C |
 DPL :                        0D5F5 C |  DPL0 :                       0D606 C |
 DPL1 :                       0D616 C |  DPL2 :                       0D625 C |
 DPL3 :                       0D62A C |  DPM :                        0D5C8 C |
 DPM0 :                       0D5D3 C |  DPM1 :                       0D5EF C |
 DPM_C :                      0D5C2 C |  DSADDR :                     0FF00 C |
 DSAP :                       0F9F7 C |  DSEP0 :                      0F9F0 C |
 DSEP1 :                      0F9F3 C |  DSTATE :                     0FF04 C |
 DUMP :                       0D572 C |  D_I_TB :                     0F100 C |
 D_I_TBE :                    0F112 C |  E1S :                           0E - |
 E1S1 :                          15 - |  E1_E :                       0EE9D C |
 E1_E1 :                      0EEC0 C |  E1_S :                       0EE8F C |
 E1_S1 :                      0EEAB C |  E2S :                           1A - |
 E2_E :                       0EF2B C |  E2_S :                       0EF11 C |
 ED_4MC :                     0DE2B C |  ED_ADC :                     0DDD9 C |
 ED_IM :                      0DE0A C |  ED_LD_AI :                   0DDF3 C |
 ED_LD_AR :                   0DDEA C |  ED_LD_IA :                   0DE05 C |
 ED_LD_RA :                   0DDFC C |  ED_LD_RA1 :                  0DDFF C |
 ED_NOOPR :                   0E222 C |  ED_NO_OPR :                  0DE1D C |
 ED_OP_TBL :                  0E002 C |  ED_OP_TBLE :                 0E03A C |
 ED_OUT :                     0DDA8 C |  ED_OUT1 :                    0DDBC C |
 ED_RP_STR :                  0E1E2 C |  ED_SBC :                     0DDC3 C |
 ED_SBC1 :                    0DDD2 C |  EISTR :                      0E0C0 C |
 EL2_12 :                     0F1D3 C |  EL2_13 :                     0F1C9 C |
 EL2_130 :                    0F1E9 C |  EL2_16 :                     0F1CE C |
 EL2_17 :                     0F1C4 C |  EL2_18 :                     0F1BF C |
 EL2_19 :                     0F1BA C |  EL2_20 :                     0F1B5 C |
 EL2_23 :                     0F13B C |  EL2_24 :                     0F0B4 C |
 EL2_26 :                     0F136 C |  EL2_27 :                     0F0B0 C |
 EL2_28 :                     0F0AC C |  EL2_29 :                     0F0A8 C |
 EL2_41 :                     0F0A4 C |  EL2_410 :                    0F0D5 C |
 EL2_411 :                    0F0E2 C |  EL2_42 :                     0F06A C |
 EL2_43 :                     0F009 C |  EL2_44 :                     0EFEE C |
 EL2_441 :                    0EFFF C |  EL2_45 :                     0EFD3 C |
 EL2_451 :                    0EFDD C |  EL2_46 :                     0F046 C |
 EL2_49 :                     0F01C C |  EL2_54 :                     0F21B C |
 EL2_541 :                    0F236 C |  EL2_5411 :                   0F237 C |
 EL2_68 :                     0EFC1 C |  EL2_69 :                     0EF88 C |
 EL2_691 :                    0EFAF C |  EL2_692 :                    0EF9D C |
 EL2_70 :                     0EF73 C |  EL2_8 :                      0F181 C |
 EL2_81 :                     0F183 C |  EL2_82 :                     0F1A7 C |
 EL2_9 :                      0F17D C |  EL2_DI :                     0F13E C |
 EL3_1 :                      0EC51 C |  EL3_11 :                     0ECEF C |
 EL3_12 :                     0EC79 C |  EL3_121 :                    0ED7F C |
 EL3_125 :                    0EC7D C |  EL3_126 :                    0EC93 C |
 EL3_13 :                     0EDB0 C |  EL3_14 :                     0EDBE C |
 EL3_1_2 :                    0ED6A C |  EL3_21 :                     0EB45 C |
 EL3_211 :                    0EB69 C |  EL3_212 :                    0EB82 C |
 EL3_22 :                     0EACC C |  EL3_221 :                    0EAD2 C |
 EL3_25 :                     0EAC4 C |  EL3_34 :                     0E998 C |
 EL3_341 :                    0E9E9 C |  EL3_342 :                    0E9F3 C |
 EL3_35 :                     0E95C C |  EL3_36 :                     0E97A C |
 EL3_42 :                     0EA26 C |  EL3_421 :                    0EA29 C |
 EL3_43 :                     0EA8F C |  EL3_431 :                    0EAB0 C |
 EL3_45 :                     0EA19 C |  EL3_55 :                     0EA4F C |
 EL3_550 :                    0EA5A C |  EL3_551 :                    0EA78 C |
 EL3_552 :                    0EA7B C |  EL3_6 :                      0EBC7 C |
 EL3_60 :                     0EA46 C |  EL3_61 :                     0EC0A C |
 EL3_JTB :                    0E932 C |  EL3_S13 :                    0EE8A C |
 EL3_S16 :                    0EE3E C |  EL3_S161 :                   0EE62 C |
 EL3_S162 :                   0EE66 C |  EL3_S163 :                   0EE6A C |
 EL3_S1631 :                  0EE6C C |  EL3_S164 :                   0EE73 C |
 EL3_S17 :                    0EE85 C |  EL3_S26 :                    0EE80 C |
 EL3_S261 :                   0EE82 C |  EL3_S27 :                    0EE7C C |
 EL3_S28 :                    0EE0F C |  EL3_S281 :                   0EE2F C |
 EL3_S282 :                   0EE2B C |  EL3_S283 :                   0EE28 C |
 EL3_S35 :                    0EDDA C |  EL3_S351 :                   0EDFA C |
 EL3_S352 :                   0EE06 C |  EL3_S353 :                   0EE00 C |
 EL3_STB :                    0E925 C |  EL3_STBE :                   0E932 C |
 EL3_UM :                        0D - |  ELEM1_CD :                   0EE8F C |
 ELEM1_CD1 :                  0EEAB C |  ELEM1_OPCD :                 0EE9D C |
 ELEM1_OPCD1 :                0EEC0 C |  ELEM2_CD :                   0EF11 C |
 ELEMENT_CNT :                0FF52 C |  END_DEC :                    0F727 C |
 END_INS_TC :                 0D41E C |  END_MON :                    0FC3E C |
 ENTRY :                         40 - |  ENT_EL2 :                    0EF2B C |
 ERR :                        0D0CB C |  ERRMSG :                     0F9E8 C |
 ERR_TRACE_SEQ :              0D421 C |  ER_OPMSG :                   0E153 C |
 ESC :                           1B - |  ESC_CRT_CLR :                0F456 C |
 EXP_MSB :                    0D440 C |  EXSTR :                      0E090 C |
 EXT_ASM :                    0E86B C |  EXXSTR :                     0E093 C |
 EX_AF_ :                     0EBF8 C |  EX_AF_AF :                   0D92A C |
 EX_DE_ :                     0EC02 C |  EX_SP_HL :                   0EBF5 C |
 EX_SP_IX :                   0EBEF C |  EX_SR_ :                     0EC2D C |
 EX_SR_NUM :                      4 - | *E_CSTART :                       0 C |
*E_WSTART :                       3 C | *FALSE :                          0 - |
 FEVER_T :                    0FF39 C |  FLG_LOOP :                   0E64B C |
 FLG_NXT :                    0E65A C |  FLG_OFF :                    0E656 C |
*FULLPMMU :                       1 - |  F_BIT :                      0FF63 C |
 F_BITSIZE :                      8 - |  F_BIT_OFF :                  0E676 C |
 F_BIT_ON :                   0E66E C |  G0 :                         0E298 C |
 GADDR :                      0FF05 C |  GETLIN :                     0F45A C |
 GET_BI :                     0D105 C |  GET_DI1 :                    0D698 C |
 GET_DISASM_ST :              0D704 C |  GET_DNUM :                   0D0DB C |
 GET_N4 :                     0DA86 C |  GET_N4CRLF :                 0DA58 C |
 GET_NNNN :                   0DE89 C |  GET_NUM :                    0D0E3 C |
 GET_NUM0 :                   0D0E6 C |  GET_NUMBER :                 0F329 C |
 GET_RSTG_OFF :               0DE9D C |  GET_R_NUM :                  0D782 C |
 GET_STRBUFPOINT :            0DEA0 C |  GL0 :                        0F45F C |
 GL00 :                       0F465 C |  GL001 :                      0F486 C |
 GL1 :                        0F4AB C |  GLB :                        0F4AF C |
 GLE :                        0F4C6 C |  GLE_END :                    0F3D5 C |
 GLE_END1 :                   0F3D3 C | *GM80_CST :                    5400 - |
*GM80_WST :                    5403 - |  GO :                         0E25A C |
 GO1 :                        0E292 C |  GOSTMP :                     0E26E C |
 GOTMP :                      0FF31 C |  G_STPADR :                   0E273 C |
 H2SA_1 :                     0DEF5 C |  H2S_N1 :                     0DF0B C |
 H2S_N2 :                     0DF0F C |  H4SA_1 :                     0DEE4 C |
 H4SA_2 :                     0DEE7 C | *HAS64 :                          0 - |
*HASFPU :                         0 - | *HASPMMU :                        0 - |
 HEX2STR :                    0DF02 C |  HEX2STR_ASM :                0DEEC C |
 HEX4STR :                    0DEFA C |  HEX4STR_ASM :                0DEDB C |
 HEXIN :                      0F41F C |  HEXMOD :                     0FF09 C |
 HEXOUT1 :                    0F411 C |  HEXOUT2 :                    0F408 C |
 HEXOUT4 :                    0F403 C |  HEX_CHR :                    0F375 C |
 HI0 :                        0F427 C |  HI1 :                        0F43E C |
 HIR :                        0F441 C |  HLTSTR :                     0E05C C |
 HL_CRLF :                    0DF44 C |  IB1 :                        0D451 C |
 IB2 :                        0D450 C |  IB3 :                        0D44F C |
 ICKA1 :                      0D481 C |  ICKA_END :                   0D48C C |
 IHEMSG :                     0F9CE C |  IHEXER :                     0F9FA C |
 IKK_1 :                      0DF87 C |  IMSTR :                      0E0F0 C |
 INADR_CHK_AND_WRT :          0D46F C |  INBUF :                      0FF77 C |
 INCSTR :                     0E07F C |  INC_DEC :                    0D873 C |
 INC_DEC_ADDRP :              0E19C C |  INC_ELEMENT :                0F277 C |
 INC_OPCDTBLE :               0DFB2 C |  INC_OPCDTBLS :               0DFAA C |
 INC_OPR :                    0F124 C |  INC_RP_E :                   0DFBE C |
 INC_RP_S :                   0DFBA C |  INDRSTR :                    0E13B C |
 INDSTR :                     0E114 C |  INIRSTR :                    0E127 C |
 INISTR :                     0E103 C |  INS2 :                       0D4B5 C |
 INSBRK_1OP :                 0D442 C |  INSBRK_2OP :                 0D447 C |
 INSBRK_3OP :                 0D44C C |  INSBRK_BRP :                 0D456 C |
 INSBRK_SP :                  0D462 C |  INSPOSTSTR :                 0DF4A C |
 INSTC1 :                     0D372 C | *INSTC2 :                     0D300 C |
 INSTR :                      0E0C7 C | *INSUPMODE :                      0 - |
 INS_EX_OPC :                 0D924 C |  INS_HLKK :                   0DA90 C |
 INS_HL_OPR :                 0D921 C |  INS_IXRP :                   0DC19 C |
 INS_JPIX :                   0DBEF C | *INS_JPIX1 :                  0DBF3 C |
 INS_KAKKOL :                 0DF81 C |  INS_KAKKOR :                 0DF85 C |
 INS_KKA :                    0DA7A C |  INS_KKHL :                   0DA74 C |
 INS_KMR :                    0DF96 C |  INS_KN2K :                   0D9EC C |
 INS_KN4KCS :                 0DEB5 C |  INS_KSPKIX :                 0DC01 C |
 INS_MISR :                   0DF92 C |  INS_N2CRLF :                 0D9D9 C |
 INS_PLSR :                   0DF8E C |  INS_RSTG :                   0DB8C C |
 INS_SPCR :                   0DF8A C |  INS_SPIX :                   0DC10 C |
 IN_A_NN :                    0EA7E C |  IN_SELM :                        6 - |
 IN_SELT :                    0EC0E C |  IR0 :                        0D024 C |
 IR00 :                       0D03B C |  IX_CRLF :                    0DF3E C |
 JPCC_TBLE :                  0D4A5 C |  JPCC_TBLS :                  0D49D C |
 JPHL :                       0F08E C |  JPIX :                       0F087 C |
 JPNNNN :                     0F092 C |  JPSTR :                      0E045 C |
 JP_EACH :                    0E91E C |  JP_MC1T :                    0EA1E C |
 JP_MC1TE :                   0EA26 C |  JP_MC1TM :                       8 - |
 JRCC_OPR1 :                  0E194 C |  JRCC_TBLE :                  0D49D C |
 JRCC_TBLS :                  0D498 C |  JRCC_TBLS1 :                 0D499 C |
 JRSTR :                      0E048 C |  JR_CCT :                     0EA8B C |
 JR_N4CRLF :                  0DA18 C |  KCKSTR :                     0E157 C |
 KIXYPNK_CRLF :               0DE64 C |  KIXYPNK_CS :                 0DE5B C |
 KN2K :                       0D9F8 C |  KN4HK :                      0DA80 C |
 KN4KCRLF :                   0DA96 C |  KRNHL :                      0E15B C |
 KY_FLG :                     0FF6C C |  LD1OP :                      0D7DC C |
 LD1_BASE :                   0EC36 C | *LDA_SP :                     0EC31 C |
 LDA_SPE :                    0EC36 C |  LDDRSTR :                    0E131 C |
 LDDSTR :                     0E10C C |  LDIRSTR :                    0E11D C |
 LDISTR :                     0E0FB C |  LDNR_C :                     0EDD3 C |
 LDNR_N :                         7 - |  LDNR_T :                     0EDCC C |
 LDSTR :                      0E059 C |  LD_A_KBCK :                  0D7A8 C |
 LD_A_KDEK :                  0D7B6 C |  LD_A_KXXK :                  0D7AB C |
*LD_BC_N4 :                   0ED06 C |  LD_BC_N40 :                  0ED0C C |
 LD_BC_N41 :                  0ED1D C |  LD_BC_N42 :                  0ED24 C |
 LD_DE_N4 :                   0ED2F C |  LD_E2_TBL :                  0EC0D C |
 LD_E2_TBL1 :                 0EC14 C |  LD_E2_TBL2 :                 0EC19 C |
 LD_E2_TBL3 :                 0EC1D C |  LD_E2_TBLE :                 0EC24 C |
 LD_EN1 :                         7 - |  LD_EN2 :                         5 - |
 LD_EN3 :                         4 - |  LD_EN4 :                         7 - |
 LD_HL_N4 :                   0ED37 C |  LD_IX_N4 :                   0ED4C C |
 LD_IX_N40 :                  0ED4E C |  LD_IX_N42 :                  0ED5F C |
 LD_IY_N4 :                   0ED66 C |  LD_JMP :                     0FF27 C |
 LD_KBCK_A :                  0D7BB C |  LD_KDEK_A :                  0D7C4 C |
 LD_KXXK_A :                  0D7BE C |  LD_R13 :                     0ECAF C |
 LD_R17 :                     0ECAA C |  LD_R171 :                    0ECAC C |
 LD_R25 :                     0ECDD C |  LD_R251 :                    0ECE1 C |
 LD_R26 :                     0ECB8 C |  LD_R27 :                     0ECB3 C |
 LD_R33 :                     0ECD8 C |  LD_R34 :                     0ECCB C |
 LD_R35 :                     0EC99 C |  LD_R36 :                     0ECD0 C |
 LD_R361 :                    0ECD3 C |  LD_R37 :                     0ECBD C |
 LD_R371 :                    0ECC0 C |  LD_R372 :                    0ECC3 C |
 LD_RRN :                         8 - |  LD_RR_ :                     0EC2C C |
 LD_RXYN_SP :                    0A - |  LD_R_JT :                    0EC3D C |
 LD_R_NN_E :                  0D556 C |  LD_R_NN_S :                  0D54E C |
 LD_XYNLN :                   0EDA0 C |  LF :                            0A - |
 LF_OUT :                     0E877 C |  LG_JUMP :                    0E41B C |
 LH0 :                        0E3BC C |  LH00 :                       0E3AB C |
 LH000 :                      0E3AE C | *LH1 :                        0E3C8 C |
 LH2 :                        0E3CC C |  LH3 :                        0E3D4 C |
 LHI0 :                       0E3D9 C |  LHI1 :                       0E3FA C |
 LHI2 :                       0E40C C |  LHI20 :                      0E40B C |
 LHI3 :                       0E40E C |  LHIE :                       0E428 C |
 LHS0 :                       0E440 C |  LHS1 :                       0E460 C |
 LHS2 :                       0E472 C |  LHS20 :                      0E473 C |
 LHS3 :                       0E475 C |  LHSE :                       0E48F C |
 LHSR :                       0E42B C |  LINE_ASM :                   0E810 C |
 LINE_BUF :                   0FF77 C | *LISTON :                         1 - |
 LOADH :                      0E392 C |  LOGOP2STR :                  0E1C6 C |
 LOGOP3STR :                  0E1DA C |  LOG_OP_E :                   0D560 C |
 LOG_OP_S :                   0D556 C |  LOOP_DEC :                   0F70E C |
 LOOP_M8 :                    0F7A9 C |  LOP_GNUM :                   0F336 C |
 L_B2 :                       0D1CB C |  L_END :                      0E42E C |
 L_JPFLG :                    0FF26 C | *MACEXP :                         7 - |
 MAS_1 :                      0D735 C |  MAS_2 :                      0D746 C |
 MAS_3 :                      0D752 C |  MC2_77 :                     0ED9B C |
 MC_END :                     0EEEE C |  MC_END2 :                    0EF0D C |
 MC_END3 :                    0EFE9 C | *MC_END4 :                    0F216 C |
 MC_END41 :                   0F20C C |  MC_SIZE :                    0FF76 C |
 MEET_DD :                    0D4E0 C |  MEET_ED :                    0D502 C |
 MEET_OP1 :                   0D51E C |  MEET_OP2 :                   0D529 C |
 MEET_OP3 :                   0D534 C |  MEET_OP4 :                   0D53F C |
 MKMC_SH :                    0EAB3 C |  MKMC_SHED :                  0EAC3 C |
 MKOPCSTR :                   0DF1E C |  MKREL_STR :                  0DECD C |
 MK_2NDOPR :                  0D7E8 C |  MK_2NDOPR1 :                 0D7F2 C |
 MK_ADR_STR :                 0D71F C |  MK_BITR :                    0DB6F C |
 MK_BITR_STR :                0DB87 C |  MK_E1 :                      0EED5 C |
 MK_E11 :                     0EEF4 C |  MK_E2 :                      0EF5F C |
*MK_E3 :                      0E90D C |  MK_KIXPNK :                  0DC63 C |
 MK_KIXYPNK :                 0DE6A C | *MK_KIYPNK :                  0DC67 C |
 MK_KN4K :                    0DEC4 C |  MK_KRK :                     0DF58 C |
 MK_KRKCS :                   0DF60 C |  MK_KRK_1 :                   0DF55 C |
 MK_N2CRLF :                  0DEA9 C |  MK_N4CRLF :                  0DEAF C |
 MK_RCS :                     0DF71 C |  MK_RESR :                    0DB78 C |
 MK_RLCR :                    0DB30 C |  MK_RLR :                     0DB42 C |
 MK_RRCR :                    0DB39 C |  MK_RRR :                     0DB4B C |
 MK_SLAR :                    0DB54 C |  MK_SRAR :                    0DB5D C |
 MK_SRLR :                    0DB66 C |  MK_STR :                     0DE94 C |
*MOMCPU :                        80 - | *MOMCPUNAME :                 "Z80" - |
 MON_SEG :                    0D000 - |  MUL_10 :                     0D114 C |
 MUL_8 :                      0F7A4 C |  M_NUM :                          5 - |
 NEGSTR :                     0E0EC C | *NESTMAX :                      100 - |
 NEXT_ASM :                   0E82E C |  NEXT_BC1 :                   0D31D C |
 NEXT_BC10 :                  0D3F7 C |  NEXT_BC11 :                  0D404 C |
 NEXT_BC111 :                 0D419 C |  NEXT_BC2 :                   0D340 C |
 NEXT_BC21 :                  0D34E C |  NEXT_BC22 :                  0D369 C |
*NEXT_BC221 :                 0D367 C |  NEXT_BC222 :                 0D361 C |
 NEXT_BC3 :                   0D381 C |  NEXT_BC4 :                   0D396 C |
 NEXT_BC5 :                   0D3AD C |  NEXT_BC6 :                   0D3A4 C |
 NEXT_BC7 :                   0D3C1 C |  NEXT_BC8 :                   0D3D0 C |
 NEXT_BC9 :                   0D3E3 C |  NEXT_CHAR :                  0F3E1 C |
 NOPSTR :                     0E097 C |  NO_API :                     0F550 C |
 NO_CR :                          1 - |  NO_LF :                          2 - |
 NO_NUM :                     0F373 C |  NO_OPERATE :                 0F54F C |
*NO_RAM_AREA :                0D48E C |  NO_RST38_MSG :               0F658 C |
 NO_UPPER :                       4 - |  NUMLEN :                         7 - |
 NUMPLUS :                    0DE84 C |  NUM_STRING :                 0FF9A C |
 NXCHR :                      0F3EB C |  NXT_A1 :                     0F2C9 C |
 NXT_A2 :                     0F2A5 C |  NXT_A21 :                    0F2AC C |
 NXT_A22 :                    0F2B1 C |  NXT_A3 :                     0F2B4 C |
 NXT_A31 :                    0F2BB C |  NXT_A4 :                     0F2C4 C |
 NXT_SR :                     0F1EF C |  N_END :                      0F326 C |
*OKRAM :                      0EFC9 C |  OK_MATCH :                   0F321 C |
 ONLY_NUM :                   0F2EB C |  OPC_CD :                     0FF54 C |
 OPERAND_CDS :                0E79B C |  OPE_CDS :                    0E67E C |
 OPNMSG :                     0F97F C |  OPR1_CD :                    0FF55 C |
 OPR2_CD :                    0FF56 C |  OPR_CD1 :                    0E7FB C |
 OPR_NUM25 :                  0FF57 C |  OPR_NUM33 :                  0FF5E C |
 OPR_NUM34 :                  0FF5C C |  OPR_NUM35 :                  0FF59 C |
 OPR_NUM36 :                  0FF5D C |  OPR_NUM37 :                  0FF5B C |
 OP_ERR :                     0DB81 C |  ORSTR :                      0E079 C |
 OTDRSTR :                    0E140 C |  OTH_1OP_E :                  0DFAA C |
 OTH_1OP_S :                  0DF9D C |  OTH_1OP_TBL :                0E1AC C |
 OTIRSTR :                    0E12C C |  OUTDSTR :                    0E118 C |
 OUTISTR :                    0E107 C |  OUTSTR :                     0E0C3 C |
*PADDING :                        1 - | *PATB_CST :                    4C00 - |
*PATB_TOP :                    4C00 - | *PATB_WST :                    4C03 - |
 PCST1 :                      0FC34 C |  POPSTR :                     0E087 C |
 POP_PUSHRP :                 0E1A4 C |  POP_RP_E :                   0DFCA C |
 POP_RP_S :                   0DFC6 C |  PP_BASE :                    0F177 C |
 PP_IXIY :                        2 - |  PP_IXY :                     0F175 C |
 PP_NO :                          6 - |  PP_TBL :                     0F171 C |
 PP_TBLE :                    0F177 C |  PROMPT :                     0F9CB C |
 PRTDMP :                     0E8E3 C |  PUSHSTR :                    0E08B C |
 PUSH_RP_E :                  0DFCE C |  PUSH_RP_S :                  0DFCA C |
 RAM12K :                         0 - |  RAM8K :                          0 - |
 RAM_B :                         40 - | *RAM_E :                      0FFFF - |
 RD0 :                        0E5F5 C |  RD1 :                        0E62D C |
 RD10 :                       0E61B C |  RD101 :                      0E611 C |
 RD20 :                       0E63A C |  RDHEX :                      0F4F4 C |
 RDSA :                       0FA6A C |  RDSAX :                      0FA8F C |
 RDSBC :                      0FA6E C |  RDSBCX :                     0FA95 C |
 RDSDE :                      0FA74 C |  RDSDEX :                     0FA9B C |
 RDSF :                       0FA80 C |  RDSFX :                      0FAA7 C |
 RDSFX_H :                      0FA - |  RDSFX_L :                      0A7 - |
 RDSF_H :                       0FA - |  RDSF_L :                        80 - |
 RDSHL :                      0FA7A C |  RDSHLX :                     0FAA1 C |
 RDSI :                       0FAB6 C |  RDSIX :                      0FA85 C |
 RDSIY :                      0FA8A C |  RDSPC :                      0FAB1 C |
 RDSR :                       0FABA C |  RDSSP :                      0FAAC C |
 RDTAB :                      0FA15 C |  RDUMP :                      0E5F2 C |
 RECORR :                     0F3D9 C |  RECORR1 :                    0F3DB C |
 RECORRECT :                  0F3B4 C |  RECTYP :                     0FF0A C |
 REG :                        0E56C C |  REGAF :                      0FF0C C |
 REGAFX :                     0FF14 C |  REGBC :                      0FF0E C |
 REGBCX :                     0FF16 C |  REGDE :                      0FF10 C |
 REGDEX :                     0FF18 C |  REGHL :                      0FF12 C |
 REGHLX :                     0FF1A C |  REGI :                       0FF24 C |
 REGIX :                      0FF1C C |  REGIY :                      0FF1E C |
 REGPC :                      0FF22 C |  REGR :                       0FF25 C |
 REGSP :                      0FF20 C |  REG_B :                      0FF0C C |
 REG_E :                      0FF26 C |  REG_XY :                     0FF72 C |
*RELAXED :                        0 - |  REL_ADR_C :                  0D435 C |
 REPEAT_TRACE :               0F6A7 C |  RESSTR :                     0E0E8 C |
 RES_MCB :                    0E96A C |  RES_XYT :                    0E972 C |
 RETCC_TBLE :                 0D498 C |  RETCC_TBLS :                 0D490 C |
 RETISTR :                    0E145 C |  RETNSTR :                    0E14A C |
 RETSTR :                     0E041 C |  RET_CD :                     0F062 C |
 RET_NO :                     0F05A C |  RG0 :                        0E579 C |
 RG1 :                        0E57D C |  RG2 :                        0E58D C |
 RG3 :                        0E59C C |  RG4 :                        0E5C1 C |
 RG5 :                        0E5CD C |  RG6 :                        0E5E9 C |
 RG7 :                        0E5EC C |  RGE :                        0E5EF C |
 RGR :                        0E5EC C |  RH0 :                        0F4F9 C |
 RH1 :                        0F50C C |  RHE :                        0F52A C |
 RHE1 :                       0F534 C |  RHLNNXY :                       0D - |
 RLASTR :                     0E0A5 C |  RLCASTR :                    0E09B C |
 RLCSTR :                     0E0CA C |  RLC_OR :                         0 - |
 RLDSTR :                     0E0F7 C |  RLSTR :                      0E0D2 C |
 RL_OR :                         10 - |  RNA :                        0FBD8 C |
 RNAF :                       0E03A C |  RNAFX :                      0E03D C |
 RNAX :                       0FBF1 C |  RNB :                        0FBDD C |
 RNBC :                       0FBDA C |  RNBCX :                      0FBF4 C |
 RNBX :                       0FBF8 C |  RNC :                        0FBDF C |
 RNCX :                       0FBFB C |  RND :                        0FBE4 C |
 RNDE :                       0FBE1 C |  RNDEX :                      0FBFE C |
 RNDX :                       0FC02 C |  RNE :                        0FBE6 C |
 RNEX :                       0FC05 C |  RNF :                        0FBEF C |
 RNFX :                       0FC12 C |  RNH :                        0FBEB C |
 RNHL :                       0FBE8 C |  RNHLX :                      0FC08 C |
 RNHX :                       0FC0C C |  RNI :                        0FC21 C |
 RNIX :                       0FC15 C |  RNIY :                       0FC18 C |
 RNL :                        0FBED C |  RNLX :                       0FC0F C |
 RNPC :                       0FC1E C |  RNR :                        0FC23 C |
 RNSP :                       0FC1B C |  RNTAB :                      0FABE C |
 RNTABA :                     0FB08 C |  RNTABB :                     0FB16 C |
 RNTABBC :                    0FB2A C |  RNTABC :                     0FB38 C |
 RNTABD :                     0FB46 C |  RNTABDE :                    0FB5A C |
 RNTABE :                     0FB68 C |  RNTABF :                     0FB76 C |
 RNTABH :                     0FB84 C |  RNTABHL :                    0FB98 C |
 RNTABI :                     0FBB4 C |  RNTABL :                     0FBA6 C |
 RNTABP :                     0FBC8 C |  RNTABS :                     0FBD0 C |
 ROM_B :                          0 - |  RRASTR :                     0E0A9 C |
 RRCASTR :                    0E0A0 C |  RRCSTR :                     0E0CE C |
 RRC_OR :                         8 - |  RRDSTR :                     0E0F3 C |
 RRSTR :                      0E0D5 C |  RR_OR :                         18 - |
 RST30H_IN :                  0F536 C |  RST38H_IN :                  0F5C3 C |
 RST38MSG :                   0F6DC C |  RSTR_BPT :                   0F6BC C |
 RSTR_TPT :                   0F6B0 C |  RSTSTR :                     0E055 C |
 RST_CD :                     0F03E C |  RST_NO :                     0F036 C |
 RST_TBLE :                   0D4B5 C |  RST_TBLS :                   0D4AD C |
 R_HL_NN :                    0EC24 C |  R_HL_NNE :                   0EC31 C |
 SADDR :                      0FF07 C |  SAVEH :                      0E494 C |
 SBCSTR :                     0E06D C |  SCFSTR :                     0E0B5 C |
 SCH_NEXT :                   0F30F C |  SCH_OPECODE :                0F300 C |
 SCH_OPERAND1 :               0F2F6 C |  SCH_OPERAND1_1 :             0F2FB C |
 SETBPADR :                   0D186 C |  SETBYTEC :                   0E8F2 C |
 SETDSADR :                   0E8E8 C |  SETM :                       0E31C C |
 SETSTR :                     0E14F C |  SET_BITNO :                  0DB99 C |
 SET_BP :                     0E310 C |  SET_BP1 :                    0D164 C |
 SET_MCB :                    0E94C C |  SET_TM :                     0D240 C |
 SET_XYT :                    0E954 C |  SH0 :                        0E49E C |
 SH1 :                        0E4A2 C |  SH2 :                        0E4CA C |
 SH3 :                        0E4D2 C |  SH4 :                        0E4E9 C |
 SHE :                        0E4C7 C |  SHEMSG :                     0F9DB C |
 SHL0 :                       0E4FD C |  SHL00 :                      0E4F2 C |
 SHLI0 :                      0E526 C |  SHLS :                       0E53A C |
 SHLS0 :                      0E559 C |  SH_0 :                       0F306 C |
 SH_1 :                       0F307 C | *SIZE :                       0FF0B C |
 SKIPSP :                     0F4E4 C |  SKIP_CR :                    0F4D3 C |
 SKIP_LF :                    0F4DC C |  SKIP_NEXT :                  0F313 C |
 SKIP_UPPER :                 0F4AA C |  SKPA_ADR :                   0E828 C |
 SKP_OUTM :                   0E8CB C |  SKP_RMSG :                   0F67A C |
 SKP_SP :                     0F364 C |  SKP_TBP :                    0E2D3 C |
 SLASTR :                     0E0D8 C |  SLA_OR :                        20 - |
 SM0 :                        0E336 C |  SM1 :                        0E337 C |
 SM2 :                        0E35D C |  SM3 :                        0E368 C |
 SM4 :                        0E373 C |  SMEZ80FULL :                     0 - |
 SRASTR :                     0E0DC C |  SRA_OR :                        28 - |
 SRECER :                     0FA08 C |  SRLSTR :                     0E0E0 C |
 SRL_OR :                        38 - |  SR_BASE :                    0F1AD C |
 SR_IY1 :                     0F203 C |  SR_LOOKFOR :                 0F1D6 C |
 SR_NUM :                         8 - |  STACK :                      0FEC0 - |
 STACKM :                     0FF00 - | *START :                          0 C |
 STPBRK_MSG :                 0F6E6 C |  STP_CHK :                    0D2C9 C |
 STROUT :                     0F3FA C |  ST_COPY :                    0DF79 C |
 ST_MC1 :                     0EEE6 C |  ST_MC11 :                    0EEE8 C |
 ST_MUL8 :                    0F7AD C |  SUBSTR :                     0E069 C |
 SUPERMEZ80 :                     1 - |  SV_1STADDR :                 0E431 C |
 SV_NNKR :                    0DE7E C |  SV_ROM :                        60 - |
 SX_ERR :                     0F275 C |  TADR_CHK :                   0D2B8 C |
 TASM_ADR :                   0FF50 C |  TC_CNT :                     0FF35 C |
 TERR_MSG :                   0D42B C |  THREE_OPTBL :                0D560 C |
 THREE_OPTBLE :               0D564 C |  THREE_OPTBL_E :              0D568 C |
*TIME :                   "2:29:37" - |  TMPB_ADR :                   0FF4C C |
 TMPB_F :                     0FF4A C |  TMPB_OP :                    0FF4B C |
 TMPT :                       0FF37 C |  TM_MODE :                    0FF34 C |
 TM_MSG_0 :                   0D251 C |  TM_MSG_I :                   0D260 C |
 TM_MSG_S :                   0D266 C |  TPT1_ADR :                   0FF3C C |
 TPT1_F :                     0FF3A C |  TPT1_OP :                    0FF3B C |
 TPT2_ADR :                   0FF40 C |  TPT2_F :                     0FF3E C |
 TPT2_OP :                    0FF3F C |  TP_CHK1 :                    0F633 C |
 TP_CHK2 :                    0F642 C |  TP_CMD :                     0D26E C |
 TP_MD_ON :                   0D292 C |  TP_MODE :                    0FF33 C |
 TP_MSG_0 :                   0D2A3 C |  TP_MSG_OFF :                 0D2B2 C |
 TP_MSG_ON :                  0D2AD C |  TP_N1 :                      0D27A C |
 TP_N2 :                      0D283 C |  TRACE_CMD :                  0D1F2 C |
 TRACE_MSG :                  0F6EF C | *TRUE :                           1 - |
 TWO_OPTBL :                  0D54E C |  TWO_OPTBL_E :                0D560 C |
 T_NO_KY :                    0F692 C |  T_OP1 :                      0D2E1 C |
 T_OP11 :                     0D2DB C |  T_OP_CHK :                   0D2FC C |
 UARTCR :                         1 - |  UARTDR :                         0 - |
 UPPER :                      0F4EB C |  UP_BI :                      0D112 C |
*VERSION :                     142F - | *VTL_CST :                     7500 - |
*VTL_WST :                     7503 - |  WORK_B :                     0FF00 - |
 WSTART :                     0D087 C |  WS_CHK1 :                    0F58E C |
 WS_CHK2 :                    0F59A C |  WS_CHK3 :                    0F5A6 C |
 WS_CHK4 :                    0F5B2 C |  WS_CHK5 :                    0F5BE C |
 XORSTR :                     0E075 C |  XY_SRTP :                    0FF74 C |

   1137 symbols
     53 unused symbols

 AS V1.42 Beta [Bld 246] - Source File emuz80mon_RevB05.asm - Page 3 - 9/17/2023 2:29:38


  Code Pages:
  ----------

STANDARD (0 changed characters)

1 code page

0.11 seconds assembly time

   8715 lines source file
      2 passes
      0 errors
      0 warnings
